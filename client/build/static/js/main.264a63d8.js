/*! For license information please see main.264a63d8.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,i)=>{var s=i(43),n=i(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)r.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(e,t,i,s,n,o,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=r}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function C(e,t,i,s){var n=f.hasOwnProperty(t)?f[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,s){if(null===t||"undefined"===typeof t||function(e,t,i,s){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,s))return!0;if(s)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,n,s)&&(i=null),s||null===n?function(e){return!!d.call(g,e)||!d.call(p,e)&&(u.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=null===i?3!==n.type&&"":i:(t=n.attributeName,s=n.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(n=n.type)||4===n&&!0===i?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);f[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);f[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);f[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var O,B=Object.assign;function G(e){if(void 0===O)try{throw Error()}catch(Jt){var t=Jt.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function j(e,t){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),o=s.stack.split("\n"),r=n.length-1,a=o.length-1;1<=r&&0<=a&&n[r]!==o[a];)a--;for(;1<=r&&0<=a;r--,a--)if(n[r]!==o[a]){if(1!==r||1!==a)do{if(r--,0>--a||n[r]!==o[a]){var l="\n"+n[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?G(e):""}function V(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case D:return"Profiler";case M:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case R:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return H(e(t))}catch(Jt){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function _(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=U(e)?e.checked?"true":"false":e.value),(e=s)!==i&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(hi){return e.body}}function Z(e,t){var i=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function q(e,t){var i=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;i=_(null!=t.value?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&C(e,"checked",t,!1)}function X(e,t){Q(e,t);var i=_(t.value),s=t.type;if(null!=i)"number"===s?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,_(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&Y(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,s){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&s&&(e[i].defaultSelected=!0)}else{for(i=""+_(i),t=null,n=0;n<e.length;n++){if(e[n].value===i)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(o(92));if(te(i)){if(1<i.length)throw Error(o(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:_(i)}}function oe(e,t){var i=_(t.value),s=_(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=s&&(e.defaultValue=""+s)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,de=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function ue(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function me(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function fe(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var s=0===i.indexOf("--"),n=me(i,t[i],s);"float"===i&&(i="cssFloat"),s?e.setProperty(i,n):e[i]=n}}Object.keys(pe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,Me=null;function De(e){if(e=Rn(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=In(t),Se(e.stateNode,e.type,t))}}function Re(e){xe?Me?Me.push(e):Me=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Me;if(Me=xe=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var ke=!1;function Te(e,t,i){if(ke)return e(t,i);ke=!0;try{return Ie(e,t,i)}finally{ke=!1,(null!==xe||null!==Me)&&(Ae(),Ee())}}function Le(e,t){var i=e.stateNode;if(null===i)return null;var s=In(i);if(null===s)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var Pe=!1;if(h)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(he){Pe=!1}function Ne(e,t,i,s,n,o,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(si){this.onError(si)}}var Oe=!1,Be=null,Ge=!1,ze=null,je={onError:function(e){Oe=!0,Be=e}};function Ve(e,t,i,s,n,o,r,a,l){Oe=!1,Be=null,Ne.apply(je,arguments)}function He(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function _e(e){if(He(e)!==e)throw Error(o(188))}function Ue(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var n=i.return;if(null===n)break;var r=n.alternate;if(null===r){if(null!==(s=n.return)){i=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===i)return _e(n),e;if(r===s)return _e(n),t;r=r.sibling}throw Error(o(188))}if(i.return!==s.return)i=n,s=r;else{for(var a=!1,l=n.child;l;){if(l===i){a=!0,i=n,s=r;break}if(l===s){a=!0,s=n,i=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===i){a=!0,i=r,s=n;break}if(l===s){a=!0,s=r,i=n;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(e),null!==e?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Ke=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,Ze=n.unstable_shouldYield,qe=n.unstable_requestPaint,Qe=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Je=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,it=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,ot=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ht=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var i=e.pendingLanes;if(0===i)return 0;var s=0,n=e.suspendedLanes,o=e.pingedLanes,r=268435455&i;if(0!==r){var a=r&~n;0!==a?s=dt(a):0!==(o&=r)&&(s=dt(o))}else 0!==(r=i&~n)?s=dt(r):0!==o&&(s=dt(o));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(o=t&-t)||16===n&&0!==(4194240&o)))return t;if(0!==(4&s)&&(s|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(i=31-rt(t)),s|=e[i],t&=~n;return s}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function vt(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=i}function yt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-rt(i),n=1<<s;n&t|e[s]&t&&(e[s]|=t),i&=~n}}var Ct=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,xt,Mt,Dt,Rt=!1,Et=[],It=null,At=null,kt=null,Tt=new Map,Lt=new Map,Pt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":kt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,i,s,n,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},null!==t&&(null!==(t=Rn(t))&&St(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Bt(e){var t=Dn(e.target);if(null!==t){var i=He(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=We(i)))return e.blockedOn=t,void Dt(e.priority,(function(){xt(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=Rn(i))&&St(t),e.blockedOn=i,!1;var s=new(i=e.nativeEvent).constructor(i.type,i);be=s,i.target.dispatchEvent(s),be=null,t.shift()}return!0}function zt(e,t,i){Gt(e)&&i.delete(t)}function jt(){Rt=!1,null!==It&&Gt(It)&&(It=null),null!==At&&Gt(At)&&(At=null),null!==kt&&Gt(kt)&&(kt=null),Tt.forEach(zt),Lt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Rt||(Rt=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jt)))}function Ht(e){function t(t){return Vt(t,e)}if(0<Et.length){Vt(Et[0],e);for(var i=1;i<Et.length;i++){var s=Et[i];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==At&&Vt(At,e),null!==kt&&Vt(kt,e),Tt.forEach(t),Lt.forEach(t),i=0;i<Pt.length;i++)(s=Pt[i]).blockedOn===e&&(s.blockedOn=null);for(;0<Pt.length&&null===(i=Pt[0]).blockedOn;)Bt(i),null===i.blockedOn&&Pt.shift()}var Wt=b.ReactCurrentBatchConfig,_t=!0;function Ut(e,t,i,s){var n=Ct,o=Wt.transition;Wt.transition=null;try{Ct=1,Kt(e,t,i,s)}finally{Ct=n,Wt.transition=o}}function $t(e,t,i,s){var n=Ct,o=Wt.transition;Wt.transition=null;try{Ct=4,Kt(e,t,i,s)}finally{Ct=n,Wt.transition=o}}function Kt(e,t,i,s){if(_t){var n=Zt(e,t,i,s);if(null===n)qs(e,t,s,Yt,i),Nt(e,s);else if(function(e,t,i,s,n){switch(t){case"focusin":return It=Ot(It,e,t,i,s,n),!0;case"dragenter":return At=Ot(At,e,t,i,s,n),!0;case"mouseover":return kt=Ot(kt,e,t,i,s,n),!0;case"pointerover":var o=n.pointerId;return Tt.set(o,Ot(Tt.get(o)||null,e,t,i,s,n)),!0;case"gotpointercapture":return o=n.pointerId,Lt.set(o,Ot(Lt.get(o)||null,e,t,i,s,n)),!0}return!1}(n,e,t,i,s))s.stopPropagation();else if(Nt(e,s),4&t&&-1<Ft.indexOf(e)){for(;null!==n;){var o=Rn(n);if(null!==o&&wt(o),null===(o=Zt(e,t,i,s))&&qs(e,t,s,Yt,i),o===n)break;n=o}null!==n&&s.stopPropagation()}else qs(e,t,s,null,i)}}var Yt=null;function Zt(e,t,i,s){if(Yt=null,null!==(e=Dn(e=we(s))))if(null===(t=He(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case it:return 16;case st:return 536870912;default:return 16}default:return 16}}var Xt=null,ti=null,ii=null;function ni(){if(ii)return ii;var e,t,i=ti,s=i.length,n="value"in Xt?Xt.value:Xt.textContent,o=n.length;for(e=0;e<s&&i[e]===n[e];e++);var r=s-e;for(t=1;t<=r&&i[s-t]===n[o-t];t++);return ii=n.slice(e,1<t?1-t:void 0)}function oi(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ri(){return!0}function li(){return!1}function ci(e){function t(t,i,s,n,o){for(var r in this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=n,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(n):n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ri:li,this.isPropagationStopped=li,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ri)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ri)},persist:function(){},isPersistent:ri}),t}var di,ui,pi,gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=ci(gi),fi=B({},gi,{view:0,detail:0}),vi=ci(fi),Ci=B({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pi&&(pi&&"mousemove"===e.type?(di=e.screenX-pi.screenX,ui=e.screenY-pi.screenY):ui=di=0,pi=e),di)},movementY:function(e){return"movementY"in e?e.movementY:ui}}),bi=ci(Ci),wi=ci(B({},Ci,{dataTransfer:0})),Si=ci(B({},fi,{relatedTarget:0})),xi=ci(B({},gi,{animationName:0,elapsedTime:0,pseudoElement:0})),Mi=B({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Di=ci(Mi),Ri=ci(B({},gi,{data:0})),Ei={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ii={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ai={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ki(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ai[e])&&!!t[e]}function Ti(){return ki}var Li=B({},fi,{key:function(e){if(e.key){var t=Ei[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=oi(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ii[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(e){return"keypress"===e.type?oi(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?oi(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pi=ci(Li),Fi=ci(B({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ni=ci(B({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti})),Oi=ci(B({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bi=B({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gi=ci(Bi),zi=[9,13,27,32],ji=h&&"CompositionEvent"in window,Vi=null;h&&"documentMode"in document&&(Vi=document.documentMode);var Hi=h&&"TextEvent"in window&&!Vi,Wi=h&&(!ji||Vi&&8<Vi&&11>=Vi),_i=String.fromCharCode(32),Ui=!1;function $i(e,t){switch(e){case"keyup":return-1!==zi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ki(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Yi=!1;var Zi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zi[e.type]:"textarea"===t}function Qi(e,t,i,s){Re(s),0<(t=Xs(t,"onChange")).length&&(i=new mi("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Xi=null,Ji=null;function es(e){_s(e,0)}function ts(e){if(K(En(e)))return e}function is(e,t){if("change"===e)return t}var ss=!1;if(h){var ns;if(h){var os="oninput"in document;if(!os){var rs=document.createElement("div");rs.setAttribute("oninput","return;"),os="function"===typeof rs.oninput}ns=os}else ns=!1;ss=ns&&(!document.documentMode||9<document.documentMode)}function as(){Xi&&(Xi.detachEvent("onpropertychange",ls),Ji=Xi=null)}function ls(e){if("value"===e.propertyName&&ts(Ji)){var t=[];Qi(t,Ji,e,we(e)),Te(es,t)}}function cs(e,t,i){"focusin"===e?(as(),Ji=i,(Xi=t).attachEvent("onpropertychange",ls)):"focusout"===e&&as()}function hs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ts(Ji)}function ds(e,t){if("click"===e)return ts(t)}function us(e,t){if("input"===e||"change"===e)return ts(t)}var ps="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function gs(e,t){if(ps(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!d.call(t,n)||!ps(e[n],t[n]))return!1}return!0}function ms(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fs(e,t){var i,s=ms(e);for(e=0;s;){if(3===s.nodeType){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ms(s)}}function vs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ys(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(ei){i=!1}if(!i)break;t=Y((e=t.contentWindow).document)}return t}function Cs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function bs(e){var t=ys(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&vs(i.ownerDocument.documentElement,i)){if(null!==s&&Cs(i))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=i.textContent.length,o=Math.min(s.start,n);s=void 0===s.end?o:Math.min(s.end,n),!e.extend&&o>s&&(n=s,s=o,o=n),n=fs(i,o);var r=fs(i,s);n&&r&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ws=h&&"documentMode"in document&&11>=document.documentMode,Ss=null,xs=null,Ms=null,Ds=!1;function Rs(e,t,i){var s=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;Ds||null==Ss||Ss!==Y(s)||("selectionStart"in(s=Ss)&&Cs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},Ms&&gs(Ms,s)||(Ms=s,0<(s=Xs(xs,"onSelect")).length&&(t=new mi("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Ss)))}function Es(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Is={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionend:Es("Transition","TransitionEnd")},As={},ks={};function Ts(e){if(As[e])return As[e];if(!Is[e])return e;var t,i=Is[e];for(t in i)if(i.hasOwnProperty(t)&&t in ks)return As[e]=i[t];return e}h&&(ks=document.createElement("div").style,"AnimationEvent"in window||(delete Is.animationend.animation,delete Is.animationiteration.animation,delete Is.animationstart.animation),"TransitionEvent"in window||delete Is.transitionend.transition);var Ls=Ts("animationend"),Ps=Ts("animationiteration"),Fs=Ts("animationstart"),Ns=Ts("transitionend"),Os=new Map,Bs="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){Os.set(e,t),l(t,[e])}for(var zs=0;zs<Bs.length;zs++){var js=Bs[zs];Gs(js.toLowerCase(),"on"+(js[0].toUpperCase()+js.slice(1)))}Gs(Ls,"onAnimationEnd"),Gs(Ps,"onAnimationIteration"),Gs(Fs,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(Ns,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hs=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vs));function Ws(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,s,n,r,a,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var h=Be;Oe=!1,Be=null,Ge||(Ge=!0,ze=h)}}(s,t,void 0,e),e.currentTarget=null}function _s(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var s=e[i],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var r=s.length-1;0<=r;r--){var a=s[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&n.isPropagationStopped())break e;Ws(n,a,c),o=l}else for(r=0;r<s.length;r++){if(l=(a=s[r]).instance,c=a.currentTarget,a=a.listener,l!==o&&n.isPropagationStopped())break e;Ws(n,a,c),o=l}}}if(Ge)throw e=ze,Ge=!1,ze=null,e}function Us(e,t){var i=t[Sn];void 0===i&&(i=t[Sn]=new Set);var s=e+"__bubble";i.has(s)||(Zs(t,e,2,!1),i.add(s))}function $s(e,t,i){var s=0;t&&(s|=4),Zs(i,e,s,t)}var Ks="_reactListening"+Math.random().toString(36).slice(2);function Ys(e){if(!e[Ks]){e[Ks]=!0,r.forEach((function(t){"selectionchange"!==t&&(Hs.has(t)||$s(t,!1,e),$s(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ks]||(t[Ks]=!0,$s("selectionchange",!1,t))}}function Zs(e,t,i,s){switch(qt(t)){case 1:var n=Ut;break;case 4:n=$t;break;default:n=Kt}i=n.bind(null,t,i,e),n=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):void 0!==n?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function qs(e,t,i,s,n){var o=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var r=s.tag;if(3===r||4===r){var a=s.stateNode.containerInfo;if(a===n||8===a.nodeType&&a.parentNode===n)break;if(4===r)for(r=s.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;r=r.return}for(;null!==a;){if(null===(r=Dn(a)))return;if(5===(l=r.tag)||6===l){s=o=r;continue e}a=a.parentNode}}s=s.return}Te((function(){var s=o,n=we(i),r=[];e:{var a=Os.get(e);if(void 0!==a){var l=mi,c=e;switch(e){case"keypress":if(0===oi(i))break e;case"keydown":case"keyup":l=Pi;break;case"focusin":c="focus",l=Si;break;case"focusout":c="blur",l=Si;break;case"beforeblur":case"afterblur":l=Si;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=bi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=wi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ni;break;case Ls:case Ps:case Fs:l=xi;break;case Ns:l=Oi;break;case"scroll":l=vi;break;case"wheel":l=Gi;break;case"copy":case"cut":case"paste":l=Di;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Fi}var h=0!==(4&t),d=!h&&"scroll"===e,u=h?null!==a?a+"Capture":null:a;h=[];for(var p,g=s;null!==g;){var m=(p=g).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==u&&(null!=(m=Le(g,u))&&h.push(Qs(g,m,p)))),d)break;g=g.return}0<h.length&&(a=new l(a,c,null,i,n),r.push({event:a,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===be||!(c=i.relatedTarget||i.fromElement)||!Dn(c)&&!c[wn])&&(l||a)&&(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(c=(c=i.relatedTarget||i.toElement)?Dn(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(h=bi,m="onMouseLeave",u="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=Fi,m="onPointerLeave",u="onPointerEnter",g="pointer"),d=null==l?a:En(l),p=null==c?a:En(c),(a=new h(m,g+"leave",l,i,n)).target=d,a.relatedTarget=p,m=null,Dn(n)===s&&((h=new h(u,g+"enter",c,i,n)).target=p,h.relatedTarget=d,m=h),d=m,l&&c)e:{for(u=c,g=0,p=h=l;p;p=Js(p))g++;for(p=0,m=u;m;m=Js(m))p++;for(;0<g-p;)h=Js(h),g--;for(;0<p-g;)u=Js(u),p--;for(;g--;){if(h===u||null!==u&&h===u.alternate)break e;h=Js(h),u=Js(u)}h=null}else h=null;null!==l&&en(r,a,l,h,!1),null!==c&&null!==d&&en(r,d,c,h,!0)}if("select"===(l=(a=s?En(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=is;else if(qi(a))if(ss)f=us;else{f=hs;var v=cs}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(f=ds);switch(f&&(f=f(e,s))?Qi(r,f,i,n):(v&&v(e,a,s),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=s?En(s):window,e){case"focusin":(qi(v)||"true"===v.contentEditable)&&(Ss=v,xs=s,Ms=null);break;case"focusout":Ms=xs=Ss=null;break;case"mousedown":Ds=!0;break;case"contextmenu":case"mouseup":case"dragend":Ds=!1,Rs(r,i,n);break;case"selectionchange":if(ws)break;case"keydown":case"keyup":Rs(r,i,n)}var y;if(ji)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Yi?$i(e,i)&&(C="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(C="onCompositionStart");C&&(Wi&&"ko"!==i.locale&&(Yi||"onCompositionStart"!==C?"onCompositionEnd"===C&&Yi&&(y=ni()):(ti="value"in(Xt=n)?Xt.value:Xt.textContent,Yi=!0)),0<(v=Xs(s,C)).length&&(C=new Ri(C,e,null,i,n),r.push({event:C,listeners:v}),y?C.data=y:null!==(y=Ki(i))&&(C.data=y))),(y=Hi?function(e,t){switch(e){case"compositionend":return Ki(t);case"keypress":return 32!==t.which?null:(Ui=!0,_i);case"textInput":return(e=t.data)===_i&&Ui?null:e;default:return null}}(e,i):function(e,t){if(Yi)return"compositionend"===e||!ji&&$i(e,t)?(e=ni(),ii=ti=Xt=null,Yi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(s=Xs(s,"onBeforeInput")).length&&(n=new Ri("onBeforeInput","beforeinput",null,i,n),r.push({event:n,listeners:s}),n.data=y))}_s(r,t)}))}function Qs(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Xs(e,t){for(var i=t+"Capture",s=[];null!==e;){var n=e,o=n.stateNode;5===n.tag&&null!==o&&(n=o,null!=(o=Le(e,i))&&s.unshift(Qs(e,o,n)),null!=(o=Le(e,t))&&s.push(Qs(e,o,n))),e=e.return}return s}function Js(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function en(e,t,i,s,n){for(var o=t._reactName,r=[];null!==i&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==c&&(a=c,n?null!=(l=Le(i,o))&&r.unshift(Qs(i,l,a)):n||null!=(l=Le(i,o))&&r.push(Qs(i,l,a))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}var tn=/\r\n?/g,sn=/\u0000|\uFFFD/g;function nn(e){return("string"===typeof e?e:""+e).replace(tn,"\n").replace(sn,"")}function on(e,t,i){if(t=nn(t),nn(e)!==t&&i)throw Error(o(425))}function rn(){}var an=null,ln=null;function cn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var hn="function"===typeof setTimeout?setTimeout:void 0,dn="function"===typeof clearTimeout?clearTimeout:void 0,un="function"===typeof Promise?Promise:void 0,pn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof un?function(e){return un.resolve(null).then(e).catch(gn)}:hn;function gn(e){setTimeout((function(){throw e}))}function mn(e,t){var i=t,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&8===n.nodeType)if("/$"===(i=n.data)){if(0===s)return e.removeChild(n),void Ht(t);s--}else"$"!==i&&"$?"!==i&&"$!"!==i||s++;i=n}while(i);Ht(t)}function fn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function vn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var yn=Math.random().toString(36).slice(2),Cn="__reactFiber$"+yn,bn="__reactProps$"+yn,wn="__reactContainer$"+yn,Sn="__reactEvents$"+yn,xn="__reactListeners$"+yn,Mn="__reactHandles$"+yn;function Dn(e){var t=e[Cn];if(t)return t;for(var i=e.parentNode;i;){if(t=i[wn]||i[Cn]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=vn(e);null!==e;){if(i=e[Cn])return i;e=vn(e)}return t}i=(e=i).parentNode}return null}function Rn(e){return!(e=e[Cn]||e[wn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function En(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function In(e){return e[bn]||null}var An=[],kn=-1;function Tn(e){return{current:e}}function Ln(e){0>kn||(e.current=An[kn],An[kn]=null,kn--)}function Pn(e,t){kn++,An[kn]=e.current,e.current=t}var Fn={},Nn=Tn(Fn),On=Tn(!1),Bn=Fn;function Gn(e,t){var i=e.type.contextTypes;if(!i)return Fn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in i)o[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function zn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function jn(){Ln(On),Ln(Nn)}function Vn(e,t,i){if(Nn.current!==Fn)throw Error(o(168));Pn(Nn,t),Pn(On,i)}function Hn(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return i;for(var n in s=s.getChildContext())if(!(n in t))throw Error(o(108,W(e)||"Unknown",n));return B({},i,s)}function Wn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fn,Bn=Nn.current,Pn(Nn,e),Pn(On,On.current),!0}function _n(e,t,i){var s=e.stateNode;if(!s)throw Error(o(169));i?(e=Hn(e,t,Bn),s.__reactInternalMemoizedMergedChildContext=e,Ln(On),Ln(Nn),Pn(Nn,e)):Ln(On),Pn(On,i)}var Un=null,$n=!1,Kn=!1;function Yn(e){null===Un?Un=[e]:Un.push(e)}function Zn(){if(!Kn&&null!==Un){Kn=!0;var e=0,t=Ct;try{var i=Un;for(Ct=1;e<i.length;e++){var s=i[e];do{s=s(!0)}while(null!==s)}Un=null,$n=!1}catch(n){throw null!==Un&&(Un=Un.slice(e+1)),Ke(Je,Zn),n}finally{Ct=t,Kn=!1}}return null}var qn=[],Qn=0,Xn=null,Jn=0,eo=[],to=0,io=null,so=1,no="";function oo(e,t){qn[Qn++]=Jn,qn[Qn++]=Xn,Xn=e,Jn=t}function ro(e,t,i){eo[to++]=so,eo[to++]=no,eo[to++]=io,io=e;var s=so;e=no;var n=32-rt(s)-1;s&=~(1<<n),i+=1;var o=32-rt(t)+n;if(30<o){var r=n-n%5;o=(s&(1<<r)-1).toString(32),s>>=r,n-=r,so=1<<32-rt(t)+n|i<<n|s,no=o+e}else so=1<<o|i<<n|s,no=e}function ao(e){null!==e.return&&(oo(e,1),ro(e,1,0))}function lo(e){for(;e===Xn;)Xn=qn[--Qn],qn[Qn]=null,Jn=qn[--Qn],qn[Qn]=null;for(;e===io;)io=eo[--to],eo[to]=null,no=eo[--to],eo[to]=null,so=eo[--to],eo[to]=null}var co=null,ho=null,uo=!1,po=null;function go(e,t){var i=Gc(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function mo(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,co=e,ho=fn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,co=e,ho=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==io?{id:so,overflow:no}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=Gc(18,null,null,0)).stateNode=t,i.return=e,e.child=i,co=e,ho=null,!0);default:return!1}}function fo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function vo(e){if(uo){var t=ho;if(t){var i=t;if(!mo(e,t)){if(fo(e))throw Error(o(418));t=fn(i.nextSibling);var s=co;t&&mo(e,t)?go(s,i):(e.flags=-4097&e.flags|2,uo=!1,co=e)}}else{if(fo(e))throw Error(o(418));e.flags=-4097&e.flags|2,uo=!1,co=e}}}function yo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;co=e}function Co(e){if(e!==co)return!1;if(!uo)return yo(e),uo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!cn(e.type,e.memoizedProps)),t&&(t=ho)){if(fo(e))throw bo(),Error(o(418));for(;t;)go(e,t),t=fn(t.nextSibling)}if(yo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){ho=fn(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}ho=null}}else ho=co?fn(e.stateNode.nextSibling):null;return!0}function bo(){for(var e=ho;e;)e=fn(e.nextSibling)}function wo(){ho=co=null,uo=!1}function So(e){null===po?po=[e]:po.push(e)}var xo=b.ReactCurrentBatchConfig;function Mo(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var s=i.stateNode}if(!s)throw Error(o(147,e));var n=s,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=n.refs;null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function Do(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ro(e){return(0,e._init)(e._payload)}function Eo(e){function t(t,i){if(e){var s=t.deletions;null===s?(t.deletions=[i],t.flags|=16):s.push(i)}}function i(i,s){if(!e)return null;for(;null!==s;)t(i,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=jc(e,t)).index=0,e.sibling=null,e}function r(t,i,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<i?(t.flags|=2,i):s:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,s){return null===t||6!==t.tag?((t=_c(i,e.mode,s)).return=e,t):((t=n(t,i)).return=e,t)}function c(e,t,i,s){var o=i.type;return o===x?d(e,t,i.props.children,s,i.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&Ro(o)===t.type)?((s=n(t,i.props)).ref=Mo(e,t,i),s.return=e,s):((s=Vc(i.type,i.key,i.props,null,e.mode,s)).ref=Mo(e,t,i),s.return=e,s)}function h(e,t,i,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Uc(i,e.mode,s)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function d(e,t,i,s,o){return null===t||7!==t.tag?((t=Hc(i,e.mode,s,o)).return=e,t):((t=n(t,i)).return=e,t)}function u(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=_c(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(i=Vc(t.type,t.key,t.props,null,e.mode,i)).ref=Mo(e,null,t),i.return=e,i;case S:return(t=Uc(t,e.mode,i)).return=e,t;case L:return u(e,(0,t._init)(t._payload),i)}if(te(t)||N(t))return(t=Hc(t,e.mode,i,null)).return=e,t;Do(e,t)}return null}function p(e,t,i,s){var n=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==n?null:l(e,t,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===n?c(e,t,i,s):null;case S:return i.key===n?h(e,t,i,s):null;case L:return p(e,t,(n=i._init)(i._payload),s)}if(te(i)||N(i))return null!==n?null:d(e,t,i,s,null);Do(e,i)}return null}function g(e,t,i,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(i)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?i:s.key)||null,s,n);case S:return h(t,e=e.get(null===s.key?i:s.key)||null,s,n);case L:return g(e,t,i,(0,s._init)(s._payload),n)}if(te(s)||N(s))return d(t,e=e.get(i)||null,s,n,null);Do(t,s)}return null}function m(n,o,a,l){for(var c=null,h=null,d=o,m=o=0,f=null;null!==d&&m<a.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var v=p(n,d,a[m],l);if(null===v){null===d&&(d=f);break}e&&d&&null===v.alternate&&t(n,d),o=r(v,o,m),null===h?c=v:h.sibling=v,h=v,d=f}if(m===a.length)return i(n,d),uo&&oo(n,m),c;if(null===d){for(;m<a.length;m++)null!==(d=u(n,a[m],l))&&(o=r(d,o,m),null===h?c=d:h.sibling=d,h=d);return uo&&oo(n,m),c}for(d=s(n,d);m<a.length;m++)null!==(f=g(d,n,m,a[m],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?m:f.key),o=r(f,o,m),null===h?c=f:h.sibling=f,h=f);return e&&d.forEach((function(e){return t(n,e)})),uo&&oo(n,m),c}function f(n,a,l,c){var h=N(l);if("function"!==typeof h)throw Error(o(150));if(null==(l=h.call(l)))throw Error(o(151));for(var d=h=null,m=a,f=a=0,v=null,y=l.next();null!==m&&!y.done;f++,y=l.next()){m.index>f?(v=m,m=null):v=m.sibling;var C=p(n,m,y.value,c);if(null===C){null===m&&(m=v);break}e&&m&&null===C.alternate&&t(n,m),a=r(C,a,f),null===d?h=C:d.sibling=C,d=C,m=v}if(y.done)return i(n,m),uo&&oo(n,f),h;if(null===m){for(;!y.done;f++,y=l.next())null!==(y=u(n,y.value,c))&&(a=r(y,a,f),null===d?h=y:d.sibling=y,d=y);return uo&&oo(n,f),h}for(m=s(n,m);!y.done;f++,y=l.next())null!==(y=g(m,n,f,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?f:y.key),a=r(y,a,f),null===d?h=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(n,e)})),uo&&oo(n,f),h}return function e(s,o,r,l){if("object"===typeof r&&null!==r&&r.type===x&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case w:e:{for(var c=r.key,h=o;null!==h;){if(h.key===c){if((c=r.type)===x){if(7===h.tag){i(s,h.sibling),(o=n(h,r.props.children)).return=s,s=o;break e}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&Ro(c)===h.type){i(s,h.sibling),(o=n(h,r.props)).ref=Mo(s,h,r),o.return=s,s=o;break e}i(s,h);break}t(s,h),h=h.sibling}r.type===x?((o=Hc(r.props.children,s.mode,l,r.key)).return=s,s=o):((l=Vc(r.type,r.key,r.props,null,s.mode,l)).ref=Mo(s,o,r),l.return=s,s=l)}return a(s);case S:e:{for(h=r.key;null!==o;){if(o.key===h){if(4===o.tag&&o.stateNode.containerInfo===r.containerInfo&&o.stateNode.implementation===r.implementation){i(s,o.sibling),(o=n(o,r.children||[])).return=s,s=o;break e}i(s,o);break}t(s,o),o=o.sibling}(o=Uc(r,s.mode,l)).return=s,s=o}return a(s);case L:return e(s,o,(h=r._init)(r._payload),l)}if(te(r))return m(s,o,r,l);if(N(r))return f(s,o,r,l);Do(s,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==o&&6===o.tag?(i(s,o.sibling),(o=n(o,r)).return=s,s=o):(i(s,o),(o=_c(r,s.mode,l)).return=s,s=o),a(s)):i(s,o)}}var Io=Eo(!0),Ao=Eo(!1),ko=Tn(null),To=null,Lo=null,Po=null;function Fo(){Po=Lo=To=null}function No(e){var t=ko.current;Ln(ko),e._currentValue=t}function Oo(e,t,i){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Bo(e,t){To=e,Po=Lo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ra=!0),e.firstContext=null)}function Go(e){var t=e._currentValue;if(Po!==e)if(e={context:e,memoizedValue:t,next:null},null===Lo){if(null===To)throw Error(o(308));Lo=e,To.dependencies={lanes:0,firstContext:e}}else Lo=Lo.next=e;return t}var zo=null;function jo(e){null===zo?zo=[e]:zo.push(e)}function Vo(e,t,i,s){var n=t.interleaved;return null===n?(i.next=i,jo(t)):(i.next=n.next,n.next=i),t.interleaved=i,Ho(e,s)}function Ho(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Wo=!1;function _o(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ko(e,t,i){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Nl)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Ho(e,i)}return null===(n=s.interleaved)?(t.next=t,jo(s)):(t.next=n.next,n.next=t),s.interleaved=t,Ho(e,i)}function Yo(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var s=t.lanes;i|=s&=e.pendingLanes,t.lanes=i,yt(e,i)}}function Zo(e,t){var i=e.updateQueue,s=e.alternate;if(null!==s&&i===(s=s.updateQueue)){var n=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var r={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?n=o=r:o=o.next=r,i=i.next}while(null!==i);null===o?n=o=t:o=o.next=t}else n=o=t;return i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,effects:s.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function qo(e,t,i,s){var n=e.updateQueue;Wo=!1;var o=n.firstBaseUpdate,r=n.lastBaseUpdate,a=n.shared.pending;if(null!==a){n.shared.pending=null;var l=a,c=l.next;l.next=null,null===r?o=c:r.next=c,r=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==r&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==o){var d=n.baseState;for(r=0,h=c=l=null,a=o;;){var u=a.lane,p=a.eventTime;if((s&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,m=a;switch(u=t,p=i,m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(p,d,u);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(u="function"===typeof(g=m.payload)?g.call(p,d,u):g)||void 0===u)break e;d=B({},d,u);break e;case 2:Wo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(u=n.effects)?n.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,l=d):h=h.next=p,r|=u;if(null===(a=a.next)){if(null===(a=n.shared.pending))break;a=(u=a).next,u.next=null,n.lastBaseUpdate=u,n.shared.pending=null}}if(null===h&&(l=d),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,null!==(t=n.shared.interleaved)){n=t;do{r|=n.lane,n=n.next}while(n!==t)}else null===o&&(n.shared.lanes=0);Wl|=r,e.lanes=r,e.memoizedState=d}}function Qo(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=i,"function"!==typeof n)throw Error(o(191,n));n.call(s)}}}var Xo={},Jo=Tn(Xo),er=Tn(Xo),tr=Tn(Xo);function ir(e){if(e===Xo)throw Error(o(174));return e}function sr(e,t){switch(Pn(tr,t),Pn(er,e),Pn(Jo,Xo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ln(Jo),Pn(Jo,t)}function nr(){Ln(Jo),Ln(er),Ln(tr)}function or(e){ir(tr.current);var t=ir(Jo.current),i=le(t,e.type);t!==i&&(Pn(er,e),Pn(Jo,i))}function rr(e){er.current===e&&(Ln(Jo),Ln(er))}var ar=Tn(0);function lr(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cr=[];function hr(){for(var e=0;e<cr.length;e++)cr[e]._workInProgressVersionPrimary=null;cr.length=0}var dr=b.ReactCurrentDispatcher,ur=b.ReactCurrentBatchConfig,pr=0,gr=null,mr=null,fr=null,vr=!1,yr=!1,Cr=0,br=0;function wr(){throw Error(o(321))}function Sr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!ps(e[i],t[i]))return!1;return!0}function xr(e,t,i,s,n,r){if(pr=r,gr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dr.current=null===e||null===e.memoizedState?ra:aa,e=i(s,n),yr){r=0;do{if(yr=!1,Cr=0,25<=r)throw Error(o(301));r+=1,fr=mr=null,t.updateQueue=null,dr.current=la,e=i(s,n)}while(yr)}if(dr.current=oa,t=null!==mr&&null!==mr.next,pr=0,fr=mr=gr=null,vr=!1,t)throw Error(o(300));return e}function Mr(){var e=0!==Cr;return Cr=0,e}function Dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fr?gr.memoizedState=fr=e:fr=fr.next=e,fr}function Rr(){if(null===mr){var e=gr.alternate;e=null!==e?e.memoizedState:null}else e=mr.next;var t=null===fr?gr.memoizedState:fr.next;if(null!==t)fr=t,mr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(mr=e).memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},null===fr?gr.memoizedState=fr=e:fr=fr.next=e}return fr}function Er(e,t){return"function"===typeof t?t(e):t}function Ir(e){var t=Rr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var s=mr,n=s.baseQueue,r=i.pending;if(null!==r){if(null!==n){var a=n.next;n.next=r.next,r.next=a}s.baseQueue=n=r,i.pending=null}if(null!==n){r=n.next,s=s.baseState;var l=a=null,c=null,h=r;do{var d=h.lane;if((pr&d)===d)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:e(s,h.action);else{var u={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=u,a=s):c=c.next=u,gr.lanes|=d,Wl|=d}h=h.next}while(null!==h&&h!==r);null===c?a=s:c.next=l,ps(s,t.memoizedState)||(Ra=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,i.lastRenderedState=s}if(null!==(e=i.interleaved)){n=e;do{r=n.lane,gr.lanes|=r,Wl|=r,n=n.next}while(n!==e)}else null===n&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Ar(e){var t=Rr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,n=i.pending,r=t.memoizedState;if(null!==n){i.pending=null;var a=n=n.next;do{r=e(r,a.action),a=a.next}while(a!==n);ps(r,t.memoizedState)||(Ra=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),i.lastRenderedState=r}return[r,s]}function kr(){}function Tr(e,t){var i=gr,s=Rr(),n=t(),r=!ps(s.memoizedState,n);if(r&&(s.memoizedState=n,Ra=!0),s=s.queue,Wr(Fr.bind(null,i,s,e),[e]),s.getSnapshot!==t||r||null!==fr&&1&fr.memoizedState.tag){if(i.flags|=2048,Gr(9,Pr.bind(null,i,s,n,t),void 0,null),null===Ol)throw Error(o(349));0!==(30&pr)||Lr(i,t,n)}return n}function Lr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=gr.updateQueue)?(t={lastEffect:null,stores:null},gr.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Pr(e,t,i,s){t.value=i,t.getSnapshot=s,Nr(t)&&Or(e)}function Fr(e,t,i){return i((function(){Nr(t)&&Or(e)}))}function Nr(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!ps(e,i)}catch(ei){return!0}}function Or(e){var t=Ho(e,1);null!==t&&cc(t,e,1,-1)}function Br(e){var t=Dr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:e},t.queue=e,e=e.dispatch=ta.bind(null,gr,e),[t.memoizedState,e]}function Gr(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},null===(t=gr.updateQueue)?(t={lastEffect:null,stores:null},gr.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function zr(){return Rr().memoizedState}function jr(e,t,i,s){var n=Dr();gr.flags|=e,n.memoizedState=Gr(1|t,i,void 0,void 0===s?null:s)}function Vr(e,t,i,s){var n=Rr();s=void 0===s?null:s;var o=void 0;if(null!==mr){var r=mr.memoizedState;if(o=r.destroy,null!==s&&Sr(s,r.deps))return void(n.memoizedState=Gr(t,i,o,s))}gr.flags|=e,n.memoizedState=Gr(1|t,i,o,s)}function Hr(e,t){return jr(8390656,8,e,t)}function Wr(e,t){return Vr(2048,8,e,t)}function _r(e,t){return Vr(4,2,e,t)}function Ur(e,t){return Vr(4,4,e,t)}function $r(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Kr(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Vr(4,4,$r.bind(null,t,e),i)}function Yr(){}function Zr(e,t){var i=Rr();t=void 0===t?null:t;var s=i.memoizedState;return null!==s&&null!==t&&Sr(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function qr(e,t){var i=Rr();t=void 0===t?null:t;var s=i.memoizedState;return null!==s&&null!==t&&Sr(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function Qr(e,t,i){return 0===(21&pr)?(e.baseState&&(e.baseState=!1,Ra=!0),e.memoizedState=i):(ps(i,t)||(i=mt(),gr.lanes|=i,Wl|=i,e.baseState=!0),t)}function Xr(e,t){var i=Ct;Ct=0!==i&&4>i?i:4,e(!0);var s=ur.transition;ur.transition={};try{e(!1),t()}finally{Ct=i,ur.transition=s}}function Jr(){return Rr().memoizedState}function ea(e,t,i){var s=lc(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},ia(e))sa(t,i);else if(null!==(i=Vo(e,t,i,s))){cc(i,e,s,ac()),na(i,t,s)}}function ta(e,t,i){var s=lc(e),n={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(ia(e))sa(t,n);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=o(r,i);if(n.hasEagerState=!0,n.eagerState=a,ps(a,r)){var l=t.interleaved;return null===l?(n.next=n,jo(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(i=Vo(e,t,n,s))&&(cc(i,e,s,n=ac()),na(i,t,s))}}function ia(e){var t=e.alternate;return e===gr||null!==t&&t===gr}function sa(e,t){yr=vr=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function na(e,t,i){if(0!==(4194240&i)){var s=t.lanes;i|=s&=e.pendingLanes,t.lanes=i,yt(e,i)}}var oa={readContext:Go,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},ra={readContext:Go,useCallback:function(e,t){return Dr().memoizedState=[e,void 0===t?null:t],e},useContext:Go,useEffect:Hr,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,jr(4194308,4,$r.bind(null,t,e),i)},useLayoutEffect:function(e,t){return jr(4194308,4,e,t)},useInsertionEffect:function(e,t){return jr(4,2,e,t)},useMemo:function(e,t){var i=Dr();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=Dr();return t=void 0!==i?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=ea.bind(null,gr,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},Dr().memoizedState=e},useState:Br,useDebugValue:Yr,useDeferredValue:function(e){return Dr().memoizedState=e},useTransition:function(){var e=Br(!1),t=e[0];return e=Xr.bind(null,e[1]),Dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=gr,n=Dr();if(uo){if(void 0===i)throw Error(o(407));i=i()}else{if(i=t(),null===Ol)throw Error(o(349));0!==(30&pr)||Lr(s,t,i)}n.memoizedState=i;var r={value:i,getSnapshot:t};return n.queue=r,Hr(Fr.bind(null,s,r,e),[e]),s.flags|=2048,Gr(9,Pr.bind(null,s,r,i,t),void 0,null),i},useId:function(){var e=Dr(),t=Ol.identifierPrefix;if(uo){var i=no;t=":"+t+"R"+(i=(so&~(1<<32-rt(so)-1)).toString(32)+i),0<(i=Cr++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=br++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aa={readContext:Go,useCallback:Zr,useContext:Go,useEffect:Wr,useImperativeHandle:Kr,useInsertionEffect:_r,useLayoutEffect:Ur,useMemo:qr,useReducer:Ir,useRef:zr,useState:function(){return Ir(Er)},useDebugValue:Yr,useDeferredValue:function(e){return Qr(Rr(),mr.memoizedState,e)},useTransition:function(){return[Ir(Er)[0],Rr().memoizedState]},useMutableSource:kr,useSyncExternalStore:Tr,useId:Jr,unstable_isNewReconciler:!1},la={readContext:Go,useCallback:Zr,useContext:Go,useEffect:Wr,useImperativeHandle:Kr,useInsertionEffect:_r,useLayoutEffect:Ur,useMemo:qr,useReducer:Ar,useRef:zr,useState:function(){return Ar(Er)},useDebugValue:Yr,useDeferredValue:function(e){var t=Rr();return null===mr?t.memoizedState=e:Qr(t,mr.memoizedState,e)},useTransition:function(){return[Ar(Er)[0],Rr().memoizedState]},useMutableSource:kr,useSyncExternalStore:Tr,useId:Jr,unstable_isNewReconciler:!1};function ca(e,t){if(e&&e.defaultProps){for(var i in t=B({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function ha(e,t,i,s){i=null===(i=i(s,t=e.memoizedState))||void 0===i?t:B({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var da={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=ac(),n=lc(e),o=$o(s,n);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=Ko(e,o,n))&&(cc(t,e,n,s),Yo(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=ac(),n=lc(e),o=$o(s,n);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=Ko(e,o,n))&&(cc(t,e,n,s),Yo(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ac(),s=lc(e),n=$o(i,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Ko(e,n,s))&&(cc(t,e,s,i),Yo(t,e,s))}};function ua(e,t,i,s,n,o,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,o,r):!t.prototype||!t.prototype.isPureReactComponent||(!gs(i,s)||!gs(n,o))}function pa(e,t,i){var s=!1,n=Fn,o=t.contextType;return"object"===typeof o&&null!==o?o=Go(o):(n=zn(t)?Bn:Nn.current,o=(s=null!==(s=t.contextTypes)&&void 0!==s)?Gn(e,n):Fn),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=da,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function ga(e,t,i,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&da.enqueueReplaceState(t,t.state,null)}function ma(e,t,i,s){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs={},_o(e);var o=t.contextType;"object"===typeof o&&null!==o?n.context=Go(o):(o=zn(t)?Bn:Nn.current,n.context=Gn(e,o)),n.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ha(e,t,o,i),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&da.enqueueReplaceState(n,n.state,null),qo(e,i,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function fa(e,t){try{var i="",s=t;do{i+=V(s),s=s.return}while(s);var n=i}catch(o){n="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:n,digest:null}}function va(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function ya(e,t){try{console.error(t.value)}catch(Jt){setTimeout((function(){throw Jt}))}}var Ca="function"===typeof WeakMap?WeakMap:Map;function ba(e,t,i){(i=$o(-1,i)).tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Ql||(Ql=!0,Xl=s),ya(0,t)},i}function wa(e,t,i){(i=$o(-1,i)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;i.payload=function(){return s(n)},i.callback=function(){ya(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){ya(0,t),"function"!==typeof s&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function Sa(e,t,i){var s=e.pingCache;if(null===s){s=e.pingCache=new Ca;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(i)||(n.add(i),e=Lc.bind(null,e,t,i),t.then(e,e))}function xa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ma(e,t,i,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=$o(-1,1)).tag=2,Ko(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var Da=b.ReactCurrentOwner,Ra=!1;function Ea(e,t,i,s){t.child=null===e?Ao(t,null,i,s):Io(t,e.child,i,s)}function Ia(e,t,i,s,n){i=i.render;var o=t.ref;return Bo(t,n),s=xr(e,t,i,s,o,n),i=Mr(),null===e||Ra?(uo&&i&&ao(t),t.flags|=1,Ea(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Qa(e,t,n))}function Aa(e,t,i,s,n){if(null===e){var o=i.type;return"function"!==typeof o||zc(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Vc(i.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ka(e,t,o,s,n))}if(o=e.child,0===(e.lanes&n)){var r=o.memoizedProps;if((i=null!==(i=i.compare)?i:gs)(r,s)&&e.ref===t.ref)return Qa(e,t,n)}return t.flags|=1,(e=jc(o,s)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,i,s,n){if(null!==e){var o=e.memoizedProps;if(gs(o,s)&&e.ref===t.ref){if(Ra=!1,t.pendingProps=s=o,0===(e.lanes&n))return t.lanes=e.lanes,Qa(e,t,n);0!==(131072&e.flags)&&(Ra=!0)}}return Pa(e,t,i,s,n)}function Ta(e,t,i){var s=t.pendingProps,n=s.children,o=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(jl,zl),zl|=i;else{if(0===(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pn(jl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==o?o.baseLanes:i,Pn(jl,zl),zl|=s}else null!==o?(s=o.baseLanes|i,t.memoizedState=null):s=i,Pn(jl,zl),zl|=s;return Ea(e,t,n,i),t.child}function La(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Pa(e,t,i,s,n){var o=zn(i)?Bn:Nn.current;return o=Gn(t,o),Bo(t,n),i=xr(e,t,i,s,o,n),s=Mr(),null===e||Ra?(uo&&s&&ao(t),t.flags|=1,Ea(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Qa(e,t,n))}function Fa(e,t,i,s,n){if(zn(i)){var o=!0;Wn(t)}else o=!1;if(Bo(t,n),null===t.stateNode)qa(e,t),pa(t,i,s),ma(t,i,s,n),s=!0;else if(null===e){var r=t.stateNode,a=t.memoizedProps;r.props=a;var l=r.context,c=i.contextType;"object"===typeof c&&null!==c?c=Go(c):c=Gn(t,c=zn(i)?Bn:Nn.current);var h=i.getDerivedStateFromProps,d="function"===typeof h||"function"===typeof r.getSnapshotBeforeUpdate;d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==s||l!==c)&&ga(t,r,s,c),Wo=!1;var u=t.memoizedState;r.state=u,qo(t,s,r,n),l=t.memoizedState,a!==s||u!==l||On.current||Wo?("function"===typeof h&&(ha(t,i,h,s),l=t.memoizedState),(a=Wo||ua(t,i,a,s,u,l,c))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),r.props=s,r.state=l,r.context=c,s=a):("function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Uo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ca(t.type,a),r.props=c,d=t.pendingProps,u=r.context,"object"===typeof(l=i.contextType)&&null!==l?l=Go(l):l=Gn(t,l=zn(i)?Bn:Nn.current);var p=i.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==d||u!==l)&&ga(t,r,s,l),Wo=!1,u=t.memoizedState,r.state=u,qo(t,s,r,n);var g=t.memoizedState;a!==d||u!==g||On.current||Wo?("function"===typeof p&&(ha(t,i,p,s),g=t.memoizedState),(c=Wo||ua(t,i,c,s,u,g,l)||!1)?(h||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(s,g,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,g,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),r.props=s,r.state=g,r.context=l,s=c):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),s=!1)}return Na(e,t,i,s,o,n)}function Na(e,t,i,s,n,o){La(e,t);var r=0!==(128&t.flags);if(!s&&!r)return n&&_n(t,i,!1),Qa(e,t,o);s=t.stateNode,Da.current=t;var a=r&&"function"!==typeof i.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&r?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,a,o)):Ea(e,t,a,o),t.memoizedState=s.state,n&&_n(t,i,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Vn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Vn(0,t.context,!1),sr(e,t.containerInfo)}function Ba(e,t,i,s,n){return wo(),So(n),t.flags|=256,Ea(e,t,i,s),t.child}var Ga,za,ja,Va,Ha={dehydrated:null,treeContext:null,retryLane:0};function Wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function _a(e,t,i){var s,n=t.pendingProps,r=ar.current,a=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&r)),s?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),Pn(ar,1&r),null===e)return vo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Wc(l,n,0,null),e=Hc(e,n,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Wa(i),t.memoizedState=Ha,e):Ua(t,l));if(null!==(r=e.memoizedState)&&null!==(s=r.dehydrated))return function(e,t,i,s,n,r,a){if(i)return 256&t.flags?(t.flags&=-257,$a(e,t,a,s=va(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=s.fallback,n=t.mode,s=Wc({mode:"visible",children:s.children},n,0,null),(r=Hc(r,n,a,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,0!==(1&t.mode)&&Io(t,e.child,null,a),t.child.memoizedState=Wa(a),t.memoizedState=Ha,r);if(0===(1&t.mode))return $a(e,t,a,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var l=s.dgst;return s=l,$a(e,t,a,s=va(r=Error(o(419)),s,void 0))}if(l=0!==(a&e.childLanes),Ra||l){if(null!==(s=Ol)){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|a))?0:n)&&n!==r.retryLane&&(r.retryLane=n,Ho(e,n),cc(s,e,n,-1))}return Sc(),$a(e,t,a,s=va(Error(o(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Fc.bind(null,e),n._reactRetry=t,null):(e=r.treeContext,ho=fn(n.nextSibling),co=t,uo=!0,po=null,null!==e&&(eo[to++]=so,eo[to++]=no,eo[to++]=io,so=e.id,no=e.overflow,io=t),t=Ua(t,s.children),t.flags|=4096,t)}(e,t,l,n,s,r,i);if(a){a=n.fallback,l=t.mode,s=(r=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==r?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=jc(r,c)).subtreeFlags=14680064&r.subtreeFlags,null!==s?a=jc(s,a):(a=Hc(a,l,i,null)).flags|=2,a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=null===(l=e.child.memoizedState)?Wa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~i,t.memoizedState=Ha,n}return e=(a=e.child).sibling,n=jc(a,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n}function Ua(e,t){return(t=Wc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $a(e,t,i,s){return null!==s&&So(s),Io(t,e.child,null,i),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,i){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Oo(e.return,t,i)}function Ya(e,t,i,s,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=i,o.tailMode=n)}function Za(e,t,i){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(Ea(e,t,s.children,i),0!==(2&(s=ar.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,i,t);else if(19===e.tag)Ka(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Pn(ar,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===lr(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Ya(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===lr(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Ya(t,!0,i,null,o);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Wl|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=jc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=jc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Xa(e,t){if(!uo)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,s=0;if(t)for(var n=e.child;null!==n;)i|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function el(e,t,i){var s=t.pendingProps;switch(lo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:case 17:return zn(t.type)&&jn(),Ja(t),null;case 3:return s=t.stateNode,nr(),Ln(On),Ln(Nn),hr(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(Co(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==po&&(pc(po),po=null))),za(e,t),Ja(t),null;case 5:rr(t);var n=ir(tr.current);if(i=t.type,null!==e&&null!=t.stateNode)ja(e,t,i,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(o(166));return Ja(t),null}if(e=ir(Jo.current),Co(t)){s=t.stateNode,i=t.type;var r=t.memoizedProps;switch(s[Cn]=t,s[bn]=r,e=0!==(1&t.mode),i){case"dialog":Us("cancel",s),Us("close",s);break;case"iframe":case"object":case"embed":Us("load",s);break;case"video":case"audio":for(n=0;n<Vs.length;n++)Us(Vs[n],s);break;case"source":Us("error",s);break;case"img":case"image":case"link":Us("error",s),Us("load",s);break;case"details":Us("toggle",s);break;case"input":q(s,r),Us("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Us("invalid",s);break;case"textarea":ne(s,r),Us("invalid",s)}for(var l in ye(i,r),n=null,r)if(r.hasOwnProperty(l)){var c=r[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==r.suppressHydrationWarning&&on(s.textContent,c,e),n=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==r.suppressHydrationWarning&&on(s.textContent,c,e),n=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Us("scroll",s)}switch(i){case"input":$(s),J(s,r,!0);break;case"textarea":$(s),re(s);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(s.onclick=rn)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(i,{is:s.is}):(e=l.createElement(i),"select"===i&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,i),e[Cn]=t,e[bn]=s,Ga(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ce(i,s),i){case"dialog":Us("cancel",e),Us("close",e),n=s;break;case"iframe":case"object":case"embed":Us("load",e),n=s;break;case"video":case"audio":for(n=0;n<Vs.length;n++)Us(Vs[n],e);n=s;break;case"source":Us("error",e),n=s;break;case"img":case"image":case"link":Us("error",e),Us("load",e),n=s;break;case"details":Us("toggle",e),n=s;break;case"input":q(e,s),n=Z(e,s),Us("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=B({},s,{value:void 0}),Us("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),Us("invalid",e)}for(r in ye(i,n),c=n)if(c.hasOwnProperty(r)){var h=c[r];"style"===r?fe(e,h):"dangerouslySetInnerHTML"===r?null!=(h=h?h.__html:void 0)&&de(e,h):"children"===r?"string"===typeof h?("textarea"!==i||""!==h)&&ue(e,h):"number"===typeof h&&ue(e,""+h):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(a.hasOwnProperty(r)?null!=h&&"onScroll"===r&&Us("scroll",e):null!=h&&C(e,r,h,l))}switch(i){case"input":$(e),J(e,s,!1);break;case"textarea":$(e),re(e);break;case"option":null!=s.value&&e.setAttribute("value",""+_(s.value));break;case"select":e.multiple=!!s.multiple,null!=(r=s.value)?ie(e,!!s.multiple,r,!1):null!=s.defaultValue&&ie(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=rn)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&null!=t.stateNode)Va(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(o(166));if(i=ir(tr.current),ir(Jo.current),Co(t)){if(s=t.stateNode,i=t.memoizedProps,s[Cn]=t,(r=s.nodeValue!==i)&&null!==(e=co))switch(e.tag){case 3:on(s.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&on(s.nodeValue,i,0!==(1&e.mode))}r&&(t.flags|=4)}else(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[Cn]=t,t.stateNode=s}return Ja(t),null;case 13:if(Ln(ar),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(uo&&null!==ho&&0!==(1&t.mode)&&0===(128&t.flags))bo(),wo(),t.flags|=98560,r=!1;else if(r=Co(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(o(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(o(317));r[Cn]=t}else wo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ja(t),r=!1}else null!==po&&(pc(po),po=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ar.current)?0===Vl&&(Vl=3):Sc())),null!==t.updateQueue&&(t.flags|=4),Ja(t),null);case 4:return nr(),za(e,t),null===e&&Ys(t.stateNode.containerInfo),Ja(t),null;case 10:return No(t.type._context),Ja(t),null;case 19:if(Ln(ar),null===(r=t.memoizedState))return Ja(t),null;if(s=0!==(128&t.flags),null===(l=r.rendering))if(s)Xa(r,!1);else{if(0!==Vl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lr(e))){for(t.flags|=128,Xa(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;null!==i;)e=s,(r=i).flags&=14680066,null===(l=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,e=l.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Pn(ar,1&ar.current|2),t.child}e=e.sibling}null!==r.tail&&Qe()>Zl&&(t.flags|=128,s=!0,Xa(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=lr(l))){if(t.flags|=128,s=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),Xa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!uo)return Ja(t),null}else 2*Qe()-r.renderingStartTime>Zl&&1073741824!==i&&(t.flags|=128,s=!0,Xa(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=r.last)?i.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Qe(),t.sibling=null,i=ar.current,Pn(ar,s?1&i|2:1&i),t):(Ja(t),null);case 22:case 23:return yc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&zl)&&(Ja(t),6&t.subtreeFlags&&(t.flags|=8192)):Ja(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function tl(e,t){switch(lo(t),t.tag){case 1:return zn(t.type)&&jn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nr(),Ln(On),Ln(Nn),hr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return rr(t),null;case 13:if(Ln(ar),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));wo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ln(ar),null;case 4:return nr(),null;case 10:return No(t.type._context),null;case 22:case 23:return yc(),null;default:return null}}Ga=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},za=function(){},ja=function(e,t,i,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,ir(Jo.current);var o,r=null;switch(i){case"input":n=Z(e,n),s=Z(e,s),r=[];break;case"select":n=B({},n,{value:void 0}),s=B({},s,{value:void 0}),r=[];break;case"textarea":n=se(e,n),s=se(e,s),r=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=rn)}for(h in ye(i,s),i=null,n)if(!s.hasOwnProperty(h)&&n.hasOwnProperty(h)&&null!=n[h])if("style"===h){var l=n[h];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in s){var c=s[h];if(l=null!=n?n[h]:void 0,s.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(i||(i={}),i[o]=c[o])}else i||(r||(r=[]),r.push(h,i)),i=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(r=r||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(r=r||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Us("scroll",e),r||l===c||(r=[])):(r=r||[]).push(h,c))}i&&(r=r||[]).push("style",i);var h=r;(t.updateQueue=h)&&(t.flags|=4)}},Va=function(e,t,i,s){i!==s&&(t.flags|=4)};var il=!1,sl=!1,nl="function"===typeof WeakSet?WeakSet:Set,ol=null;function rl(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(ei){Tc(e,t,ei)}else i.current=null}function al(e,t,i){try{i()}catch(ei){Tc(e,t,ei)}}var ll=!1;function cl(e,t,i){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,void 0!==o&&al(t,i,o)}n=n.next}while(n!==s)}}function hl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function dl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Cn],delete t[bn],delete t[Sn],delete t[xn],delete t[Mn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pl(e){return 5===e.tag||3===e.tag||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,i){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=rn));else if(4!==s&&null!==(e=e.child))for(ml(e,t,i),e=e.sibling;null!==e;)ml(e,t,i),e=e.sibling}function fl(e,t,i){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==s&&null!==(e=e.child))for(fl(e,t,i),e=e.sibling;null!==e;)fl(e,t,i),e=e.sibling}var vl=null,yl=!1;function Cl(e,t,i){for(i=i.child;null!==i;)bl(e,t,i),i=i.sibling}function bl(e,t,i){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(nt,i)}catch(ai){}switch(i.tag){case 5:sl||rl(i,t);case 6:var s=vl,n=yl;vl=null,Cl(e,t,i),yl=n,null!==(vl=s)&&(yl?(e=vl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):vl.removeChild(i.stateNode));break;case 18:null!==vl&&(yl?(e=vl,i=i.stateNode,8===e.nodeType?mn(e.parentNode,i):1===e.nodeType&&mn(e,i),Ht(e)):mn(vl,i.stateNode));break;case 4:s=vl,n=yl,vl=i.stateNode.containerInfo,yl=!0,Cl(e,t,i),vl=s,yl=n;break;case 0:case 11:case 14:case 15:if(!sl&&(null!==(s=i.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var o=n,r=o.destroy;o=o.tag,void 0!==r&&(0!==(2&o)||0!==(4&o))&&al(i,t,r),n=n.next}while(n!==s)}Cl(e,t,i);break;case 1:if(!sl&&(rl(i,t),"function"===typeof(s=i.stateNode).componentWillUnmount))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(ai){Tc(i,t,ai)}Cl(e,t,i);break;case 21:Cl(e,t,i);break;case 22:1&i.mode?(sl=(s=sl)||null!==i.memoizedState,Cl(e,t,i),sl=s):Cl(e,t,i);break;default:Cl(e,t,i)}}function wl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new nl),t.forEach((function(t){var s=Nc.bind(null,e,t);i.has(t)||(i.add(t),t.then(s,s))}))}}function Sl(e,t){var i=t.deletions;if(null!==i)for(var s=0;s<i.length;s++){var n=i[s];try{var r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:vl=l.stateNode,yl=!1;break e;case 3:case 4:vl=l.stateNode.containerInfo,yl=!0;break e}l=l.return}if(null===vl)throw Error(o(160));bl(r,a,n),vl=null,yl=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(h){Tc(n,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sl(t,e),Ml(e),4&s){try{cl(3,e,e.return),hl(3,e)}catch(f){Tc(e,e.return,f)}try{cl(5,e,e.return)}catch(f){Tc(e,e.return,f)}}break;case 1:Sl(t,e),Ml(e),512&s&&null!==i&&rl(i,i.return);break;case 5:if(Sl(t,e),Ml(e),512&s&&null!==i&&rl(i,i.return),32&e.flags){var n=e.stateNode;try{ue(n,"")}catch(f){Tc(e,e.return,f)}}if(4&s&&null!=(n=e.stateNode)){var r=e.memoizedProps,a=null!==i?i.memoizedProps:r,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===r.type&&null!=r.name&&Q(n,r),Ce(l,a);var h=Ce(l,r);for(a=0;a<c.length;a+=2){var d=c[a],u=c[a+1];"style"===d?fe(n,u):"dangerouslySetInnerHTML"===d?de(n,u):"children"===d?ue(n,u):C(n,d,u,h)}switch(l){case"input":X(n,r);break;case"textarea":oe(n,r);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var g=r.value;null!=g?ie(n,!!r.multiple,g,!1):p!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}n[bn]=r}catch(f){Tc(e,e.return,f)}}break;case 6:if(Sl(t,e),Ml(e),4&s){if(null===e.stateNode)throw Error(o(162));n=e.stateNode,r=e.memoizedProps;try{n.nodeValue=r}catch(f){Tc(e,e.return,f)}}break;case 3:if(Sl(t,e),Ml(e),4&s&&null!==i&&i.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(f){Tc(e,e.return,f)}break;case 4:default:Sl(t,e),Ml(e);break;case 13:Sl(t,e),Ml(e),8192&(n=e.child).flags&&(r=null!==n.memoizedState,n.stateNode.isHidden=r,!r||null!==n.alternate&&null!==n.alternate.memoizedState||(Yl=Qe())),4&s&&wl(e);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&e.mode?(sl=(h=sl)||d,Sl(t,e),sl=h):Sl(t,e),Ml(e),8192&s){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!d&&0!==(1&e.mode))for(ol=e,d=e.child;null!==d;){for(u=ol=d;null!==ol;){switch(g=(p=ol).child,p.tag){case 0:case 11:case 14:case 15:cl(4,p,p.return);break;case 1:rl(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){s=p,i=p.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(f){Tc(s,i,f)}}break;case 5:rl(p,p.return);break;case 22:if(null!==p.memoizedState){Il(u);continue}}null!==g?(g.return=p,ol=g):Il(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{n=u.stateNode,h?"function"===typeof(r=n.style).setProperty?r.setProperty("display","none","important"):r.display="none":(l=u.stateNode,a=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(f){Tc(e,e.return,f)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(f){Tc(e,e.return,f)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Sl(t,e),Ml(e),4&s&&wl(e);case 21:}}function Ml(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(pl(i)){var s=i;break e}i=i.return}throw Error(o(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(ue(n,""),s.flags&=-33),fl(e,gl(e),n);break;case 3:case 4:var r=s.stateNode.containerInfo;ml(e,gl(e),r);break;default:throw Error(o(161))}}catch(yi){Tc(e,e.return,yi)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e,t,i){ol=e,Rl(e,t,i)}function Rl(e,t,i){for(var s=0!==(1&e.mode);null!==ol;){var n=ol,o=n.child;if(22===n.tag&&s){var r=null!==n.memoizedState||il;if(!r){var a=n.alternate,l=null!==a&&null!==a.memoizedState||sl;a=il;var c=sl;if(il=r,(sl=l)&&!c)for(ol=n;null!==ol;)l=(r=ol).child,22===r.tag&&null!==r.memoizedState?Al(n):null!==l?(l.return=r,ol=l):Al(n);for(;null!==o;)ol=o,Rl(o,t,i),o=o.sibling;ol=n,il=a,sl=c}El(e)}else 0!==(8772&n.subtreeFlags)&&null!==o?(o.return=n,ol=o):El(e)}}function El(e){for(;null!==ol;){var t=ol;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sl||hl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!sl)if(null===i)s.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:ca(t.type,i.memoizedProps);s.componentDidUpdate(n,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&Qo(t,r,s);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Qo(t,a,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var d=h.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&Ht(u)}}}break;default:throw Error(o(163))}sl||512&t.flags&&dl(t)}catch(Qt){Tc(t,t.return,Qt)}}if(t===e){ol=null;break}if(null!==(i=t.sibling)){i.return=t.return,ol=i;break}ol=t.return}}function Il(e){for(;null!==ol;){var t=ol;if(t===e){ol=null;break}var i=t.sibling;if(null!==i){i.return=t.return,ol=i;break}ol=t.return}}function Al(e){for(;null!==ol;){var t=ol;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{hl(4,t)}catch(yi){Tc(t,i,yi)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(yi){Tc(t,n,yi)}}var o=t.return;try{dl(t)}catch(yi){Tc(t,o,yi)}break;case 5:var r=t.return;try{dl(t)}catch(yi){Tc(t,r,yi)}}}catch(yi){Tc(t,t.return,yi)}if(t===e){ol=null;break}var a=t.sibling;if(null!==a){a.return=t.return,ol=a;break}ol=t.return}}var kl,Tl=Math.ceil,Ll=b.ReactCurrentDispatcher,Pl=b.ReactCurrentOwner,Fl=b.ReactCurrentBatchConfig,Nl=0,Ol=null,Bl=null,Gl=0,zl=0,jl=Tn(0),Vl=0,Hl=null,Wl=0,_l=0,Ul=0,$l=null,Kl=null,Yl=0,Zl=1/0,ql=null,Ql=!1,Xl=null,Jl=null,ec=!1,tc=null,ic=0,sc=0,nc=null,oc=-1,rc=0;function ac(){return 0!==(6&Nl)?Qe():-1!==oc?oc:oc=Qe()}function lc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Gl?Gl&-Gl:null!==xo.transition?(0===rc&&(rc=mt()),rc):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:qt(e.type)}function cc(e,t,i,s){if(50<sc)throw sc=0,nc=null,Error(o(185));vt(e,i,s),0!==(2&Nl)&&e===Ol||(e===Ol&&(0===(2&Nl)&&(_l|=i),4===Vl&&gc(e,Gl)),hc(e,s),1===i&&0===Nl&&0===(1&t.mode)&&(Zl=Qe()+500,$n&&Zn()))}function hc(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var r=31-rt(o),a=1<<r,l=n[r];-1===l?0!==(a&i)&&0===(a&s)||(n[r]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var s=ut(e,e===Ol?Gl:0);if(0===s)null!==i&&Ye(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=i&&Ye(i),1===t)0===e.tag?function(e){$n=!0,Yn(e)}(mc.bind(null,e)):Yn(mc.bind(null,e)),pn((function(){0===(6&Nl)&&Zn()})),i=null;else{switch(bt(s)){case 1:i=Je;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=st}i=Oc(i,dc.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function dc(e,t){if(oc=-1,rc=0,0!==(6&Nl))throw Error(o(327));var i=e.callbackNode;if(Ac()&&e.callbackNode!==i)return null;var s=ut(e,e===Ol?Gl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=xc(e,s);else{t=s;var n=Nl;Nl|=2;var r=wc();for(Ol===e&&Gl===t||(ql=null,Zl=Qe()+500,Cc(e,t));;)try{Dc();break}catch(ai){bc(e,ai)}Fo(),Ll.current=r,Nl=n,null!==Bl?t=0:(Ol=null,Gl=0,t=Vl)}if(0!==t){if(2===t&&(0!==(n=gt(e))&&(s=n,t=uc(e,n))),1===t)throw i=Hl,Cc(e,0),gc(e,s),hc(e,Qe()),i;if(6===t)gc(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var s=0;s<i.length;s++){var n=i[s],o=n.getSnapshot;n=n.value;try{if(!ps(o(),n))return!1}catch(a){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,s))&&(0!==(r=gt(e))&&(s=r,t=uc(e,r))),1===t))throw i=Hl,Cc(e,0),gc(e,s),hc(e,Qe()),i;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ic(e,Kl,ql);break;case 3:if(gc(e,s),(130023424&s)===s&&10<(t=Yl+500-Qe())){if(0!==ut(e,0))break;if(((n=e.suspendedLanes)&s)!==s){ac(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=hn(Ic.bind(null,e,Kl,ql),t);break}Ic(e,Kl,ql);break;case 4:if(gc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var a=31-rt(s);r=1<<a,(a=t[a])>n&&(n=a),s&=~r}if(s=n,10<(s=(120>(s=Qe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Tl(s/1960))-s)){e.timeoutHandle=hn(Ic.bind(null,e,Kl,ql),s);break}Ic(e,Kl,ql);break;default:throw Error(o(329))}}}return hc(e,Qe()),e.callbackNode===i?dc.bind(null,e):null}function uc(e,t){var i=$l;return e.current.memoizedState.isDehydrated&&(Cc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=Kl,Kl=i,null!==t&&pc(t)),e}function pc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function gc(e,t){for(t&=~Ul,t&=~_l,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-rt(t),s=1<<i;e[i]=-1,t&=~s}}function mc(e){if(0!==(6&Nl))throw Error(o(327));Ac();var t=ut(e,0);if(0===(1&t))return hc(e,Qe()),null;var i=xc(e,t);if(0!==e.tag&&2===i){var s=gt(e);0!==s&&(t=s,i=uc(e,s))}if(1===i)throw i=Hl,Cc(e,0),gc(e,t),hc(e,Qe()),i;if(6===i)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,Kl,ql),hc(e,Qe()),null}function fc(e,t){var i=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=i)&&(Zl=Qe()+500,$n&&Zn())}}function vc(e){null!==tc&&0===tc.tag&&0===(6&Nl)&&Ac();var t=Nl;Nl|=1;var i=Fl.transition,s=Ct;try{if(Fl.transition=null,Ct=1,e)return e()}finally{Ct=s,Fl.transition=i,0===(6&(Nl=t))&&Zn()}}function yc(){zl=jl.current,Ln(jl)}function Cc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,dn(i)),null!==Bl)for(i=Bl.return;null!==i;){var s=i;switch(lo(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&jn();break;case 3:nr(),Ln(On),Ln(Nn),hr();break;case 5:rr(s);break;case 4:nr();break;case 13:case 19:Ln(ar);break;case 10:No(s.type._context);break;case 22:case 23:yc()}i=i.return}if(Ol=e,Bl=e=jc(e.current,null),Gl=zl=t,Vl=0,Hl=null,Ul=_l=Wl=0,Kl=$l=null,null!==zo){for(t=0;t<zo.length;t++)if(null!==(s=(i=zo[t]).interleaved)){i.interleaved=null;var n=s.next,o=i.pending;if(null!==o){var r=o.next;o.next=n,s.next=r}i.pending=s}zo=null}return e}function bc(e,t){for(;;){var i=Bl;try{if(Fo(),dr.current=oa,vr){for(var s=gr.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}vr=!1}if(pr=0,fr=mr=gr=null,yr=!1,Cr=0,Pl.current=null,null===i||null===i.return){Vl=1,Hl=t,Bl=null;break}e:{var r=e,a=i.return,l=i,c=t;if(t=Gl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,d=l,u=d.tag;if(0===(1&d.mode)&&(0===u||11===u||15===u)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=xa(a);if(null!==g){g.flags&=-257,Ma(g,a,l,0,t),1&g.mode&&Sa(r,h,t),c=h;var m=(t=g).updateQueue;if(null===m){var f=new Set;f.add(c),t.updateQueue=f}else m.add(c);break e}if(0===(1&t)){Sa(r,h,t),Sc();break e}c=Error(o(426))}else if(uo&&1&l.mode){var v=xa(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ma(v,a,l,0,t),So(fa(c,l));break e}}r=c=fa(c,l),4!==Vl&&(Vl=2),null===$l?$l=[r]:$l.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,Zo(r,ba(0,c,t));break e;case 1:l=c;var y=r.type,C=r.stateNode;if(0===(128&r.flags)&&("function"===typeof y.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Jl||!Jl.has(C)))){r.flags|=65536,t&=-t,r.lanes|=t,Zo(r,wa(r,l,t));break e}}r=r.return}while(null!==r)}Ec(i)}catch(b){t=b,Bl===i&&null!==i&&(Bl=i=i.return);continue}break}}function wc(){var e=Ll.current;return Ll.current=oa,null===e?oa:e}function Sc(){0!==Vl&&3!==Vl&&2!==Vl||(Vl=4),null===Ol||0===(268435455&Wl)&&0===(268435455&_l)||gc(Ol,Gl)}function xc(e,t){var i=Nl;Nl|=2;var s=wc();for(Ol===e&&Gl===t||(ql=null,Cc(e,t));;)try{Mc();break}catch(n){bc(e,n)}if(Fo(),Nl=i,Ll.current=s,null!==Bl)throw Error(o(261));return Ol=null,Gl=0,Vl}function Mc(){for(;null!==Bl;)Rc(Bl)}function Dc(){for(;null!==Bl&&!Ze();)Rc(Bl)}function Rc(e){var t=kl(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?Ec(e):Bl=t,Pl.current=null}function Ec(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=el(i,t,zl)))return void(Bl=i)}else{if(null!==(i=tl(i,t)))return i.flags&=32767,void(Bl=i);if(null===e)return Vl=6,void(Bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bl=t);Bl=t=e}while(null!==t);0===Vl&&(Vl=5)}function Ic(e,t,i){var s=Ct,n=Fl.transition;try{Fl.transition=null,Ct=1,function(e,t,i,s){do{Ac()}while(null!==tc);if(0!==(6&Nl))throw Error(o(327));i=e.finishedWork;var n=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var r=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-rt(i),o=1<<n;t[n]=0,s[n]=-1,e[n]=-1,i&=~o}}(e,r),e===Ol&&(Bl=Ol=null,Gl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||ec||(ec=!0,Oc(tt,(function(){return Ac(),null}))),r=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||r){r=Fl.transition,Fl.transition=null;var a=Ct;Ct=1;var l=Nl;Nl|=4,Pl.current=null,function(e,t){if(an=_t,Cs(e=ys())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(s&&0!==s.rangeCount){i=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{i.nodeType,r.nodeType}catch(w){i=null;break e}var a=0,l=-1,c=-1,h=0,d=0,u=e,p=null;t:for(;;){for(var g;u!==i||0!==n&&3!==u.nodeType||(l=a+n),u!==r||0!==s&&3!==u.nodeType||(c=a+s),3===u.nodeType&&(a+=u.nodeValue.length),null!==(g=u.firstChild);)p=u,u=g;for(;;){if(u===e)break t;if(p===i&&++h===n&&(l=a),p===r&&++d===s&&(c=a),null!==(g=u.nextSibling))break;p=(u=p).parentNode}u=g}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(ln={focusedElem:e,selectionRange:i},_t=!1,ol=t;null!==ol;)if(e=(t=ol).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,ol=e;else for(;null!==ol;){t=ol;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var f=m.memoizedProps,v=m.memoizedState,y=t.stateNode,C=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:ca(t.type,f),v);y.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Tc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,ol=e;break}ol=t.return}m=ll,ll=!1}(e,i),xl(i,e),bs(ln),_t=!!an,ln=an=null,e.current=i,Dl(i,e,n),qe(),Nl=l,Ct=a,Fl.transition=r}else e.current=i;if(ec&&(ec=!1,tc=e,ic=n),r=e.pendingLanes,0===r&&(Jl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),hc(e,Qe()),null!==t)for(s=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],s(n.value,{componentStack:n.stack,digest:n.digest});if(Ql)throw Ql=!1,e=Xl,Xl=null,e;0!==(1&ic)&&0!==e.tag&&Ac(),r=e.pendingLanes,0!==(1&r)?e===nc?sc++:(sc=0,nc=e):sc=0,Zn()}(e,t,i,s)}finally{Fl.transition=n,Ct=s}return null}function Ac(){if(null!==tc){var e=bt(ic),t=Fl.transition,i=Ct;try{if(Fl.transition=null,Ct=16>e?16:e,null===tc)var s=!1;else{if(e=tc,tc=null,ic=0,0!==(6&Nl))throw Error(o(331));var n=Nl;for(Nl|=4,ol=e.current;null!==ol;){var r=ol,a=r.child;if(0!==(16&ol.flags)){var l=r.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for(ol=h;null!==ol;){var d=ol;switch(d.tag){case 0:case 11:case 15:cl(8,d,r)}var u=d.child;if(null!==u)u.return=d,ol=u;else for(;null!==ol;){var p=(d=ol).sibling,g=d.return;if(ul(d),d===h){ol=null;break}if(null!==p){p.return=g,ol=p;break}ol=g}}}var m=r.alternate;if(null!==m){var f=m.child;if(null!==f){m.child=null;do{var v=f.sibling;f.sibling=null,f=v}while(null!==f)}}ol=r}}if(0!==(2064&r.subtreeFlags)&&null!==a)a.return=r,ol=a;else e:for(;null!==ol;){if(0!==(2048&(r=ol).flags))switch(r.tag){case 0:case 11:case 15:cl(9,r,r.return)}var y=r.sibling;if(null!==y){y.return=r.return,ol=y;break e}ol=r.return}}var C=e.current;for(ol=C;null!==ol;){var b=(a=ol).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,ol=b;else e:for(a=C;null!==ol;){if(0!==(2048&(l=ol).flags))try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(S){Tc(l,l.return,S)}if(l===a){ol=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ol=w;break e}ol=l.return}}if(Nl=n,Zn(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(nt,e)}catch(S){}s=!0}return s}finally{Ct=i,Fl.transition=t}}return!1}function kc(e,t,i){e=Ko(e,t=ba(0,t=fa(i,t),1),1),t=ac(),null!==e&&(vt(e,1,t),hc(e,t))}function Tc(e,t,i){if(3===e.tag)kc(e,e,i);else for(;null!==t;){if(3===t.tag){kc(t,e,i);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Jl||!Jl.has(s))){t=Ko(t,e=wa(t,e=fa(i,e),1),1),e=ac(),null!==t&&(vt(t,1,e),hc(t,e));break}}t=t.return}}function Lc(e,t,i){var s=e.pingCache;null!==s&&s.delete(t),t=ac(),e.pingedLanes|=e.suspendedLanes&i,Ol===e&&(Gl&i)===i&&(4===Vl||3===Vl&&(130023424&Gl)===Gl&&500>Qe()-Yl?Cc(e,0):Ul|=i),hc(e,t)}function Pc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var i=ac();null!==(e=Ho(e,t))&&(vt(e,t,i),hc(e,i))}function Fc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Pc(e,i)}function Nc(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(o(314))}null!==s&&s.delete(t),Pc(e,i)}function Oc(e,t){return Ke(e,t)}function Bc(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gc(e,t,i,s){return new Bc(e,t,i,s)}function zc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jc(e,t){var i=e.alternate;return null===i?((i=Gc(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Vc(e,t,i,s,n,r){var a=2;if(s=e,"function"===typeof e)zc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return Hc(i.children,n,r,t);case M:a=8,n|=8;break;case D:return(e=Gc(12,i,t,2|n)).elementType=D,e.lanes=r,e;case A:return(e=Gc(13,i,t,n)).elementType=A,e.lanes=r,e;case k:return(e=Gc(19,i,t,n)).elementType=k,e.lanes=r,e;case P:return Wc(i,n,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case R:a=10;break e;case E:a=9;break e;case I:a=11;break e;case T:a=14;break e;case L:a=16,s=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Gc(a,i,t,n)).elementType=e,t.type=s,t.lanes=r,t}function Hc(e,t,i,s){return(e=Gc(7,e,s,t)).lanes=i,e}function Wc(e,t,i,s){return(e=Gc(22,e,s,t)).elementType=P,e.lanes=i,e.stateNode={isHidden:!1},e}function _c(e,t,i){return(e=Gc(6,e,null,t)).lanes=i,e}function Uc(e,t,i){return(t=Gc(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,i,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Kc(e,t,i,s,n,o,r,a,l){return e=new $c(e,t,i,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Gc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},_o(o),e}function Yc(e){if(!e)return Fn;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var i=e.type;if(zn(i))return Hn(e,i,t)}return t}function Zc(e,t,i,s,n,o,r,a,l){return(e=Kc(i,s,!0,e,0,o,0,a,l)).context=Yc(null),i=e.current,(o=$o(s=ac(),n=lc(i))).callback=void 0!==t&&null!==t?t:null,Ko(i,o,n),e.current.lanes=n,vt(e,n,s),hc(e,s),e}function qc(e,t,i,s){var n=t.current,o=ac(),r=lc(n);return i=Yc(i),null===t.context?t.context=i:t.pendingContext=i,(t=$o(o,r)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ko(n,t,r))&&(cc(e,n,r,o),Yo(e,n,r)),r}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Jc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}kl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||On.current)Ra=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return Ra=!1,function(e,t,i){switch(t.tag){case 3:Oa(t),wo();break;case 5:or(t);break;case 1:zn(t.type)&&Wn(t);break;case 4:sr(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Pn(ko,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Pn(ar,1&ar.current),t.flags|=128,null):0!==(i&t.child.childLanes)?_a(e,t,i):(Pn(ar,1&ar.current),null!==(e=Qa(e,t,i))?e.sibling:null);Pn(ar,1&ar.current);break;case 19:if(s=0!==(i&t.childLanes),0!==(128&e.flags)){if(s)return Za(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Pn(ar,ar.current),s)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,i)}return Qa(e,t,i)}(e,t,i);Ra=0!==(131072&e.flags)}else Ra=!1,uo&&0!==(1048576&t.flags)&&ro(t,Jn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;qa(e,t),e=t.pendingProps;var n=Gn(t,Nn.current);Bo(t,i),n=xr(null,t,s,e,n,i);var r=Mr();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zn(s)?(r=!0,Wn(t)):r=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,_o(t),n.updater=da,t.stateNode=n,n._reactInternals=t,ma(t,s,e,i),t=Na(null,t,s,!0,r,i)):(t.tag=0,uo&&r&&ao(t),Ea(null,t,n,i),t=t.child),t;case 16:s=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return zc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===T)return 14}return 2}(s),e=ca(s,e),n){case 0:t=Pa(null,t,s,e,i);break e;case 1:t=Fa(null,t,s,e,i);break e;case 11:t=Ia(null,t,s,e,i);break e;case 14:t=Aa(null,t,s,ca(s.type,e),i);break e}throw Error(o(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,Pa(e,t,s,n=t.elementType===s?n:ca(s,n),i);case 1:return s=t.type,n=t.pendingProps,Fa(e,t,s,n=t.elementType===s?n:ca(s,n),i);case 3:e:{if(Oa(t),null===e)throw Error(o(387));s=t.pendingProps,n=(r=t.memoizedState).element,Uo(e,t),qo(t,s,null,i);var a=t.memoizedState;if(s=a.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ba(e,t,s,i,n=fa(Error(o(423)),t));break e}if(s!==n){t=Ba(e,t,s,i,n=fa(Error(o(424)),t));break e}for(ho=fn(t.stateNode.containerInfo.firstChild),co=t,uo=!0,po=null,i=Ao(t,null,s,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(wo(),s===n){t=Qa(e,t,i);break e}Ea(e,t,s,i)}t=t.child}return t;case 5:return or(t),null===e&&vo(t),s=t.type,n=t.pendingProps,r=null!==e?e.memoizedProps:null,a=n.children,cn(s,n)?a=null:null!==r&&cn(s,r)&&(t.flags|=32),La(e,t),Ea(e,t,a,i),t.child;case 6:return null===e&&vo(t),null;case 13:return _a(e,t,i);case 4:return sr(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=Io(t,null,s,i):Ea(e,t,s,i),t.child;case 11:return s=t.type,n=t.pendingProps,Ia(e,t,s,n=t.elementType===s?n:ca(s,n),i);case 7:return Ea(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,r=t.memoizedProps,a=n.value,Pn(ko,s._currentValue),s._currentValue=a,null!==r)if(ps(r.value,a)){if(r.children===n.children&&!On.current){t=Qa(e,t,i);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var l=r.dependencies;if(null!==l){a=r.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===r.tag){(c=$o(-1,i&-i)).tag=2;var h=r.updateQueue;if(null!==h){var d=(h=h.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}r.lanes|=i,null!==(c=r.alternate)&&(c.lanes|=i),Oo(r.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===r.tag)a=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(a=r.return))throw Error(o(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Oo(a,i,t),a=r.sibling}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===t){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}Ea(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Bo(t,i),s=s(n=Go(n)),t.flags|=1,Ea(e,t,s,i),t.child;case 14:return n=ca(s=t.type,t.pendingProps),Aa(e,t,s,n=ca(s.type,n),i);case 15:return ka(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ca(s,n),qa(e,t),t.tag=1,zn(s)?(e=!0,Wn(t)):e=!1,Bo(t,i),pa(t,s,n),ma(t,s,n,i),Na(null,t,s,!0,e,i);case 19:return Za(e,t,i);case 22:return Ta(e,t,i)}throw Error(o(156,t.tag))};var eh="function"===typeof reportError?reportError:function(e){console.error(e)};function th(e){this._internalRoot=e}function ih(e){this._internalRoot=e}function sh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oh(){}function rh(e,t,i,s,n){var o=i._reactRootContainer;if(o){var r=o;if("function"===typeof n){var a=n;n=function(){var e=Qc(r);a.call(e)}}qc(t,r,e,n)}else r=function(e,t,i,s,n){if(n){if("function"===typeof s){var o=s;s=function(){var e=Qc(r);o.call(e)}}var r=Zc(t,s,e,0,null,!1,0,"",oh);return e._reactRootContainer=r,e[wn]=r.current,Ys(8===e.nodeType?e.parentNode:e),vc(),r}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var a=s;s=function(){var e=Qc(l);a.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",oh);return e._reactRootContainer=l,e[wn]=l.current,Ys(8===e.nodeType?e.parentNode:e),vc((function(){qc(t,l,i,s)})),l}(i,t,e,n,s);return Qc(r)}ih.prototype.render=th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));qc(e,t,null,null)},ih.prototype.unmount=th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;vc((function(){qc(null,e,null,null)})),t[wn]=null}},ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Pt.length&&0!==t&&t<Pt[i].priority;i++);Pt.splice(i,0,e),0===i&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=dt(t.pendingLanes);0!==i&&(yt(t,1|i),hc(t,Qe()),0===(6&Nl)&&(Zl=Qe()+500,Zn()))}break;case 13:vc((function(){var t=Ho(e,1);if(null!==t){var i=ac();cc(t,e,1,i)}})),Jc(e,1)}},St=function(e){if(13===e.tag){var t=Ho(e,134217728);if(null!==t)cc(t,e,134217728,ac());Jc(e,134217728)}},xt=function(e){if(13===e.tag){var t=lc(e),i=Ho(e,t);if(null!==i)cc(i,e,t,ac());Jc(e,t)}},Mt=function(){return Ct},Dt=function(e,t){var i=Ct;try{return Ct=e,t()}finally{Ct=i}},Se=function(e,t,i){switch(t){case"input":if(X(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var n=In(s);if(!n)throw Error(o(90));K(s),X(s,n)}}}break;case"textarea":oe(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Ie=fc,Ae=vc;var ah={usingClientEntryPoint:!1,Events:[Rn,En,In,Re,Ee,fc]},lh={findFiberByHostInstance:Dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ch={bundleType:lh.bundleType,version:lh.version,rendererPackageName:lh.rendererPackageName,rendererConfig:lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ue(e))?null:e.stateNode},findFiberByHostInstance:lh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{nt=hh.inject(ch),ot=hh}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ah,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!sh(t))throw Error(o(200));return function(e,t,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==s?null:""+s,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!sh(e))throw Error(o(299));var i=!1,s="",n=eh;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Kc(e,1,!1,null,0,i,0,s,n),e[wn]=t.current,Ys(8===e.nodeType?e.parentNode:e),new th(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ue(t))?null:e.stateNode},t.flushSync=function(e){return vc(e)},t.hydrate=function(e,t,i){if(!nh(t))throw Error(o(200));return rh(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!sh(e))throw Error(o(405));var s=null!=i&&i.hydratedSources||null,n=!1,r="",a=eh;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(n=!0),void 0!==i.identifierPrefix&&(r=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=Zc(t,null,e,1,null!=i?i:null,n,0,r,a),e[wn]=t.current,Ys(e),s)for(e=0;e<s.length;e++)n=(n=(i=s[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new ih(t)},t.render=function(e,t,i){if(!nh(t))throw Error(o(200));return rh(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!nh(e))throw Error(o(40));return!!e._reactRootContainer&&(vc((function(){rh(null,null,e,!1,(function(){e._reactRootContainer=null,e[wn]=null}))})),!0)},t.unstable_batchedUpdates=fc,t.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!nh(i))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rh(e,t,i,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,i)=>{var s=i(950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},950:(e,t,i)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(730)},153:(e,t,i)=>{var s=i(43),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var s,o={},c=null,h=null;for(s in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)r.call(t,s)&&!l.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===o[s]&&(o[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:h,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{var i=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,f={};function v(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||g}function y(){}function C(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||g}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=C.prototype=new y;b.constructor=C,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,s){var n,o={},r=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(r=""+t.key),t)S.call(t,n)&&!M.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=s;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:i,type:e,key:r,ref:a,props:o,_owner:x.current}}function R(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,o,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return r=r(l=e),e=""===o?"."+I(l,0):o,w(r)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),A(r,t,n,"",(function(e){return e}))):null!=r&&(R(r)&&(r=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(E,"$&/")+"/")+e)),t.push(r)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var h=o+I(a=e[c],c);l+=A(a,t,n,h,r)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,n,h=o+I(a,c++),r);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function k(e,t,i){if(null==e)return e;var s=[],n=0;return A(e,s,"","",(function(e){return t.call(i,e,n++)})),s}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null},F={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};function N(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:k,forEach:function(e,t,i){k(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!R(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=n,t.Profiler=r,t.PureComponent=C,t.StrictMode=o,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=N,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=m({},e.props),o=e.key,r=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!M.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:i,type:e.type,key:o,ref:r,props:n,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=R,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=N,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,i){return L.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,i){return L.current.useReducer(e,t,i)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return L.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},43:(e,t,i)=>{e.exports=i(202)},579:(e,t,i)=>{e.exports=i(153)},234:(e,t)=>{function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var s=i-1>>>1,n=e[s];if(!(0<o(n,t)))break e;e[s]=t,e[i]=n,i=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var s=0,n=e.length,r=n>>>1;s<r;){var a=2*(s+1)-1,l=e[a],c=a+1,h=e[c];if(0>o(l,i))c<n&&0>o(h,l)?(e[s]=h,e[c]=i,s=c):(e[s]=l,e[a]=i,s=a);else{if(!(c<n&&0>o(h,i)))break e;e[s]=h,e[c]=i,s=c}}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],d=1,u=null,p=3,g=!1,m=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,C="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(h);null!==t;){if(null===t.callback)n(h);else{if(!(t.startTime<=e))break;n(h),t.sortIndex=t.expirationTime,i(c,t)}t=s(h)}}function w(e){if(f=!1,b(e),!m)if(null!==s(c))m=!0,P(S);else{var t=s(h);null!==t&&F(w,t.startTime-e)}}function S(e,i){m=!1,f&&(f=!1,y(R),R=-1),g=!0;var o=p;try{for(b(i),u=s(c);null!==u&&(!(u.expirationTime>i)||e&&!A());){var r=u.callback;if("function"===typeof r){u.callback=null,p=u.priorityLevel;var a=r(u.expirationTime<=i);i=t.unstable_now(),"function"===typeof a?u.callback=a:u===s(c)&&n(c),b(i)}else n(c);u=s(c)}if(null!==u)var l=!0;else{var d=s(h);null!==d&&F(w,d.startTime-i),l=!1}return l}finally{u=null,p=o,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,M=!1,D=null,R=-1,E=5,I=-1;function A(){return!(t.unstable_now()-I<E)}function k(){if(null!==D){var e=t.unstable_now();I=e;var i=!0;try{i=D(!0,e)}finally{i?x():(M=!1,D=null)}}else M=!1}if("function"===typeof C)x=function(){C(k)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,L=T.port2;T.port1.onmessage=k,x=function(){L.postMessage(null)}}else x=function(){v(k,0)};function P(e){D=e,M||(M=!0,x())}function F(e,i){R=v((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,o){var r=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?r+o:r:o=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:n,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>r?(e.sortIndex=o,i(h,e),null===s(c)&&e===s(h)&&(f?(y(R),R=-1):f=!0,F(w,o-r))):(e.sortIndex=a,i(c,e),m||g||(m=!0,P(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},853:(e,t,i)=>{e.exports=i(234)}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(s,n){if(1&n&&(s=this(s)),8&n)return s;if("object"===typeof s&&s){if(4&n&&s.__esModule)return s;if(16&n&&"function"===typeof s.then)return s}var o=Object.create(null);i.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&s;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>r[e]=()=>s[e]));return r.default=()=>s,i.d(o,r),o}})(),i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};i.r(s),i.d(s,{hasBrowserEnv:()=>an,hasStandardBrowserEnv:()=>cn,hasStandardBrowserWebWorkerEnv:()=>hn,navigator:()=>ln,origin:()=>dn});var n,o=i(43),r=i.t(o,2),a=i(391),l=i(950),c=i.t(l,2);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,i,s){return void 0===i&&(i=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:i,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function v(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function y(e,t,i,s){void 0===s&&(s={});let{window:o=document.defaultView,v5Compat:r=!1}=s,a=o.history,l=n.Pop,c=null,p=v();function v(){return(a.state||{idx:null}).idx}function y(){l=n.Pop;let e=v(),t=null==e?null:e-p;p=e,c&&c({action:l,location:b.location,delta:t})}function C(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,i="string"===typeof e?e:f(e);return i=i.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+i),new URL(i,t)}null==p&&(p=0,a.replaceState(h({},a.state,{idx:p}),""));let b={get action(){return l},get location(){return e(o,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(d,y),c=e,()=>{o.removeEventListener(d,y),c=null}},createHref:e=>t(o,e),createURL:C,encodeLocation(e){let t=C(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=n.Push;let s=m(b.location,e,t);i&&i(s,e),p=v()+1;let h=g(s,p),d=b.createHref(s);try{a.pushState(h,"",d)}catch(Ey){if(Ey instanceof DOMException&&"DataCloneError"===Ey.name)throw Ey;o.location.assign(d)}r&&c&&c({action:l,location:b.location,delta:1})},replace:function(e,t){l=n.Replace;let s=m(b.location,e,t);i&&i(s,e),p=v();let o=g(s,p),h=b.createHref(s);a.replaceState(o,"",h),r&&c&&c({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var C;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(C||(C={}));const b=new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,i,s){return void 0===i&&(i=[]),void 0===s&&(s={}),e.map(((e,n)=>{let o=[...i,String(n)],r="string"===typeof e.id?e.id:o.join("-");if(u(!0!==e.index||!e.children,"Cannot specify children on an index route"),u(!s[r],'Found a route id collision on id "'+r+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let i=h({},e,t(e),{id:r});return s[r]=i,i}{let i=h({},e,t(e),{id:r,children:void 0});return s[r]=i,e.children&&(i.children=w(e.children,t,o,s)),i}}))}function S(e,t,i){return void 0===i&&(i="/"),x(e,t,i,!1)}function x(e,t,i,s){let n=B(("string"===typeof t?v(t):t).pathname||"/",i);if(null==n)return null;let o=M(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let r=null;for(let a=0;null==r&&a<o.length;++a){let e=O(n);r=F(o[a],e,s)}return r}function M(e,t,i,s){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===s&&(s="");let n=(e,n,o)=>{let r={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};r.relativePath.startsWith("/")&&(u(r.relativePath.startsWith(s),'Absolute route path "'+r.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),r.relativePath=r.relativePath.slice(s.length));let a=H([s,r.relativePath]),l=i.concat(r);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),M(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:P(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var i;if(""!==e.path&&null!=(i=e.path)&&i.includes("?"))for(let s of D(e.path))n(e,t,s);else n(e,t)})),t}function D(e){let t=e.split("/");if(0===t.length)return[];let[i,...s]=t,n=i.endsWith("?"),o=i.replace(/\?$/,"");if(0===s.length)return n?[o,""]:[o];let r=D(s.join("/")),a=[];return a.push(...r.map((e=>""===e?o:[o,e].join("/")))),n&&a.push(...r),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const R=/^:[\w-]+$/,E=3,I=2,A=1,k=10,T=-2,L=e=>"*"===e;function P(e,t){let i=e.split("/"),s=i.length;return i.some(L)&&(s+=T),t&&(s+=I),i.filter((e=>!L(e))).reduce(((e,t)=>e+(R.test(t)?E:""===t?A:k)),s)}function F(e,t,i){void 0===i&&(i=!1);let{routesMeta:s}=e,n={},o="/",r=[];for(let a=0;a<s.length;++a){let e=s[a],l=a===s.length-1,c="/"===o?t:t.slice(o.length)||"/",h=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!h&&l&&i&&!s[s.length-1].route.index&&(h=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(n,h.params),r.push({params:n,pathname:H([o,h.pathname]),pathnameBase:W(H([o,h.pathnameBase])),route:d}),"/"!==h.pathnameBase&&(o=H([o,h.pathnameBase]))}return r}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=function(e,t,i){void 0===t&&(t=!1);void 0===i&&(i=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(s.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(s.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let o=new RegExp(n,t?void 0:"i");return[o,s]}(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let o=n[0],r=o.replace(/(.)\/+$/,"$1"),a=n.slice(1),l=s.reduce(((e,t,i)=>{let{paramName:s,isOptional:n}=t;if("*"===s){let e=a[i]||"";r=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[i];return e[s]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:o,pathnameBase:r,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Ey){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ey+")."),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&"/"!==s?null:e.slice(i)||"/"}function G(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+i+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let i=z(e);return t?i.map(((e,t)=>t===i.length-1?e.pathname:e.pathnameBase)):i.map((e=>e.pathnameBase))}function V(e,t,i,s){let n;void 0===s&&(s=!1),"string"===typeof e?n=v(e):(n=h({},e),u(!n.pathname||!n.pathname.includes("?"),G("?","pathname","search",n)),u(!n.pathname||!n.pathname.includes("#"),G("#","pathname","hash",n)),u(!n.search||!n.search.includes("#"),G("#","search","hash",n)));let o,r=""===e||""===n.pathname,a=r?"/":n.pathname;if(null==a)o=i;else{let e=t.length-1;if(!s&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:i,search:s="",hash:n=""}="string"===typeof e?v(e):e,o=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:o,search:_(s),hash:U(n)}}(n,o),c=a&&"/"!==a&&a.endsWith("/"),d=(r||"."===a)&&i.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const H=e=>e.join("/").replace(/\/\/+/g,"/"),W=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const $=function(e,t){void 0===t&&(t=302);let i=t;"number"===typeof i?i={status:i}:"undefined"===typeof i.status&&(i.status=302);let s=new Headers(i.headers);return s.set("Location",e),new Response(null,h({},i,{headers:s}))};class K{constructor(e,t,i,s){void 0===s&&(s=!1),this.status=e,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function Y(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Z=["post","put","patch","delete"],q=new Set(Z),Q=["get",...Z],X=new Set(Q),J=new Set([301,302,303,307,308]),ee=new Set([307,308]),te={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ie={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},se={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oe=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),re="remix-router-transitions";function ae(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,i="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,s=!i;let o;if(u(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)o=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;o=e=>({hasErrorBoundary:t(e)})}else o=oe;let r,a,l,c={},d=w(e.routes,o,void 0,c),g=e.basename||"/",f=e.dataStrategy||ve,v=e.patchRoutesOnNavigation,y=h({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),b=null,M=new Set,D=null,R=null,E=null,I=null!=e.hydrationData,A=S(d,e.history.location,g),k=!1,T=null;if(null==A&&!v){let t=Te(404,{pathname:e.history.location.pathname}),{matches:i,route:s}=ke(d);A=i,T={[s.id]:t}}if(A&&!e.hydrationData){ct(A,d,e.history.location.pathname).active&&(A=null)}if(A)if(A.some((e=>e.route.lazy)))a=!1;else if(A.some((e=>e.route.loader)))if(y.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,i=e.hydrationData?e.hydrationData.errors:null;if(i){let e=A.findIndex((e=>void 0!==i[e.route.id]));a=A.slice(0,e+1).every((e=>!ue(e.route,t,i)))}else a=A.every((e=>!ue(e.route,t,i)))}else a=null!=e.hydrationData;else a=!0;else if(a=!1,A=[],y.v7_partialHydration){let t=ct(null,d,e.history.location.pathname);t.active&&t.matches&&(k=!0,A=t.matches)}let L,P,F={historyAction:e.history.action,location:e.history.location,matches:A,initialized:a,navigation:te,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||T,fetchers:new Map,blockers:new Map},N=n.Pop,O=!1,G=!1,z=new Map,j=null,V=!1,H=!1,W=[],_=new Set,U=new Map,$=0,K=-1,Z=new Map,q=new Set,Q=new Map,X=new Map,J=new Set,ae=new Map,he=new Map;function pe(e,t){void 0===t&&(t={}),F=h({},F,e);let i=[],s=[];y.v7_fetcherPersist&&F.fetchers.forEach(((e,t)=>{"idle"===e.state&&(J.has(t)?s.push(t):i.push(t))})),J.forEach((e=>{F.fetchers.has(e)||U.has(e)||s.push(e)})),[...M].forEach((e=>e(F,{deletedFetchers:s,viewTransitionOpts:t.viewTransitionOpts,flushSync:!0===t.flushSync}))),y.v7_fetcherPersist?(i.forEach((e=>F.fetchers.delete(e))),s.forEach((e=>Qe(e)))):s.forEach((e=>J.delete(e)))}function ge(t,i,s){var o,a;let l,{flushSync:c}=void 0===s?{}:s,u=null!=F.actionData&&null!=F.navigation.formMethod&&Ve(F.navigation.formMethod)&&"loading"===F.navigation.state&&!0!==(null==(o=t.state)?void 0:o._isRedirect);l=i.actionData?Object.keys(i.actionData).length>0?i.actionData:null:u?F.actionData:null;let p=i.loaderData?Ee(F.loaderData,i.loaderData,i.matches||[],i.errors):F.loaderData,g=F.blockers;g.size>0&&(g=new Map(g),g.forEach(((e,t)=>g.set(t,se))));let m,f=!0===O||null!=F.navigation.formMethod&&Ve(F.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(r&&(d=r,r=void 0),V||N===n.Pop||(N===n.Push?e.history.push(t,t.state):N===n.Replace&&e.history.replace(t,t.state)),N===n.Pop){let e=z.get(F.location.pathname);e&&e.has(t.pathname)?m={currentLocation:F.location,nextLocation:t}:z.has(t.pathname)&&(m={currentLocation:t,nextLocation:F.location})}else if(G){let e=z.get(F.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),z.set(F.location.pathname,e)),m={currentLocation:F.location,nextLocation:t}}pe(h({},i,{actionData:l,loaderData:p,historyAction:N,location:t,initialized:!0,navigation:te,revalidation:"idle",restoreScrollPosition:lt(t,i.matches||F.matches),preventScrollReset:f,blockers:g}),{viewTransitionOpts:m,flushSync:!0===c}),N=n.Pop,O=!1,G=!1,V=!1,H=!1,W=[]}async function fe(t,i,s){L&&L.abort(),L=null,N=t,V=!0===(s&&s.startUninterruptedRevalidation),function(e,t){if(D&&E){let i=at(e,t);D[i]=E()}}(F.location,F.matches),O=!0===(s&&s.preventScrollReset),G=!0===(s&&s.enableViewTransition);let o=r||d,a=s&&s.overrideNavigation,l=null!=s&&s.initialHydration&&F.matches&&F.matches.length>0&&!k?F.matches:S(o,i,g),c=!0===(s&&s.flushSync);if(l&&F.initialized&&!H&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(F.location,i)&&!(s&&s.submission&&Ve(s.submission.formMethod)))return void ge(i,{matches:l},{flushSync:c});let u=ct(l,o,i.pathname);if(u.active&&u.matches&&(l=u.matches),!l){let{error:e,notFoundMatches:t,route:s}=ot(i.pathname);return void ge(i,{matches:t,loaderData:{},errors:{[s.id]:e}},{flushSync:c})}L=new AbortController;let p,m=Se(e.history,i,L.signal,s&&s.submission);if(s&&s.pendingError)p=[Ae(l).route.id,{type:C.error,error:s.pendingError}];else if(s&&s.submission&&Ve(s.submission.formMethod)){let t=await async function(e,t,i,s,o,r){void 0===r&&(r={});Ge();let a,l=function(e,t){let i={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return i}(t,i);if(pe({navigation:l},{flushSync:!0===r.flushSync}),o){let i=await ht(s,t.pathname,e.signal);if("aborted"===i.type)return{shortCircuited:!0};if("error"===i.type){let e=Ae(i.partialMatches).route.id;return{matches:i.partialMatches,pendingActionResult:[e,{type:C.error,error:i.error}]}}if(!i.matches){let{notFoundMatches:e,error:i,route:s}=ot(t.pathname);return{matches:e,pendingActionResult:[s.id,{type:C.error,error:i}]}}s=i.matches}let c=$e(s,t);if(c.route.action||c.route.lazy){if(a=(await De("action",F,e,[c],s,null))[c.route.id],e.signal.aborted)return{shortCircuited:!0}}else a={type:C.error,error:Te(405,{method:e.method,pathname:t.pathname,routeId:c.route.id})};if(Be(a)){let t;if(r&&null!=r.replace)t=r.replace;else{t=we(a.response.headers.get("Location"),new URL(e.url),g)===F.location.pathname+F.location.search}return await Me(e,a,!0,{submission:i,replace:t}),{shortCircuited:!0}}if(Ne(a))throw Te(400,{type:"defer-action"});if(Oe(a)){let e=Ae(s,c.route.id);return!0!==(r&&r.replace)&&(N=n.Push),{matches:s,pendingActionResult:[e.route.id,a]}}return{matches:s,pendingActionResult:[c.route.id,a]}}(m,i,s.submission,l,u.active,{replace:s.replace,flushSync:c});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,s]=t.pendingActionResult;if(Oe(s)&&Y(s.error)&&404===s.error.status)return L=null,void ge(i,{matches:t.matches,loaderData:{},errors:{[e]:s.error}})}l=t.matches||l,p=t.pendingActionResult,a=Ye(i,s.submission),c=!1,u.active=!1,m=Se(e.history,m.url,m.signal)}let{shortCircuited:f,matches:v,loaderData:b,errors:w}=await async function(t,i,s,n,o,a,l,c,u,p,m){let f=o||Ye(i,a),v=a||l||Ke(f),C=!V&&(!y.v7_partialHydration||!u);if(n){if(C){let e=xe(m);pe(h({navigation:f},void 0!==e?{actionData:e}:{}),{flushSync:p})}let e=await ht(s,i.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let t=Ae(e.partialMatches).route.id;return{matches:e.partialMatches,loaderData:{},errors:{[t]:e.error}}}if(!e.matches){let{error:e,notFoundMatches:t,route:s}=ot(i.pathname);return{matches:t,loaderData:{},errors:{[s.id]:e}}}s=e.matches}let b=r||d,[w,S]=de(e.history,F,s,v,i,y.v7_partialHydration&&!0===u,y.v7_skipActionErrorRevalidation,H,W,_,J,Q,q,b,g,m);if(rt((e=>!(s&&s.some((t=>t.route.id===e)))||w&&w.some((t=>t.route.id===e)))),K=++$,0===w.length&&0===S.length){let e=et();return ge(i,h({matches:s,loaderData:{},errors:m&&Oe(m[1])?{[m[0]]:m[1].error}:null},Ie(m),e?{fetchers:new Map(F.fetchers)}:{}),{flushSync:p}),{shortCircuited:!0}}if(C){let e={};if(!n){e.navigation=f;let t=xe(m);void 0!==t&&(e.actionData=t)}S.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=F.fetchers.get(e.key),i=Ze(void 0,t?t.data:void 0);F.fetchers.set(e.key,i)})),new Map(F.fetchers)}(S)),pe(e,{flushSync:p})}S.forEach((e=>{Xe(e.key),e.controller&&U.set(e.key,e.controller)}));let x=()=>S.forEach((e=>Xe(e.key)));L&&L.signal.addEventListener("abort",x);let{loaderResults:M,fetcherResults:D}=await Pe(F,s,w,S,t);if(t.signal.aborted)return{shortCircuited:!0};L&&L.signal.removeEventListener("abort",x);S.forEach((e=>U.delete(e.key)));let R=Le(M);if(R)return await Me(t,R.result,!0,{replace:c}),{shortCircuited:!0};if(R=Le(D),R)return q.add(R.key),await Me(t,R.result,!0,{replace:c}),{shortCircuited:!0};let{loaderData:E,errors:I}=Re(F,s,M,m,S,D,ae);ae.forEach(((e,t)=>{e.subscribe((i=>{(i||e.done)&&ae.delete(t)}))})),y.v7_partialHydration&&u&&F.errors&&(I=h({},F.errors,I));let A=et(),k=tt(K),T=A||k||S.length>0;return h({matches:s,loaderData:E,errors:I},T?{fetchers:new Map(F.fetchers)}:{})}(m,i,l,u.active,a,s&&s.submission,s&&s.fetcherSubmission,s&&s.replace,s&&!0===s.initialHydration,c,p);f||(L=null,ge(i,h({matches:v||l},Ie(p),{loaderData:b,errors:w})))}function xe(e){return e&&!Oe(e[1])?{[e[0]]:e[1].data}:F.actionData?0===Object.keys(F.actionData).length?null:F.actionData:void 0}async function Me(s,o,r,a){let{submission:l,fetcherSubmission:c,preventScrollReset:d,replace:p}=void 0===a?{}:a;o.response.headers.has("X-Remix-Revalidate")&&(H=!0);let f=o.response.headers.get("Location");u(f,"Expected a Location header on the redirect Response"),f=we(f,new URL(s.url),g);let v=m(F.location,f,{_isRedirect:!0});if(i){let i=!1;if(o.response.headers.has("X-Remix-Reload-Document"))i=!0;else if(ne.test(f)){const s=e.history.createURL(f);i=s.origin!==t.location.origin||null==B(s.pathname,g)}if(i)return void(p?t.location.replace(f):t.location.assign(f))}L=null;let y=!0===p||o.response.headers.has("X-Remix-Replace")?n.Replace:n.Push,{formMethod:C,formAction:b,formEncType:w}=F.navigation;!l&&!c&&C&&b&&w&&(l=Ke(F.navigation));let S=l||c;if(ee.has(o.response.status)&&S&&Ve(S.formMethod))await fe(y,v,{submission:h({},S,{formAction:f}),preventScrollReset:d||O,enableViewTransition:r?G:void 0});else{let e=Ye(v,l);await fe(y,v,{overrideNavigation:e,fetcherSubmission:c,preventScrollReset:d||O,enableViewTransition:r?G:void 0})}}async function De(e,t,i,s,n,r){let a,l={};try{a=await ye(f,e,t,i,s,n,r,c,o)}catch(h){return s.forEach((e=>{l[e.route.id]={type:C.error,error:h}})),l}for(let[o,c]of Object.entries(a))if(Fe(c)){let e=c.result;l[o]={type:C.redirect,response:be(e,i,o,n,g,y.v7_relativeSplatPath)}}else l[o]=await Ce(c);return l}async function Pe(t,i,s,n,o){let r=t.matches,a=De("loader",t,o,s,i,null),l=Promise.all(n.map((async i=>{if(i.matches&&i.match&&i.controller){let s=(await De("loader",t,Se(e.history,i.path,i.controller.signal),[i.match],i.matches,i.key))[i.match.route.id];return{[i.key]:s}}return Promise.resolve({[i.key]:{type:C.error,error:Te(404,{pathname:i.path})}})}))),c=await a,h=(await l).reduce(((e,t)=>Object.assign(e,t)),{});return await Promise.all([He(i,c,o.signal,r,t.loaderData),We(i,h,n)]),{loaderResults:c,fetcherResults:h}}function Ge(){H=!0,W.push(...rt()),Q.forEach(((e,t)=>{U.has(t)&&_.add(t),Xe(t)}))}function ze(e,t,i){void 0===i&&(i={}),F.fetchers.set(e,t),pe({fetchers:new Map(F.fetchers)},{flushSync:!0===(i&&i.flushSync)})}function je(e,t,i,s){void 0===s&&(s={});let n=Ae(F.matches,t);Qe(e),pe({errors:{[n.route.id]:i},fetchers:new Map(F.fetchers)},{flushSync:!0===(s&&s.flushSync)})}function Ue(e){return X.set(e,(X.get(e)||0)+1),J.has(e)&&J.delete(e),F.fetchers.get(e)||ie}function Qe(e){let t=F.fetchers.get(e);!U.has(e)||t&&"loading"===t.state&&Z.has(e)||Xe(e),Q.delete(e),Z.delete(e),q.delete(e),y.v7_fetcherPersist&&J.delete(e),_.delete(e),F.fetchers.delete(e)}function Xe(e){let t=U.get(e);t&&(t.abort(),U.delete(e))}function Je(e){for(let t of e){let e=qe(Ue(t).data);F.fetchers.set(t,e)}}function et(){let e=[],t=!1;for(let i of q){let s=F.fetchers.get(i);u(s,"Expected fetcher: "+i),"loading"===s.state&&(q.delete(i),e.push(i),t=!0)}return Je(e),t}function tt(e){let t=[];for(let[i,s]of Z)if(s<e){let e=F.fetchers.get(i);u(e,"Expected fetcher: "+i),"loading"===e.state&&(Xe(i),Z.delete(i),t.push(i))}return Je(t),t.length>0}function it(e){F.blockers.delete(e),he.delete(e)}function st(e,t){let i=F.blockers.get(e)||se;u("unblocked"===i.state&&"blocked"===t.state||"blocked"===i.state&&"blocked"===t.state||"blocked"===i.state&&"proceeding"===t.state||"blocked"===i.state&&"unblocked"===t.state||"proceeding"===i.state&&"unblocked"===t.state,"Invalid blocker state transition: "+i.state+" -> "+t.state);let s=new Map(F.blockers);s.set(e,t),pe({blockers:s})}function nt(e){let{currentLocation:t,nextLocation:i,historyAction:s}=e;if(0===he.size)return;he.size>1&&p(!1,"A router only supports one blocker at a time");let n=Array.from(he.entries()),[o,r]=n[n.length-1],a=F.blockers.get(o);return a&&"proceeding"===a.state?void 0:r({currentLocation:t,nextLocation:i,historyAction:s})?o:void 0}function ot(e){let t=Te(404,{pathname:e}),i=r||d,{matches:s,route:n}=ke(i);return rt(),{notFoundMatches:s,route:n,error:t}}function rt(e){let t=[];return ae.forEach(((i,s)=>{e&&!e(s)||(i.cancel(),t.push(s),ae.delete(s))})),t}function at(e,t){if(R){let i=R(e,t.map((e=>function(e,t){let{route:i,pathname:s,params:n}=e;return{id:i.id,pathname:s,params:n,data:t[i.id],handle:i.handle}}(e,F.loaderData))));return i||e.key}return e.key}function lt(e,t){if(D){let i=at(e,t),s=D[i];if("number"===typeof s)return s}return null}function ct(e,t,i){if(v){if(!e){return{active:!0,matches:x(t,i,g,!0)||[]}}if(Object.keys(e[0].params).length>0){return{active:!0,matches:x(t,i,g,!0)}}}return{active:!1,matches:null}}async function ht(e,t,i,s){if(!v)return{type:"success",matches:e};let n=e;for(;;){let e=null==r,l=r||d,h=c;try{await v({signal:i,path:t,matches:n,fetcherKey:s,patch:(e,t)=>{i.aborted||me(e,t,l,h,o)}})}catch(a){return{type:"error",error:a,partialMatches:n}}finally{e&&!i.aborted&&(d=[...d])}if(i.aborted)return{type:"aborted"};let u=S(l,t,g);if(u)return{type:"success",matches:u};let p=x(l,t,g,!0);if(!p||n.length===p.length&&n.every(((e,t)=>e.route.id===p[t].route.id)))return{type:"success",matches:null};n=p}}return l={get basename(){return g},get future(){return y},get state(){return F},get routes(){return d},get window(){return t},initialize:function(){if(b=e.history.listen((t=>{let{action:i,location:s,delta:n}=t;if(P)return P(),void(P=void 0);p(0===he.size||null!=n,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let o=nt({currentLocation:F.location,nextLocation:s,historyAction:i});if(o&&null!=n){let t=new Promise((e=>{P=e}));return e.history.go(-1*n),void st(o,{state:"blocked",location:s,proceed(){st(o,{state:"proceeding",proceed:void 0,reset:void 0,location:s}),t.then((()=>e.history.go(n)))},reset(){let e=new Map(F.blockers);e.set(o,se),pe({blockers:e})}})}return fe(i,s)})),i){!function(e,t){try{let i=e.sessionStorage.getItem(re);if(i){let e=JSON.parse(i);for(let[i,s]of Object.entries(e||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch(i){}}(t,z);let e=()=>function(e,t){if(t.size>0){let i={};for(let[e,s]of t)i[e]=[...s];try{e.sessionStorage.setItem(re,JSON.stringify(i))}catch(Ey){p(!1,"Failed to save applied view transitions in sessionStorage ("+Ey+").")}}}(t,z);t.addEventListener("pagehide",e),j=()=>t.removeEventListener("pagehide",e)}return F.initialized||fe(n.Pop,F.location,{initialHydration:!0}),l},subscribe:function(e){return M.add(e),()=>M.delete(e)},enableScrollRestoration:function(e,t,i){if(D=e,E=t,R=i||null,!I&&F.navigation===te){I=!0;let e=lt(F.location,F.matches);null!=e&&pe({restoreScrollPosition:e})}return()=>{D=null,E=null,R=null}},navigate:async function t(i,s){if("number"===typeof i)return void e.history.go(i);let o=le(F.location,F.matches,g,y.v7_prependBasename,i,y.v7_relativeSplatPath,null==s?void 0:s.fromRouteId,null==s?void 0:s.relative),{path:r,submission:a,error:l}=ce(y.v7_normalizeFormMethod,!1,o,s),c=F.location,d=m(F.location,r,s&&s.state);d=h({},d,e.history.encodeLocation(d));let u=s&&null!=s.replace?s.replace:void 0,p=n.Push;!0===u?p=n.Replace:!1===u||null!=a&&Ve(a.formMethod)&&a.formAction===F.location.pathname+F.location.search&&(p=n.Replace);let f=s&&"preventScrollReset"in s?!0===s.preventScrollReset:void 0,v=!0===(s&&s.flushSync),C=nt({currentLocation:c,nextLocation:d,historyAction:p});if(!C)return await fe(p,d,{submission:a,pendingError:l,preventScrollReset:f,replace:s&&s.replace,enableViewTransition:s&&s.viewTransition,flushSync:v});st(C,{state:"blocked",location:d,proceed(){st(C,{state:"proceeding",proceed:void 0,reset:void 0,location:d}),t(i,s)},reset(){let e=new Map(F.blockers);e.set(C,se),pe({blockers:e})}})},fetch:function(t,i,n,o){if(s)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Xe(t);let a=!0===(o&&o.flushSync),l=r||d,c=le(F.location,F.matches,g,y.v7_prependBasename,n,y.v7_relativeSplatPath,i,null==o?void 0:o.relative),h=S(l,c,g),p=ct(h,l,c);if(p.active&&p.matches&&(h=p.matches),!h)return void je(t,i,Te(404,{pathname:c}),{flushSync:a});let{path:m,submission:f,error:v}=ce(y.v7_normalizeFormMethod,!0,c,o);if(v)return void je(t,i,v,{flushSync:a});let C=$e(h,m),b=!0===(o&&o.preventScrollReset);f&&Ve(f.formMethod)?async function(t,i,s,n,o,a,l,c,h){function p(e){if(!e.route.action&&!e.route.lazy){let e=Te(405,{method:h.formMethod,pathname:s,routeId:i});return je(t,i,e,{flushSync:l}),!0}return!1}if(Ge(),Q.delete(t),!a&&p(n))return;let m=F.fetchers.get(t);ze(t,function(e,t){let i={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return i}(h,m),{flushSync:l});let f=new AbortController,v=Se(e.history,s,f.signal,h);if(a){let e=await ht(o,new URL(v.url).pathname,v.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void je(t,i,e.error,{flushSync:l});if(!e.matches)return void je(t,i,Te(404,{pathname:s}),{flushSync:l});if(p(n=$e(o=e.matches,s)))return}U.set(t,f);let C=$,b=await De("action",F,v,[n],o,t),w=b[n.route.id];if(v.signal.aborted)return void(U.get(t)===f&&U.delete(t));if(y.v7_fetcherPersist&&J.has(t)){if(Be(w)||Oe(w))return void ze(t,qe(void 0))}else{if(Be(w))return U.delete(t),K>C?void ze(t,qe(void 0)):(q.add(t),ze(t,Ze(h)),Me(v,w,!1,{fetcherSubmission:h,preventScrollReset:c}));if(Oe(w))return void je(t,i,w.error)}if(Ne(w))throw Te(400,{type:"defer-action"});let x=F.navigation.location||F.location,M=Se(e.history,x,f.signal),D=r||d,R="idle"!==F.navigation.state?S(D,F.navigation.location,g):F.matches;u(R,"Didn't find any matches after fetcher action");let E=++$;Z.set(t,E);let I=Ze(h,w.data);F.fetchers.set(t,I);let[A,k]=de(e.history,F,R,h,x,!1,y.v7_skipActionErrorRevalidation,H,W,_,J,Q,q,D,g,[n.route.id,w]);k.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,i=F.fetchers.get(t),s=Ze(void 0,i?i.data:void 0);F.fetchers.set(t,s),Xe(t),e.controller&&U.set(t,e.controller)})),pe({fetchers:new Map(F.fetchers)});let T=()=>k.forEach((e=>Xe(e.key)));f.signal.addEventListener("abort",T);let{loaderResults:P,fetcherResults:O}=await Pe(F,R,A,k,M);if(f.signal.aborted)return;f.signal.removeEventListener("abort",T),Z.delete(t),U.delete(t),k.forEach((e=>U.delete(e.key)));let B=Le(P);if(B)return Me(M,B.result,!1,{preventScrollReset:c});if(B=Le(O),B)return q.add(B.key),Me(M,B.result,!1,{preventScrollReset:c});let{loaderData:G,errors:z}=Re(F,R,P,void 0,k,O,ae);if(F.fetchers.has(t)){let e=qe(w.data);F.fetchers.set(t,e)}tt(E),"loading"===F.navigation.state&&E>K?(u(N,"Expected pending action"),L&&L.abort(),ge(F.navigation.location,{matches:R,loaderData:G,errors:z,fetchers:new Map(F.fetchers)})):(pe({errors:z,loaderData:Ee(F.loaderData,G,R,z),fetchers:new Map(F.fetchers)}),H=!1)}(t,i,m,C,h,p.active,a,b,f):(Q.set(t,{routeId:i,path:m}),async function(t,i,s,n,o,r,a,l,c){let h=F.fetchers.get(t);ze(t,Ze(c,h?h.data:void 0),{flushSync:a});let d=new AbortController,p=Se(e.history,s,d.signal);if(r){let e=await ht(o,new URL(p.url).pathname,p.signal,t);if("aborted"===e.type)return;if("error"===e.type)return void je(t,i,e.error,{flushSync:a});if(!e.matches)return void je(t,i,Te(404,{pathname:s}),{flushSync:a});n=$e(o=e.matches,s)}U.set(t,d);let g=$,m=await De("loader",F,p,[n],o,t),f=m[n.route.id];Ne(f)&&(f=await _e(f,p.signal,!0)||f);U.get(t)===d&&U.delete(t);if(p.signal.aborted)return;if(J.has(t))return void ze(t,qe(void 0));if(Be(f))return K>g?void ze(t,qe(void 0)):(q.add(t),void await Me(p,f,!1,{preventScrollReset:l}));if(Oe(f))return void je(t,i,f.error);u(!Ne(f),"Unhandled fetcher deferred data"),ze(t,qe(f.data))}(t,i,m,C,h,p.active,a,b,f))},revalidate:function(){Ge(),pe({revalidation:"loading"}),"submitting"!==F.navigation.state&&("idle"!==F.navigation.state?fe(N||F.historyAction,F.navigation.location,{overrideNavigation:F.navigation,enableViewTransition:!0===G}):fe(F.historyAction,F.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Ue,deleteFetcher:function(e){let t=(X.get(e)||0)-1;t<=0?(X.delete(e),J.add(e),y.v7_fetcherPersist||Qe(e)):X.set(e,t),pe({fetchers:new Map(F.fetchers)})},dispose:function(){b&&b(),j&&j(),M.clear(),L&&L.abort(),F.fetchers.forEach(((e,t)=>Qe(t))),F.blockers.forEach(((e,t)=>it(t)))},getBlocker:function(e,t){let i=F.blockers.get(e)||se;return he.get(e)!==t&&he.set(e,t),i},deleteBlocker:it,patchRoutes:function(e,t){let i=null==r;me(e,t,r||d,c,o),i&&(d=[...d],pe({}))},_internalFetchControllers:U,_internalActiveDeferreds:ae,_internalSetRoutes:function(e){c={},r=w(e,o,void 0,c)}},l}Symbol("deferred");function le(e,t,i,s,n,o,r,a){let l,c;if(r){l=[];for(let e of t)if(l.push(e),e.route.id===r){c=e;break}}else l=t,c=t[t.length-1];let h=V(n||".",j(l,o),B(e.pathname,i)||e.pathname,"path"===a);if(null==n&&(h.search=e.search,h.hash=e.hash),(null==n||""===n||"."===n)&&c){let e=Ue(h.search);if(c.route.index&&!e)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&e){let e=new URLSearchParams(h.search),t=e.getAll("index");e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let i=e.toString();h.search=i?"?"+i:""}}return s&&"/"!==i&&(h.pathname="/"===h.pathname?i:H([i,h.pathname])),f(h)}function ce(e,t,i,s){if(!s||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(s))return{path:i};if(s.formMethod&&!je(s.formMethod))return{path:i,error:Te(405,{method:s.formMethod})};let n,o,r=()=>({path:i,error:Te(400,{type:"invalid-body"})}),a=s.formMethod||"get",l=e?a.toUpperCase():a.toLowerCase(),c=Pe(i);if(void 0!==s.body){if("text/plain"===s.formEncType){if(!Ve(l))return r();let e="string"===typeof s.body?s.body:s.body instanceof FormData||s.body instanceof URLSearchParams?Array.from(s.body.entries()).reduce(((e,t)=>{let[i,s]=t;return""+e+i+"="+s+"\n"}),""):String(s.body);return{path:i,submission:{formMethod:l,formAction:c,formEncType:s.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===s.formEncType){if(!Ve(l))return r();try{let e="string"===typeof s.body?JSON.parse(s.body):s.body;return{path:i,submission:{formMethod:l,formAction:c,formEncType:s.formEncType,formData:void 0,json:e,text:void 0}}}catch(p){return r()}}}if(u("function"===typeof FormData,"FormData is not available in this environment"),s.formData)n=xe(s.formData),o=s.formData;else if(s.body instanceof FormData)n=xe(s.body),o=s.body;else if(s.body instanceof URLSearchParams)n=s.body,o=Me(n);else if(null==s.body)n=new URLSearchParams,o=new FormData;else try{n=new URLSearchParams(s.body),o=Me(n)}catch(p){return r()}let h={formMethod:l,formAction:c,formEncType:s&&s.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(Ve(h.formMethod))return{path:i,submission:h};let d=v(i);return t&&d.search&&Ue(d.search)&&n.append("index",""),d.search="?"+n,{path:f(d),submission:h}}function he(e,t,i){void 0===i&&(i=!1);let s=e.findIndex((e=>e.route.id===t));return s>=0?e.slice(0,i?s+1:s):e}function de(e,t,i,s,n,o,r,a,l,c,d,u,p,g,m,f){let v=f?Oe(f[1])?f[1].error:f[1].data:void 0,y=e.createURL(t.location),C=e.createURL(n),b=i;o&&t.errors?b=he(i,Object.keys(t.errors)[0],!0):f&&Oe(f[1])&&(b=he(i,f[0]));let w=f?f[1].statusCode:void 0,x=r&&w&&w>=400,M=b.filter(((e,i)=>{let{route:n}=e;if(n.lazy)return!0;if(null==n.loader)return!1;if(o)return ue(n,t.loaderData,t.errors);if(function(e,t,i){let s=!t||i.route.id!==t.route.id,n=void 0===e[i.route.id];return s||n}(t.loaderData,t.matches[i],e)||l.some((t=>t===e.route.id)))return!0;let r=t.matches[i],c=e;return ge(e,h({currentUrl:y,currentParams:r.params,nextUrl:C,nextParams:c.params},s,{actionResult:v,actionStatus:w,defaultShouldRevalidate:!x&&(a||y.pathname+y.search===C.pathname+C.search||y.search!==C.search||pe(r,c))}))})),D=[];return u.forEach(((e,n)=>{if(o||!i.some((t=>t.route.id===e.routeId))||d.has(n))return;let r=S(g,e.path,m);if(!r)return void D.push({key:n,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(n),u=$e(r,e.path),f=!1;p.has(n)?f=!1:c.has(n)?(c.delete(n),f=!0):f=l&&"idle"!==l.state&&void 0===l.data?a:ge(u,h({currentUrl:y,currentParams:t.matches[t.matches.length-1].params,nextUrl:C,nextParams:i[i.length-1].params},s,{actionResult:v,actionStatus:w,defaultShouldRevalidate:!x&&a})),f&&D.push({key:n,routeId:e.routeId,path:e.path,matches:r,match:u,controller:new AbortController})})),[M,D]}function ue(e,t,i){if(e.lazy)return!0;if(!e.loader)return!1;let s=null!=t&&void 0!==t[e.id],n=null!=i&&void 0!==i[e.id];return!(!s&&n)&&("function"===typeof e.loader&&!0===e.loader.hydrate||!s&&!n)}function pe(e,t){let i=e.route.path;return e.pathname!==t.pathname||null!=i&&i.endsWith("*")&&e.params["*"]!==t.params["*"]}function ge(e,t){if(e.route.shouldRevalidate){let i=e.route.shouldRevalidate(t);if("boolean"===typeof i)return i}return t.defaultShouldRevalidate}function me(e,t,i,s,n){var o;let r;if(e){let t=s[e];u(t,"No route found to patch children into: routeId = "+e),t.children||(t.children=[]),r=t.children}else r=i;let a=w(t.filter((e=>!r.some((t=>fe(e,t))))),n,[e||"_","patch",String((null==(o=r)?void 0:o.length)||"0")],s);r.push(...a)}function fe(e,t){return"id"in e&&"id"in t&&e.id===t.id||e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive&&(!(e.children&&0!==e.children.length||t.children&&0!==t.children.length)||e.children.every(((e,i)=>{var s;return null==(s=t.children)?void 0:s.some((t=>fe(e,t)))})))}async function ve(e){let{matches:t}=e,i=t.filter((e=>e.shouldLoad)),s=await Promise.all(i.map((e=>e.resolve())));return s.reduce(((e,t,s)=>Object.assign(e,{[i[s].route.id]:t})),{})}async function ye(e,t,i,s,n,o,r,a,l,c){let d=o.map((e=>e.route.lazy?async function(e,t,i){if(!e.lazy)return;let s=await e.lazy();if(!e.lazy)return;let n=i[e.id];u(n,"No route found in manifest");let o={};for(let r in s){let e=void 0!==n[r]&&"hasErrorBoundary"!==r;p(!e,'Route "'+n.id+'" has a static property "'+r+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+r+'" will be ignored.'),e||b.has(r)||(o[r]=s[r])}Object.assign(n,o),Object.assign(n,h({},t(n),{lazy:void 0}))}(e.route,l,a):void 0)),g=o.map(((e,i)=>{let o=d[i],r=n.some((t=>t.route.id===e.route.id));return h({},e,{shouldLoad:r,resolve:async i=>(i&&"GET"===s.method&&(e.route.lazy||e.route.loader)&&(r=!0),r?async function(e,t,i,s,n,o){let r,a,l=s=>{let r,l=new Promise(((e,t)=>r=t));a=()=>r(),t.signal.addEventListener("abort",a);let c=n=>"function"!==typeof s?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+i.route.id+"]")):s({request:t,params:i.params,context:o},...void 0!==n?[n]:[]),h=(async()=>{try{return{type:"data",result:await(n?n((e=>c(e))):c())}}catch(e){return{type:"error",result:e}}})();return Promise.race([h,l])};try{let n=i.route[e];if(s)if(n){let e,[t]=await Promise.all([l(n).catch((t=>{e=t})),s]);if(void 0!==e)throw e;r=t}else{if(await s,n=i.route[e],!n){if("action"===e){let e=new URL(t.url),s=e.pathname+e.search;throw Te(405,{method:t.method,pathname:s,routeId:i.route.id})}return{type:C.data,result:void 0}}r=await l(n)}else{if(!n){let e=new URL(t.url);throw Te(404,{pathname:e.pathname+e.search})}r=await l(n)}u(void 0!==r.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+i.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(c){return{type:C.error,result:c}}finally{a&&t.signal.removeEventListener("abort",a)}return r}(t,s,e,o,i,c):Promise.resolve({type:C.data,result:void 0}))})})),m=await e({matches:g,request:s,params:o[0].params,fetcherKey:r,context:c});try{await Promise.all(d)}catch(f){}return m}async function Ce(e){let{result:t,type:i}=e;if(ze(t)){let e;try{let i=t.headers.get("Content-Type");e=i&&/\bapplication\/json\b/.test(i)?null==t.body?null:await t.json():await t.text()}catch(d){return{type:C.error,error:d}}return i===C.error?{type:C.error,error:new K(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:C.data,data:e,statusCode:t.status,headers:t.headers}}var s,n,o,r,a,l,c,h;return i===C.error?Ge(t)?t.data instanceof Error?{type:C.error,error:t.data,statusCode:null==(o=t.init)?void 0:o.status,headers:null!=(r=t.init)&&r.headers?new Headers(t.init.headers):void 0}:{type:C.error,error:new K((null==(s=t.init)?void 0:s.status)||500,void 0,t.data),statusCode:Y(t)?t.status:void 0,headers:null!=(n=t.init)&&n.headers?new Headers(t.init.headers):void 0}:{type:C.error,error:t,statusCode:Y(t)?t.status:void 0}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(t)?{type:C.deferred,deferredData:t,statusCode:null==(a=t.init)?void 0:a.status,headers:(null==(l=t.init)?void 0:l.headers)&&new Headers(t.init.headers)}:Ge(t)?{type:C.data,data:t.data,statusCode:null==(c=t.init)?void 0:c.status,headers:null!=(h=t.init)&&h.headers?new Headers(t.init.headers):void 0}:{type:C.data,data:t}}function be(e,t,i,s,n,o){let r=e.headers.get("Location");if(u(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!ne.test(r)){let a=s.slice(0,s.findIndex((e=>e.route.id===i))+1);r=le(new URL(t.url),a,n,!0,r,o),e.headers.set("Location",r)}return e}function we(e,t,i){if(ne.test(e)){let s=e,n=s.startsWith("//")?new URL(t.protocol+s):new URL(s),o=null!=B(n.pathname,i);if(n.origin===t.origin&&o)return n.pathname+n.search+n.hash}return e}function Se(e,t,i,s){let n=e.createURL(Pe(t)).toString(),o={signal:i};if(s&&Ve(s.formMethod)){let{formMethod:e,formEncType:t}=s;o.method=e.toUpperCase(),"application/json"===t?(o.headers=new Headers({"Content-Type":t}),o.body=JSON.stringify(s.json)):"text/plain"===t?o.body=s.text:"application/x-www-form-urlencoded"===t&&s.formData?o.body=xe(s.formData):o.body=s.formData}return new Request(n,o)}function xe(e){let t=new URLSearchParams;for(let[i,s]of e.entries())t.append(i,"string"===typeof s?s:s.name);return t}function Me(e){let t=new FormData;for(let[i,s]of e.entries())t.append(i,s);return t}function De(e,t,i,s,n){let o,r={},a=null,l=!1,c={},h=i&&Oe(i[1])?i[1].error:void 0;return e.forEach((i=>{if(!(i.route.id in t))return;let d=i.route.id,p=t[d];if(u(!Be(p),"Cannot handle redirect results in processLoaderData"),Oe(p)){let t=p.error;if(void 0!==h&&(t=h,h=void 0),a=a||{},n)a[d]=t;else{let i=Ae(e,d);null==a[i.route.id]&&(a[i.route.id]=t)}r[d]=void 0,l||(l=!0,o=Y(p.error)?p.error.status:500),p.headers&&(c[d]=p.headers)}else Ne(p)?(s.set(d,p.deferredData),r[d]=p.deferredData.data,null==p.statusCode||200===p.statusCode||l||(o=p.statusCode),p.headers&&(c[d]=p.headers)):(r[d]=p.data,p.statusCode&&200!==p.statusCode&&!l&&(o=p.statusCode),p.headers&&(c[d]=p.headers))})),void 0!==h&&i&&(a={[i[0]]:h},r[i[0]]=void 0),{loaderData:r,errors:a,statusCode:o||200,loaderHeaders:c}}function Re(e,t,i,s,n,o,r){let{loaderData:a,errors:l}=De(t,i,s,r,!1);return n.forEach((t=>{let{key:i,match:s,controller:n}=t,r=o[i];if(u(r,"Did not find corresponding fetcher result"),!n||!n.signal.aborted)if(Oe(r)){let t=Ae(e.matches,null==s?void 0:s.route.id);l&&l[t.route.id]||(l=h({},l,{[t.route.id]:r.error})),e.fetchers.delete(i)}else if(Be(r))u(!1,"Unhandled fetcher revalidation redirect");else if(Ne(r))u(!1,"Unhandled fetcher deferred data");else{let t=qe(r.data);e.fetchers.set(i,t)}})),{loaderData:a,errors:l}}function Ee(e,t,i,s){let n=h({},t);for(let o of i){let i=o.route.id;if(t.hasOwnProperty(i)?void 0!==t[i]&&(n[i]=t[i]):void 0!==e[i]&&o.route.loader&&(n[i]=e[i]),s&&s.hasOwnProperty(i))break}return n}function Ie(e){return e?Oe(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ae(e,t){let i=t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e];return i.reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function ke(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Te(e,t){let{pathname:i,routeId:s,method:n,type:o,message:r}=void 0===t?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(a="Bad Request",n&&i&&s?l="You made a "+n+' request to "'+i+'" but did not provide a `loader` for route "'+s+'", so there is no way to handle the request.':"defer-action"===o?l="defer() is not supported in actions":"invalid-body"===o&&(l="Unable to encode submission body")):403===e?(a="Forbidden",l='Route "'+s+'" does not match URL "'+i+'"'):404===e?(a="Not Found",l='No route matches URL "'+i+'"'):405===e&&(a="Method Not Allowed",n&&i&&s?l="You made a "+n.toUpperCase()+' request to "'+i+'" but did not provide an `action` for route "'+s+'", so there is no way to handle the request.':n&&(l='Invalid request method "'+n.toUpperCase()+'"')),new K(e||500,a,new Error(l),!0)}function Le(e){let t=Object.entries(e);for(let i=t.length-1;i>=0;i--){let[e,s]=t[i];if(Be(s))return{key:e,result:s}}}function Pe(e){return f(h({},"string"===typeof e?v(e):e,{hash:""}))}function Fe(e){return ze(e.result)&&J.has(e.result.status)}function Ne(e){return e.type===C.deferred}function Oe(e){return e.type===C.error}function Be(e){return(e&&e.type)===C.redirect}function Ge(e){return"object"===typeof e&&null!=e&&"type"in e&&"data"in e&&"init"in e&&"DataWithResponseInit"===e.type}function ze(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function je(e){return X.has(e.toLowerCase())}function Ve(e){return q.has(e.toLowerCase())}async function He(e,t,i,s,n){let o=Object.entries(t);for(let r=0;r<o.length;r++){let[a,l]=o[r],c=e.find((e=>(null==e?void 0:e.route.id)===a));if(!c)continue;let h=s.find((e=>e.route.id===c.route.id)),d=null!=h&&!pe(h,c)&&void 0!==(n&&n[c.route.id]);Ne(l)&&d&&await _e(l,i,!1).then((e=>{e&&(t[a]=e)}))}}async function We(e,t,i){for(let s=0;s<i.length;s++){let{key:n,routeId:o,controller:r}=i[s],a=t[n],l=e.find((e=>(null==e?void 0:e.route.id)===o));l&&(Ne(a)&&(u(r,"Expected an AbortController for revalidating fetcher deferred result"),await _e(a,r.signal,!0).then((e=>{e&&(t[n]=e)}))))}}async function _e(e,t,i){if(void 0===i&&(i=!1),!await e.deferredData.resolveData(t)){if(i)try{return{type:C.data,data:e.deferredData.unwrappedData}}catch(s){return{type:C.error,error:s}}return{type:C.data,data:e.deferredData.data}}}function Ue(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function $e(e,t){let i="string"===typeof t?v(t).search:t.search;if(e[e.length-1].route.index&&Ue(i||""))return e[e.length-1];let s=z(e);return s[s.length-1]}function Ke(e){let{formMethod:t,formAction:i,formEncType:s,text:n,formData:o,json:r}=e;if(t&&i&&s)return null!=n?{formMethod:t,formAction:i,formEncType:s,formData:void 0,json:void 0,text:n}:null!=o?{formMethod:t,formAction:i,formEncType:s,formData:o,json:void 0,text:void 0}:void 0!==r?{formMethod:t,formAction:i,formEncType:s,formData:void 0,json:r,text:void 0}:void 0}function Ye(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Ze(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function qe(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Qe.apply(this,arguments)}const Xe=o.createContext(null);const Je=o.createContext(null);const et=o.createContext(null);const tt=o.createContext(null);const it=o.createContext({outlet:null,matches:[],isDataRoute:!1});const st=o.createContext(null);function nt(){return null!=o.useContext(tt)}function ot(){return nt()||u(!1),o.useContext(tt).location}function rt(e){o.useContext(et).static||o.useLayoutEffect(e)}function at(){let{isDataRoute:e}=o.useContext(it);return e?function(){let{router:e}=yt(ft.UseNavigateStable),t=bt(vt.UseNavigateStable),i=o.useRef(!1);return rt((()=>{i.current=!0})),o.useCallback((function(s,n){void 0===n&&(n={}),i.current&&("number"===typeof s?e.navigate(s):e.navigate(s,Qe({fromRouteId:t},n)))}),[e,t])}():function(){nt()||u(!1);let e=o.useContext(Xe),{basename:t,future:i,navigator:s}=o.useContext(et),{matches:n}=o.useContext(it),{pathname:r}=ot(),a=JSON.stringify(j(n,i.v7_relativeSplatPath)),l=o.useRef(!1);return rt((()=>{l.current=!0})),o.useCallback((function(i,n){if(void 0===n&&(n={}),!l.current)return;if("number"===typeof i)return void s.go(i);let o=V(i,JSON.parse(a),r,"path"===n.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:H([t,o.pathname])),(n.replace?s.replace:s.push)(o,n.state,n)}),[t,s,a,r,e])}()}const lt=o.createContext(null);function ct(e,t){let{relative:i}=void 0===t?{}:t,{future:s}=o.useContext(et),{matches:n}=o.useContext(it),{pathname:r}=ot(),a=JSON.stringify(j(n,s.v7_relativeSplatPath));return o.useMemo((()=>V(e,JSON.parse(a),r,"path"===i)),[e,a,r,i])}function ht(e,t,i,s){nt()||u(!1);let{navigator:r}=o.useContext(et),{matches:a}=o.useContext(it),l=a[a.length-1],c=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=ot();if(t){var g;let e="string"===typeof t?v(t):t;"/"===h||(null==(g=e.pathname)?void 0:g.startsWith(h))||u(!1),d=e}else d=p;let m=d.pathname||"/",f=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=S(e,{pathname:f});let C=mt(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:H([h,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:H([h,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return t&&C?o.createElement(tt.Provider,{value:{location:Qe({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:n.Pop}},C):C}function dt(){let e=function(){var e;let t=o.useContext(st),i=Ct(vt.UseRouteError),s=bt(vt.UseRouteError);if(void 0!==t)return t;return null==(e=i.errors)?void 0:e[s]}(),t=Y(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),i?o.createElement("pre",{style:n},i):null,null)}const ut=o.createElement(dt,null);class pt extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(it.Provider,{value:this.props.routeContext},o.createElement(st.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gt(e){let{routeContext:t,match:i,children:s}=e,n=o.useContext(Xe);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),o.createElement(it.Provider,{value:t},s)}function mt(e,t,i,s){var n;if(void 0===t&&(t=[]),void 0===i&&(i=null),void 0===s&&(s=null),null==e){var r;if(!i)return null;if(i.errors)e=i.matches;else{if(!(null!=(r=s)&&r.v7_partialHydration&&0===t.length&&!i.initialized&&i.matches.length>0))return null;e=i.matches}}let a=e,l=null==(n=i)?void 0:n.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||u(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(i&&s&&s.v7_partialHydration)for(let o=0;o<a.length;o++){let e=a[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=o),e.route.id){let{loaderData:t,errors:s}=i,n=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||n){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,s,n)=>{let r,d=!1,u=null,p=null;var g;i&&(r=l&&s.route.id?l[s.route.id]:void 0,u=s.route.errorElement||ut,c&&(h<0&&0===n?(g="route-fallback",!1||wt[g]||(wt[g]=!0),d=!0,p=null):h===n&&(d=!0,p=s.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,n+1)),f=()=>{let t;return t=r?u:d?p:s.route.Component?o.createElement(s.route.Component,null):s.route.element?s.route.element:e,o.createElement(gt,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=i},children:t})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===n)?o.createElement(pt,{location:i.location,revalidation:i.revalidation,component:u,error:r,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()}),null)}var ft=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ft||{}),vt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vt||{});function yt(e){let t=o.useContext(Xe);return t||u(!1),t}function Ct(e){let t=o.useContext(Je);return t||u(!1),t}function bt(e){let t=function(e){let t=o.useContext(it);return t||u(!1),t}(),i=t.matches[t.matches.length-1];return i.route.id||u(!1),i.route.id}const wt={};const St=(e,t,i)=>{};function xt(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&St("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&void 0!==t.v7_relativeSplatPath||St("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&St("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&St("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&St("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&St("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}r.startTransition;function Mt(e){return function(e){let t=o.useContext(it).outlet;return t?o.createElement(lt.Provider,{value:e},t):t}(e.context)}function Dt(e){let{basename:t="/",children:i=null,location:s,navigationType:r=n.Pop,navigator:a,static:l=!1,future:c}=e;nt()&&u(!1);let h=t.replace(/^\/*/,"/"),d=o.useMemo((()=>({basename:h,navigator:a,static:l,future:Qe({v7_relativeSplatPath:!1},c)})),[h,c,a,l]);"string"===typeof s&&(s=v(s));let{pathname:p="/",search:g="",hash:m="",state:f=null,key:y="default"}=s,C=o.useMemo((()=>{let e=B(p,h);return null==e?null:{location:{pathname:e,search:g,hash:m,state:f,key:y},navigationType:r}}),[h,p,g,m,f,y,r]);return null==C?null:o.createElement(et.Provider,{value:d},o.createElement(tt.Provider,{children:i,value:C}))}new Promise((()=>{}));o.Component;function Rt(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:o.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:o.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:o.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Et.apply(this,arguments)}function It(e,t){if(null==e)return{};var i,s,n={},o=Object.keys(e);for(s=0;s<o.length;s++)i=o[s],t.indexOf(i)>=0||(n[i]=e[i]);return n}function At(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,i)=>{let s=e[i];return t.concat(Array.isArray(s)?s.map((e=>[i,e])):[[i,s]])}),[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const kt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Tt=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(mK){}function Lt(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Et({},t,{errors:Pt(t.errors)})),t}function Pt(e){if(!e)return null;let t=Object.entries(e),i={};for(let[s,n]of t)if(n&&"RouteErrorResponse"===n.__type)i[s]=new K(n.status,n.statusText,n.data,!0===n.internal);else if(n&&"Error"===n.__type){if(n.__subType){let e=window[n.__subType];if("function"===typeof e)try{let t=new e(n.message);t.stack="",i[s]=t}catch(mK){}}if(null==i[s]){let e=new Error(n.message);e.stack="",i[s]=e}}else i[s]=n;return i}const Ft=o.createContext({isTransitioning:!1});const Nt=o.createContext(new Map);const Ot=r.startTransition,Bt=c.flushSync;r.useId;function Gt(e){Bt?Bt(e):e()}class zt{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function jt(e){let{fallbackElement:t,router:i,future:s}=e,[n,r]=o.useState(i.state),[a,l]=o.useState(),[c,h]=o.useState({isTransitioning:!1}),[d,u]=o.useState(),[p,g]=o.useState(),[m,f]=o.useState(),v=o.useRef(new Map),{v7_startTransition:y}=s||{},C=o.useCallback((e=>{y?function(e){Ot?Ot(e):e()}(e):e()}),[y]),b=o.useCallback(((e,t)=>{let{deletedFetchers:s,flushSync:n,viewTransitionOpts:o}=t;e.fetchers.forEach(((e,t)=>{void 0!==e.data&&v.current.set(t,e.data)})),s.forEach((e=>v.current.delete(e)));let a=null==i.window||null==i.window.document||"function"!==typeof i.window.document.startViewTransition;if(o&&!a){if(n){Gt((()=>{p&&(d&&d.resolve(),p.skipTransition()),h({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})}));let t=i.window.document.startViewTransition((()=>{Gt((()=>r(e)))}));return t.finished.finally((()=>{Gt((()=>{u(void 0),g(void 0),l(void 0),h({isTransitioning:!1})}))})),void Gt((()=>g(t)))}p?(d&&d.resolve(),p.skipTransition(),f({state:e,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(l(e),h({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else n?Gt((()=>r(e))):C((()=>r(e)))}),[i.window,p,d,v,C]);o.useLayoutEffect((()=>i.subscribe(b)),[i,b]),o.useEffect((()=>{c.isTransitioning&&!c.flushSync&&u(new zt)}),[c]),o.useEffect((()=>{if(d&&a&&i.window){let e=a,t=d.promise,s=i.window.document.startViewTransition((async()=>{C((()=>r(e))),await t}));s.finished.finally((()=>{u(void 0),g(void 0),l(void 0),h({isTransitioning:!1})})),g(s)}}),[C,a,d,i.window]),o.useEffect((()=>{d&&a&&n.location.key===a.location.key&&d.resolve()}),[d,p,n.location,a]),o.useEffect((()=>{!c.isTransitioning&&m&&(l(m.state),h({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),f(void 0))}),[c.isTransitioning,m]),o.useEffect((()=>{}),[]);let w=o.useMemo((()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:e=>i.navigate(e),push:(e,t,s)=>i.navigate(e,{state:t,preventScrollReset:null==s?void 0:s.preventScrollReset}),replace:(e,t,s)=>i.navigate(e,{replace:!0,state:t,preventScrollReset:null==s?void 0:s.preventScrollReset})})),[i]),S=i.basename||"/",x=o.useMemo((()=>({router:i,navigator:w,static:!1,basename:S})),[i,w,S]),M=o.useMemo((()=>({v7_relativeSplatPath:i.future.v7_relativeSplatPath})),[i.future.v7_relativeSplatPath]);return o.useEffect((()=>xt(s,i.future)),[s,i.future]),o.createElement(o.Fragment,null,o.createElement(Xe.Provider,{value:x},o.createElement(Je.Provider,{value:n},o.createElement(Nt.Provider,{value:v.current},o.createElement(Ft.Provider,{value:c},o.createElement(Dt,{basename:S,location:n.location,navigationType:n.historyAction,navigator:w,future:M},n.initialized||i.future.v7_partialHydration?o.createElement(Vt,{routes:i.routes,future:i.future,state:n}):t))))),null)}const Vt=o.memo(Ht);function Ht(e){let{routes:t,future:i,state:s}=e;return ht(t,void 0,s,i)}const Wt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,_t=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ut=o.forwardRef((function(e,t){let i,{onClick:s,relative:n,reloadDocument:r,replace:a,state:l,target:c,to:h,preventScrollReset:d,viewTransition:p}=e,g=It(e,kt),{basename:m}=o.useContext(et),v=!1;if("string"===typeof h&&_t.test(h)&&(i=h,Wt))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),i=B(t.pathname,m);t.origin===e.origin&&null!=i?h=i+t.search+t.hash:v=!0}catch(mK){}let y=function(e,t){let{relative:i}=void 0===t?{}:t;nt()||u(!1);let{basename:s,navigator:n}=o.useContext(et),{hash:r,pathname:a,search:l}=ct(e,{relative:i}),c=a;return"/"!==s&&(c="/"===a?s:H([s,a])),n.createHref({pathname:c,search:l,hash:r})}(h,{relative:n}),C=function(e,t){let{target:i,replace:s,state:n,preventScrollReset:r,relative:a,viewTransition:l}=void 0===t?{}:t,c=at(),h=ot(),d=ct(e,{relative:a});return o.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();let i=void 0!==s?s:f(h)===f(d);c(e,{replace:i,state:n,preventScrollReset:r,relative:a,viewTransition:l})}}),[h,c,d,s,n,i,e,r,a,l])}(h,{replace:a,state:l,target:c,preventScrollReset:d,relative:n,viewTransition:p});return o.createElement("a",Et({},g,{href:i||y,onClick:v||r?s:function(e){s&&s(e),e.defaultPrevented||C(e)},ref:t,target:c}))}));const $t=o.forwardRef((function(e,t){let{"aria-current":i="page",caseSensitive:s=!1,className:n="",end:r=!1,style:a,to:l,viewTransition:c,children:h}=e,d=It(e,Tt),p=ct(l,{relative:d.relative}),g=ot(),m=o.useContext(Je),{navigator:f,basename:v}=o.useContext(et),y=null!=m&&function(e,t){void 0===t&&(t={});let i=o.useContext(Ft);null==i&&u(!1);let{basename:s}=Zt(Kt.useViewTransitionState),n=ct(e,{relative:t.relative});if(!i.isTransitioning)return!1;let r=B(i.currentLocation.pathname,s)||i.currentLocation.pathname,a=B(i.nextLocation.pathname,s)||i.nextLocation.pathname;return null!=N(n.pathname,a)||null!=N(n.pathname,r)}(p)&&!0===c,C=f.encodeLocation?f.encodeLocation(p).pathname:p.pathname,b=g.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(b=b.toLowerCase(),w=w?w.toLowerCase():null,C=C.toLowerCase()),w&&v&&(w=B(w,v)||w);const S="/"!==C&&C.endsWith("/")?C.length-1:C.length;let x,M=b===C||!r&&b.startsWith(C)&&"/"===b.charAt(S),D=null!=w&&(w===C||!r&&w.startsWith(C)&&"/"===w.charAt(C.length)),R={isActive:M,isPending:D,isTransitioning:y},E=M?i:void 0;x="function"===typeof n?n(R):[n,M?"active":null,D?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof a?a(R):a;return o.createElement(Ut,Et({},d,{"aria-current":E,className:x,ref:t,style:I,to:l,viewTransition:c}),"function"===typeof h?h(R):h)}));var Kt,Yt;function Zt(e){let t=o.useContext(Xe);return t||u(!1),t}function qt(e){let t=o.useRef(At(e)),i=o.useRef(!1),s=ot(),n=o.useMemo((()=>function(e,t){let i=At(e);return t&&t.forEach(((e,s)=>{i.has(s)||t.getAll(s).forEach((e=>{i.append(s,e)}))})),i}(s.search,i.current?null:t.current)),[s.search]),r=at(),a=o.useCallback(((e,t)=>{const s=At("function"===typeof e?e(n):e);i.current=!0,r("?"+s,t)}),[r,n]);return[n,a]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kt||(Kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Yt||(Yt={}));function Qt(e){var t,i,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(i=Qt(e[t]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}const Xt=function(){for(var e,t,i=0,s="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=Qt(e))&&(s&&(s+=" "),s+=t);return s},Jt=e=>"number"==typeof e&&!isNaN(e),ei=e=>"string"==typeof e,ti=e=>"function"==typeof e,ii=e=>ei(e)||ti(e)?e:null,si=e=>(0,o.isValidElement)(e)||ei(e)||ti(e)||Jt(e);function ni(e){let{enter:t,exit:i,appendPosition:s=!1,collapse:n=!0,collapseDuration:r=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:h,nodeRef:d,isIn:u,playToast:p}=e;const g=s?`${t}--${l}`:t,m=s?`${i}--${l}`:i,f=(0,o.useRef)(0);return(0,o.useLayoutEffect)((()=>{const e=d.current,t=g.split(" "),i=s=>{s.target===d.current&&(p(),e.removeEventListener("animationend",i),e.removeEventListener("animationcancel",i),0===f.current&&"animationcancel"!==s.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",i),e.addEventListener("animationcancel",i)}),[]),(0,o.useEffect)((()=>{const e=d.current,t=()=>{e.removeEventListener("animationend",t),n?function(e,t,i){void 0===i&&(i=300);const{scrollHeight:s,style:n}=e;requestAnimationFrame((()=>{n.minHeight="initial",n.height=s+"px",n.transition=`all ${i}ms`,requestAnimationFrame((()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(t,i)}))}))}(e,h,r):h()};u||(c?t():(f.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))}),[u]),o.createElement(o.Fragment,null,a)}}function oi(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const ri=new Map;let ai=[];const li=new Set,ci=e=>li.forEach((t=>t(e))),hi=()=>ri.size>0;function di(e,t){var i;if(t)return!(null==(i=ri.get(t))||!i.isToastActive(e));let s=!1;return ri.forEach((t=>{t.isToastActive(e)&&(s=!0)})),s}function ui(e,t){si(e)&&(hi()||ai.push({content:e,options:t}),ri.forEach((i=>{i.buildToast(e,t)})))}function pi(e,t){ri.forEach((i=>{null!=t&&null!=t&&t.containerId?(null==t?void 0:t.containerId)===i.id&&i.toggle(e,null==t?void 0:t.id):i.toggle(e,null==t?void 0:t.id)}))}function gi(e){const{subscribe:t,getSnapshot:i,setProps:s}=(0,o.useRef)(function(e){const t=e.containerId||1;return{subscribe(i){const s=function(e,t,i){let s=1,n=0,r=[],a=[],l=[],c=t;const h=new Map,d=new Set,u=()=>{l=Array.from(h.values()),d.forEach((e=>e()))},p=e=>{a=null==e?[]:a.filter((t=>t!==e)),u()},g=e=>{const{toastId:t,onOpen:s,updateId:n,children:r}=e.props,l=null==n;e.staleId&&h.delete(e.staleId),h.set(t,e),a=[...a,e.props.toastId].filter((t=>t!==e.staleId)),u(),i(oi(e,l?"added":"updated")),l&&ti(s)&&s((0,o.isValidElement)(r)&&r.props)};return{id:e,props:c,observe:e=>(d.add(e),()=>d.delete(e)),toggle:(e,t)=>{h.forEach((i=>{null!=t&&t!==i.props.toastId||ti(i.toggle)&&i.toggle(e)}))},removeToast:p,toasts:h,clearQueue:()=>{n-=r.length,r=[]},buildToast:(t,a)=>{if((t=>{let{containerId:i,toastId:s,updateId:n}=t;const o=i?i!==e:1!==e,r=h.has(s)&&null==n;return o||r})(a))return;const{toastId:l,updateId:d,data:m,staleId:f,delay:v}=a,y=()=>{p(l)},C=null==d;C&&n++;const b={...c,style:c.toastStyle,key:s++,...Object.fromEntries(Object.entries(a).filter((e=>{let[t,i]=e;return null!=i}))),toastId:l,updateId:d,data:m,closeToast:y,isIn:!1,className:ii(a.className||c.toastClassName),bodyClassName:ii(a.bodyClassName||c.bodyClassName),progressClassName:ii(a.progressClassName||c.progressClassName),autoClose:!a.isLoading&&(w=a.autoClose,S=c.autoClose,!1===w||Jt(w)&&w>0?w:S),deleteToast(){const e=h.get(l),{onClose:t,children:s}=e.props;ti(t)&&t((0,o.isValidElement)(s)&&s.props),i(oi(e,"removed")),h.delete(l),n--,n<0&&(n=0),r.length>0?g(r.shift()):u()}};var w,S;b.closeButton=c.closeButton,!1===a.closeButton||si(a.closeButton)?b.closeButton=a.closeButton:!0===a.closeButton&&(b.closeButton=!si(c.closeButton)||c.closeButton);let x=t;(0,o.isValidElement)(t)&&!ei(t.type)?x=(0,o.cloneElement)(t,{closeToast:y,toastProps:b,data:m}):ti(t)&&(x=t({closeToast:y,toastProps:b,data:m}));const M={content:x,props:b,staleId:f};c.limit&&c.limit>0&&n>c.limit&&C?r.push(M):Jt(v)?setTimeout((()=>{g(M)}),v):g(M)},setProps(e){c=e},setToggle:(e,t)=>{h.get(e).toggle=t},isToastActive:e=>a.some((t=>t===e)),getSnapshot:()=>l}}(t,e,ci);ri.set(t,s);const n=s.observe(i);return ai.forEach((e=>ui(e.content,e.options))),ai=[],()=>{n(),ri.delete(t)}},setProps(e){var i;null==(i=ri.get(t))||i.setProps(e)},getSnapshot(){var e;return null==(e=ri.get(t))?void 0:e.getSnapshot()}}}(e)).current;s(e);const n=(0,o.useSyncExternalStore)(t,i,i);return{getToastToRender:function(t){if(!n)return[];const i=new Map;return e.newestOnTop&&n.reverse(),n.forEach((e=>{const{position:t}=e.props;i.has(t)||i.set(t,[]),i.get(t).push(e)})),Array.from(i,(e=>t(e[0],e[1])))},isToastActive:di,count:null==n?void 0:n.length}}function mi(e){const[t,i]=(0,o.useState)(!1),[s,n]=(0,o.useState)(!1),r=(0,o.useRef)(null),a=(0,o.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:h,onClick:d,closeOnClick:u}=e;var p,g;function m(){i(!0)}function f(){i(!1)}function v(i){const s=r.current;a.canDrag&&s&&(a.didMove=!0,t&&f(),a.delta="x"===e.draggableDirection?i.clientX-a.start:i.clientY-a.start,a.start!==i.clientX&&(a.canCloseOnClick=!1),s.style.transform=`translate3d(${"x"===e.draggableDirection?`${a.delta}px, var(--y)`:`0, calc(${a.delta}px + var(--y))`},0)`,s.style.opacity=""+(1-Math.abs(a.delta/a.removalDistance)))}function y(){document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",y);const t=r.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return n(!0),e.closeToast(),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}null==(g=ri.get((p={id:e.toastId,containerId:e.containerId,fn:i}).containerId||1))||g.setToggle(p.id,p.fn),(0,o.useEffect)((()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",m),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",m),window.removeEventListener("blur",f)}}),[e.pauseOnFocusLoss]);const C={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",v),document.addEventListener("pointerup",y);const i=r.current;a.canCloseOnClick=!0,a.canDrag=!0,i.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=i.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=i.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){const{top:i,bottom:s,left:n,right:o}=r.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=n&&t.clientX<=o&&t.clientY>=i&&t.clientY<=s?f():m()}};return l&&c&&(C.onMouseEnter=f,e.stacked||(C.onMouseLeave=m)),u&&(C.onClick=e=>{d&&d(e),a.canCloseOnClick&&h()}),{playToast:m,pauseToast:f,isRunning:t,preventExitTransition:s,toastRef:r,eventHandlers:C}}function fi(e){let{delay:t,isRunning:i,closeToast:s,type:n="default",hide:r,className:a,style:l,controlledProgress:c,progress:h,rtl:d,isIn:u,theme:p}=e;const g=r||c&&0===h,m={...l,animationDuration:`${t}ms`,animationPlayState:i?"running":"paused"};c&&(m.transform=`scaleX(${h})`);const f=Xt("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":d}),v=ti(a)?a({rtl:d,type:n,defaultClassName:f}):Xt(f,a),y={[c&&h>=1?"onTransitionEnd":"onAnimationEnd"]:c&&h<1?null:()=>{u&&s()}};return o.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},o.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${n}`}),o.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:v,style:m,...y}))}let vi=1;const yi=()=>""+vi++;function Ci(e){return e&&(ei(e.toastId)||Jt(e.toastId))?e.toastId:yi()}function bi(e,t){return ui(e,t),t.toastId}function wi(e,t){return{...t,type:t&&t.type||e,toastId:Ci(t)}}function Si(e){return(t,i)=>bi(t,wi(e,i))}function xi(e,t){return bi(e,wi("default",t))}xi.loading=(e,t)=>bi(e,wi("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),xi.promise=function(e,t,i){let s,{pending:n,error:o,success:r}=t;n&&(s=ei(n)?xi.loading(n,i):xi.loading(n.render,{...i,...n}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,n)=>{if(null==t)return void xi.dismiss(s);const o={type:e,...a,...i,data:n},r=ei(t)?{render:t}:t;return s?xi.update(s,{...o,...r}):xi(r.render,{...o,...r}),n},c=ti(e)?e():e;return c.then((e=>l("success",r,e))).catch((e=>l("error",o,e))),c},xi.success=Si("success"),xi.info=Si("info"),xi.error=Si("error"),xi.warning=Si("warning"),xi.warn=xi.warning,xi.dark=(e,t)=>bi(e,wi("default",{theme:"dark",...t})),xi.dismiss=function(e){!function(e){var t;if(hi()){if(null==e||ei(t=e)||Jt(t))ri.forEach((t=>{t.removeToast(e)}));else if(e&&("containerId"in e||"id"in e)){const t=ri.get(e.containerId);t?t.removeToast(e.id):ri.forEach((t=>{t.removeToast(e.id)}))}}else ai=ai.filter((t=>null!=e&&t.options.toastId!==e))}(e)},xi.clearWaitingQueue=function(e){void 0===e&&(e={}),ri.forEach((t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()}))},xi.isActive=di,xi.update=function(e,t){void 0===t&&(t={});const i=((e,t)=>{var i;let{containerId:s}=t;return null==(i=ri.get(s||1))?void 0:i.toasts.get(e)})(e,t);if(i){const{props:s,content:n}=i,o={delay:100,...s,...t,toastId:t.toastId||e,updateId:yi()};o.toastId!==e&&(o.staleId=e);const r=o.render||n;delete o.render,bi(r,o)}},xi.done=e=>{xi.update(e,{progress:1})},xi.onChange=function(e){return li.add(e),()=>{li.delete(e)}},xi.play=e=>pi(!0,e),xi.pause=e=>pi(!1,e);const Mi="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,Di=e=>{let{theme:t,type:i,isLoading:s,...n}=e;return o.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${i})`,...n})},Ri={info:function(e){return o.createElement(Di,{...e},o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return o.createElement(Di,{...e},o.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return o.createElement(Di,{...e},o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return o.createElement(Di,{...e},o.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return o.createElement("div",{className:"Toastify__spinner"})}},Ei=e=>{const{isRunning:t,preventExitTransition:i,toastRef:s,eventHandlers:n,playToast:r}=mi(e),{closeButton:a,children:l,autoClose:c,onClick:h,type:d,hideProgressBar:u,closeToast:p,transition:g,position:m,className:f,style:v,bodyClassName:y,bodyStyle:C,progressClassName:b,progressStyle:w,updateId:S,role:x,progress:M,rtl:D,toastId:R,deleteToast:E,isIn:I,isLoading:A,closeOnClick:k,theme:T}=e,L=Xt("Toastify__toast",`Toastify__toast-theme--${T}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":D},{"Toastify__toast--close-on-click":k}),P=ti(f)?f({rtl:D,position:m,type:d,defaultClassName:L}):Xt(L,f),F=function(e){let{theme:t,type:i,isLoading:s,icon:n}=e,r=null;const a={theme:t,type:i};return!1===n||(ti(n)?r=n({...a,isLoading:s}):(0,o.isValidElement)(n)?r=(0,o.cloneElement)(n,a):s?r=Ri.spinner():(e=>e in Ri)(i)&&(r=Ri[i](a))),r}(e),N=!!M||!c,O={closeToast:p,type:d,theme:T};let B=null;return!1===a||(B=ti(a)?a(O):(0,o.isValidElement)(a)?(0,o.cloneElement)(a,O):function(e){let{closeToast:t,theme:i,ariaLabel:s="close"}=e;return o.createElement("button",{className:`Toastify__close-button Toastify__close-button--${i}`,type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":s},o.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(O)),o.createElement(g,{isIn:I,done:E,position:m,preventExitTransition:i,nodeRef:s,playToast:r},o.createElement("div",{id:R,onClick:h,"data-in":I,className:P,...n,style:v,ref:s},o.createElement("div",{...I&&{role:x},className:ti(y)?y({type:d}):Xt("Toastify__toast-body",y),style:C},null!=F&&o.createElement("div",{className:Xt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},F),o.createElement("div",null,l)),B,o.createElement(fi,{...S&&!N?{key:`pb-${S}`}:{},rtl:D,theme:T,delay:c,isRunning:t,isIn:I,closeToast:p,hide:u,type:d,style:w,className:b,controlledProgress:N,progress:M||0})))},Ii=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Ai=ni(Ii("bounce",!0)),ki=(ni(Ii("slide",!0)),ni(Ii("zoom")),ni(Ii("flip")),{position:"top-right",transition:Ai,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"});function Ti(e){let t={...ki,...e};const i=e.stacked,[s,n]=(0,o.useState)(!0),r=(0,o.useRef)(null),{getToastToRender:a,isToastActive:l,count:c}=gi(t),{className:h,style:d,rtl:u,containerId:p}=t;function g(e){const t=Xt("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":u});return ti(h)?h({position:e,rtl:u,defaultClassName:t}):Xt(t,ii(h))}function m(){i&&(n(!0),xi.play())}return Mi((()=>{if(i){var e;const i=r.current.querySelectorAll('[data-in="true"]'),n=12,o=null==(e=t.position)?void 0:e.includes("top");let a=0,l=0;Array.from(i).reverse().forEach(((e,t)=>{const i=e;i.classList.add("Toastify__toast--stacked"),t>0&&(i.dataset.collapsed=`${s}`),i.dataset.pos||(i.dataset.pos=o?"top":"bot");const r=a*(s?.2:1)+(s?0:n*t);i.style.setProperty("--y",`${o?r:-1*r}px`),i.style.setProperty("--g",`${n}`),i.style.setProperty("--s",""+(1-(s?l:0))),a+=i.offsetHeight,l+=.025}))}}),[s,c,i]),o.createElement("div",{ref:r,className:"Toastify",id:p,onMouseEnter:()=>{i&&(n(!1),xi.pause())},onMouseLeave:m},a(((e,t)=>{const s=t.length?{...d}:{...d,pointerEvents:"none"};return o.createElement("div",{className:g(e),style:s,key:`container-${e}`},t.map((e=>{let{content:t,props:s}=e;return o.createElement(Ei,{...s,stacked:i,collapseAll:m,isIn:l(s.toastId,s.containerId),style:s.style,key:`toast-${s.key}`},t)})))})))}var Li={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pi=o.createContext&&o.createContext(Li),Fi=["attr","size","title"];function Ni(e,t){if(null==e)return{};var i,s,n=function(e,t){if(null==e)return{};var i={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)i=o[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Oi.apply(this,arguments)}function Bi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Gi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(i),!0).forEach((function(t){zi(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function zi(e,t,i){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ji(e){return e&&e.map(((e,t)=>o.createElement(e.tag,Gi({key:t},e.attr),ji(e.child))))}function Vi(e){return t=>o.createElement(Hi,Oi({attr:Gi({},e.attr)},t),ji(e.child))}function Hi(e){var t=t=>{var i,{attr:s,size:n,title:r}=e,a=Ni(e,Fi),l=n||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),o.createElement("svg",Oi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,a,{className:i,style:Gi(Gi({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&o.createElement("title",null,r),e.children)};return void 0!==Pi?o.createElement(Pi.Consumer,null,(e=>t(e))):t(Li)}function Wi(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(e)}function _i(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(e)}function Ui(e){return Vi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function $i(e){return Vi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function Ki(e){return Vi({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function Yi(e){return Vi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(e)}function Zi(e){return Vi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}function qi(e){return Vi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"},child:[]}]})(e)}function Qi(e){return Vi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M436.406 29.625l-18.094 42.22-48.562 5.905 42.156 25.656 1.375 13.47C367.938 90.74 302.435 75.36 214.78 82.31l-20.186-3.343-24.125-38.407.5 39.78-49.22 16.438 55.063 4.564 7.843 33.78 17.094-37.78 17.906-2.75c203.993 22.03 277.475 204.75 77.875 207.625l5.22-37.595 36.75-43.72-51.344-24.968-30.22-48.468-39.623 41.124-4.125 1.03C-8.4 163.078-31.708 304.485 98.844 376.125l-11.938 12.688L39.844 374.5l33.03 39.406-15.124 42.53 36.375-31.155 47.03 18.095-30.374-43.875 4.69-15.03c62.43 28.648 153.852 42.16 270.5 20.717-241.042 33.38-364.142-137.94-219.283-195.687l23.032 43.25-4 56.97 56.218-9.97 19.25 7.813c218.255 102.608 297.46-83.917 171.843-177.75l14.376-22.22 46.47-16.5-41.907-14.812-15.564-46.655zM34.53 79.03l4.845 26.095-19.47 22 27.22-3.25 17.563 23.344.687-29.47 24.78-17.906-33.218-1.72-22.406-19.093zm358.564 298.5l14.25 51.658-31.375 41.062 49.592-12.688 33.688 34.282-2.53-51.406 35.217-30.375-51.593 1.562-47.25-34.094z"},child:[]}]})(e)}function Xi(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.25 12a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM5.5 9.25a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM6.25 5a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM9 12.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75Zm.75-4.25a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5ZM9 5.75A.75.75 0 0 1 9.75 5h.5a.75.75 0 0 1 0 1.5h-.5A.75.75 0 0 1 9 5.75ZM13.25 12a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Zm-.75-2.75a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5h-.5a.75.75 0 0 1-.75-.75ZM13.25 5a.75.75 0 0 0 0 1.5h.5a.75.75 0 0 0 0-1.5h-.5Z"},child:[]},{tag:"path",attr:{d:"M2 20V3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v17c0 .173-.022.34-.063.5H20a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.2-.4l-.5-.375a.75.75 0 0 1 .9-1.2l.5.375c.504.378.8.97.8 1.6v8a2 2 0 0 1-2 2h-3.562a.767.767 0 0 1-.166-.018c-.089.012-.18.018-.272.018h-3.75a.75.75 0 0 1-.75-.75V19h-3v2.25a.75.75 0 0 1-.75.75H4a2 2 0 0 1-2-2Zm2 .5h3v-2.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v2.25h3a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H4a.5.5 0 0 0-.5.5v17a.5.5 0 0 0 .5.5Z"},child:[]}]})(e)}function Ji(e){return Vi({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M124,216a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V40A12,12,0,0,1,48,28h64a12,12,0,0,1,0,24H60V204h52A12,12,0,0,1,124,216Zm108.49-96.49-40-40a12,12,0,0,0-17,17L195,116H112a12,12,0,0,0,0,24h83l-19.52,19.51a12,12,0,0,0,17,17l40-40A12,12,0,0,0,232.49,119.51Z"},child:[]}]})(e)}function es(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 10C14.2091 10 16 8.20914 16 6 16 3.79086 14.2091 2 12 2 9.79086 2 8 3.79086 8 6 8 8.20914 9.79086 10 12 10ZM5.5 13C6.88071 13 8 11.8807 8 10.5 8 9.11929 6.88071 8 5.5 8 4.11929 8 3 9.11929 3 10.5 3 11.8807 4.11929 13 5.5 13ZM21 10.5C21 11.8807 19.8807 13 18.5 13 17.1193 13 16 11.8807 16 10.5 16 9.11929 17.1193 8 18.5 8 19.8807 8 21 9.11929 21 10.5ZM12 11C14.7614 11 17 13.2386 17 16V22H7V16C7 13.2386 9.23858 11 12 11ZM5 15.9999C5 15.307 5.10067 14.6376 5.28818 14.0056L5.11864 14.0204C3.36503 14.2104 2 15.6958 2 17.4999V21.9999H5V15.9999ZM22 21.9999V17.4999C22 15.6378 20.5459 14.1153 18.7118 14.0056 18.8993 14.6376 19 15.307 19 15.9999V21.9999H22Z"},child:[]}]})(e)}function ts(e,t){return function(){return e.apply(t,arguments)}}const{toString:is}=Object.prototype,{getPrototypeOf:ss}=Object,{iterator:ns,toStringTag:os}=Symbol,rs=(as=Object.create(null),e=>{const t=is.call(e);return as[t]||(as[t]=t.slice(8,-1).toLowerCase())});var as;const ls=e=>(e=e.toLowerCase(),t=>rs(t)===e),cs=e=>t=>typeof t===e,{isArray:hs}=Array,ds=cs("undefined");function us(e){return null!==e&&!ds(e)&&null!==e.constructor&&!ds(e.constructor)&&ms(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ps=ls("ArrayBuffer");const gs=cs("string"),ms=cs("function"),fs=cs("number"),vs=e=>null!==e&&"object"===typeof e,ys=e=>{if("object"!==rs(e))return!1;const t=ss(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(os in e)&&!(ns in e)},Cs=ls("Date"),bs=ls("File"),ws=ls("Blob"),Ss=ls("FileList"),xs=ls("URLSearchParams"),[Ms,Ds,Rs,Es]=["ReadableStream","Request","Response","Headers"].map(ls);function Is(e,t){let i,s,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),hs(e))for(i=0,s=e.length;i<s;i++)t.call(null,e[i],i,e);else{if(us(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let r;for(i=0;i<o;i++)r=s[i],t.call(null,e[r],r,e)}}function As(e,t){if(us(e))return null;t=t.toLowerCase();const i=Object.keys(e);let s,n=i.length;for(;n-- >0;)if(s=i[n],t===s.toLowerCase())return s;return null}const ks="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ts=e=>!ds(e)&&e!==ks;const Ls=(Ps="undefined"!==typeof Uint8Array&&ss(Uint8Array),e=>Ps&&e instanceof Ps);var Ps;const Fs=ls("HTMLFormElement"),Ns=(e=>{let{hasOwnProperty:t}=e;return(e,i)=>t.call(e,i)})(Object.prototype),Os=ls("RegExp"),Bs=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),s={};Is(i,((i,n)=>{let o;!1!==(o=t(i,n,e))&&(s[n]=o||i)})),Object.defineProperties(e,s)};const Gs=ls("AsyncFunction"),zs=((e,t)=>{return e?setImmediate:t?(i=`axios@${Math.random()}`,s=[],ks.addEventListener("message",(e=>{let{source:t,data:n}=e;t===ks&&n===i&&s.length&&s.shift()()}),!1),e=>{s.push(e),ks.postMessage(i,"*")}):e=>setTimeout(e);var i,s})("function"===typeof setImmediate,ms(ks.postMessage)),js="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ks):"undefined"!==typeof process&&process.nextTick||zs,Vs={isArray:hs,isArrayBuffer:ps,isBuffer:us,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ms(e.append)&&("formdata"===(t=rs(e))||"object"===t&&ms(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ps(e.buffer),t},isString:gs,isNumber:fs,isBoolean:e=>!0===e||!1===e,isObject:vs,isPlainObject:ys,isEmptyObject:e=>{if(!vs(e)||us(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(mK){return!1}},isReadableStream:Ms,isRequest:Ds,isResponse:Rs,isHeaders:Es,isUndefined:ds,isDate:Cs,isFile:bs,isBlob:ws,isRegExp:Os,isFunction:ms,isStream:e=>vs(e)&&ms(e.pipe),isURLSearchParams:xs,isTypedArray:Ls,isFileList:Ss,forEach:Is,merge:function e(){const{caseless:t}=Ts(this)&&this||{},i={},s=(s,n)=>{const o=t&&As(i,n)||n;ys(i[o])&&ys(s)?i[o]=e(i[o],s):ys(s)?i[o]=e({},s):hs(s)?i[o]=s.slice():i[o]=s};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Is(arguments[n],s);return i},extend:function(e,t,i){let{allOwnKeys:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Is(t,((t,s)=>{i&&ms(t)?e[s]=ts(t,i):e[s]=t}),{allOwnKeys:s}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,s)=>{let n,o,r;const a={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),o=n.length;o-- >0;)r=n[o],s&&!s(r,e,t)||a[r]||(t[r]=e[r],a[r]=!0);e=!1!==i&&ss(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:rs,kindOfTest:ls,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const s=e.indexOf(t,i);return-1!==s&&s===i},toArray:e=>{if(!e)return null;if(hs(e))return e;let t=e.length;if(!fs(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[ns]).call(e);let s;for(;(s=i.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const s=[];for(;null!==(i=e.exec(t));)s.push(i);return s},isHTMLForm:Fs,hasOwnProperty:Ns,hasOwnProp:Ns,reduceDescriptors:Bs,freezeMethods:e=>{Bs(e,((t,i)=>{if(ms(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const s=e[i];ms(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},s=e=>{e.forEach((e=>{i[e]=!0}))};return hs(e)?s(e):s(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:As,global:ks,isContextDefined:Ts,isSpecCompliantForm:function(e){return!!(e&&ms(e.append)&&"FormData"===e[os]&&e[ns])},toJSONObject:e=>{const t=new Array(10),i=(e,s)=>{if(vs(e)){if(t.indexOf(e)>=0)return;if(us(e))return e;if(!("toJSON"in e)){t[s]=e;const n=hs(e)?[]:{};return Is(e,((e,t)=>{const o=i(e,s+1);!ds(o)&&(n[t]=o)})),t[s]=void 0,n}}return e};return i(e,0)},isAsyncFn:Gs,isThenable:e=>e&&(vs(e)||ms(e))&&ms(e.then)&&ms(e.catch),setImmediate:zs,asap:js,isIterable:e=>null!=e&&ms(e[ns])};function Hs(e,t,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}Vs.inherits(Hs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vs.toJSONObject(this.config),code:this.code,status:this.status}}});const Ws=Hs.prototype,_s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{_s[e]={value:e}})),Object.defineProperties(Hs,_s),Object.defineProperty(Ws,"isAxiosError",{value:!0}),Hs.from=(e,t,i,s,n,o)=>{const r=Object.create(Ws);return Vs.toFlatObject(e,r,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Hs.call(r,e.message,t,i,s,n),r.cause=e,r.name=e.name,o&&Object.assign(r,o),r};const Us=Hs;function $s(e){return Vs.isPlainObject(e)||Vs.isArray(e)}function Ks(e){return Vs.endsWith(e,"[]")?e.slice(0,-2):e}function Ys(e,t,i){return e?e.concat(t).map((function(e,t){return e=Ks(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}const Zs=Vs.toFlatObject(Vs,{},null,(function(e){return/^is[A-Z]/.test(e)}));const qs=function(e,t,i){if(!Vs.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(i=Vs.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Vs.isUndefined(t[e])}))).metaTokens,n=i.visitor||c,o=i.dots,r=i.indexes,a=(i.Blob||"undefined"!==typeof Blob&&Blob)&&Vs.isSpecCompliantForm(t);if(!Vs.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Vs.isDate(e))return e.toISOString();if(Vs.isBoolean(e))return e.toString();if(!a&&Vs.isBlob(e))throw new Us("Blob is not supported. Use a Buffer instead.");return Vs.isArrayBuffer(e)||Vs.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,n){let a=e;if(e&&!n&&"object"===typeof e)if(Vs.endsWith(i,"{}"))i=s?i:i.slice(0,-2),e=JSON.stringify(e);else if(Vs.isArray(e)&&function(e){return Vs.isArray(e)&&!e.some($s)}(e)||(Vs.isFileList(e)||Vs.endsWith(i,"[]"))&&(a=Vs.toArray(e)))return i=Ks(i),a.forEach((function(e,s){!Vs.isUndefined(e)&&null!==e&&t.append(!0===r?Ys([i],s,o):null===r?i:i+"[]",l(e))})),!1;return!!$s(e)||(t.append(Ys(n,i,o),l(e)),!1)}const h=[],d=Object.assign(Zs,{defaultVisitor:c,convertValue:l,isVisitable:$s});if(!Vs.isObject(e))throw new TypeError("data must be an object");return function e(i,s){if(!Vs.isUndefined(i)){if(-1!==h.indexOf(i))throw Error("Circular reference detected in "+s.join("."));h.push(i),Vs.forEach(i,(function(i,o){!0===(!(Vs.isUndefined(i)||null===i)&&n.call(t,i,Vs.isString(o)?o.trim():o,s,d))&&e(i,s?s.concat(o):[o])})),h.pop()}}(e),t};function Qs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Xs(e,t){this._pairs=[],e&&qs(e,this,t)}const Js=Xs.prototype;Js.append=function(e,t){this._pairs.push([e,t])},Js.toString=function(e){const t=e?function(t){return e.call(this,t,Qs)}:Qs;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const en=Xs;function tn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sn(e,t,i){if(!t)return e;const s=i&&i.encode||tn;Vs.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let o;if(o=n?n(t,i):Vs.isURLSearchParams(t)?t.toString():new en(t,i).toString(s),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const nn=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Vs.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},on={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rn={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:en,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},an="undefined"!==typeof window&&"undefined"!==typeof document,ln="object"===typeof navigator&&navigator||void 0,cn=an&&(!ln||["ReactNative","NativeScript","NS"].indexOf(ln.product)<0),hn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,dn=an&&window.location.href||"http://localhost",un={...s,...rn};const pn=function(e){function t(e,i,s,n){let o=e[n++];if("__proto__"===o)return!0;const r=Number.isFinite(+o),a=n>=e.length;if(o=!o&&Vs.isArray(s)?s.length:o,a)return Vs.hasOwnProp(s,o)?s[o]=[s[o],i]:s[o]=i,!r;s[o]&&Vs.isObject(s[o])||(s[o]=[]);return t(e,i,s[o],n)&&Vs.isArray(s[o])&&(s[o]=function(e){const t={},i=Object.keys(e);let s;const n=i.length;let o;for(s=0;s<n;s++)o=i[s],t[o]=e[o];return t}(s[o])),!r}if(Vs.isFormData(e)&&Vs.isFunction(e.entries)){const i={};return Vs.forEachEntry(e,((e,s)=>{t(function(e){return Vs.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,i,0)})),i}return null};const gn={transitional:on,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,n=Vs.isObject(e);n&&Vs.isHTMLForm(e)&&(e=new FormData(e));if(Vs.isFormData(e))return s?JSON.stringify(pn(e)):e;if(Vs.isArrayBuffer(e)||Vs.isBuffer(e)||Vs.isStream(e)||Vs.isFile(e)||Vs.isBlob(e)||Vs.isReadableStream(e))return e;if(Vs.isArrayBufferView(e))return e.buffer;if(Vs.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(n){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return qs(e,new un.classes.URLSearchParams,{visitor:function(e,t,i,s){return un.isNode&&Vs.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=Vs.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return qs(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),function(e,t,i){if(Vs.isString(e))try{return(t||JSON.parse)(e),Vs.trim(e)}catch(mK){if("SyntaxError"!==mK.name)throw mK}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||gn.transitional,i=t&&t.forcedJSONParsing,s="json"===this.responseType;if(Vs.isResponse(e)||Vs.isReadableStream(e))return e;if(e&&Vs.isString(e)&&(i&&!this.responseType||s)){const i=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(mK){if(i){if("SyntaxError"===mK.name)throw Us.from(mK,Us.ERR_BAD_RESPONSE,this,null,this.response);throw mK}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:un.classes.FormData,Blob:un.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vs.forEach(["delete","get","head","post","put","patch"],(e=>{gn.headers[e]={}}));const mn=gn,fn=Vs.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vn=Symbol("internals");function yn(e){return e&&String(e).trim().toLowerCase()}function Cn(e){return!1===e||null==e?e:Vs.isArray(e)?e.map(Cn):String(e)}function bn(e,t,i,s,n){return Vs.isFunction(s)?s.call(this,t,i):(n&&(t=i),Vs.isString(t)?Vs.isString(s)?-1!==t.indexOf(s):Vs.isRegExp(s)?s.test(t):void 0:void 0)}class wn{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function n(e,t,i){const n=yn(t);if(!n)throw new Error("header name must be a non-empty string");const o=Vs.findKey(s,n);(!o||void 0===s[o]||!0===i||void 0===i&&!1!==s[o])&&(s[o||t]=Cn(e))}const o=(e,t)=>Vs.forEach(e,((e,i)=>n(e,i,t)));if(Vs.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Vs.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let i,s,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),i=e.substring(0,n).trim().toLowerCase(),s=e.substring(n+1).trim(),!i||t[i]&&fn[i]||("set-cookie"===i?t[i]?t[i].push(s):t[i]=[s]:t[i]=t[i]?t[i]+", "+s:s)})),t})(e),t);else if(Vs.isObject(e)&&Vs.isIterable(e)){let i,s,n={};for(const t of e){if(!Vs.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[s=t[0]]=(i=n[s])?Vs.isArray(i)?[...i,t[1]]:[i,t[1]]:t[1]}o(n,t)}else null!=e&&n(t,e,i);return this}get(e,t){if(e=yn(e)){const i=Vs.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(e);)t[s[1]]=s[2];return t}(e);if(Vs.isFunction(t))return t.call(this,e,i);if(Vs.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yn(e)){const i=Vs.findKey(this,e);return!(!i||void 0===this[i]||t&&!bn(0,this[i],i,t))}return!1}delete(e,t){const i=this;let s=!1;function n(e){if(e=yn(e)){const n=Vs.findKey(i,e);!n||t&&!bn(0,i[n],n,t)||(delete i[n],s=!0)}}return Vs.isArray(e)?e.forEach(n):n(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const n=t[i];e&&!bn(0,this[n],n,e,!0)||(delete this[n],s=!0)}return s}normalize(e){const t=this,i={};return Vs.forEach(this,((s,n)=>{const o=Vs.findKey(i,n);if(o)return t[o]=Cn(s),void delete t[n];const r=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(n):String(n).trim();r!==n&&delete t[n],t[r]=Cn(s),i[r]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Vs.forEach(this,((i,s)=>{null!=i&&!1!==i&&(t[s]=e&&Vs.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,i]=e;return t+": "+i})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return s.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[vn]=this[vn]={accessors:{}}).accessors,i=this.prototype;function s(e){const s=yn(e);t[s]||(!function(e,t){const i=Vs.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+i,{value:function(e,i,n){return this[s].call(this,t,e,i,n)},configurable:!0})}))}(i,e),t[s]=!0)}return Vs.isArray(e)?e.forEach(s):s(e),this}}wn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Vs.reduceDescriptors(wn.prototype,((e,t)=>{let{value:i}=e,s=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(e){this[s]=e}}})),Vs.freezeMethods(wn);const Sn=wn;function xn(e,t){const i=this||mn,s=t||i,n=Sn.from(s.headers);let o=s.data;return Vs.forEach(e,(function(e){o=e.call(i,o,n.normalize(),t?t.status:void 0)})),n.normalize(),o}function Mn(e){return!(!e||!e.__CANCEL__)}function Dn(e,t,i){Us.call(this,null==e?"canceled":e,Us.ERR_CANCELED,t,i),this.name="CanceledError"}Vs.inherits(Dn,Us,{__CANCEL__:!0});const Rn=Dn;function En(e,t,i){const s=i.config.validateStatus;i.status&&s&&!s(i.status)?t(new Us("Request failed with status code "+i.status,[Us.ERR_BAD_REQUEST,Us.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}const In=function(e,t){e=e||10;const i=new Array(e),s=new Array(e);let n,o=0,r=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=s[r];n||(n=l),i[o]=a,s[o]=l;let h=r,d=0;for(;h!==o;)d+=i[h++],h%=e;if(o=(o+1)%e,o===r&&(r=(r+1)%e),l-n<t)return;const u=c&&l-c;return u?Math.round(1e3*d/u):void 0}};const An=function(e,t){let i,s,n=0,o=1e3/t;const r=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=o,i=null,s&&(clearTimeout(s),s=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=o?r(l,e):(i=l,s||(s=setTimeout((()=>{s=null,r(i)}),o-t)))},()=>i&&r(i)]},kn=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=0;const n=In(50,250);return An((i=>{const o=i.loaded,r=i.lengthComputable?i.total:void 0,a=o-s,l=n(a);s=o;e({loaded:o,total:r,progress:r?o/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&o<=r?(r-o)/l:void 0,event:i,lengthComputable:null!=r,[t?"download":"upload"]:!0})}),i)},Tn=(e,t)=>{const i=null!=e;return[s=>t[0]({lengthComputable:i,total:e,loaded:s}),t[1]]},Ln=e=>function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return Vs.asap((()=>e(...i)))},Pn=un.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,un.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(un.origin),un.navigator&&/(msie|trident)/i.test(un.navigator.userAgent)):()=>!0,Fn=un.hasStandardBrowserEnv?{write(e,t,i,s,n,o){const r=[e+"="+encodeURIComponent(t)];Vs.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),Vs.isString(s)&&r.push("path="+s),Vs.isString(n)&&r.push("domain="+n),!0===o&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Nn(e,t,i){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==i)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const On=e=>e instanceof Sn?{...e}:e;function Bn(e,t){t=t||{};const i={};function s(e,t,i,s){return Vs.isPlainObject(e)&&Vs.isPlainObject(t)?Vs.merge.call({caseless:s},e,t):Vs.isPlainObject(t)?Vs.merge({},t):Vs.isArray(t)?t.slice():t}function n(e,t,i,n){return Vs.isUndefined(t)?Vs.isUndefined(e)?void 0:s(void 0,e,0,n):s(e,t,0,n)}function o(e,t){if(!Vs.isUndefined(t))return s(void 0,t)}function r(e,t){return Vs.isUndefined(t)?Vs.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function a(i,n,o){return o in t?s(i,n):o in e?s(void 0,i):void 0}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(e,t,i)=>n(On(e),On(t),0,!0)};return Vs.forEach(Object.keys({...e,...t}),(function(s){const o=l[s]||n,r=o(e[s],t[s],s);Vs.isUndefined(r)&&o!==a||(i[s]=r)})),i}const Gn=e=>{const t=Bn({},e);let i,{data:s,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:r,headers:a,auth:l}=t;if(t.headers=a=Sn.from(a),t.url=sn(Nn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Vs.isFormData(s))if(un.hasStandardBrowserEnv||un.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(i=a.getContentType())){const[e,...t]=i?i.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(un.hasStandardBrowserEnv&&(n&&Vs.isFunction(n)&&(n=n(t)),n||!1!==n&&Pn(t.url))){const e=o&&r&&Fn.read(r);e&&a.set(o,e)}return t},zn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){const s=Gn(e);let n=s.data;const o=Sn.from(s.headers).normalize();let r,a,l,c,h,{responseType:d,onUploadProgress:u,onDownloadProgress:p}=s;function g(){c&&c(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(r),s.signal&&s.signal.removeEventListener("abort",r)}let m=new XMLHttpRequest;function f(){if(!m)return;const s=Sn.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());En((function(e){t(e),g()}),(function(e){i(e),g()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:s,config:e,request:m}),m=null}m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout,"onloadend"in m?m.onloadend=f:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(f)},m.onabort=function(){m&&(i(new Us("Request aborted",Us.ECONNABORTED,e,m)),m=null)},m.onerror=function(){i(new Us("Network Error",Us.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const n=s.transitional||on;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),i(new Us(t,n.clarifyTimeoutError?Us.ETIMEDOUT:Us.ECONNABORTED,e,m)),m=null},void 0===n&&o.setContentType(null),"setRequestHeader"in m&&Vs.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Vs.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),d&&"json"!==d&&(m.responseType=s.responseType),p&&([l,h]=kn(p,!0),m.addEventListener("progress",l)),u&&m.upload&&([a,c]=kn(u),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(r=t=>{m&&(i(!t||t.type?new Rn(null,e,m):t),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(r),s.signal&&(s.signal.aborted?r():s.signal.addEventListener("abort",r)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);v&&-1===un.protocols.indexOf(v)?i(new Us("Unsupported protocol "+v+":",Us.ERR_BAD_REQUEST,e)):m.send(n||null)}))},jn=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,s=new AbortController;const n=function(e){if(!i){i=!0,r();const t=e instanceof Error?e:this.reason;s.abort(t instanceof Us?t:new Rn(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,n(new Us(`timeout ${t} of ms exceeded`,Us.ETIMEDOUT))}),t);const r=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)})),e=null)};e.forEach((e=>e.addEventListener("abort",n)));const{signal:a}=s;return a.unsubscribe=()=>Vs.asap(r),a}},Vn=function*(e,t){let i=e.byteLength;if(!t||i<t)return void(yield e);let s,n=0;for(;n<i;)s=n+t,yield e.slice(n,s),n=s},Hn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},Wn=(e,t,i,s)=>{const n=async function*(e,t){for await(const i of Hn(e))yield*Vn(i,t)}(e,t);let o,r=0,a=e=>{o||(o=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await n.next();if(t)return a(),void e.close();let o=s.byteLength;if(i){let e=r+=o;i(e)}e.enqueue(new Uint8Array(s))}catch(t){throw a(t),t}},cancel:e=>(a(e),n.return())},{highWaterMark:2})},_n="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Un=_n&&"function"===typeof ReadableStream,$n=_n&&("function"===typeof TextEncoder?(Kn=new TextEncoder,e=>Kn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Kn;const Yn=function(e){try{for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return!!e(...i)}catch(mK){return!1}},Zn=Un&&Yn((()=>{let e=!1;const t=new Request(un.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),qn=Un&&Yn((()=>Vs.isReadableStream(new Response("").body))),Qn={stream:qn&&(e=>e.body)};var Xn;_n&&(Xn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Qn[e]&&(Qn[e]=Vs.isFunction(Xn[e])?t=>t[e]():(t,i)=>{throw new Us(`Response type '${e}' is not supported`,Us.ERR_NOT_SUPPORT,i)})})));const Jn=async(e,t)=>{const i=Vs.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(Vs.isBlob(e))return e.size;if(Vs.isSpecCompliantForm(e)){const t=new Request(un.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Vs.isArrayBufferView(e)||Vs.isArrayBuffer(e)?e.byteLength:(Vs.isURLSearchParams(e)&&(e+=""),Vs.isString(e)?(await $n(e)).byteLength:void 0)})(t):i},eo=_n&&(async e=>{let{url:t,method:i,data:s,signal:n,cancelToken:o,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:d="same-origin",fetchOptions:u}=Gn(e);c=c?(c+"").toLowerCase():"text";let p,g=jn([n,o&&o.toAbortSignal()],r);const m=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let f;try{if(l&&Zn&&"get"!==i&&"head"!==i&&0!==(f=await Jn(h,s))){let e,i=new Request(t,{method:"POST",body:s,duplex:"half"});if(Vs.isFormData(s)&&(e=i.headers.get("content-type"))&&h.setContentType(e),i.body){const[e,t]=Tn(f,kn(Ln(l)));s=Wn(i.body,65536,e,t)}}Vs.isString(d)||(d=d?"include":"omit");const n="credentials"in Request.prototype;p=new Request(t,{...u,signal:g,method:i.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:n?d:void 0});let o=await fetch(p,u);const r=qn&&("stream"===c||"response"===c);if(qn&&(a||r&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=Vs.toFiniteNumber(o.headers.get("content-length")),[i,s]=a&&Tn(t,kn(Ln(a),!0))||[];o=new Response(Wn(o.body,65536,i,(()=>{s&&s(),m&&m()})),e)}c=c||"text";let v=await Qn[Vs.findKey(Qn,c)||"text"](o,e);return!r&&m&&m(),await new Promise(((t,i)=>{En(t,i,{data:v,headers:Sn.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new Us("Network Error",Us.ERR_NETWORK,e,p),{cause:v.cause||v});throw Us.from(v,v&&v.code,e,p)}}),to={http:null,xhr:zn,fetch:eo};Vs.forEach(to,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(mK){}Object.defineProperty(e,"adapterName",{value:t})}}));const io=e=>`- ${e}`,so=e=>Vs.isFunction(e)||null===e||!1===e,no=e=>{e=Vs.isArray(e)?e:[e];const{length:t}=e;let i,s;const n={};for(let o=0;o<t;o++){let t;if(i=e[o],s=i,!so(i)&&(s=to[(t=String(i)).toLowerCase()],void 0===s))throw new Us(`Unknown adapter '${t}'`);if(s)break;n[t||"#"+o]=s}if(!s){const e=Object.entries(n).map((e=>{let[t,i]=e;return`adapter ${t} `+(!1===i?"is not supported by the environment":"is not available in the build")}));let i=t?e.length>1?"since :\n"+e.map(io).join("\n"):" "+io(e[0]):"as no adapter specified";throw new Us("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s};function oo(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rn(null,e)}function ro(e){oo(e),e.headers=Sn.from(e.headers),e.data=xn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return no(e.adapter||mn.adapter)(e).then((function(t){return oo(e),t.data=xn.call(e,e.transformResponse,t),t.headers=Sn.from(t.headers),t}),(function(t){return Mn(t)||(oo(e),t&&t.response&&(t.response.data=xn.call(e,e.transformResponse,t.response),t.response.headers=Sn.from(t.response.headers))),Promise.reject(t)}))}const ao="1.11.0",lo={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{lo[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const co={};lo.transitional=function(e,t,i){function s(e,t){return"[Axios v"+ao+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,n,o)=>{if(!1===e)throw new Us(s(n," has been removed"+(t?" in "+t:"")),Us.ERR_DEPRECATED);return t&&!co[n]&&(co[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,o)}},lo.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};const ho={assertOptions:function(e,t,i){if("object"!==typeof e)throw new Us("options must be an object",Us.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const o=s[n],r=t[o];if(r){const t=e[o],i=void 0===t||r(t,o,e);if(!0!==i)throw new Us("option "+o+" must be "+i,Us.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new Us("Unknown option "+o,Us.ERR_BAD_OPTION)}},validators:lo},uo=ho.validators;class po{constructor(e){this.defaults=e||{},this.interceptors={request:new nn,response:new nn}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+t):i.stack=t}catch(mK){}}throw i}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Bn(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:n}=t;void 0!==i&&ho.assertOptions(i,{silentJSONParsing:uo.transitional(uo.boolean),forcedJSONParsing:uo.transitional(uo.boolean),clarifyTimeoutError:uo.transitional(uo.boolean)},!1),null!=s&&(Vs.isFunction(s)?t.paramsSerializer={serialize:s}:ho.assertOptions(s,{encode:uo.function,serialize:uo.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ho.assertOptions(t,{baseUrl:uo.spelling("baseURL"),withXsrfToken:uo.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=n&&Vs.merge(n.common,n[t.method]);n&&Vs.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=Sn.concat(o,n);const r=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let h,d=0;if(!a){const e=[ro.bind(this),void 0];for(e.unshift(...r),e.push(...l),h=e.length,c=Promise.resolve(t);d<h;)c=c.then(e[d++],e[d++]);return c}h=r.length;let u=t;for(d=0;d<h;){const e=r[d++],t=r[d++];try{u=e(u)}catch(Ey){t.call(this,Ey);break}}try{c=ro.call(this,u)}catch(Ey){return Promise.reject(Ey)}for(d=0,h=l.length;d<h;)c=c.then(l[d++],l[d++]);return c}getUri(e){return sn(Nn((e=Bn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Vs.forEach(["delete","get","head","options"],(function(e){po.prototype[e]=function(t,i){return this.request(Bn(i||{},{method:e,url:t,data:(i||{}).data}))}})),Vs.forEach(["post","put","patch"],(function(e){function t(t){return function(i,s,n){return this.request(Bn(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:s}))}}po.prototype[e]=t(),po.prototype[e+"Form"]=t(!0)}));const go=po;class mo{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{i.subscribe(e),t=e})).then(e);return s.cancel=function(){i.unsubscribe(t)},s},e((function(e,s,n){i.reason||(i.reason=new Rn(e,s,n),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new mo((function(t){e=t}));return{token:t,cancel:e}}}const fo=mo;const vo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vo).forEach((e=>{let[t,i]=e;vo[i]=t}));const yo=vo;const Co=function e(t){const i=new go(t),s=ts(go.prototype.request,i);return Vs.extend(s,go.prototype,i,{allOwnKeys:!0}),Vs.extend(s,i,null,{allOwnKeys:!0}),s.create=function(i){return e(Bn(t,i))},s}(mn);Co.Axios=go,Co.CanceledError=Rn,Co.CancelToken=fo,Co.isCancel=Mn,Co.VERSION=ao,Co.toFormData=qs,Co.AxiosError=Us,Co.Cancel=Co.CanceledError,Co.all=function(e){return Promise.all(e)},Co.spread=function(e){return function(t){return e.apply(null,t)}},Co.isAxiosError=function(e){return Vs.isObject(e)&&!0===e.isAxiosError},Co.mergeConfig=Bn,Co.AxiosHeaders=Sn,Co.formToJSON=e=>pn(Vs.isHTMLForm(e)?new FormData(e):e),Co.getAdapter=no,Co.HttpStatusCode=yo,Co.default=Co;const bo=Co.create({baseURL:"http://localhost:5000"});bo.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e)));const wo=bo,So=()=>wo.get("/token-check"),xo="Modal_modal__mDZ6B",Mo="Modal_modal__buttons__OG+Ln";var Do=i(579);const Ro=e=>{let{isOpen:t,onClose:i,onConfirm:s,message:n,buttonTitle:o,HasInput:r=null,rootid:a="modal-root"}=e;return t?l.createPortal((0,Do.jsx)("div",{className:"overlay",children:(0,Do.jsxs)("div",{className:xo,children:[(0,Do.jsx)("p",{children:n}),r&&(0,Do.jsx)(r,{}),(0,Do.jsxs)("div",{className:Mo,children:[(0,Do.jsx)("button",{className:"btn btn-danger",onClick:s,children:o}),(0,Do.jsx)("button",{className:"btn btn-primary",onClick:i,children:"Cancel"})]})]})}),document.getElementById(a)):null},Eo={nav:"Navbar_nav__HNg8V",nav__logo:"Navbar_nav__logo__sl7DW",nav__list:"Navbar_nav__list__JFEQp",pulse:"Navbar_pulse__moEDS",active:"Navbar_active__X4VTh"},Io=()=>{const[e,t]=(0,o.useState)([]),[i,s]=(0,o.useState)(!1),n=at(),r=localStorage.getItem("token");(0,o.useEffect)((()=>{if(r)try{So().then((e=>{e.data.isAuthenticated?s(!0):s(!1)}))}catch(Ey){localStorage.removeItem("token"),console.error("Error checking token:",Ey),s(!1)}else s(!1)}),[r]),(0,o.useEffect)((()=>{const e=[{to:"/",label:"Home",icon:(0,Do.jsx)(Ki,{})},{to:"stats",label:"Stats",icon:(0,Do.jsx)(Wi,{})},{to:"teams",label:"Teams",icon:(0,Do.jsx)(es,{})}];t(i?[...e,{to:"students",label:"Students",icon:(0,Do.jsx)(Zi,{})},{to:"companies",label:"Companies",icon:(0,Do.jsx)(Xi,{})},{to:"experience",label:"Experience",icon:(0,Do.jsx)(Qi,{})},{to:"profile",label:"Profile",icon:(0,Do.jsx)(_i,{})}]:[...e,{to:"auth?mode=signin",label:"Auth",icon:(0,Do.jsx)(Yi,{})}])}),[i]);const[a,l]=(0,o.useState)(!1),c=()=>{l(!1)};return(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsxs)("nav",{className:Eo.nav,children:[(0,Do.jsx)($t,{to:"/","aria-label":"Home",className:Eo.nav__logo,children:(0,Do.jsx)("span",{children:"Placemento"})}),(0,Do.jsxs)("div",{className:Eo.nav__list,children:[e.map((e=>(0,Do.jsx)($t,{to:e.to,className:e=>{let{isActive:t}=e;return t?Eo.active:void 0},"aria-label":e.label,children:e.icon},e.to))),i&&(0,Do.jsx)("button",{className:Eo.nav__signout,"aria-label":"Sign Out",onClick:()=>{l(!0)},children:(0,Do.jsx)(Ji,{})}),(0,Do.jsx)(Ro,{isOpen:a,onClose:c,onConfirm:()=>{localStorage.removeItem("token"),n("/"),c()},message:"Are you sure you want to sign out?",buttonTitle:"Sign Out"})]})]}),(0,Do.jsx)(Mt,{})]})},Ao=()=>(0,Do.jsxs)("div",{className:"not-found",children:[(0,Do.jsx)("h1",{children:"404"}),(0,Do.jsx)("p",{children:"Page not found"})]}),ko=e=>{let{res:t,messages:i}=e;return(0,Do.jsxs)("div",{className:"toast-content",children:[(0,Do.jsx)("h3",{className:"toast-res",children:t}),(0,Do.jsx)("div",{className:"toast-messages",children:i.map((e=>(0,Do.jsx)("div",{className:"toast-message",children:e},e)))})]})},To={"auth-form":"auth_auth-form__BWoPW",fadeInUp:"auth_fadeInUp__9k7lN","auth-form__head2":"auth_auth-form__head2__GoLjw","auth-form__item":"auth_auth-form__item__Bnevy","input-container":"auth_input-container__9CJ51",glow:"auth_glow__c26hy",btn:"auth_btn__RwWv3","auth-form__item_btn":"auth_auth-form__item_btn__bzdBR","auth-form__footer":"auth_auth-form__footer__ihRPl","password-toggle":"auth_password-toggle__OlFuk","forgot-password":"auth_forgot-password__28-MW"},Lo=()=>{const[e,t]=(0,o.useState)(0),[i,s]=(0,o.useState)(""),[n,r]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[c,h]=(0,o.useState)(!1),[d,u]=(0,o.useState)(!1),p=async()=>{if(0===e)try{const s=await(e=>wo.post("/auth/verify-email",e))({email:i});xi.success((0,Do.jsx)(ko,{res:"Email Sent",messages:s.data.messages})),t(e+1)}catch(s){xi.error((0,Do.jsx)(ko,{res:"Email Sent",messages:s.response.data.errors}))}else if(1===e)try{const s=await((e,t)=>wo.post("/auth/verify-otp",e,t))({email:i,otp:n});xi.success((0,Do.jsx)(ko,{res:"OTP Verified",messages:s.data.messages})),t(e+1)}catch(s){xi.error((0,Do.jsx)(ko,{res:"OTP Verification Failed",messages:s.response.data.errors}))}else try{const e=await((e,t,i)=>wo.post("/auth/reset-password",e,t,i))({email:i,otp:n,newPassword:a});xi.success((0,Do.jsx)(ko,{res:"Password Reset Successful",messages:e.data.messages})),u(!1)}catch(s){xi.error((0,Do.jsx)(ko,{res:"Password Reset Failed",messages:s.response.data.errors}))}},[g,m]=(0,o.useState)("Enter your College Email ID!!"),[f,v]=(0,o.useState)("Send Email"),[y,C]=(0,o.useState)("email"),[b,w]=(0,o.useState)("Enter your email"),[S,x]=(0,o.useState)(i.trim().replace("@student.nitw.ac.in",""));(0,o.useEffect)((()=>{0===e?(m("Enter your College Email ID!!"),v("Send Email"),C("email"),w("Enter your email"),x(i.trim().replace("@student.nitw.ac.in",""))):1===e?(m("Check your email for OTP"),v("Verify OTP"),C("number"),w("Enter OTP"),x(n)):(m("Enter your new password"),v("Reset Password"),C(c?"text":"password"),w("Enter new password"),x(a))}),[e,i,a,n,c]);const M=()=>(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:y,placeholder:b,onChange:t=>{0===e?(e=>{const t=e.target.value.trim().toLowerCase(),i="@student.nitw.ac.in";let n=t;t.startsWith(i)||(n=i?`${t}${i}`:t),s(n)})(t):1===e?r(t.target.value):l(t.target.value)},value:S,id:"input",autoFocus:!0}),2===e&&(0,Do.jsx)("button",{className:To["password-toggle"],onClick:()=>h(!c),children:c?(0,Do.jsx)(Ui,{}):(0,Do.jsx)($i,{})}),0===e&&(0,Do.jsx)("div",{className:To["email-domain"],children:"@student.nitw.ac.in"})]});return(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsx)("button",{className:To["forgot-password"],onClick:()=>u(!0),type:"button",children:"Forgot Password?"}),d&&(0,Do.jsx)(Ro,{isOpen:d,onClose:()=>{t(0),u(!1)},onConfirm:()=>p(),message:g,buttonTitle:f,HasInput:()=>M()})]})},Po=e=>{let{mode:t}=e;const i="signin"===t?"Already have an account?":"Don't have an account?",s="signin"===t?"Sign In":"Sign Up";return(0,Do.jsxs)("div",{className:To["auth-form__footer"],children:[(0,Do.jsx)("p",{children:i}),(0,Do.jsx)(Ut,{to:`/auth?mode=${t}`,children:s})]})},Fo=()=>{const[e,t]=(0,o.useState)(""),[i,s]=(0,o.useState)(""),[n,r]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[c,h]=(0,o.useState)("0"),[d,u]=(0,o.useState)("0"),[p,g]=(0,o.useState)("0"),[m,f]=(0,o.useState)("0"),[v,y]=(0,o.useState)("0"),[C,b]=(0,o.useState)("0"),[w,S]=(0,o.useState)("0"),[x,M]=(0,o.useState)("0"),[D,R]=(0,o.useState)(0),[E,I]=(0,o.useState)(0),[A,k]=(0,o.useState)(1),[T]=qt(),L=at(),P="signin"===T.get("mode"),[F,N]=(0,o.useState)(!1),O=()=>(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"email",children:"Email"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"Enter your email",onChange:e=>r(e.target.value),value:n}),(0,Do.jsx)("div",{className:To["email-domain"],children:"@student.nitw.ac.in"})]})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"password",children:"Password"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:F?"text":"password",placeholder:"Password",onChange:e=>l(e.target.value),value:a}),(0,Do.jsx)("button",{type:"button",className:To["password-toggle"],onClick:()=>N(!F),children:F?(0,Do.jsx)(Ui,{}):(0,Do.jsx)($i,{})})]})]})]});return(0,Do.jsxs)("div",{className:To["auth-form"],children:[(0,Do.jsx)("h1",{children:P?"Sign In":"Sign Up"}),(0,Do.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),t(e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "));const o=n.trim().toLowerCase()+"@student.nitw.ac.in",r=P?{email:o,password:a}:{name:e,rollNo:i,email:o,password:a,pg:{cgpa:c,percentage:d},ug:{cgpa:p,percentage:m},hsc:{cgpa:v,percentage:C},ssc:{cgpa:w,percentage:x},totalGapInAcademics:D,backlogs:0};try{const e=await(P?(e=>wo.post("/auth/login",e))(r):(e=>wo.post("/auth/signup",e))(r));xi.success((0,Do.jsx)(ko,{res:P?"Sign In successful":"Sign Up successful",messages:e.data.messages})),P?(localStorage.setItem("token",e.data.data.token),L("/")):L("/auth?mode=signin")}catch(l){xi.error((0,Do.jsx)(ko,{res:P?"Sign In failed":"Sign Up failed",messages:l.response.data.errors}))}},children:[P?(0,Do.jsxs)(Do.Fragment,{children:[O(),(0,Do.jsx)("button",{type:"submit",className:To.btn,children:"Sign In"}),(0,Do.jsx)(Lo,{})]}):(0,Do.jsxs)(Do.Fragment,{children:[1===A&&(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsx)("div",{className:To["auth-form__head2"],children:(0,Do.jsx)("h2",{children:"Enter your personal details"})}),O(),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"name",children:"Name"}),(0,Do.jsx)("input",{type:"text",placeholder:"Name",onChange:e=>t(e.target.value),value:e})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"rollNo",children:"Roll No"}),(0,Do.jsx)("input",{type:"text",placeholder:"Roll No",onChange:e=>s(e.target.value),value:i})]}),(0,Do.jsx)("button",{className:To.btn,onClick:()=>k(2),children:"Next"})]}),2===A&&(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsxs)("div",{className:To["auth-form__head2"],children:[(0,Do.jsx)("h2",{children:"Enter your academic details"}),(0,Do.jsx)("p",{children:"(Please Do Conversion According to your Institute)"})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"pg",children:"PG"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"PG CGPA",value:c,onChange:e=>{const t=e.target.value;h(t),u((9.5*t).toFixed(2))},step:"0.01"}),(0,Do.jsx)("div",{children:"CGPA"})]}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"PG Percentage",value:d,onChange:e=>u(e.target.value),disabled:!0}),(0,Do.jsx)("div",{children:"%"})]})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"ug",children:"UG"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"UG CGPA",onChange:e=>g(e.target.value),value:p,step:"0.01"}),(0,Do.jsx)("div",{children:"CGPA"})]}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"UG Percentage",onChange:e=>f(e.target.value),value:m,step:"0.01"}),(0,Do.jsx)("div",{children:"%"})]})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"hsc",children:"12th"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"HSC CGPA",onChange:e=>y(e.target.value),value:v,step:"0.01"}),(0,Do.jsx)("div",{children:"CGPA"})]}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"HSC Percentage",onChange:e=>b(e.target.value),value:C,step:"0.01"}),(0,Do.jsx)("div",{children:"%"})]})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"ssc",children:"10th"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"SSC CGPA",onChange:e=>S(e.target.value),value:w,step:"0.01"}),(0,Do.jsx)("div",{children:"CGPA"})]}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"text",placeholder:"SSC Percentage",onChange:e=>M(e.target.value),value:x,step:"0.01"}),(0,Do.jsx)("div",{children:"%"})]})]}),(0,Do.jsxs)("div",{className:To["auth-form__item"],children:[(0,Do.jsx)("label",{htmlFor:"totalGapInAcademics",children:"Gap"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"number",placeholder:"Total Gap in Academics",value:D,onChange:e=>R(e.target.value)}),(0,Do.jsx)("div",{children:"Years"})]}),(0,Do.jsx)("label",{htmlFor:"backlogs",children:"Backlogs"}),(0,Do.jsxs)("div",{className:To["input-container"],children:[(0,Do.jsx)("input",{type:"number",placeholder:"Backlogs",value:E,onChange:e=>I(e.target.value)}),(0,Do.jsx)("div",{children:"Subjects"})]})]}),(0,Do.jsxs)("div",{className:To["auth-form__item_btn"],children:[(0,Do.jsx)("button",{className:To.btn,onClick:()=>k(1),children:"Previous"}),(0,Do.jsx)("button",{type:"submit",className:To.btn,children:"Sign Up"})]})]})]}),(0,Do.jsx)(Po,{mode:P?"signup":"signin"})]})]})},No=()=>(0,Do.jsx)("div",{className:"container",style:{alignContent:"center",justifyContent:"center"},children:(0,Do.jsx)(Fo,{})});function Oo(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function Bo(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function Go(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h3.75L17.81 9.94l-3.75-3.75L3 17.25V21zm2-2.92 9.06-9.06.92.92L5.92 19H5v-.92zM18.37 3.29a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34z"},child:[]}]})(e)}const zo=()=>wo.get("/companies/view"),jo=e=>wo.get(`/companies/view/${e}`),Vo=e=>wo.post("/companies/add",e),Ho=(e,t)=>wo.put(`/companies/update/${e}`,t);class Wo extends Error{}function _o(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let i=t.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i})))}(t)}catch(i){return atob(t)}}Wo.prototype.name="InvalidTokenError";const Uo=(e,t)=>wo.put(`/users/role/${e}`,{role:t}),$o=(e,t)=>wo.put(`/users/company/${e}`,{companyId:t}),Ko=(e,t)=>wo.put(`/users/companyLocation/${e}`,{location:t}),Yo=async()=>{const e=localStorage.getItem("token");if(!e)return null;const t=await(async e=>{try{return!!(await So()).data.isAuthenticated&&JSON.parse(atob(e.split(".")[1])).exp>Date.now()/1e3}catch(Ey){return!1}})(e);return t?e:(localStorage.removeItem("token"),null)},Zo=async()=>await Yo()?null:$("/auth?mode=signin"),qo=async()=>{const e=await Yo();try{const i=function(e,t){if("string"!==typeof e)throw new Wo("Invalid token specified: must be a string");t||(t={});const i=!0===t.header?0:1,s=e.split(".")[i];if("string"!==typeof s)throw new Wo(`Invalid token specified: missing part #${i+1}`);let n;try{n=_o(s)}catch(mK){throw new Wo(`Invalid token specified: invalid base64 for part #${i+1} (${mK.message})`)}try{return JSON.parse(n)}catch(mK){throw new Wo(`Invalid token specified: invalid json for part #${i+1} (${mK.message})`)}}(e),s=await(t=i.id,wo.get(`/users/view/${t}`));return s.data.id=i.id,s.data}catch(Ey){return console.error("Error decoding token:",Ey.message),null}var t};var Qo=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getListeners(e,i,!1);if(s&&(s.delete(t),0===s.size)){(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}}addGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const s=(i,s)=>i.forEach((i=>{if(!s.has(i))return;const n=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(e))):()=>i(e);t?this.dispatchAsync(n):n()})),n=this.getListeners(i,t,!1)??new Set,o=new Set(n);o.size>0&&s(o,n);new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((s=>{const n=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>s(i,e))):()=>s(i,e);t?this.dispatchAsync(n):n()}))}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}},Xo=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(Xo||{}),Jo={};function er(e,t){Jo[t]||(e(),Jo[t]=!0)}function tr(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];console.log("AG Grid: "+e,...i)}function ir(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];er((()=>console.warn("AG Grid: "+e,...i)),e+i?.join(""))}function sr(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];er((()=>console.error("AG Grid: "+e,...i)),e+i?.join(""))}function nr(e){return!!(e&&e.constructor&&e.call&&e.apply)}function or(e){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length>0&&window.setTimeout((()=>e.forEach((e=>e()))),t)}(e,400)}var rr=[],ar=!1;function lr(e){rr.push(e),ar||(ar=!0,window.setTimeout((()=>{const e=rr.slice();rr.length=0,ar=!1,e.forEach((e=>e()))}),0))}function cr(e,t){let i;return function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];const r=this;window.clearTimeout(i),i=window.setTimeout((function(){e.apply(r,n)}),t)}}function hr(e,t){let i=0;return function(){const s=(new Date).getTime();if(!(s-i<t)){i=s;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(this,o)}}}function dr(e){return null==e||""===e?null:e}function ur(e){return null!=e&&(""!==e||arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function pr(e){return!ur(e)}function gr(e){return null==e||0===e.length}function mr(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function fr(e){if(void 0===e)return;if(null===e||""===e)return null;if("number"===typeof e)return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function vr(e){if(void 0!==e)return null!==e&&""!==e&&yr(e)}function yr(e){return"boolean"===typeof e?e:"string"===typeof e&&("TRUE"===e.toUpperCase()||""==e)}function Cr(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function br(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=null==e,n=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function o(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return o(e,t);if(!i)return o(e,t);try{return e.localeCompare(t)}catch(mK){return o(e,t)}}function wr(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach((e=>t.push(e))),t}return Object.values(e)}function Sr(e,t){return e.get("rowModelType")===t}function xr(e){return Sr(e,"clientSide")}function Mr(e){return Sr(e,"serverSide")}function Dr(e,t){return e.get("domLayout")===t}function Rr(e){return void 0!==ta(e)}function Er(e){return!e.get("suppressAsyncEvents")}function Ir(e){return"function"===typeof e.get("getRowHeight")}function Ar(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;if(null==s&&(s=e.environment.getDefaultRowHeight()),Ir(e)){if(i)return{height:s,estimated:!0};const n={node:t,data:t.data},o=e.getCallback("getRowHeight")(n);if(Tr(o))return 0===o&&ir("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}if(t.detail&&e.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(Tr(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(e);const n=e.get("rowHeight");return{height:n&&Tr(n)?n:s,estimated:!1}}function kr(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||pr(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return-1!==s?s:(ir("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function Tr(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}function Lr(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function Pr(e,t,i,s){const n=e.getDomDataKey();let o=t[n];pr(o)&&(o={},t[n]=o),o[i]=s}function Fr(e){let t=null;const i=e.get("getDocument");return i&&ur(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&ur(t)?t:document}function Nr(e){return Fr(e).defaultView||window}function Or(e){return e.eGridDiv.getRootNode()}function Br(e){return Or(e).activeElement}function Gr(e){const t=Fr(e),i=Br(e);return null===i||i===t.body}function zr(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function jr(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Dr(e,"print"))}function Vr(e){const t=e.get("autoGroupColumnDef");return!t?.comparator&&!e.get("treeData")}function Hr(e){const t=e.get("groupAggFiltering");return"function"===typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function Wr(e){const t=e.get("grandTotalRow");if(t)return t;return e.get("groupIncludeTotalFooter")?"bottom":void 0}function _r(e){const t=e.get("groupTotalRow");if("function"===typeof t)return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if("function"===typeof i){const t=e.getCallback("groupIncludeFooter");return e=>t(e)?"bottom":void 0}return()=>i?"bottom":void 0}function Ur(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")}function $r(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function Kr(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!==typeof i&&(ir("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}function Yr(e){return e?.checkboxes??!0}function Zr(e){return"multiRow"===e?.mode&&(e.headerCheckbox??!0)}function qr(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function Qr(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!==typeof t&&"fill"===t.handle?.mode:e.get("enableFillHandle")}function Xr(e){const t=e.get("rowSelection")??"single";if("string"===typeof t){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===t.mode||"multiRow"===t.mode)&&(t.enableClickSelection??!1)}function Jr(e){const t=Xr(e);return!0===t||"enableDeselection"===t}function ea(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("isRowSelectable"):t?.isRowSelectable}function ta(e){const t=e.get("rowSelection");if("string"===typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function ia(e){return"multiRow"===ta(e)}function sa(e){const t=e.get("rowSelection");if("string"===typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===t?.mode?t.groupSelects:void 0}function na(e){const t=sa(e);return"descendants"===t||"filteredDescendants"===t}function oa(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function ra(e){if(e&&e.length)return e[e.length-1]}function aa(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,s)=>i?i(e,t[s]):t[s]===e))}function la(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function ca(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function ha(e,t,i){e.splice(i,0,t)}function da(e,t,i){!function(e,t){for(let i=0;i<t.length;i++)ca(e,t[i])}(e,t),t.slice().reverse().forEach((t=>ha(e,t,i)))}function ua(e,t){return e.indexOf(t)>-1}function pa(e,t){null!=t&&null!=e&&t.forEach((t=>e.push(t)))}var ga="__ag_Grid_Stop_Propagation",ma=["touchstart","touchend","touchmove","touchcancel","scroll"],fa={};function va(e){e[ga]=!0}function ya(e){return!0===e[ga]}var Ca=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof fa[t])return fa[t];const i=document.createElement(e[t]||"div");return fa[t="on"+t]=t in i}})();function ba(e,t,i){let s=t;for(;s;){const t=Lr(e,s,i);if(t)return t;s=s.parentElement}return null}function wa(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var Sa=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Qo),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?function(e,t,i,s){const n=ua(ma,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,n)}(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==s)),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==i)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const s={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(s)};e.forEach((e=>this.setupGridOptionListener(e,s)))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function xa(e){return e instanceof Ma}var Ma=class extends Sa{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=Ua(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach((t=>{$a(t)?e.push(t):xa(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let o=0,r=s.length;o<r;o++){const n=s[o];if(!n.isVisible())continue;const r=n.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{xa(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Da="ag-Grid-ControlsColumn",Ra=class extends Sa{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||"object"!==typeof t)return[];const i=Yr(t),s=Zr(t);if(i||s){const t=e.get("selectionColumnDef"),i={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(e,t,i,s){const n=i.isSelected(),o=s.isSelected();return n&&o?0:n?1:-1},editable:!1,suppressFillHandle:!0,...t,colId:`${Da}`},s=new Ka(i,null,i.colId,!1);return this.createBean(s),[s]}return[]}},Ea="ag-Grid-AutoColumn";function Ia(e){const t=[],i=e=>{for(let s=0;s<e.length;s++){const n=e[s];$a(n)?t.push(n):xa(n)&&i(n.getChildren())}};return i(e),t}function Aa(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}function ka(e,t,i){const s={};if(!t)return;Qa(null,t,(e=>{s[e.getInstanceId()]=e})),i&&Qa(null,i,(e=>{s[e.getInstanceId()]=null}));const n=Object.values(s).filter((e=>null!=e));e.destroyBeans(n)}function Ta(e){return e.getId().startsWith(Ea)}function La(e){return e.getColId().startsWith(Da)}function Pa(e){let t=[];if(e instanceof Array){e.some((e=>"string"!==typeof e))?ir("if colDef.type is supplied an array it should be of type 'string[]'"):t=e}else"string"===typeof e?t=e.split(","):ir("colDef.type should be of type 'string' | 'string[]'");return t}var Fa=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e,t){const{frameworkOverrides:i,wrappedListeners:s}=this;let n=t;if(i.shouldWrapOutgoing){n=e=>{i.wrapOutgoing((()=>t(e)))};let o=s.get(e);o||(o=new Map,s.set(e,o)),o.set(t,n)}return n}wrapGlobal(e){const{frameworkOverrides:t,wrappedGlobalListeners:i}=this;let s=e;return t.shouldWrapOutgoing&&(s=(i,s)=>{t.wrapOutgoing((()=>e(i,s)))},i.set(e,s)),s}unwrap(e,t){const{wrappedListeners:i}=this,s=i.get(e);if(s){const n=s.get(t);if(n)return s.delete(t),0===s.size&&i.delete(e),n}return t}unwrapGlobal(e){const{wrappedGlobalListeners:t}=this,i=t.get(e);return i?(t.delete(e),i):e}},Na=new Set(["__proto__","constructor","prototype"]);function Oa(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const[i,s]of Object.entries(e))t(i,s)}function Ba(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(Na.has(i[s]))continue;const n=i[s],o=e[n];t[n]=o}return t}function Ga(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||Na.has(e))return;const n=i[e],o=Ha(n)&&n.constructor===Object;s[e]=o?Ga(n):n})),s}function za(e){if(!e)return[];const t=Object;if("function"===typeof t.values)return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function ja(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];ur(t)&&Oa(t,((t,n)=>{if(Na.has(t))return;let o=e[t];if(o!==n){if(s){if(null==o&&null!=n){"object"===typeof n&&n.constructor===Object&&(o={},e[t]=o)}}Ha(n)&&Ha(o)&&!Array.isArray(o)?ja(o,n,i,s):(i||void 0!==n)&&(e[t]=n)}}))}function Va(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let o=0;o<s.length;o++){if(null==n)return;n=n[s[o]]}return n}function Ha(e){return"object"===typeof e&&null!==e}var Wa={resizable:!0,sortable:!0},_a=0;function Ua(){return _a++}function $a(e){return e instanceof Ka}var Ka=class extends Sa{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=Ua(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Qo,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?"asc"!==e.sort&&"desc"!==e.sort||(this.sort=e.sort):"asc"!==e.initialSort&&"desc"!==e.initialSort||(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;void 0!==t?null!==t&&(this.sortIndex=t):null!==i&&(this.sortIndex=i);const s=e.hide,n=e.initialHide;this.visible=void 0!==s?!s:!n,void 0!==e.pinned?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,r=e.initialFlex;void 0!==o?this.flex=o:void 0!==r&&(this.flex=r)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=ur(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=ur(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=ur(this.colDef.tooltipField)||ur(this.colDef.tooltipValueGetter)||ur(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=fr(e.width),s=fr(e.initialWidth);return t=null!=i?i:null!=s?s:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(pr(this.colDef)||pr(this.colDef.showRowGroup))return!1;const t=!0===this.colDef.showRowGroup,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Fa(this.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(e,t)??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"===typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"===typeof this.colDef.suppressNavigable){const t=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(t)}return!1}isCellEditable(e){if(e.group)if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&"string"!==typeof t){const i=La(this)&&Yr(t);return this.isColumnFunc(e,i)}return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Wa[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return pr(this.sort)}isSorting(){return ur(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&ja(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(pr(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(pr(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},Ya={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Za=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=mr(e);let i=0;for(;;){let s;if(e?(s=e,0!==i&&(s+="_"+i)):t?(s=t,0!==i&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},qa=class extends Sa{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const n=new Za,{existingCols:o,existingGroups:r,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,o,n,r,s),c=this.findMaxDept(l,0),h=this.balanceColumnTree(l,0,c,n);return Qa(null,h,((e,t)=>{xa(e)&&e.setupExpandable(),e.setOriginalParent(t)})),{columnTree:h,treeDept:c}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&Qa(null,e,(e=>{if(xa(e)){const t=e;i.push(t)}else{const i=e;s.push(i.getId()),t.push(i)}})),{existingCols:t,existingGroups:i,existingColKeys:s}}balanceTreeForAutoCols(e,t){const i=[],s=this.findDepth(t);return e.forEach((e=>{let t=e;for(let i=s-1;i>=0;i--){const s=new Ma(null,`FAKE_PATH_${e.getId()}}_${i}`,!0,i);this.createBean(s),s.setChildren([t]),t.setOriginalParent(s),t=s}0===s&&e.setOriginalParent(null),i.push(t)})),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&xa(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let o=0;o<e.length;o++){const r=e[o];if(xa(r)){const e=r,o=this.balanceColumnTree(e.getChildren(),t+1,i,s);e.setChildren(o),n.push(e)}else{let o,a;for(let e=i-1;e>=t;e--){const e=s.getUniqueKey(null,null),i=this.createMergedColGroupDef(null),n=new Ma(i,e,!0,t);this.createBean(n),a&&a.setChildren([n]),a=n,o||(o=a)}if(o&&a){n.push(o);if(e.some((e=>xa(e)))){a.setChildren([r]);continue}a.setChildren(e);break}n.push(r)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(xa(n)){const e=n,s=this.findMaxDept(e.getChildren(),t+1);i<s&&(i=s)}}return i}recursivelyCreateColumns(e,t,i,s,n,o,r){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,t,s,n,o,r):a[l]=this.createColumn(i,c,s,n,r)}return a}createColumnGroup(e,t,i,s,n,o,r){const a=this.createMergedColGroupDef(t),l=n.getUniqueKey(a.groupId||null,null),c=new Ma(a,l,!1,i);this.createBean(c);const h=this.findExistingGroup(t,o);h&&o.splice(h.idx,1);const d=h?.group;d&&c.setExpanded(d.isExpanded());const u=this.recursivelyCreateColumns(a.children,i+1,e,s,n,o,r);return c.setChildren(u),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){const o=this.findExistingColumn(t,i);o&&i?.splice(o.idx,1);let r=o?.column;if(r){const e=this.addColumnDefaultAndTypes(t,r.getColId());r.setColDef(e,t,n),this.applyColumnState(r,e,n)}else{const i=s.getUniqueKey(t.colId,t.field),n=this.addColumnDefaultAndTypes(t,i);r=new Ka(n,t,i,e),this.createBean(r)}return this.dataTypeService?.addColumnListeners(r),r}applyColumnState(e,t,i){const s=fr(t.flex);void 0!==s&&e.setFlex(s);if(e.getFlex()<=0){const s=fr(t.width);if(null!=s)e.setActualWidth(s,i);else{const t=e.getActualWidth();e.setActualWidth(t,i)}}void 0!==t.sort&&("asc"==t.sort||"desc"==t.sort?e.setSort(t.sort,i):e.setSort(void 0,i));const n=fr(t.sortIndex);void 0!==n&&e.setSortIndex(n);const o=vr(t.hide);void 0!==o&&e.setVisible(!o,i),void 0!==t.pinned&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(s.field===e.field)return{idx:i,column:t[i]}}else if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){const i={};ja(i,this.gos.get("defaultColDef"),!1,!0);const s=this.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),ja(i,e,!1,!0);const n=this.gos.get("autoGroupColumnDef"),o=Vr(this.gos);return e.rowGroup&&n&&o&&ja(i,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService?.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){const s=this.dataTypeService?.updateColDefAndGetColumnType(e,t,i),n=t.type??s??e.type;return e.type=n,n?Pa(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},Ya);Oa(this.gos.get("columnTypes")||{},((e,t)=>{if(e in i)ir(`the column type '${e}' is a default column type and cannot be overridden.`);else{t.type&&ir("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[e]=t}})),e.forEach((e=>{const s=i[e.trim()];s?ja(t,s,!1,!0):ir("colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")}))}isColumnGroup(e){return void 0!==e.children}};function Qa(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];xa(n)&&Qa(n,n.getChildren(),i),i(n,e)}}var Xa=class extends Sa{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.refreshAll(Ja(e.source)))),this.addManagedPropertyListener("rowSelection",(e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Ja(e.source))})),this.addManagedPropertyListener("autoGroupColumnDef",(e=>this.onAutoGroupColumnDefChanged(Ja(e.source)))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],(e=>this.recreateColumnDefs(Ja(e.source)))),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),Ja(e.source)))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=this.colDefCols?.list,s=this.colDefCols?.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,s,e);ka(this.context,this.colDefCols?.tree,n.columnTree);const o=n.columnTree,r=n.treeDept,a=Ia(o),l={};a.forEach((e=>l[e.getId()]=e)),this.colDefCols={tree:o,treeDepth:r,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),"gridInitializing"===e&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=(s=this.gos,this.showingPivotResult?!s.get("enableStrictPivotColumnOrder"):s.get("maintainColumnOrder"));var s;e&&!i||this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear();!aa(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=null!=e,e){const{map:t,list:i,tree:s,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n};e.list.some((e=>void 0!==this.cols?.map[e.getColId()]))||(this.lastPivotOrder=null)}else{const{map:e,list:t,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:t.slice(),map:{...e},tree:i.slice(),treeDepth:s}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter((i=>{const s=Ta(i);if(e){const e=t&&ua(t,i);return s||e}return s||i.isVisible()}))}addAutoCols(){null!=this.autoCols&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),el(this.cols))}createAutoCols(){const e=$r(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),s=()=>{this.autoCols&&(ka(this.context,this.autoCols.tree),this.autoCols=null)};if(!(i.length>0||this.gos.get("treeData"))||t||e||!this.autoColService)return void s();const n=this.autoColService.createAutoCols(i)??[],o=il(n,this.autoCols?.list||null),r=this.cols.treeDepth,a=this.autoCols?this.autoCols.treeDepth:-1;if(o&&a==r)return;s();const[l,c]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.autoCols={list:n,tree:l,treeDepth:c,map:{}};const h=e=>{if(!e)return null;const t=e.filter((e=>!Ta(e)));return[...n,...t]};this.lastOrder=h(this.lastOrder),this.lastPivotOrder=h(this.lastPivotOrder)}createControlsCols(){const e=()=>{ka(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,i=(this.controlsCols?.treeDepth??-1)==t,s=this.controlsColService?.createControlsCols()??[];if(il(s,this.controlsCols?.list??[])&&i)return;e();const[n,o]=this.columnFactory.balanceTreeForAutoCols(s,this.cols.tree);this.controlsCols={list:s,tree:n,treeDepth:o,map:{}};const r=e=>{if(!e)return null;const t=e.filter((e=>!La(e)));return[...s,...t]};this.lastOrder=r(this.lastOrder),this.lastPivotOrder=r(this.lastPivotOrder)}addControlsCols(){null!=this.controlsCols&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),el(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.columnApplyStateService.applyColumnState({state:e.map((e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t})))},i)}setColsPinned(e,t,i){if(!this.cols)return;if(gr(e))return;if(Dr(this.gos,"print"))return void ir("Changing the column pinning status is not allowed with domLayout='print'");let s;this.columnAnimationService.start(),s=!0===t||"left"===t?"left":"right"===t?"right":null;const n=[];e.forEach((e=>{if(!e)return;const t=this.getCol(e);t&&t.getPinned()!==s&&(t.setPinned(s),n.push(t))})),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;s=xa(e)?e.getId():e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){let t=null;return Qa(null,this.cols?.tree,(i=>{xa(i)&&i.getId()===e&&(t=i)})),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===t)return!1;if(-1===t)return!0;return t>this.funcColsService.getRowGroupColumns().findIndex((t=>t.getColId()===e.getColId()))}isSuppressAutoCol(){if("custom"===this.gos.get("groupDisplayType"))return!0;return"custom"===this.gos.get("treeDataDisplayType")}setAutoHeightActive(){if(this.autoHeightActive=this.cols.list.some((e=>e.isVisible()&&e.isAutoHeight())),this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;xr(this.gos)||Mr(this.gos)||ir("autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map(((e,t)=>[e,t])));if(!this.cols.list.some((e=>t.has(e))))return;const i=new Map(this.cols.list.map((e=>[e,!0]))),s=e.filter((e=>i.has(e))),n=new Map(s.map((e=>[e,!0]))),o=this.cols.list.filter((e=>!n.has(e))),r=s.slice();o.forEach((e=>{let t=e.getOriginalParent();if(!t)return void r.push(e);const i=[];for(;!i.length&&t;){t.getLeafColumns().forEach((e=>{const t=r.indexOf(e)>=0,s=i.indexOf(e)<0;t&&s&&i.push(e)})),t=t.getOriginalParent()}if(!i.length)return void r.push(e);const s=i.map((e=>r.indexOf(e))),n=Math.max(...s);ha(r,e,n+1)})),this.cols.list=r}sortColsLikeKeys(e){if(null==this.cols)return;let t=[];const i={};e.forEach((e=>{if(i[e])return;const s=this.cols.map[e];s&&(t.push(s),i[e]=!0)}));let s=0;this.cols.list.forEach((e=>{const n=e.getColId();if(null!=i[n])return;n.startsWith(Ea)?ha(t,e,s++):t.push(e)})),t=this.columnMoveService.placeLockedColumns(t),this.columnMoveService.doesMovePassMarryChildren(t)?this.cols.list=t:ir("Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}sortColsLikeCols(e){if(!e||e.length<=1)return;const t=e.filter((e=>this.cols.list.indexOf(e)<0)).length>0;t||e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)))}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){da(this.cols?.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort(((e,t)=>this.lastOrder.indexOf(e)-this.lastOrder.indexOf(t))):this.lastOrder&&e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some((e=>null!=e.getColDef().colSpan))}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return!e||!this.gos.get("treeData")||(ir("Pivot mode not available with treeData."),!1)}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!gr(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){ka(this.context,this.colDefCols?.tree),ka(this.context,this.autoCols?.tree),ka(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){const e=this.pivotResultColsService.getPivotResultCols(),t=e?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map((e=>this.getCol(e))).filter((e=>null!=e)):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(null==t)return null;const{map:i,list:s}=t;if("string"==typeof e&&i[e])return i[e];for(let n=0;n<s.length;n++)if(tl(s[n],e))return s[n];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find((t=>tl(t,e)))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const t=i.getGroupRowCount()||0;for(let s=0;s<t;s++){const t=i.getGroupRowCtrlAtIndex(s),n=e[s];if(t){const i=this.getColumnGroupHeaderRowHeight(t);(null==n||i>n)&&(e[s]=i)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const s=e.getHeaderCtrls();for(const n of s){const e=n.getColumn();if(e.isAutoHeaderHeight()){const t=e.getAutoHeaderHeight();null!=t&&t>i&&(i=t)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.visibleColsService.getAllCols().filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(e,...t)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:t,skipHeader:i}=e;setTimeout((()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)}))}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const s=(t&&"string"!==typeof t?Yr(t):void 0)!==(e&&"string"!==typeof e?Yr(e):void 0),n=t&&"string"!==typeof t?Zr(t):void 0,o=e&&"string"!==typeof e?Zr(e):void 0;(s||n!==o)&&this.refreshAll(i)}};function Ja(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function el(e){e.map={},e.list.forEach((t=>e.map[t.getId()]=t))}function tl(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}function il(e,t){return aa(e,t,((e,t)=>e.getColId()===t.getColId()))}var sl=class extends Sa{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>this.autoSizeCols(e)));this.timesDelayed=0;const r=[];let a=-1;const l=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),c=null!=s?s:l;for(;0!==a;){a=0;const e=[];t.forEach((t=>{if(!t)return;const i=this.columnModel.getCol(t);if(!i)return;if(r.indexOf(i)>=0)return;const s=this.autoWidthCalculator.getPreferredWidthForColumn(i,l);if(s>0){const e=this.normaliseColumnWidth(i,s);i.setActualWidth(e,o),r.push(i),a++}e.push(i)})),e.length&&this.visibleColsService.refresh(o)}c||this.autoSizeColumnGroupsByColumns(t,o,n),this.eventDispatcher.columnResized(r,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;let n;this.columnModel.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||s.add(t),t=t.getParent()}));for(const o of s){for(const e of this.ctrlsService.getHeaderRowContainerCtrls())if(n=e.getHeaderCtrlForColumn(o),n)break;n&&n.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeAllColumns(e,t)));const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},nl=class extends Sa{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>ca(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>ca(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>ca(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(!0===t)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return gr(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,((e,i)=>this.setRowGroupActive(e,i,t)),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),e||this.gos.get("suppressMakeColumnVisibleAfterUnGroup")||this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,(e=>this.setRowGroupActive(!0,e,t)),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,(e=>this.setRowGroupActive(!1,e,t)),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,(e=>e.setPivotActive(!0,t)),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,((e,i)=>{i.setPivotActive(e,t)}),t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,(e=>e.setPivotActive(!1,t)),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,((e,i)=>this.setValueActive(e,i,t)),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const e=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(e)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,(e=>this.setValueActive(!0,e,t)),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,(e=>this.setValueActive(!1,e,t)),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,s,n,o,r){if(!this.columnModel.getCols())return;const a=new Map;t.forEach(((e,t)=>a.set(e,t))),t.length=0,ur(e)&&e.forEach((e=>{const i=this.columnModel.getColDefCol(e);i&&t.push(i)})),t.forEach(((e,t)=>{const i=a.get(e);void 0!==i?s&&i!==t||a.delete(e):a.set(e,0)}));(this.columnModel.getColDefCols()||[]).forEach((e=>{const i=t.indexOf(e)>=0;o(i,e)})),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.columnChanged(i,[...a.keys()],r)}updateColList(e,t,i,s,n,o,r){if(!e||gr(e))return;let a=!1;const l=new Set;e.forEach((e=>{if(!e)return;const s=this.columnModel.getColDefCol(e);if(s){if(l.add(s),i){if(t.indexOf(s)>=0)return;t.push(s)}else{const e=t.indexOf(s);if(e<0)return;for(let i=e+1;i<t.length;i++)l.add(t[i]);ca(t,s)}n(s),a=!0}})),a&&(s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.genericColumnEvent(o,Array.from(l),r))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,((t,i)=>t.setValueActive(i,e)),(()=>{}),(()=>{}),(e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0}),(e=>null!=e.initialAggFunc&&""!=e.initialAggFunc)),this.valueCols.forEach((e=>{const t=e.getColDef();null!=t.aggFunc&&""!=t.aggFunc?e.setAggFunc(t.aggFunc):e.getAggFunc()||e.setAggFunc(t.initialAggFunc)}))}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,((t,i)=>t.setRowGroupActive(i,e)),(e=>e.rowGroupIndex),(e=>e.initialRowGroupIndex),(e=>e.rowGroup),(e=>e.initialRowGroup))}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,((t,i)=>t.setPivotActive(i,e)),(e=>e.pivotIndex),(e=>e.initialPivotIndex),(e=>e.pivot),(e=>e.initialPivot))}extractColsCommon(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach((i=>{const c=e.indexOf(i)<0,h=i.getColDef(),d=vr(o(h)),u=vr(r(h)),p=fr(s(h)),g=fr(n(h));let m;if(m=void 0!==d?d:void 0!==p?null!==p&&p>=0:c?void 0!==u?u:!!(void 0!==g)&&(null!=g&&g>=0):t.indexOf(i)>=0,m){(c?null!=p||null!=g:null!=p)?a.push(i):l.push(i)}}));const c=e=>{const t=s(e.getColDef()),i=n(e.getColDef());return null!=t?t:i};a.sort(((e,t)=>{const i=c(e),s=c(t);return i===s?0:i<s?-1:1}));const h=[].concat(a);return t.forEach((e=>{l.indexOf(e)>=0&&h.push(e)})),l.forEach((e=>{h.indexOf(e)<0&&h.push(e)})),t.forEach((e=>{h.indexOf(e)<0&&i(e,!1)})),h.forEach((e=>{t.indexOf(e)<0&&i(e,!0)})),h}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(e,t,s,n,o,r)=>{const a=this.columnModel.getColDefCols();if(!t.length||!a)return[];const l=Object.keys(e),c=new Set(l),h=new Set(l),d=new Set(t.map((e=>{const t=e.getColId();return h.delete(t),t})).concat(l)),u=[],p={};let g=0;for(let i=0;i<a.length;i++){const e=a[i].getColId();d.has(e)&&(u.push(e),p[e]=g++)}let m=1e3,f=!1,v=0;const y=t=>{const i=p[t];for(let s=v;s<i;s++){const t=u[s];h.has(t)&&(e[t][o]=m++,h.delete(t))}v=i};t.forEach((t=>{const a=t.getColId();if(c.has(a))y(a),e[a][o]=m++;else{const l=t.getColDef();if(null===l[o]||void 0===l[o]&&null==l[r]){if(!f){l[s]||void 0===l[s]&&l[n]?y(a):(h.forEach((t=>{e[t][o]=m+p[t]})),m+=u.length,f=!0)}i[a]||(i[a]={colId:a}),i[a][o]=m++}}}))};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},ol=class extends Sa{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(gr(i))return!1;if(e&&e.state&&!e.state.forEach)return ir("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(i,n,o)=>{const r=this.compareColumnStatesAndDispatchEvents(t),a=n.slice(),l={},c={},h=[],d=[];let u=0;const p=this.funcColsService.getRowGroupColumns().slice(),g=this.funcColsService.getPivotColumns().slice();i.forEach((i=>{const n=i.colId||"";if(n.startsWith(Ea))return h.push(i),void d.push(i);const r=o(n);r?(this.syncColumnWithStateItem(r,i,e.defaultState,l,c,!1,t,s),ca(a,r)):(d.push(i),u+=1)}));const m=i=>this.syncColumnWithStateItem(i,null,e.defaultState,l,c,!1,t,s);a.forEach(m),this.funcColsService.sortRowGroupColumns(rl.bind(this,l,p)),this.funcColsService.sortPivotColumns(rl.bind(this,c,g)),this.columnModel.refreshCols(!1);const f=(this.columnModel.getAutoCols()||[]).slice();return h.forEach((i=>{const n=this.columnModel.getAutoCol(i.colId);ca(f,n),this.syncColumnWithStateItem(n,i,e.defaultState,null,null,!0,t,s)})),f.forEach(m),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),r(),{unmatchedAndAutoStates:d,unmatchedCount:u}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:r}=n(e.state||[],i,(e=>this.columnModel.getColDefCol(e)));if(o.length>0||ur(e.defaultState)){const e=this.pivotResultColsService.getPivotResultCols(),t=e?.list;r=n(o,t||[],(e=>this.pivotResultColsService.getPivotResultCol(e))).unmatchedCount}return this.columnAnimationService.finish(),0===r}resetColumnState(e){if(gr(this.columnModel.getColDefCols()))return;const t=Ia(this.columnModel.getColDefColTree()),i=[];let s=1e3,n=1e3,o=[];const r=this.columnModel.getAutoCols();r&&(o=o.concat(r)),t&&(o=o.concat(t)),o.forEach((e=>{const t=this.getColumnStateFromColDef(e);pr(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=s++),pr(t.pivotIndex)&&t.pivot&&(t.pivotIndex=n++),i.push(t)})),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),h=t(i.rowGroup,i.initialRowGroup);null!=c||null!=h&&0!=h||(c=null,h=null);let d=t(i.pivotIndex,i.initialPivotIndex),u=t(i.pivot,i.initialPivot);null!=d||null!=u&&0!=u||(d=null,u=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:o,pinned:r,width:a,flex:l,rowGroup:h,rowGroupIndex:c,pivot:u,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(e,t,i,s,n,o,r,a){if(!e)return;const l=(e,s)=>{const n={value1:void 0,value2:void 0};let o=!1;return t&&(void 0!==t[e]&&(n.value1=t[e],o=!0),ur(s)&&void 0!==t[s]&&(n.value2=t[s],o=!0)),!o&&i&&(void 0!==i[e]&&(n.value1=i[e]),ur(s)&&void 0!==i[s]&&(n.value2=i[s])),n},c=l("hide").value1;void 0!==c&&e.setVisible(!c,r);const h=l("pinned").value1;void 0!==h&&e.setPinned(h);const d=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),u=l("flex").value1;if(void 0!==u&&e.setFlex(u),null==u){const t=l("width").value1;null!=t&&null!=d&&t>=d&&e.setActualWidth(t,r)}const p=l("sort").value1;void 0!==p&&("desc"===p||"asc"===p?e.setSort(p,r):e.setSort(void 0,r));const g=l("sortIndex").value1;if(void 0!==g&&e.setSortIndex(g),o||!e.isPrimary())return;const m=l("aggFunc").value1;void 0!==m&&("string"===typeof m?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,r),a.addValueCol(e))):(ur(m)&&ir("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,r),a.removeValueCol(e))));const{value1:f,value2:v}=l("rowGroup","rowGroupIndex");void 0===f&&void 0===v||("number"===typeof v||f?(e.isRowGroupActive()||(e.setRowGroupActive(!0,r),a.addGroupCol(e)),s&&"number"===typeof v&&(s[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,r),a.removeGroupCol(e)));const{value1:y,value2:C}=l("pivot","pivotIndex");void 0===y&&void 0===C||("number"===typeof C||y?(e.isPivotActive()||(e.setPivotActive(!0,r),a.addPivotCol(e)),n&&"number"===typeof C&&(n[e.getId()]=C)):e.isPivotActive()&&(e.setPivotActive(!1,r),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach((e=>{null!=e.colId&&t.push(e.colId)})),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach((e=>{s[e.colId]=e})),()=>{const n=this.columnModel.getAllCols(),o=(t,i,s,n)=>{if(aa(i.map(n),s.map(n)))return;const o=new Set(i);s.forEach((e=>{o.delete(e)||o.add(e)}));const r=[...o];this.eventService.dispatchEvent({type:t,columns:r,column:1===r.length?r[0]:null,source:e})},r=e=>{const t=[];return n.forEach((i=>{const n=s[i.getColId()];n&&e(n,i)&&t.push(i)})),t},a=e=>e.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const l=r(((e,t)=>{const i=null!=e.aggFunc,s=i!=t.isValueActive(),n=i&&e.aggFunc!=t.getAggFunc();return s||n}));l.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",l,e);this.eventDispatcher.columnResized(r(((e,t)=>e.width!=t.getActualWidth())),!0,e);this.eventDispatcher.columnPinned(r(((e,t)=>e.pinned!=t.getPinned())),e);this.eventDispatcher.columnVisible(r(((e,t)=>e.hide==t.isVisible())),e);const c=r(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));c.length>0&&this.sortController.dispatchSortChangedEvents(e,c),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach((e=>s[e.colId]=e));const n={};e.forEach((e=>{s[e.colId]&&(n[e.colId]=!0)}));const o=e.filter((e=>n[e.colId])),r=i.filter((e=>n[e.colId])),a=[];r.forEach(((e,t)=>{const i=o&&o[t];if(i&&i.colId!==e.colId){const e=this.columnModel.getCol(i.colId);e&&a.push(e)}})),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},rl=(e,t,i,s)=>{const n=e[i.getId()],o=e[s.getId()],r=null!=n,a=null!=o;if(r&&a)return n-o;if(r)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(s),h=l>=0;return h&&c>=0?l-c:h?-1:1},al=class extends Sa{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length)return ir("tried to insert columns in invalid location, toIndex = ",t),void ir("remember that you should not count the moving columns when calculating the new index");this.columnAnimationService.start();const o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,i),this.eventDispatcher.columnMoved({movedColumns:o,source:i,toIndex:t,finished:s})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!!this.doesMovePassMarryChildren(e)&&!!this.doesMovePassLockedPositions(e)}getProposedColumnOrder(e,t){const i=this.columnModel.getCols().slice();return da(i,e,t),i}doesMovePassLockedPositions(e){const t=this.gos.get("enableRtl");let i=t?1:-1,s=!0;return e.forEach((e=>{const n=(o=e.getColDef().lockPosition)?"left"===o||!0===o?-1:1:0;var o;t?n>i&&(s=!1):n<i&&(s=!1),i=n})),s}doesMovePassMarryChildren(e){let t=!0;return Qa(null,this.columnModel.getColTree(),(i=>{if(!xa(i))return;const s=i,n=s.getColGroupDef();if(!(n&&n.marryChildren))return;const o=[];s.getLeafColumns().forEach((t=>{const i=e.indexOf(t);o.push(i)}));Math.max.apply(Math,o)-Math.min.apply(Math,o)>s.getLeafColumns().length-1&&(t=!1)})),t}placeLockedColumns(e){const t=[],i=[],s=[];e.forEach((e=>{const n=e.getColDef().lockPosition;"right"===n?s.push(e):"left"===n||!0===n?t.push(e):i.push(e)}));return this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},ll=/[&<>"']/g,cl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function hl(e){const t=String.fromCharCode;function i(e,i){return t(e>>i&63|128)}function s(e){if(0==(4294967168&e))return t(e);let s="";return 0==(4294965248&e)?s=t(e>>6&31|192):0==(4294901760&e)?(!function(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}(e),s=t(e>>12&15|224),s+=i(e,6)):0==(4292870144&e)&&(s=t(e>>18&7|240),s+=i(e,12),s+=i(e,6)),s+=t(63&e|128),s}const n=function(e){const t=[];if(!e)return[];const i=e.length;let s,n,o=0;for(;o<i;)s=e.charCodeAt(o++),s>=55296&&s<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?t.push(((1023&s)<<10)+(1023&n)+65536):(t.push(s),o--)):t.push(s);return t}(e),o=n.length;let r,a=-1,l="";for(;++a<o;)r=n[a],l+=s(r);return l}function dl(e,t){if(null==e)return null;const i=e.toString().toString();return t?i:i.replace(ll,(e=>cl[e]))}var ul=class extends Sa{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const o=e.headerValueGetter;if(o){const r=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return"function"===typeof o?o(r):"string"===typeof o?this.expressionService.evaluate(o,r):(ir("headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?(r=e.field)&&null!=r?r.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" "):null:"";var r}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn;let s,n=null;if(ur(i)){const o=this.funcColsService.getValueColumns(),r=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===o.length,a=void 0!==e.getColDef().pivotTotalColumnIds;if(r&&!a)return t;n=i?i.getAggFunc():null,s=!0}else{const t=e.isValueActive(),i=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();t&&i?(n=e.getAggFunc(),s=!0):s=!1}if(s){const e="string"===typeof n?n:"func";return`${this.localeService.getLocaleTextFunc()(e,e)}(${t})`}return t}},pl=class extends Sa{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){ka(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,t){if(null==this.pivotResultCols)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach((t=>{const n=t.getColDef().pivotKeys,o=t.getColDef().pivotValueColumn;aa(n,e)&&o===i&&(s=t)})),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&(null!=e||null!=this.pivotResultCols)){if(e){this.processPivotResultColDef(e);const i=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);ka(this.context,this.pivotResultCols?.tree,i.columnTree);const s=i.columnTree,n=i.treeDept,o=Ia(s),r={};this.pivotResultCols={tree:s,treeDepth:n,list:o,map:r},this.pivotResultCols.list.forEach((e=>this.pivotResultCols.map[e.getId()]=e));const a=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!a)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=e=>{e.forEach((e=>{if(ur(e.children)){const t=e;i&&i(t),s(t.children)}else{t&&t(e)}}))};e&&s(e)}},gl=class extends Sa{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const n=[];e.forEach((e=>{const i=this.columnModel.getColDefCol(e.key)||this.columnModel.getCol(e.key);if(!i)return;n.push({width:e.newWidth,ratios:[1],columns:[i]});if("shift"===this.gos.get("colResizeDefault")&&(t=!t),t){const t=this.visibleColsService.getColAfter(i);if(!t)return;const s=i.getActualWidth()-e.newWidth,o=t.getActualWidth()+s;n.push({width:o,ratios:[1],columns:[t]})}})),0!==n.length&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every((e=>this.checkMinAndMaxWidthsForSet(e))))){if(i){const e=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(e,i,s)}return}const n=[],o=[];t.forEach((e=>{const{width:t,columns:i,ratios:r}=e,a={},l={};i.forEach((e=>o.push(e)));let c=!0,h=0;for(;c;){if(h++,h>1e3){sr("infinite loop in resizeColumnSets");break}c=!1;const e=[];let s=0,n=t;i.forEach(((t,i)=>{if(l[t.getId()])n-=a[t.getId()];else{e.push(t);const n=r[i];s+=n}}));const o=1/s;e.forEach(((i,s)=>{let h;s===e.length-1?h=n:(h=Math.round(r[s]*t*o),n-=h);const d=i.getMinWidth(),u=i.getMaxWidth();h<d?(h=d,l[i.getId()]=!0,c=!0):u>0&&h>u&&(h=u,l[i.getId()]=!0,c=!0),a[i.getId()]=h}))}i.forEach((e=>{const t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,s),n.push(e))}))}));const r=n.length>0;let a=[];r&&(a=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const l=o.concat(a);(r||i)&&this.eventDispatcher.columnResized(l,i,s,a)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,o=!0;t.forEach((e=>{const t=e.getMinWidth();s+=t||0;const i=e.getMaxWidth();i>0?n+=i:o=!1}));return i>=s&&(!o||i<=n)}refreshFlexedColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=i.length-1;e>=0;e--)if(t.has(i[e])){s=e;break}}let n=0,o=[],r=0,a=0;for(let u=0;u<i.length;u++){i[u].getFlex()&&u>s?(o.push(i[u]),a+=i[u].getFlex(),r+=i[u].getMinWidth()):n+=i[u].getActualWidth()}if(!o.length)return[];let l=[];n+r>this.flexViewportWidth&&(o.forEach((e=>e.setActualWidth(e.getMinWidth(),t))),l=o,o=[]);const c=[];let h;e:for(;;){h=this.flexViewportWidth-n;const e=h/a;for(let i=0;i<o.length;i++){const s=o[i],r=e*s.getFlex();let h=0;const d=s.getMinWidth(),u=s.getMaxWidth();if(r<d?h=d:r>u&&(h=u),h){s.setActualWidth(h,t),la(o,s),a-=s.getFlex(),l.push(s),n+=s.getActualWidth();continue e}c[i]=Math.floor(r)}break}let d=h;return o.forEach(((e,i)=>{const s=i<o.length-1?Math.min(c[i],d):Math.max(c[i],d);e.setActualWidth(s,t),l.push(e),d-=c[i]})),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,s)));const n={};s&&s?.columnLimits?.forEach((e=>{let{key:t,...i}=e;n["string"===typeof t?t:t.getColId()]=i}));const o=this.visibleColsService.getAllCols(),r=e===Aa(o);if(e<=0||!o.length||r)return;const a=[],l=[];o.forEach((e=>{!0===e.getColDef().suppressSizeToFit?l.push(e):a.push(e)}));const c=a.slice(0);let h=!1;const d=e=>{ca(a,e),l.push(e)};for(a.forEach((e=>{e.resetActualWidth(t);const i=n?.[e.getId()],o=i?.minWidth??s?.defaultMinWidth,r=i?.maxWidth??s?.defaultMaxWidth,a=e.getActualWidth();"number"===typeof o&&a<o?e.setActualWidth(o,t,!0):"number"===typeof r&&a>r&&e.setActualWidth(r,t,!0)}));!h;){h=!0;const i=e-Aa(l);if(i<=0)a.forEach((e=>{const i=n?.[e.getId()]?.minWidth??s?.defaultMinWidth;"number"!==typeof i?e.setMinimum(t):e.setActualWidth(i,t,!0)}));else{const e=i/Aa(a);let o=i;for(let i=a.length-1;i>=0;i--){const r=a[i],l=n?.[r.getId()],c=l?.minWidth??s?.defaultMinWidth,u=l?.maxWidth??s?.defaultMaxWidth,p=r.getMinWidth(),g=r.getMaxWidth(),m="number"===typeof c&&c>p?c:p,f="number"===typeof u&&u<g?u:g;let v=Math.round(r.getActualWidth()*e);v<m?(v=m,d(r),h=!1):v>f?(v=f,d(r),h=!1):0===i&&(v=o),r.setActualWidth(v,t,!0),o-=v}}}c.forEach((e=>{e.fireColumnWidthChangedEvent(t)})),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),i||this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:s}=e,n=t?.map((e=>{let{colId:t,minWidth:i,maxWidth:s}=e;return{key:t,minWidth:i,maxWidth:s}}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:n})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}};function ml(e,t){return e+"_"+t}function fl(e){return e instanceof vl}var vl=class extends Sa{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return ml(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{fl(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=ra(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach((t=>{e+=t.getActualWidth()})),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{$a(t)?e.push(t):fl(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{$a(t)?e.push(t):fl(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{if(fl(t)&&(!t.displayedChildren||!t.displayedChildren.length))return;switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},yl=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},Cl=class extends Sa{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=wl(this.treeLeft),this.columnsCenter=wl(this.treeCenter),this.columnsRight=wl(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter((e=>e.isAutoHeight())),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=Aa(this.columnsCenter),t=Aa(this.columnsLeft),i=Aa(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?ra(this.columnsRight):null):(t=this.columnsLeft?ra(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach((s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)}))}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter((e=>"left"==e.getPinned())),i=e.filter((e=>"right"==e.getPinned())),s=e.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),n=new yl;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const n of e){const e=n.getPinned();e?!0===e||"left"===e?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return t=fl(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{if(fl(e)){e.checkLeft()}}))}))}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const t=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach((s=>{if(i){let t=Aa(s);s.forEach((i=>{t-=i.getActualWidth(),i.setLeft(t,e)}))}else{let t=0;s.forEach((i=>{i.setLeft(t,e),t+=i.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++)la(e,t[i])}(t,s)})),t.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const n=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),h=[a];if(c>1){const e=c-1;for(let i=1;i<=e;i++)h.push(t[r+i]);r+=e}let d;if(i?(d=!1,h.forEach((e=>{i(e)&&(d=!0)}))):d=!0,d){if(0===n.length&&o){!!s&&s(a)&&n.push(o)}n.push(a)}o=a}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n="After"===t?ra(s):s[0],o=`getCol${t}`;for(;;){const t=this[o](n);if(!t)return null;const s=this.getColGroupAtLevel(t,i);if(s!==e)return s}}getColGroupAtLevel(e,t){let i,s,n=e.getParent();for(;;){if(i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),i+s<=t)break;n=n.getParent()}return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};bl(this.treeCenter,!1,e),bl(this.treeLeft,!1,e),bl(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){bl(this.getAllTrees(),!1,(e=>{fl(e)&&e.calculateDisplayedColumns()}))}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?ra(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(fl(e))return e;const i=this.getAllTrees(),s="number"===typeof t;let n=null;return bl(i,!1,(i=>{if(fl(i)){const o=i;let r;r=s?e===o.getGroupId()&&t===o.getPartId():e===o.getGroupId(),r&&(n=o)}})),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return Aa(this.columnsLeft)}getDisplayedColumnsRightWidth(){return Aa(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s="first"===t;let n;if(fl(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;n=s?t[0]:ra(t)}else n=e;return(s?i[0]:ra(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const n=n=>{const c=t;t=n;const h=e[c],d=(fl(h)?h.getProvidedColumnGroup():h).getOriginalParent();if(null==d){for(let t=c;t<n;t++)a.push(e[t]);return}const u=this.createColGroup(d,i,r,s,o);for(let t=c;t<n;t++)u.addChild(e[t]);l.push(u)};for(let i=1;i<e.length;i++){const s=e[i],o=(fl(s)?s.getProvidedColumnGroup():s).getOriginalParent(),r=e[t];o!==(fl(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&n(i)}t<e.length&&n(e.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,s,n){const o=e.getGroupId(),r=t.getInstanceIdForKey(o);let a=i[ml(o,r)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),ur(a)?a.reset():(a=new vl(e,o,r,s),n||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if(fl(e)){const s=e;t[e.getUniqueId()]=s,i(s.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.setParent(t),fl(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}};function bl(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if(fl(n)){bl(t?n.getDisplayedChildren():n.getChildren(),t,i)}i(n)}}function wl(e){const t=[];return bl(e,!0,(e=>{$a(e)&&t.push(e)})),t}var Sl=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],xl=[...Sl,"scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],Ml={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},Dl=class{};Dl.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],Dl.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"],Dl.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Dl.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],Dl.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],Dl.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"],Dl.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],Dl.ALL_PROPERTIES=[...Dl.ARRAY_PROPERTIES,...Dl.OBJECT_PROPERTIES,...Dl.STRING_PROPERTIES,...Dl.NUMBER_PROPERTIES,...Dl.FUNCTION_PROPERTIES,...Dl.BOOLEAN_PROPERTIES,...Dl.OTHER_PROPERTIES];var Rl=Dl,El=class{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}};El.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",El.PUBLIC_EVENTS=Sl,El.EVENT_CALLBACKS=xl.map((e=>El.getCallbackForEvent(e))),El.BOOLEAN_PROPERTIES=Rl.BOOLEAN_PROPERTIES,El.ALL_PROPERTIES=Rl.ALL_PROPERTIES,El.ALL_PROPERTIES_AND_CALLBACKS=[...El.ALL_PROPERTIES,...El.EVENT_CALLBACKS],El.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(El.ALL_PROPERTIES_AND_CALLBACKS);var Il=El;var Al=class extends Sa{};function kl(e,t,i){return i&&e.addDestroyFunc((()=>t.destroyBean(i))),i??e}var Tl=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.addCssClass(e)));if(!0!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.removeCssClass(e)));if(!1!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Ll(e,t,i){null==i||"string"===typeof i&&""==i?Fl(e,t):Pl(e,t,i)}function Pl(e,t,i){e.setAttribute(Nl(t),i.toString())}function Fl(e,t){e.removeAttribute(Nl(t))}function Nl(e){return`aria-${e}`}function Ol(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Bl(e,t){Ll(e,"label",t)}function Gl(e,t){Ll(e,"labelledby",t)}function zl(e,t){Ll(e,"live",t)}function jl(e,t){Ll(e,"hidden",t)}function Vl(e,t){Pl(e,"expanded",t)}function Hl(e,t){Pl(e,"rowcount",t)}function Wl(e,t){Pl(e,"rowindex",t)}function _l(e,t){Pl(e,"colcount",t)}function Ul(e,t){Pl(e,"colindex",t)}function $l(e,t){Pl(e,"sort",t)}function Kl(e){Fl(e,"sort")}function Yl(e,t){Ll(e,"selected",t)}function Zl(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var ql="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Ql(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,ql),n=uc(e);return i&&!s&&n}function Xl(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||jl(e,!t)}function Jl(e,t){const i="disabled",s=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);s(e),bc(e.querySelectorAll("input"),(e=>s(e)))}function ec(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++s>i)break}else if(e===i)break}return!1}function tc(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:h,marginTop:d,marginRight:u,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(h||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(u||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function ic(e){const t=tc(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function sc(e){const t=tc(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function nc(e){const{height:t,marginBottom:i,marginTop:s}=tc(e);return Math.floor(t+i+s)}function oc(e){const{width:t,marginLeft:i,marginRight:s}=tc(e);return Math.floor(t+i+s)}function rc(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:o}=tc(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function ac(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function lc(e,t,i){i&&(t*=-1),e.scrollLeft=t}function cc(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function hc(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function dc(e){return!!e.offsetParent}function uc(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!dc(e)||"visible"!==window.getComputedStyle(e).visibility)}function pc(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function gc(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):mc(e,t)}function mc(e,t){t=vc(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function fc(e,t){t=vc(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function vc(e){return"number"===typeof e?`${e}px`:e}function yc(e){return e instanceof Node||e instanceof HTMLElement}function Cc(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function bc(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}var wc,Sc,xc,Mc,Dc,Rc,Ec,Ic,Ac,kc=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}};function Tc(){return void 0===wc&&(wc=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),wc}function Lc(){if(void 0===Sc)if(Tc()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Sc=null!=e[1]?parseFloat(e[1]):0)}else Sc=0;return Sc}function Pc(){return void 0===Mc&&(Mc=/(firefox)/i.test(navigator.userAgent)),Mc}function Fc(){return void 0===Dc&&(Dc=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Dc}function Nc(){return void 0===Rc&&(Rc=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),Rc}function Oc(){return!Tc()||Lc()>=15}function Bc(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||Pc())?t.toString():null}function Gc(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(Ic=i,Ec=0===i)}function zc(){return null==Ec&&Gc(),Ec}var jc=class e extends Sa{constructor(e,t,i,s){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupService=e.popupService,this.userComponentFactory=e.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return t<0&&ir(`${e} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(e){return"show"===e?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),Nc()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(t)}),100):this.prepareToShowTooltip(t))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&s?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(0!=this.state||e.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-e.lastTooltipHideTime<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e={...this.parentComp.getTooltipParams()};if(!ur(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip())return void this.setToDoNothing();this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),n=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(n&&(this.tooltipPopupDestroyFunc=n.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Fr(this.gos),{keydown:e=>{i.contains(e?.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=Br(this.gos);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...e,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){e.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};jc.isLocked=!1;var Vc=jc,Hc=class extends Sa{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(null!=this.tooltipManager)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new Vc(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?.(),i=e.getColDef?.(),s=e.getRowNode?.();return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?.(),node:s,data:s?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},Wc=new kc,_c=null,Uc=class e extends Sa{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Wc.next(),this.cssClassManager=new Tl((()=>this.eGui)),this.componentSelectors=new Map((t??[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preWireBeans(e){super.preWireBeans(e)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:i,hideDelayOverride:s,location:n,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);const r=()=>this.tooltipText;null!=t&&(this.tooltipFeature=this.createBean(new Hc({getTooltipValue:r,getGui:()=>this.getGui(),getLocation:()=>n??"UNKNOWN",getColDef:e?.getColDef,getColumn:e?.getColumn,getTooltipShowDelayOverride:null!=i?()=>i:void 0,getTooltipHideDelayOverride:null!=s?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const n=this[t];if(n===_c)this[t]=s??e;else{const e=i&&i[t];this.suppressDataRefValidation||e||ir(`Issue with data-ref: ${t} on ${this.constructor.name} with ${n}`)}}}createChildComponentsFromTags(e,t){(function(e){if(null==e)return[];const t=[];return bc(e,(e=>t.push(e))),t})(e.childNodes).forEach((i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,(e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())}),t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);s.addItems(e)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(t,i,s){const n=t.nodeName,o=this.getDataRefAttribute(t),r=0===n.indexOf("AG-"),a=r?this.componentSelectors.get(n):null;let l=null;if(a){e.elementGettingCreated=t;const n=s&&o?s[o]:void 0;l=new a.component(n),l.setParentComponent(this),this.createBean(l,null,i)}else r&&ir(`Missing selector: ${n}`);return this.applyElementsToComponent(t,o,s,l),l}copyAttributesFromNode(e,t){!function(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}(e.attributes,((e,i)=>t.setAttribute(e,i)))}swapComponentForNode(e,t,i){const s=e.getGui();t.replaceChild(s,i),t.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){const s=pc(e);this.setTemplateFromElement(s,t,i)}setTemplateFromElement(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=s,t)for(let n=0;n<t.length;n++){const e=t[n];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),yc(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||jl(e,!t)}(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Xl(this.eGui,e,{skipAriaHidden:i});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}},$c={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},Kc=(()=>{const e=new Set(Object.values($c));return e.add("eye"),e})();function Yc(e,t,i,s){let n=null;const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t&&!n){const i=t.get("icons");i&&(n=i[e])}if(!n){const t=document.createElement("span");let i=$c[e]??(Kc.has(e)?e:void 0);return i||(s?i=e:(ir(`Did not find icon ${e}`),i="")),t.setAttribute("class",`ag-icon ag-icon-${i}`),t.setAttribute("unselectable","on"),Ol(t,"presentation"),t}{let e;if("function"===typeof n)e=n();else{if("string"!==typeof n)throw new Error("icon from grid options needs to be a string or a function");e=n}if("string"===typeof e)return pc(e);if(yc(e))return e;ir("iconRenderer should return back a string or a dom object")}}var Zc=class extends Uc{constructor(){super(...arguments),this.dragSource=null,this.eIcon=_c,this.eLabel=_c}postConstruct(){const e=e=>function(e,t,i){const s=Yc(e,t,i);if(s){const{className:e}=s;if("string"===typeof e&&e.indexOf("ag-icon")>-1||"object"===typeof e&&e["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}(e,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cc(this.eIcon);let i=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns")||i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=dl(e)}};function qc(e,t,i){if(0===i)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var Qc=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Qo,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push((()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!qc(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}};function Xc(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var Jc=`<span class="ag-sort-indicator-container">\n        ${Xc("Order","order")}\n        ${Xc("Asc","ascending-icon")}\n        ${Xc("Desc","descending-icon")}\n        ${Xc("Mixed","mixed-icon")}\n        ${Xc("None","none-icon")}\n    </span>`,eh=class extends Uc{constructor(e){super(),this.eSortOrder=_c,this.eSortAsc=_c,this.eSortDesc=_c,this.eSortMixed=_c,this.eSortNone=_c,e||this.setTemplate(Jc)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const s=Yc(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t="asc"===e;Xl(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t="desc"===e;Xl(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=null===e||void 0===e;Xl(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Vr(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);Xl(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some((e=>this.sortController.getDisplaySortIndexForColumn(e)??!1)),s=t>=0&&i;Xl(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():cc(this.eSortOrder)}},th={selector:"AG-SORT-INDICATOR",component:eh},ih=class extends Uc{constructor(){super(...arguments),this.eFilter=_c,this.eFilterButton=_c,this.eSortIndicator=_c,this.eMenu=_c,this.eLabel=_c,this.eText=_c,this.eSortOrder=_c,this.eSortAsc=_c,this.eSortDesc=_c,this.eSortMixed=_c,this.eSortNone=_c,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??'<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>\n        </div>\n    </div>';return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[th]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=dl(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(null==t)return;const s=Yc(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new Qc(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&ur(this.eMenu),n=s?new Qc(this.eMenu,!0):t;if(this.params.enableMenu){const e=s?"tap":"longTap",t=e=>this.params.showColumnMenuAfterMouseClick(e.touchStart);this.addManagedListeners(n,{[e]:t})}if(this.params.enableSorting){const e=e=>{const t=e.touchStart.target;i&&(this.eMenu?.contains(t)||this.eFilterButton?.contains(t))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:e})}if(this.params.enableFilterButton){const e=new Qc(this.eFilterButton,!0);this.addManagedListeners(e,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc((()=>e.destroy()))}this.addDestroyFunc((()=>t.destroy())),s&&this.addDestroyFunc((()=>n.destroy()))}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return hc(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new eh(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=(new Date).getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:e=>{const t=this.params.column.isMoving(),i=(new Date).getTime()-this.lastMovingChanged<50;if(!(t||i)){const t="ctrl"===this.gos.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(t)}}});const e=()=>{const e=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!e),this.params.column.getColDef().showRowGroup){const e=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),t=e?.every((e=>this.params.column.getSort()==e.getSort())),i=!t;this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",i)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return hc(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Xl(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},sh=class extends Uc{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=_c,this.agClosed=_c,this.agLabel=_c}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ir("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=e=>{if(ya(e))return;const t=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=e=>{va(e)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new Qc(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc((()=>i.destroy())),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const e=this.params.columnGroup.isExpanded();Xl(this.agOpened,e),Xl(this.agClosed,!e)}else Xl(this.agOpened,!1),Xl(this.agClosed,!1)}addInIcon(e,t){const i=Yc(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return Xl(this.agOpened,!1),void Xl(this.agClosed,!1)}setupLabel(){const{displayName:e,columnGroup:t}=this.params;if(ur(e)){const t=dl(e,!0);this.agLabel.textContent=t}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},nh=class extends Uc{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=ur(s)?s:i,o=t>=0;this.eDelta.textContent=o?"\u2191"+n:"\u2193"+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),cc(this.eDelta)}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.value;if(i===this.lastValue)return!1;if(ur(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:ur(e.value)?this.eValue.textContent=i:cc(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof i&&"number"===typeof this.lastValue){const t=i-this.lastValue;this.showDelta(e,t)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},oh=class extends Uc{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.value;return pr(i)&&(i=""),i!==this.lastValue&&(!this.filterManager?.isSuppressFlashingCellsBecauseFiltering()&&(t||this.addSlideAnimation(),this.lastValue=i,ur(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:ur(e.value)?this.eCurrent.textContent=i:cc(this.eCurrent),!0))}},rh=class{};rh.BACKSPACE="Backspace",rh.TAB="Tab",rh.ENTER="Enter",rh.ESCAPE="Escape",rh.SPACE=" ",rh.LEFT="ArrowLeft",rh.UP="ArrowUp",rh.RIGHT="ArrowRight",rh.DOWN="ArrowDown",rh.DELETE="Delete",rh.F2="F2",rh.PAGE_UP="PageUp",rh.PAGE_DOWN="PageDown",rh.PAGE_HOME="Home",rh.PAGE_END="End",rh.A="KeyA",rh.C="KeyC",rh.D="KeyD",rh.V="KeyV",rh.X="KeyX",rh.Y="KeyY",rh.Z="KeyZ";var ah=class extends Uc{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;null!=n&&this.setDisabled(n),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){cc(this.eLabel),"string"===typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Xl(this.eLabel,!1),Ol(this.eLabel,"presentation")):(Xl(this.eLabel,!0),Ol(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||gc(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return Jl(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},lh=class extends ah{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?Gl(e,""):Gl(e,t??"")}setAriaLabel(e){return Bl(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return mc(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},ch=class extends lh{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,e?.template??`\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>\n                </div>\n            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=_c,this.eWrapper=_c,this.eInput=_c}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;null!=e&&this.setInputName(e),null!=t&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return gc(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Cc(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Bl(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Jl(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)Cc(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";Cc(this.eInput,"autocomplete",t)}return this}},hh=class extends ch{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}},dh={selector:"AG-CHECKBOX",component:hh},uh=class extends Uc{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[dh]),this.eCheckbox=_c}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),zl(t,"polite"),this.addManagedListeners(t,{click:e=>{if(va(e),this.eCheckbox.isDisabled())return;const t=this.eCheckbox.getValue();this.onCheckboxChanged(t)},dblclick:e=>{va(e)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:e=>{if(e.key===rh.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===Br(this.gos)&&this.eCheckbox.toggle();const t=this.eCheckbox.getValue();this.onCheckboxChanged(t),e.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;if(e.node.group&&e.column)if("boolean"===typeof e.value)t=e.value;else{const s=e.column.getColId();s.startsWith(Ea)?t=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[s]?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(t);const s=null!=e.disabled?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(s);const n=this.localeService.getLocaleTextFunc(),o=Zl(n,t),r=s?o:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(r)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s});const n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},ph=class extends Uc{constructor(){super('<div class="ag-loading">\n            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" data-ref="eLoadingText"></span>\n        </div>'),this.eLoadingIcon=_c,this.eLoadingText=_c}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Yc("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},gh=class extends Uc{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>Gl(e.eParentOfValue))),Gl(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Bl(this.getGui(),t)}setupLoading(e){const t=Fr(this.gos).createElement("div");t.classList.add("ag-skeleton-effect");const i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width=`${e}%`}this.getGui().appendChild(t);const s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Bl(this.getGui(),s)}refresh(e){return!1}destroy(){super.destroy()}},mh=class extends Uc{constructor(){super()}destroy(){super.destroy()}},fh=class extends mh{init(){const e=dr(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}},vh=class extends mh{init(){const e=dr(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}},yh=class extends Uc{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Ch=class extends yh{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=dl(t,!0)}};function bh(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n,addSequentialWeight:o}=e;let r=i.map(((e,i)=>({value:e,relevance:wh(t.toLowerCase(),e.toLocaleLowerCase(),o),idx:i})));if(r.sort(((e,t)=>t.relevance-e.relevance)),s&&(r=r.filter((e=>0!==e.relevance))),r.length>0&&n&&n>0){const e=r[0].relevance*n;r=r.filter((t=>e-t.relevance<0))}const a=[],l=[];for(const c of r)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function wh(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.replace(/\s/g,""),n=t.replace(/\s/g,""),o=s.length,r=n.length,a=new Array(o+1).fill(null).map((()=>new Array(r+1).fill(0)));for(let h=0;h<=o;h+=1)a[h][0]=h;for(let h=0;h<=r;h+=1)a[0][h]=h;for(let h=1;h<=o;h++)for(let e=1;e<=r;e++)s[h-1]===n[e-1]?a[h][e]=a[h-1][e-1]:a[h][e]=1+Math.min(a[h][e-1],Math.min(a[h-1][e],a[h-1][e-1]));const l=a[o][r];let c=Math.max(o,r)-l;if(i){const e=function(e){const t=[],i=e.length;for(let s=1;s<=i;s++)for(let n=0;n<=i-s;n++){const i=n+s-1;t.push(e.slice(n,i+1))}return t}(s);for(let t=0;t<e.length;t++){const i=e[t];-1!==n.indexOf(i)&&(c+=1,c*=i.length)}}return c}var Sh=class extends Sa{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:Zc,agColumnHeader:ih,agColumnGroupHeader:sh,agSortIndicator:eh,agAnimateShowChangeCellRenderer:nh,agAnimateSlideCellRenderer:oh,agLoadingCellRenderer:ph,agSkeletonCellRenderer:gh,agCheckboxCellRenderer:uh,agLoadingOverlay:fh,agNoRowsOverlay:vh,agTooltipComponent:Ch},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");null!=e&&Oa(e,((e,t)=>this.registerJsComponent(e,t)))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(e,t,i)=>({componentFromFramework:t,component:e,params:i}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(null!=s)return i(s,!0);const n=this.jsComps[t];if(n){return i(n,this.getFrameworkOverrides().isFrameworkComponent(n))}const o=this.agGridDefaults[t];if(o)return i(o,!1,this.agGridDefaultParams[t]);const r=this.enterpriseAgDefaultCompsModule[t];return r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):er((()=>{this.warnAboutMissingComponent(e,t)}),"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(this.jsComps)],s=bh({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;ir(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&ir(`         Did you mean: [${s.slice(0,3)}]?`),ir(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},xh=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return t.length?new e((e=>{let i=t.length;const s=new Array(i);t.forEach(((t,n)=>{t.then((t=>{s[n]=t,i--,0===i&&e(s)}))}))})):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((i=>e(t(i))))}))}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}},Mh={propertyName:"dateComponent",cellRenderer:!1},Dh={propertyName:"dragAndDropImageComponent",cellRenderer:!1},Rh={propertyName:"headerComponent",cellRenderer:!1},Eh={propertyName:"headerGroupComponent",cellRenderer:!1},Ih={propertyName:"cellRenderer",cellRenderer:!0},Ah={propertyName:"cellRenderer",cellRenderer:!1},kh={propertyName:"loadingCellRenderer",cellRenderer:!0},Th={propertyName:"cellEditor",cellRenderer:!1},Lh={propertyName:"innerRenderer",cellRenderer:!0},Ph={propertyName:"loadingOverlayComponent",cellRenderer:!1},Fh={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Nh={propertyName:"tooltipComponent",cellRenderer:!1},Oh={propertyName:"filter",cellRenderer:!1},Bh={propertyName:"floatingFilterComponent",cellRenderer:!1},Gh={propertyName:"toolPanel",cellRenderer:!1},zh={propertyName:"statusPanel",cellRenderer:!1},jh={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Vh={propertyName:"loadingCellRenderer",cellRenderer:!0},Hh={propertyName:"groupRowRenderer",cellRenderer:!0},Wh={propertyName:"detailCellRenderer",cellRenderer:!0},_h={propertyName:"menuItem",cellRenderer:!1},Uh=class e extends Sa{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(e){this.agComponentUtils=e.agComponentUtils,this.componentMetadataProvider=e.componentMetadataProvider,this.userComponentRegistry=e.userComponentRegistry,this.frameworkComponentWrapper=e.frameworkComponentWrapper,this.gridOptions=e.gridOptions}getDragAndDropImageCompDetails(e){return this.getCompDetails(this.gridOptions,Dh,"agDragAndDropImage",e,!0)}getHeaderCompDetails(e,t){return this.getCompDetails(e,Rh,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,Eh,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,jh,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Vh,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Hh,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Wh,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,Lh,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,Lh,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,Ih,null,t)}getEditorRendererDetails(e,t){return this.getCompDetails(e,Ah,null,t)}getLoadingCellRendererDetails(e,t){return this.getCompDetails(e,kh,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(e,t){return this.getCompDetails(e,Th,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,Oh,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,Mh,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Ph,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Fh,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,Nh,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,Ih,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,Bh,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,Gh,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,zh,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,_h,"agMenuItem",t,!0)}getCompDetails(t,i,s,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{propertyName:r,cellRenderer:a}=i;let l,{compName:c,jsComp:h,fwComp:d,paramsFromSelector:u,popupFromSelector:p,popupPositionFromSelector:g}=e.getCompKeys(this.frameworkOverrides,t,i,n);const m=e=>{const t=this.userComponentRegistry.retrieve(r,e);t&&(h=t.componentFromFramework?void 0:t.component,d=t.componentFromFramework?t.component:void 0,l=t.params)};if(null!=c&&m(c),null==h&&null==d&&null!=s&&m(s),h&&a&&!this.agComponentUtils.doesImplementIComponent(h)&&(h=this.agComponentUtils.adaptFunction(r,h)),!h&&!d)return void(o&&sr(`Could not find component ${c}, did you forget to configure this component?`));const f=this.mergeParamsWithApplicationProvidedParams(t,i,n,u,l),v=null==h,y=h||d;return{componentFromFramework:v,componentClass:y,params:f,type:i,popupFromSelector:p,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(y,v,f,i)}}static getCompKeys(e,t,i,s){const{propertyName:n}=i;let o,r,a,l,c,h;if(t){const i=t,d=i[n+"Selector"],u=d?d(s):null,p=t=>{if("string"===typeof t)o=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:r=t}};u?(p(u.component),l=u.params,c=u.popup,h=u.popupPosition):p(i[n])}return{compName:o,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:h}}newAgStackInstance(e,t,i,s){const n=s.propertyName;let o;if(!t)o=new e;else{const t=this.componentMetadataProvider.retrieve(n);o=this.frameworkComponentWrapper.wrap(e,t.mandatoryMethodList,t.optionalMethodList,s)}const r=this.initComponent(o,i);return null==r?xh.resolve(o):r.then((()=>o))}mergeParamsWithApplicationProvidedParams(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4?arguments[4]:void 0;const o=this.gos.getGridCommonParams();ja(o,i),n&&ja(o,n);const r=e&&e[t.propertyName+"Params"];if("function"===typeof r){ja(o,r(i))}else"object"===typeof r&&ja(o,r);return ja(o,s),o}initComponent(e,t){if(this.createBean(e),null!=e.init)return e.init(t)}};function $h(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}var Kh=class e{static register(t){e.__register(t,!0,void 0)}static registerModules(t){e.__registerModules(t,!0,void 0)}static __register(t,i,s){e.runVersionChecks(t),void 0!==s?(e.areGridScopedModules=!0,void 0===e.gridModulesMap[s]&&(e.gridModulesMap[s]={}),e.gridModulesMap[s][t.moduleName]=t):e.globalModulesMap[t.moduleName]=t,e.setModuleBased(i)}static __unRegisterGridModules(t){delete e.gridModulesMap[t]}static __registerModules(t,i,s){e.setModuleBased(i),t&&t.forEach((t=>e.__register(t,i,s)))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,o]=e.currentModuleVersion.split(".")||[];return i===n&&s===o}static runVersionChecks(t){e.currentModuleVersion||(e.currentModuleVersion=t.version);const i=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;if(t.version?e.isValidModuleVersion(t)||sr(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${e.currentModuleVersion}.`)):sr(i(`'${t.moduleName}' is incompatible.`)),t.validate){const e=t.validate();if(!e.isValid){sr(`${e.message}`)}}}static setModuleBased(t){void 0===e.moduleBased?e.moduleBased=t:e.moduleBased!==t&&(sr("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),sr("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){e.isBundled=!0}static __assertRegistered(t,i,s){if(this.__isRegistered(t,s))return!0;let n;if(e.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(e.moduleBased||void 0===e.moduleBased){const o=Object.entries(Xo).find((e=>{let[i,s]=e;return s===t}))?.[0];n=`AG Grid: unable to use ${i} as the ${o} is not registered${e.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ${o} } from '${t}';\n    \n    ModuleRegistry.registerModules([ ${o} ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';`;return sr(n),!1}static __isRegistered(t,i){return!!e.globalModulesMap[t]||!!e.gridModulesMap[i]?.[t]}static __getRegisteredModules(t){return[...wr(e.globalModulesMap),...wr(e.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return wr(e.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!e.moduleBased}};Kh.globalModulesMap={},Kh.gridModulesMap={},Kh.areGridScopedModules=!1;var Yh=Kh,Zh=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach((e=>{let[t,i]=e;this.beans[t]=i})),e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(t)})),e.derivedBeans?.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{e.preWireBeans?.(this.beans),e.wireBeans?.(this.beans)})),e.forEach((e=>e.preConstruct?.())),t&&e.forEach(t),e.forEach((e=>e.postConstruct?.()))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},qh=class extends Zh{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Yh.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},Qh=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(Qh||{}),Xh=class extends Sa{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const t=this.dragSourceAndParamsList.find((t=>t.dragSource===e));t&&(this.dragService.removeDragSource(t.params),ca(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach((e=>this.dragService.removeDragSource(e.params))),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const n=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),o=this.findCurrentDropTarget(e,n);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,s,t),null!==this.lastDropTarget&&null===o&&this.dragSource?.onGridExit?.(this.dragItem),null===this.lastDropTarget&&null!==o&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(o,e,i,s,t),o&&this.dragAndDropImageComp){const{comp:e,promise:t}=this.dragAndDropImageComp;e?e.setIcon(o.getIconName?o.getIconName():null):t.then((e=>{e&&e.setIcon(o.getIconName?o.getIconName():null)}))}this.lastDropTarget=o}else if(o&&o.onDragging){const n=this.createDropTargetEvent(o,e,i,s,t);o.onDragging(n)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:t,height:s,left:n,right:o,top:r,bottom:a}=i.getBoundingClientRect();if(0===t||0===s)return!1;const l=e.clientX>=n&&e.clientX<o,c=e.clientY>=r&&e.clientY<a;if(!l||!c)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const r of i)if(this.allContainersIntersect(e,r)){s=!0;break}const{eElement:n,type:o}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(n))&&(s&&t.isInterestedIn(o,n))}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const s=Or(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const e of t){if(-1!==(n=this.getAllContainersFromDropTarget(e),n?.flatMap((e=>e))??[]).indexOf(o))return e}var n;return null}enterDragTargetIfExists(e,t,i,s,n){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,s){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const n=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(n)}const n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const o=e.getContainer(),r=o.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-r.left,h=t.clientY-r.top;return this.gos.addGridCommonParams({event:t,x:c,y:h,vDirection:s,hDirection:i,dragSource:l,fromNudge:n,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),s=i.getBoundingClientRect().height,n=(document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1))-2,o=(document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1))-2;if(!i.offsetParent)return;const r=rc(i.offsetParent),{clientY:a,clientX:l}=e;let c=a-r.top-s/2,h=l-r.left-10;const d=Fr(this.gos),u=d.defaultView||window,p=u.pageYOffset||d.documentElement.scrollTop,g=u.pageXOffset||d.documentElement.scrollLeft;n>0&&h+i.clientWidth>n+g&&(h=n+g-i.clientWidth),h<0&&(h=0),o>0&&c+i.clientHeight>o+p&&(c=o+p-i.clientHeight),c<0&&(c=0),i.style.left=`${h}px`,i.style.top=`${c}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const t=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:t},t.then((e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)}))}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:s}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(n),s.applyThemeClasses(n),e.setIcon(null);let{dragItemName:o}=t;nr(o)&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const r=Fr(this.gos);let a=null,l=null;try{a=r.fullscreenElement}catch(mK){}finally{a||(a=Or(this.gos));const e=a.querySelector("body");l=e||(a instanceof ShadowRoot?a:a instanceof Document?a?.documentElement:a)}this.dragAndDropImageParent=l,l?l.appendChild(n):ir("Could not find document body, it is needed for drag and drop.")}},Jh=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!t,this.tickDown=e.clientY>i.bottom-s&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},ed=class extends Sa{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){xr(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new Jh({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){if(this.funcColsService.getRowGroupColumns().length)return!0;const e=this.filterManager?.isAnyFilterPresent();if(e)return!0;return!!this.sortController.isSortActive()}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.selectionService.getSelectedNodes()].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{e.setDragging(!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(ra(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&1===t.highlighted,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))n.forEach((e=>{e.rowTop<s&&(o-=1)})),this.moveRows(n,s,o);else{const e=Kr(this.gos);let t=this.clientSideRowModel.getRowIndexAtPixel(s)+1;0===this.clientSideRowModel.getHighlightPosition(s)&&t--,this.clientSideRowModel.updateRowData({add:n.filter((t=>!this.clientSideRowModel.getRowNode(e?.({data:t.data,level:0,rowPinned:t.rowPinned})??t.data.id))).map((e=>e.data)),addIndex:t})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void ir("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void ir("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(t.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(t.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(t.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(t.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const i={isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(i)))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{s(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:s,onDragging:e.onDragging?t=>{n(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:n,onDragStop:e.onDragStop?t=>{o(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:o,onDragCancel:e.onDragCancel?t=>{r(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:o,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y;let s,n,o=-1;switch(i>this.pageBoundsService.getCurrentPageHeight()||(o=this.rowModel.getRowIndexAtPixel(i),s=this.rowModel.getRow(o)),t.vDirection){case 1:n="down";break;case 0:n="up";break;default:n=null}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:o,overNode:s,y:i,vDirection:n})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{e.setDragging(!1)}))}},td=class extends Sa{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find((t=>t.dragSource===e));t&&(this.removeListener(t),ca(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let o=null;const r=this.gos.get("suppressTouch");s&&!r&&(o=t=>{Ql(t.target)||(n&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=t=>this.onTouchUp(t,e.eElement),n=t.target,o=[{target:Or(this.gos),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:n,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:n,type:"touchend",listener:s,options:{passive:!0}},{target:n,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=Or(this.gos),n=[{target:s,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:s,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:s,type:"contextmenu",listener:e=>e.preventDefault()},{target:s,type:"keydown",listener:t=>{t.key===rh.ESCAPE&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(n),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:s,options:n}=e;t.addEventListener(i,s,n)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:s,options:n}=e;t.removeEventListener(i,s,n)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return qc(e,t,ur(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams)return void(this.dragging=!1);this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if(Tc()){const e=Fr(this.gos);e.getSelection()?.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i="mousemove"===e.type;return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((e=>e())),this.dragEndFunctions.length=0}},id=class extends Uc{constructor(e,t,i,s,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Yc("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new od(this,this.beans,this.rowNode,this.column):new nd(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return-1!==e.indexOf(this.rowNode)?e:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&ir("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{e?.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{const e=this.getDragItem(),t=e.rowNodes?.length||1,s=this.getRowDragText(this.column);return s?s(e,t):1===t?this.cellValueFn():`${t} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},sd=class extends Sa{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;this.column&&(e=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=nr(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(e,t)):(this.parent.setDisplayed(e,t),this.parent.setVisible(!0,t))}}},nd=class extends sd{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},od=class extends sd{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=e&&e.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),n=t&&!s||i;this.setDisplayedOrVisible(n)}},rd=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),ad=class e{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=e.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const i=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,i,t);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(sr("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):"top"===this.rowPinned?e.ID_PREFIX_TOP_PINNED+this.rowIndex:"bottom"===this.rowPinned?e.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new e(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(e,t){const i=ur(this.id)?this.createDaemonNode():null,s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);const n=this.createDataChangedEvent(e,s,!1);this.localEventService?.dispatchEvent(n)}checkRowSelectable(){const e=ea(this.beans.gos);this.setRowSelectable(!e||e(this))}setRowSelectable(e,t){if(this.selectable!==e){if(this.selectable=e,this.dispatchRowEvent("selectableChanged"),t)return;if(na(this.beans.gos)){const e=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:e??!1,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=Kr(this.beans.gos);if(i)if(this.data){const t=this.parent?.getRoute()??[];this.id=i({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(e.ID_PREFIX_ROW_GROUP)&&sr(`Row IDs cannot start with ${e.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.dispatchRowEvent("masterChanged"))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,null!=e&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=cr(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,i=0;const s=this.__autoHeights;if(null==s)return;if(this.beans.visibleColsService.getAllAutoHeightCols().forEach((n=>{let o=s[n.getId()];if(null==o){if(!this.beans.columnModel.isColSpanActive())return void(e=!0);{let t=[];switch(n.getPinned()){case"left":t=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":t=this.beans.visibleColsService.getRightColsForRow(this);break;case null:t=this.beans.columnViewportService.getColsWithinViewport(this)}if(t.includes(n))return void(e=!0);o=-1}}else t=!1;o>i&&(i=o)})),e)return;if((t||i<10)&&(i=Ar(this.beans.gos,this).height),i==this.rowHeight)return;this.setRowHeight(i);const n=this.beans.rowModel;n.onRowHeightChangedDebounced?.()}setExpanded(e,t,i){if(this.expanded===e)return;this.expanded=e,this.dispatchRowEvent("expandedChanged");const s={...this.createGlobalRowEvent("rowGroupOpened"),expanded:e,event:t||null};this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(e,t,i){const s=(()=>"string"!==typeof e?e:this.beans.columnModel.getCol(e)??this.beans.columnModel.getColDefCol(e))(),n=this.beans.valueService.getValueForDisplay(s,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:s,colDef:s.getColDef(),data:this.data,node:this,oldValue:n,newValue:t,value:t,source:i}),!1;const o=this.beans.valueService.setValue(this,s,t,i);return this.dispatchCellChangedEvent(s,t,n),this.checkRowSelectable(),o}setGroupValue(e,t){const i=this.beans.columnModel.getCol(e);pr(this.groupData)&&(this.groupData={});const s=i.getColId(),n=this.groupData[s];n!==t&&(this.groupData[s]=t,this.dispatchCellChangedEvent(i,t,n))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.localEventService){const i=e=>{const i=this.aggData?this.aggData[e]:void 0,s=t?t[e]:void 0;if(i===s)return;const n=this.beans.columnModel.getCol(e);n&&this.dispatchCellChangedEvent(n,i,s)};for(const e in t)i(e);for(const s in e)t&&s in t||i(s)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(Mr(this.beans.gos)){const t=this.beans.gos.get("treeData"),i=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(t?!!i&&i(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const s={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((t=>t.depthFirstSearch(e))),e(this)}calculateSelectedFromChildren(){let e=!1,t=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){const s=this.childrenAfterGroup[i];let n=s.isSelected();if(!s.selectable){const e=s.calculateSelectedFromChildren();if(null===e)continue;n=e}switch(n){case!0:e=!0;break;case!1:t=!0;break;default:return}}return e&&t?void 0:!!e||!t&&(this.selectable?this.selected:null)}setSelectedInitialValue(e){this.selected=e}dispatchRowEvent(e){this.localEventService?.dispatchEvent({type:e,node:this})}selectThisNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";const s=!this.selectable&&e,n=this.selected===e;if(s||n)return!1;this.selected=e,this.dispatchRowEvent("rowSelected");const o=this.sibling;return o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:t||null,source:i}),!0}setSelected(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";"boolean"!==typeof i?this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:i}):ir("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(e){return this.rowPinned?(ir("cannot select pinned rows"),0):void 0===this.id?(ir("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...e,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(e,t){this.localEventService||(this.localEventService=new Qo),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Fa(this.beans.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(e,t)??t;this.localEventService.addEventListener(e,i)}removeEventListener(e,t){if(!this.localEventService)return;const i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.localEventService.removeEventListener(e,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(ir("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const t=new e(this.beans);Object.keys(this).forEach((e=>{rd.has(e)||(t[e]=this[e])})),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.dispatchRowEvent("draggingChanged"))}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}};ad.ID_PREFIX_ROW_GROUP="row-group-",ad.ID_PREFIX_TOP_PINNED="t-",ad.ID_PREFIX_BOTTOM_PINNED="b-",ad.OBJECT_ID_SEQUENCE=0;var ld=ad,cd=class extends Uc{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then((()=>{}))??xh.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then((t=>{t?.afterGuiAttached?.(e)}))}afterGuiDetached(){this.filterWrapper?.filterPromise?.then((e=>{e?.afterGuiDetached?.()}))}createFilter(e){const{column:t,source:i}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then((s=>{const n=s.getGui();ur(n)||ir(`getGui method from filter returned ${n}; it should be a DOM element.`),this.appendChild(n),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.columnModel.getColDefCol(this.column)||(cc(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},hd="ag-resizer-wrapper",dd=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,ud=`<div class="${hd}">\n        ${dd("eTopLeft","topLeft")}\n        ${dd("eTop","top")}\n        ${dd("eTopRight","topRight")}\n        ${dd("eRight","right")}\n        ${dd("eBottomRight","bottomRight")}\n        ${dd("eBottom","bottom")}\n        ${dd("eBottomLeft","bottomLeft")}\n        ${dd("eLeft","left")}\n    </div>`,pd=class extends Sa{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:o,x:r,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const h=uc(this.element);if(h){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;c=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;l=parseInt(t.minHeight,10)-i}}if(this.minHeight=n||l,this.minWidth=i||c,s&&this.setWidth(s),o&&this.setHeight(o),s&&o||this.refreshSize(),e)this.center();else if(r||a)this.offsetElement(r,a);else if(h&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),s=parseFloat(e.style.left);t?this.offsetElement(isNaN(s)?0:s,isNaN(i)?0:i):this.setPosition(s,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],s=this.getResizerElement(t),n={dragStartPixels:0,eElement:s,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(n),this.resizeListeners.push(n),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if("string"===typeof e&&-1!==e.indexOf("%"))fc(i,e),e=nc(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?fc(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,r=e?0:n.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-s.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if("string"===typeof e&&-1!==e.indexOf("%"))mc(t,e),e=oc(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,s=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+s>t&&(e=t-s)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?mc(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:parseFloat(e)))}offsetElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!n,r)?0:r,movementY:this.shouldSkipY(t,!!s,o,a)?0:a}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return!!l||(l=t?s<0&&e.clientX>a+o.left||s>0&&e.clientX<a+o.left:i?s<0&&e.clientX>r.right||s>0&&e.clientX<a+o.left:s<0&&e.clientX>r.right||s>0&&e.clientX<r.right,l)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return!!l||(l=t?s<0&&e.clientY>a+o.top+i||s>0&&e.clientY<a+o.top:s<0&&e.clientY>r.bottom||s>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(ud,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${hd}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;i||s||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],o=!!n.style.flex&&"0 0 auto"!==n.style.flex;if(n===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const e=window.getComputedStyle(n);e.minHeight&&(r=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else r=n.offsetHeight,a=n.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:o,isLeft:r}=this.currentResizer,a=n||r,l=o||s,{movementX:c,movementY:h}=this.calculateMouseMovement({e:e,isLeft:r,isTop:s}),d=this.position.x,u=this.position.y;let p=0,g=0;if(a&&c){const e=r?-1:1,t=this.getWidth(),i=t+c*e;let s=!1;r&&(p=t-i,(d+p<=0||i<=this.minWidth)&&(s=!0,p=0)),s||this.setWidth(i)}if(l&&h){const e=s?-1:1,t=this.getHeight(),i=t+h*e;let n=!1;s?(g=t-i,(u+g<=0||i<=this.minHeight)&&(n=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(n=!0),n||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(d+p,u+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},gd=class e extends Sa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{e.defaultPrevented||ya(e)||(this.callbacks.shouldStopEventPropagation(e)?va(e):e.key===rh.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e))}})}};gd.FOCUS_MANAGED_CLASS="ag-focus-managed";var md=gd,fd={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function vd(e,t){return yd(e)?(null!=e.debounceMs&&ir("debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:t}function yd(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var Cd=class extends Uc{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=_c,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new md(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new pd(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(e){this.providedFilterParams=e,this.applyActive=yd(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=yd(e),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(e,t){const{buttons:i,readOnly:s}=t??{},{buttons:n,readOnly:o}=e;if(s===o&&Cr(i,n))return;const r=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(cc(this.eButtonsPanel),this.buttonListeners.forEach((e=>e())),this.buttonListeners=[]):r&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!r)return void(this.eButtonsPanel&&hc(this.eButtonsPanel));const a=document.createDocumentFragment(),l=e=>{let t,i;switch(e){case"apply":t=this.translate("applyFilter"),i=e=>this.onBtApply(!1,!1,e);break;case"clear":t=this.translate("clearFilter"),i=()=>this.onBtClear();break;case"reset":t=this.translate("resetFilter"),i=()=>this.onBtReset();break;case"cancel":t=this.translate("cancelFilter"),i=e=>{this.onBtCancel(e)};break;default:return void ir("Unknown button type specified")}const s=pc(`<button\n                    type="${"apply"===e?"submit":"button"}"\n                    data-ref="${e}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${t}\n                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(s,{click:i})),a.append(s)};n.forEach((e=>l(e))),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=vd(this.providedFilterParams,this.getDefaultDebounceMs()),t=cr(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t?.()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(){const e=this.getModelFromUi();if(!this.isModelValid(e))return!1;const t=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(t,e)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;"Enter"!==i&&"Space"!==i||(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&Jl(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const t="floatingFilter"===e||"columnFilter"===e,{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,fd[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},bd=class extends hh{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},wd=class extends Uc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case rh.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case rh.DOWN:case rh.UP:e.preventDefault(),this.navigate(t);break;case rh.PAGE_DOWN:case rh.PAGE_UP:case rh.PAGE_HOME:case rh.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===rh.DOWN;let i;if(this.highlightedEl){let e=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);e=Math.min(Math.max(e,0),this.itemEls.length-1),i=this.itemEls[e]}else i=this.itemEls[t?0:this.itemEls.length-1];this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||0===this.itemEls.length)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/s);let o=-1;e===rh.PAGE_HOME?o=0:e===rh.PAGE_END?o=i:e===rh.PAGE_DOWN?o=Math.min(t+n,i):e===rh.PAGE_UP&&(o=Math.max(t-n,0)),-1!==o&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{hc(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,i)=>{Pl(t,"posinset",i+1),function(e,t){Pl(e,"setsize",t)}(t,e.length)}))}renderOption(e,t){const i=Fr(this.gos),s=i.createElement("div");Ol(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");s.appendChild(n),n.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Hc({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!uc(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Yl(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:n,offsetHeight:o}=e;(n+o>i+s||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){this.highlightedEl&&uc(this.highlightedEl)&&(this.highlightedEl.classList.remove(this.activeClass),Yl(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Sd=class extends lh{constructor(e){if(super(e,e?.template||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=_c,this.eWrapper=_c,this.eDisplayField=_c,this.eIcon=_c,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:o}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!s,null!=i&&this.setPickerMaxHeight(i),null!=n&&this.setPickerMinWidth(n),null!=o&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const e=Yc(i,this.gos);e&&this.eIcon.appendChild(e)}null!=s&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Vl(e,!1),this.ariaRole&&Ol(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case rh.UP:case rh.DOWN:case rh.ENTER:case rh.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case rh.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=Gr(this.gos);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:this.eWrapper};e.style.position="absolute";const r=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:h}=this;h?(l&&(e.style.minWidth=l),e.style.width=vc(oc(this.eWrapper)),c&&(e.style.maxWidth=c)):gc(e,c??oc(this.eWrapper));const d=a??`${ic(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",d),this.alignPickerToComponent(),r.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;Vl(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return gc(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e=`${e}px`),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e=`${e}px`),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e=`${e}px`),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},xd=class extends Sd{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new wd("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;var i,s;e.setAttribute("id",t),Ll(i=this.getAriaElement(),"controls",(s=e).id),Gl(s,i.id),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===rh.TAB&&this.hidePicker(),t){case rh.ENTER:case rh.UP:case rh.DOWN:case rh.PAGE_UP:case rh.PAGE_DOWN:case rh.PAGE_HOME:case rh.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case rh.ESCAPE:super.onKeyDown(e);break;case rh.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;i||this.listComponent.setValue(e,!0);if(this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return null==s&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},Md={selector:"AG-SELECT",component:xd},Dd=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach((e=>{if("string"===typeof e)return;[["displayKey"],["displayName"],["predicate","test"]].every((t=>!!t.some((t=>null!=e[t]))||(ir(`ignoring FilterOptionDef as it doesn't contain one of '${t}'`),!1)))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter((t=>t===e))||[]}))}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:ir("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else ir("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},Rd=class extends Cd{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{0===i?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let n;if(i){const i=e,s=t;n=this.areSimpleModelsEqual(i,s)}else{const i=e,s=t;n=i.operator===s.operator&&aa(i.conditions,s.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return n}shouldRefresh(e){const t=this.getModel(),i=t?t.conditions??[t]:null,s=e.filterOptions?.map((e=>"string"===typeof e?e:e.displayKey))??this.getDefaultFilterOptions();return!(i&&!i.every((e=>void 0!==s.find((t=>t===e.type)))))&&!("number"===typeof e.maxNumConditions&&i&&i.length>e.maxNumConditions)}refresh(e){if(!this.shouldRefresh(e))return!1;return!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],ir("Filter model is missing 'conditions'"));const s=this.validateAndUpdateConditions(i),n=this.getNumConditions();if(s<n)this.removeConditionsAndOperators(s);else if(s>n)for(let e=n;e<s;e++)this.createJoinOperatorPanel(),this.createOption();const o="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!o,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(o,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),xh.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),ir('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,s=[];if(i){const e=t;s.push(...e.conditions??[])}else s.push(t);return s[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Dd,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(ir('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(ir('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ir('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new xd);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,(e=>this.resetInput(e))),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new bd);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return"AND"===e||"OR"===e?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map((e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){this.filterListOptions.forEach((t=>{e.addOption(t)})),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,s=t-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const s=this.isConditionDisabled(i,e);t.setDisabled(s||this.filterListOptions.length<=1),1===i&&(Jl(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))})),this.eConditionBodies.forEach(((e,t)=>{Xl(e,this.isConditionBodyVisible(t))}));const i="OR"===(t??this.getJoinOperator());this.eJoinOperatorsAnd.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOperatorsOr.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,s,n)=>{this.setElementDisplayed(t,i<n),this.setElementDisabled(t,this.isConditionDisabled(s,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach((e=>hc(e)))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach((e=>{hc(e.getGui()),this.destroyBean(e)}))}removeItems(e,t,i){return null==i?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const e=this.getInputs(0)[0];if(!e)return;e instanceof ch&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))-1===t&&(t=r,i=r);else{const e=r<t;(r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1)||e)&&(this.removeConditionsAndOperators(r,1),s=!0,e&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(nr(this.filterPlaceholder)){const e=this.filterPlaceholder,s=this.eTypes[t].getValue();i=e({filterOptionKey:s,filterOption:this.translate(s),placeholder:i})}else"string"===typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput(((t,i,s,n)=>{if(!(t instanceof ch))return;const o=0===i&&n>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",r=0===i&&n>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(r)}))}setElementValue(e,t,i){e instanceof ch&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Uc&&Xl(e.getGui(),t)}setElementDisabled(e,t){e instanceof Uc&&Jl(e.getGui(),t)}attachElementOnChange(e,t){e instanceof ch&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){const t=n[o];null!=t&&i(t,o,e,s)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),xh.resolve()}resetType(e){const t=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t)))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput(((e,s,n)=>{n===t&&this.setElementValue(e,null!=i[s]?i[s]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,s)=>{this.setElementValue(t,0===i&&0===s?e:null,!0)}))}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,s,i);return null!=o?o:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e)}evaluateCustomFilter(e,t,i){if(null==e)return;const{predicate:s}=e;return null==s||t.some((e=>null==e))?void 0:s(t,i)}isBlank(e){return null==e||"string"===typeof e&&0===e.trim().length}hasInvalidInputs(){return!1}},Ed=class extends Rd{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=null!=e[0]?s(e[0],t):0;switch(i.type){case"equals":return 0===n;case"notEqual":return 0!==n;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const i=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&i<=0:n>0&&i<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return ir('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}};function Id(e){if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===e.key?.length}function Ad(e,t,i,s,n){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});if(o){if(o(r))return!0}return!1}var kd=class extends ch{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=ur(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{Id(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{const i=t.clipboardData?.getData("text");i&&i.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}},Td={selector:"AG-INPUT-TEXT-FIELD",component:kd},Ld=class extends kd{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;"number"===typeof e&&this.setPrecision(e),"number"===typeof t&&this.setMin(t),"number"===typeof i&&this.setMax(i),"number"===typeof s&&this.setStep(s)}onWheel(e){Br(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e);return null!=this.min&&t<this.min?e=this.min.toString():null!=this.max&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(null==this.precision)return e;if(t){const t=parseFloat(e).toFixed(this.precision);return parseFloat(t).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e||(this.min=e,Cc(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,Cc(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,Cc(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if(ur(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){s=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},Pd={selector:"AG-INPUT-NUMBER-FIELD",component:Ld},Fd=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Nd=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.localeService.getLocaleTextFunc();if(t){const t=e,s=(t.conditions??[]).map((e=>this.getModelAsString(e))),n="AND"===t.operator?"andCondition":"orCondition";return s.join(` ${i(n,fd[n])} `)}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,s=this.optionsFactory.getCustomOption(t.type),{displayKey:n,displayName:o,numberOfInputs:r}=s||{};return n&&o&&0===r?(i(n,o),o):this.conditionToString(t,s)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},Od=class extends Nd{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:null!=e.filter?this.formatValue(e.filter):`${e.type}`}};function Bd(e){const{allowedCharPattern:t}=e??{};return t??null}var Gd=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],zd=class extends Nd{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?`${e.filter}-${e.filterTo}`:null!=e.filter?`${e.filter}`:`${e.type}`}};function jd(e){const t=e&&e.trim();return""===t?e:t}function Vd(e){if("number"===typeof e)return e;if("string"===typeof e){const t=parseInt(e);if(isNaN(t))return;return t}}function Hd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return i=>{const s=Vd(i);if(!(null==s||s<e||s>t))return s}}function Wd(e,t){return e.toString().padStart(t,"0")}function _d(e,t,i){return"number"!==typeof e?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Ud(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>Wd(e,2))).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>Wd(e,2))).join(":")),s}var $d=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Kd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";const i=Wd(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>Wd(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${$d(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${$d(e.getDate())}`,DD:()=>Wd(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${$d(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(o).join("|"),"g");return t.replace(r,(e=>e in o?o[e]():e))}function Yd(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map((e=>parseInt(e,10)));if(3!==s.filter((e=>!isNaN(e))).length)return null;const[n,o,r]=s,a=new Date(n,o-1,r);if(a.getFullYear()!==n||a.getMonth()!==o-1||a.getDate()!==r)return null;if(!i||"00:00:00"===i)return a;const[l,c,h]=i.split(":").map((e=>parseInt(e,10)));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),h>=0&&h<60&&a.setSeconds(h),a}var Zd=class{constructor(e,t,i,s,n){this.alive=!0,this.context=e,this.eParent=s;t.getDateCompDetails(i).newAgStackInstance().then((t=>{this.alive?(this.dateComp=t,t&&(s.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached(),this.tempValue&&t.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled),n?.(this))):e.destroyBean(t)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Xl(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"===typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;if(this.dateComp?.refresh&&"function"===typeof this.dateComp.refresh){null!==this.dateComp.refresh(e)&&(t=!0)}if(!t&&this.dateComp?.onParamsUpdated&&"function"===typeof this.dateComp.onParamsUpdated){null!==this.dateComp.onParamsUpdated(e)&&ir("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}},qd=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],Qd=class extends Nd{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n="inRange"==i||2===s,o=Yd(e.dateFrom),r=Yd(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){return`${null!==o?Kd(o,a):"null"}-${null!==r?Kd(r,a):"null"}`}return null!=o?Kd(o,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},Xd=1/0,Jd=class extends Sa{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?ra(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=ur(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn((()=>{this.actualLeft===n&&this.setLeft(n)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!Dr(this.beans.gos,"print"))return t;if("left"===e.getPinned())return t;const i=this.beans.visibleColsService.getColsLeftWidth();if("right"===e.getPinned()){return i+this.beans.visibleColsService.getBodyContainerWidth()+t}return i+t}setLeft(e){if(ur(e)&&(this.eCell.style.left=`${e}px`),fl(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(t=this.ariaEl,i=e.length,Pl(t,"colspan",i))}var t,i}};function eu(e,t,i,s){return pr(e)?[]:iu(e.headerClass,e,t,i,s)}function tu(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}function iu(e,t,i,s,n){if(pr(e))return[];let o;if("function"===typeof e){const r=function(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}(t,i,s,n);o=e(r)}else o=e;return"string"===typeof o?[o]:Array.isArray(o)?[...o]:[]}var su=0,nu=class e extends Sa{constructor(e,t,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=i,this.beans=t,this.instanceId=e.getUniqueId()+"-"+su++}wireBeans(e){this.pinnedWidthService=e.pinnedWidthService,this.focusService=e.focusService,this.userComponentFactory=e.userComponentFactory,this.ctrlsService=e.ctrlsService,this.dragAndDropService=e.dragAndDropService,this.menuService=e.menuService}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return function(e,t,i,s){const n=s.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;return!!ur(o)&&!!o(e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t}))}(this.gos,e,t,i)}getWrapperHasFocus(){return Br(this.gos)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:s}=e,{animationFrameService:n,resizeObserverService:o,columnModel:r,gos:a}=this.beans,l=e=>{if(!this.isAlive()||!s.isAlive())return;const{paddingTop:i,paddingBottom:o,borderBottomWidth:c,borderTopWidth:h}=tc(this.getGui()),d=i+o+c+h,u=t.offsetHeight+d;if(e<5){const i=Fr(a);if(!i||!i.contains(t)||0==u)return void n.requestAnimationFrame((()=>l(e+1)))}r.setColHeaderHeight(this.column,u)};let c,h=!1;const d=()=>{const e=this.column.isAutoHeaderHeight();e&&!h&&u(),!e&&h&&p()},u=()=>{h=!0,l(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),c=o.observeResize(t,(()=>l(0)))},p=()=>{h=!1,c&&c(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),c=void 0};d(),s.addDestroyFunc((()=>p())),s.addManagedListeners(this.column,{widthChanged:()=>h&&l(0)}),s.addManagedEventListeners({sortChanged:()=>{h&&window.setTimeout((()=>l(0)))}}),i&&i(d)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:s}=this;e&&t&&s&&(tu(e,t,i.visibleColsService),Ul(s,i.visibleColsService.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){this.resizeFeature&&e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=this.focusService.isHeaderFocusSuppressed();this.eGui&&Cc(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=Br(this.gos),i=e.key===rh.LEFT||e.key===rh.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const s=e.key===rh.LEFT!==this.gos.get("enableRtl"),n=Qh[s?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(n)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const e=this.pinnedWidthService.getPinnedLeftWidth(),i=this.pinnedWidthService.getPinnedRightWidth(),s=sc(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(e+i+t>s){if(!(s>e+i))return 0;t=s-e-i}}return t}getResizeDiff(e){let t=e.key===rh.LEFT!==this.gos.get("enableRtl");const i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==("right"===i)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{this.resizeFeature?.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case rh.PAGE_DOWN:case rh.PAGE_UP:case rh.PAGE_HOME:case rh.PAGE_END:t&&e.preventDefault()}}addDomData(t){const i=e.DOM_DATA_KEY_HEADER_CTRL;Pr(this.gos,this.eGui,i,this),t.addDestroyFunc((()=>Pr(this.gos,this.eGui,i,null)))}getGui(){return this.eGui}focus(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const s=e??t;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault(),this.menuService.isHeaderContextMenuEnabled(i)&&this.menuService.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventService.dispatchEvent({type:e,column:t})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};nu.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var ou=nu,ru=class extends Sa{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};var au="32.3.8";var lu={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},cu=["january","february","march","april","may","june","july","august","september","october","november","december"];var hu=class extends Uc{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.optionsFactory=new Dd,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return null==i||1==i}isTypeEditable(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){return`${this.columnNameService.getDisplayNameForColumn(e.column,"header",!0)} ${this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},du=class extends Sa{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=_c,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new kd(this.params?.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=e=>this.valueChangedListener(e);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},uu=class extends hu{constructor(){super(...arguments),this.eFloatingFilterInputContainer=_c}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=yd(this.params.filterParams),!this.isReadOnly()){const e=vd(this.params.filterParams,this.getDefaultDebounceMs()),t=cr(this.syncUpWithParentFilter.bind(this),e);this.floatingFilterInputService.setValueChangedListener(t)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();cc(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===rh.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=jd(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance((e=>{e&&e.onFloatingFilterChanged(this.getLastType()||null,i||null)}))}setEditable(e){this.floatingFilterInputService.setEditable(e)}},pu=class extends Sa{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Ld),this.eFloatingFilterTextInput=this.createManagedBean(new kd),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.valueChangedListener(e))),this.setupListeners(i,(e=>this.valueChangedListener(e)))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}};var gu={version:au,moduleName:"@ag-grid-community/filter-core",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onAdvancedFilterEnabledChanged(t)},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.addManagedPropertyListener("advancedFilterModel",(e=>this.setAdvancedFilterModel(e.currentValue))),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.isAdvancedFilterEnabled()?this.warnAdvancedFilters():this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){Hr(this.gos)&&this.onFilterChanged()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):xh.resolve()).then((()=>{const e={source:t,type:"filterChanged",columns:s};i&&ja(e,i),this.eventService.dispatchEvent(e),this.columnFilterService?.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Hr(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&!(this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode))&&(!(this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){this.isAdvancedFilterEnabled()&&(this.dataTypeService?.isPendingInference()?this.advancedFilterModelUpdateQueue.push(e):(this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})))}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(!this.isAdvancedFilterEnabled())return this.columnFilterService?.getFilterInstance(e,t);this.warnAdvancedFilters()}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){ir("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach((e=>this.setAdvancedFilterModel(e))),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.columnFilterService?.setColDefPropertiesForDataType(e,t,i)}}]},mu={version:au,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:function(e){return!!e.filterManager?.isAnyFilterPresent()},onFilterChanged:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";e.filterManager?.onFilterChanged({source:t})}},dependantModules:[gu]},fu={version:au,moduleName:"@ag-grid-community/column-filter",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this.dataTypeService?.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:t});const i=[],s=this.getFilterModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((s,n)=>{const o=e[n];i.push(this.setModelOnFilterWrapper(s.filterPromise,o)),t.delete(n)})),t.forEach((t=>{const s=this.columnModel.getColDefCol(t)||this.columnModel.getCol(t);if(!s)return void ir("setFilterModel() - no column found for colId: "+t);if(!s.isFilterAllowed())return void ir("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+t);const n=this.getOrCreateFilterWrapper(s);n?i.push(this.setModelOnFilterWrapper(n.filterPromise,e[t])):ir("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+t)}))}else this.allColumnFilters.forEach((e=>{i.push(this.setModelOnFilterWrapper(e.filterPromise,null))}));xh.all(i).then((()=>{const e=this.getFilterModel(!0),i=[];this.allColumnFilters.forEach(((t,n)=>{Cr(s?s[n]:null,e?e[n]:null)||i.push(t.column)})),i.length>0&&this.filterManager?.onFilterChanged({columns:i,source:t})}))}setModelOnFilterWrapper(e,t){return new xh((i=>{e.then((e=>{"function"!==typeof e.setModel&&(ir("filter missing setModel method, which is needed for setFilterModel"),i()),(e.setModel(t)||xh.resolve()).then((()=>i()))}))}))}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:s}=this;return i.forEach(((e,i)=>{const s=this.getModelFromFilterWrapper(e);ur(s)&&(t[i]=s)})),e||Object.entries(s).forEach((e=>{let[s,n]=e;ur(n)&&!i.has(s)&&this.columnModel.getCol(s)?.isFilterAllowed()&&(t[s]=n)})),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!==typeof t.getModel?(ir("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return!!this.allColumnFilters.size&&(this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=!!Hr(this.gos),t=t=>{if(!t.isPrimary())return!0;const i=!this.columnModel.isPivotActive();return!(!t.isValueActive()||!i)&&(!!this.columnModel.isPivotMode()||e)},i=[],s=[];return this.forEachColumnFilter(((e,n)=>{const o=(e=>!!e&&(e.isFilterActive?e.isFilterActive():(ir("Filter is missing isFilterActive() method"),!1)))(e);o&&(t(n.column)?i.push(e):s.push(e))})).then((()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s}))}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter(((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t)))}forEachColumnFilter(e){return xh.all(Array.from(this.allColumnFilters.values()).map((t=>t.filterPromise.then((i=>e(i,t))))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?n:s;for(let a=0;a<o.length;a++){const i=o[a];if(null!=i&&i!==t){if("function"!==typeof i.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!i.doesFilterPass({node:e,data:r}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter((e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()})).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createValueGetter(e){return t=>{let{node:i}=t;return this.valueService.getValue(e,i,!0)}}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(oa(this.gos))t="agSetColumnFilter";else{const i=this.dataTypeService?.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(oa(this.gos))t="agSetColumnFloatingFilter";else{const i=this.dataTypeService?.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let n;const o={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(n,e)(t),doesRowPassOtherFilter:e=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(n,e)},r=this.userComponentFactory.getFilterDetails(s,o,i);return r?{filterPromise:()=>{const e=r.newAgStackInstance();return null!=e&&e.then((e=>{n=e,t&&(t.filter=e)})),e},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:Ba(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=s,t}onColumnsChanged(){const e=[];this.allColumnFilters.forEach(((t,i)=>{let s;s=t.column.isPrimary()?this.columnModel.getColDefCol(i):this.columnModel.getCol(i),s&&s===t.column||(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}));const t=e.every((e=>"agGroupColumnFilter"===e.getColDef().filter));e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e?.forEach((e=>{"agGroupColumnFilter"===e.getColDef().filter&&this.getOrCreateFilterWrapper(e)}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:t}=this.allColumnFilters.get(e.getColId())??{};return!t||("function"!==typeof t?.isFilterAllowed||t.isFilterAllowed())}getFloatingFilterCompDetails(e,t){const i=t=>{const i=this.getOrCreateFilterWrapper(e)?.filterPromise;null!=i&&i.then((e=>{t($h(e))}))},s=e.getColDef(),n={...this.createFilterParams(e,s),filterChangedCallback:()=>i((t=>this.filterChangedCallbackFactory(t,e)()))},o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,Oh,n);let r=function(e,t,i){if(null==t)return null;let s=null;const{compName:n,jsComp:o,fwComp:r}=Uh.getCompKeys(e,t,Oh);n?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:null==o&&null==r&&!0===t.filter&&(s=i());return s}(this.frameworkOverrides,s,(()=>this.getDefaultFloatingFilter(e)));null==r&&(r="agReadOnlyFloatingFilter");const a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,r)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then((i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})}))}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const s={filter:e,additionalEventAttributes:i,columns:[t],source:i?.source??"columnFilter"};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s))return void this.destroyFilter(i,"paramsUpdated");const n=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(!e?.refresh||e.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(e,t),...n}))&&this.destroyFilter(i,"paramsUpdated")})):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||i?.render&&s?.render&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some((e=>e.getColDef().floatingFilter))}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then((e=>{const i=$h(e);t(i)}))}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstanceImpl(e).then((e=>{t($h(e))}))}))}getFilterInstanceImpl(e){const t=this.columnModel.getColDefCol(e);if(!t)return xh.resolve(void 0);const i=this.getOrCreateFilterWrapper(t)?.filterPromise;return i??xh.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((e=>{let{model:t,source:i}=e;return this.setFilterModel(t,i)})),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((e=>{let{key:t,model:i,resolve:s}=e;this.setColumnFilterModel(t,i).then((()=>s()))})),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let i=()=>{};const s=new Promise((e=>{i=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),s}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(n=this.setModelOnFilterWrapper(s.filterPromise,t),new Promise((e=>{n.then((t=>e(t)))}))):Promise.resolve();var n}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const s=oa(this.gos),n=this.localeService.getLocaleTextFunc(),o=t=>{const{filterParams:i}=e;e.filterParams="object"===typeof i?{...i,...t}:t};switch(t.baseDataType){case"number":s&&o({comparator:(e,t)=>{const i=null==e?0:parseInt(e),s=null==t?0:parseInt(t);return i===s?0:i>s?1:-1}});break;case"boolean":o(s?{valueFormatter:e=>ur(e.value)?n(String(e.value),e.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":s&&o({valueFormatter:e=>{const t=i(e);return ur(t)?t:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=cu[Number(e)-1];return n(t,lu[t])}return e??n("blanks","(Blanks)")}});break;case"dateString":{const e=t.dateParser;o(s?{valueFormatter:e=>{const t=i(e);return ur(t)?t:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:t=>{const i=e(t??void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=cu[Number(e)-1];return n(t,lu[t])}return e??n("blanks","(Blanks)")}}:{comparator:(t,i)=>{const s=e(i);return null==i||s<t?-1:s>t?1:0}});break}case"object":s?o({valueFormatter:e=>{const t=i(e);return ur(t)?t:n("blanks","(Blanks)")}}):e.filterValueGetter=e=>i({column:e.column,node:e.node,value:this.valueService.getValue(e.column,e.node)})}}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}}],dependantModules:[gu]},vu={version:au,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:function(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()},getFilterInstance:function(e,t,i){return e.filterManager?.getFilterInstance(t,i)},getColumnFilterInstance:function(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.columnModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming((()=>e.filterManager?.setFilterModel(t)))},getFilterModel:function(e){return e.filterManager?.getFilterModel()??{}},getColumnFilterModel:function(e,t){return e.filterManager?.getColumnFilterModel(t)??null},setColumnFilterModel:function(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()},showColumnFilter:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):sr(`column '${t}' not found`)}},dependantModules:[fu,mu]},yu={version:au,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:class extends ou{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=kl(this,this.beans.context,n),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc((()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()}))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Yc("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new md(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();Bl(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(Br(this.gos)===this.eGui)return;const t=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(t)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void t.focus();const i=this.findNextColumnWithFloatingFilter(e.shiftKey);i&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:i},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case rh.UP:case rh.DOWN:t||e.preventDefault();case rh.LEFT:case rh.RIGHT:if(t)return;e.stopPropagation();case rh.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case rh.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&ec(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==rh.TAB);if(e&&t){const t=e.shiftKey;this.focusService.focusInto(this.eGui,t)}}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(e){e.createManagedBean(new ru([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new Jd(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=e=>{if("filterDestroyed"===e?.source&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then((i=>{if(i){const s=t?.getCurrentFloatingFilterParentModel(this.column),n=e?{...e,columns:e.columns??[],source:"api"===e.source?"api":"columnFilter"}:null;i.onParentModelChanged(s,n)}}))};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,n=this.comp.getFloatingFilterComp();n&&s?n.then((t=>{!t||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s)})):this.updateCompDetails(e,s,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const t=e.params;this.comp.getFloatingFilterComp()?.then((e=>{let i=!1;if(e?.refresh&&"function"===typeof e.refresh){null!==e.refresh(t)&&(i=!0)}if(!i&&e?.onParamsUpdated&&"function"===typeof e.onParamsUpdated){null!==e.onParamsUpdated(t)&&ir("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}))}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}}],dependantModules:[fu]},Cu={version:au,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:class extends Uc{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[Td]),this.eFloatingFilterText=_c}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}}}],dependantModules:[yu]},bu={version:au,moduleName:"@ag-grid-community/simple-filter",dependantModules:[fu],userComponents:[{name:"agTextColumnFilter",classImp:class extends Rd{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=e=>{let{filterOption:t,value:i,filterText:s}=e;if(null==s)return!1;switch(t){case"contains":return i.indexOf(s)>=0;case"notContains":return i.indexOf(s)<0;case"equals":return i===s;case"notEqual":return i!=s;case"startsWith":return 0===i.indexOf(s);case"endsWith":{const e=i.lastIndexOf(s);return e>=0&&e===i.length-s.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new zd(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(ir("textCustomComparator is deprecated, use textMatcher instead."),t=>{let{filterOption:i,value:s,filterText:n}=t;return e(i,s,n)}):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,s,n,o)=>{if(s<o){let s=dr(e.getValue());t&&this.textFilterParams.trimInput&&(s=jd(s)??null,e.setValue(s,!0)),i.push(s)}})),i}getDefaultFilterOptions(){return Gd}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Ol(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new kd);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,s){const n=e.map((e=>this.formatter(e)))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,textFormatter:h}=this.textFilterParams;if("blank"===i.type)return this.isBlank(t);if("notBlank"===i.type)return!this.isBlank(t);const d={api:r,colDef:a,column:l,context:c,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:h};return n.some((e=>this.matcher({...d,filterText:e})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agNumberColumnFilter",classImp:class extends Ed{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new Od(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Fd}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=Bd(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Ol(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new kd({allowedCharPattern:s}):new Ld);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,n)=>{i<n&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"===typeof e)return e;let t=dr(e);return null!=t&&""===t.trim()&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}}},{name:"agDateColumnFilter",classImp:class extends Ed{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=Xd,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Yd(t)||null,i&&Yd(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){return null==t||t<e?-1:t>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);ir(`DateFilter ${t} is not a number`)}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",Xd),this.minValidYear>this.maxValidYear&&ir("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Yd(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Yd(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&ir("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Qd(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new Zd(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc((()=>t.destroy())),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return qd}createValueElement(){const e=Fr(this.gos).createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,s){const n=Fr(this.gos).createElement("div");n.classList.add(`ag-filter-${s}`),n.classList.add(`ag-filter-date-${s}`),t.push(n),e.appendChild(n),i.push(this.createDateCompWrapper(n))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,s,n,o)=>{n!==e||!t||s>=o||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=Ud(s[0])),s.length>1&&(i.dateTo=Ud(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,n)=>{i<n&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agDateInput",classImp:class extends Uc{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[Td]),this.eDateInput=_c}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:e=>{e.target===Br(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Tc(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:o,maxValidDate:r}=e.filterParams||{};if(o&&s&&ir("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),r&&n&&ir("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&r){const[e,t]=[o,r].map((e=>e instanceof Date?e:Yd(e)));e&&t&&e.getTime()>t.getTime()&&ir("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=Kd(o):t.min=o:s&&(t.min=`${s}-01-01`),r?r instanceof Date?t.max=Kd(r):t.max=r:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Yd(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Ud(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:function(){if(void 0===xc){const e=window;xc=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return xc}()||Pc()||Tc()&&Lc()>=14.1}}}]},wu={version:au,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[bu,yu],userComponents:[{name:"agTextColumnFloatingFilter",classImp:class extends uu{init(e){super.init(e),this.filterModelFormatter=new zd(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Gd}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new du)}}},{name:"agNumberColumnFloatingFilter",classImp:class extends uu{init(e){super.init(e),this.filterModelFormatter=new Od(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){Bd(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Fd}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=Bd(e.filterParams),this.allowedCharPattern?this.createManagedBean(new du({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new pu)}}},{name:"agDateColumnFloatingFilter",classImp:class extends hu{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[Td]),this.eReadOnlyText=_c,this.eDateWrapper=_c}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return qd}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Qd(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const t=e;this.dateComp.setDate(Yd(t.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Xl(this.eDateWrapper,e),Xl(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=Ud(this.dateComp.getDate());this.params.parentFilterInstance((t=>{if(t){const i=Yd(e);t.onFloatingFilterChanged(this.getLastType()||null,i)}}))}getDateComponentParams(){const e=vd(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:cr(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Zd(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}}]},Su={version:au,moduleName:"@ag-grid-community/quick-filter-core",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setQuickFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onQuickFilterColumnConfigChanged())),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setQuickFilterParserAndMatcher()))}refreshQuickFilterCols(){const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter((e=>e.isVisible()||e.isRowGroupActive()))}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i)))}resetQuickFilterCache(){this.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseQuickFilter(e){return ur(e)?xr(this.gos)?e.toUpperCase():(ir("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!==typeof e)return void ir("Grid option quickFilterText only supports string inputs, received: "+typeof e);const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some((i=>{const s=this.getQuickFilterTextForColumn(i,e);return ur(s)&&s.indexOf(t)>=0}))}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return ur(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach((i=>{const s=this.getQuickFilterTextForColumn(i,e);ur(s)&&t.push(s)})),t.join("\n")}}],dependantModules:[gu]},xu={version:au,moduleName:"@ag-grid-community/filter",dependantModules:[wu,Cu,{version:au,moduleName:"@ag-grid-community/quick-filter",dependantModules:[Su,{version:au,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:function(e){return!!e.filterManager?.isQuickFilterPresent()},getQuickFilter:function(e){return e.gos.get("quickFilterText")},resetQuickFilter:function(e){e.filterManager?.resetQuickFilterCache()}},dependantModules:[Su]}]},vu]},Mu=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(Mu||{}),Du=class extends Sa{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}));const e=Fr(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let i;if("string"===typeof e?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s=this.ctrlsService.getHeaderRowContainerCtrl(),n=s?.getAllCtrls(),o="filter"===ra(n||[]).getType(),r=this.getHeaderRowCount()-1;let a=-1,l=i;for(;l;)a++,l=l.getParent();let c=a;return t&&o&&c===r-1&&c++,-1===c?null:{headerRowIndex:c,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,n=t.column,o=this.getHeaderRowCount(),r=0===e;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=r?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),h=!1;return a<0&&(a=0,l=n,h=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==c&&(this.currentHeaderRowWithoutSpan=c),!(!h&&!l)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const s=this.focusService.getFocusedHeader(),n=2===e,o=this.gos.get("enableRtl");let r,a;if(-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==o?(a="Before",r=this.headerPositionUtils.findHeader(s,a)):(a="After",r=this.headerPositionUtils.findHeader(s,a)),r||!t)return this.focusService.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=this.gos.getCallback("tabToNextHeader");if(e)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:r,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n,o=null;if("Before"===t?s>0&&(n=s-1,this.currentHeaderRowWithoutSpan-=1,o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!o)return!1;const{column:r,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(o.column,o?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(fl(e)){const s=e.getDisplayedLeafColumns();t="Before"===i?ra(s):s[0]}else t=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(t)}}},Ru=class extends Sa{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new md(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame((()=>e())),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce(((e,t)=>e+t),0),s=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const e=this.visibleColsService.getAllCols().some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case rh.LEFT:t=2;case rh.RIGHT:ur(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case rh.UP:t=0;case rh.DOWN:ur(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(Br(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;s!==this.eGui&&s!==this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement()||this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Nc())return;const t=new Qc(this.eGui);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}},Eu=class extends Sa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Dr(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let n;if(e)n=t+i+s;else if(n=t,this.addSpacer){0===(this.gos.get("enableRtl")?i:s)&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())}this.callback(n)}},Iu=class extends Sa{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function Au(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:o,pinned:r,gos:a,columnModel:l,columnMoveService:c,visibleColsService:h}=e;let{allMovingColumns:d}=e;if(t){const e=[];d.forEach((t=>{let i=null,s=t.getParent();for(;null!=s&&1===s.getDisplayedLeafColumns().length;)i=s,s=s.getParent();if(null!=i){(!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)}))}else e.includes(t)||e.push(t)})),d=e}const u=d.slice();l.sortColsLikeCols(u);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:o,columnModel:r,visibleColsService:a}=e,l=o.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable));if(l)return[];const c=function(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}(a,n),h=r.getCols(),d=c.filter((e=>ua(t,e))),u=c.filter((e=>!ua(t,e))),p=h.filter((e=>!ua(t,e)));let g,m=0,f=s;if(i){let e=0;d.forEach((t=>e+=t.getActualWidth())),f-=e}if(f>0){for(let e=0;e<u.length;e++){if(f-=u[e].getActualWidth(),f<0)break;m++}i&&m++}if(m>0){const e=u[m-1];g=p.indexOf(e)+1}else g=p.indexOf(u[0]),-1===g&&(g=0);const v=[g],y=(e,t)=>e-t;if(i){let e=g+1;const t=h.length-1;for(;e<=t;)v.push(e),e++;v.sort(y)}else{let e=g;const t=h.length-1;let i=h[e];for(;e<=t&&c.indexOf(i)<0;)e++,v.push(e),i=h[e];e=g-1;const s=0;for(;e>=s;)v.push(e),e--;v.sort(y).reverse()}return v}({movingCols:u,draggingRight:i,xPosition:s,pinned:r,gos:a,columnModel:l,visibleColsService:h}),g=function(e,t){const i=t.getCols(),s=function(e){return e.sort(((e,t)=>e-t))}(e.map((e=>i.indexOf(e)))),n=s[0],o=ra(s)-n,r=o!==s.length-1;return r?null:n}(u,l);if(0===p.length)return;const m=p[0];let f=null!==g&&!n;if(t&&(f=null!==g),f&&!o){if(!i&&m>=g)return;if(i&&m<=g)return}const v=h.getAllCols(),y=[];let C=null;for(let w=0;w<p.length;w++){const e=p[w],t=c.getProposedColumnOrder(u,e);if(!c.doesOrderPassRules(t))continue;const i=t.filter((e=>v.includes(e)));if(null===C)C=i;else if(!aa(i,C))break;const s=Tu(t);y.push({move:e,fragCount:s})}if(0===y.length)return;y.sort(((e,t)=>e.fragCount-t.fragCount));const b=y[0].move;return b>l.getCols().length-d.length?void 0:{columns:d,toIndex:b}}function ku(e){const{columns:t,toIndex:i}=Au(e)||{},{finished:s,columnMoveService:n}=e;return t&&null!=i?(n.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i}):null}function Tu(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),o=t(e[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach((e=>{-1===o.indexOf(e)&&i++}))}return i}function Lu(e){const{pinned:t,fromKeyboard:i,gos:s,ctrlsService:n,useHeaderRow:o,skipScrollPadding:r}=e;let a=n.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),s.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),null!=t||r||(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function Pu(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var Fu=class extends Sa{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!ur(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){const e=this.lastDraggingEvent?.dragItem.columns??[];for(const t of e){const e=t.getPinned();if(t.getColDef().lockPinned){if(e==this.pinned)return"move"}else{if(e===this.pinned||!this.pinned)return"move";if(!e&&this.pinned)return"pinned"}}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(0===e.dragSource.type)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const i=e.dragItem.visibleState,s=(t||[]).filter((e=>i[e.getId()]));this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=this.gos.get("suppressMoveWhenColumnDragging");if(s&&!n)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!s&&pr(e.hDirection))return;const{pinned:o,gos:r,ctrlsService:a}=this,l=Lu({x:e.x,pinned:o,gos:r,ctrlsService:a});t||this.checkCenterForScrolling(l),n?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,s):this.handleColumnDragWhileAllowingMovement(e,t,i,l,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const s=e.filter((e=>!e.getColDef().lockVisible));this.columnModel.setColsVisible(s,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e,!0);if(n){const e=this.isAttemptingToPin(o);e&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:s,xPosition:n}=this.getNormalisedXPositionInfo(o,e)||{};if(null==s||null==n)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:n,fromEnter:t,fakeEvent:i,fromLeft:s})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e),r=1===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=ku({...this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:s,fromLeft:r,fromEnter:t,fakeEvent:i}),finished:n});l&&(this.lastMovedInfo=l)}getAllMovingColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.dragSource.getDragItem();let s=null;t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns;return s?s.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:o,fakeEvent:r}=e,{pinned:a,gos:l,columnModel:c,columnMoveService:h,visibleColsService:d}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:s,pinned:a,fromEnter:o,fakeEvent:r,gos:l,columnModel:c,columnMoveService:h,visibleColsService:d}}findFirstAndLastMovingColumns(e){const t=e.length;let i,s;for(let n=0;n<=t;n++){if(!i){const t=e[n];null!=t.getLeft()&&(i=t)}if(!s){const i=e[t-1-n];null!=i.getLeft()&&(s=i)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}highlightHoveredColumn(e,t){const{gos:i,columnModel:s}=this,n=i.get("enableRtl"),o=s.getCols().filter((e=>e.isVisible()&&e.getPinned()===this.pinned));let r,a=null,l=null,c=null;for(const h of o){if(l=h.getActualWidth(),a=this.getNormalisedColumnLeft(h,0,n),null!=a){if(a<=t&&a+l>=t){c=h;break}}a=null,l=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let e=o.length-1;e>=0;e--){const t=o[e],i=o[e].getParent();if(!i){c=t;break}const s=i?.getDisplayedLeafColumns();if(s.length){c=ra(s);break}}if(!c)return;a=this.getNormalisedColumnLeft(c,0,n),l=c.getActualWidth()}this.lastHighlightedColumn?.column!==c&&this.clearHighlighted(),null!=c&&null!=a&&null!=l&&(r=t-a<l/2!==n?0:1,c.setHighlighted(r),this.lastHighlightedColumn={column:c,position:r})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:s}=this,n=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!r||null==a)return;const l=s.getAllCols(),c=l.indexOf(o),h=l.indexOf(r),d=0===a!==n,u=c<h||c===h&&!d;let p=0;if(d?u&&(p-=1):u||(p+=1),h+p===c)return;const g=l[h+p];if(!g)return;return{fromLeft:u,xPosition:this.getNormalisedColumnLeft(g,20,n)}}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!n||!o||s.column||!t)return{firstMovingCol:n,...s};const r="left"===this.getPinDirection();return{firstMovingCol:n,position:r?1:0,column:r!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsService:n}=this,o=e.getLeft();if(null==o)return null;const r=e.getActualWidth();return Lu({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsService:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some((e=>e.getPinned()!==this.pinned))}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:n}),{columns:a,toIndex:l}=Au(r)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+50,this.needToMoveLeft=e>s-50):(this.needToMoveLeft=e<i+50,this.needToMoveRight=e>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=8)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(e||[]).filter((e=>!e.getColDef().lockPinned));return s.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(s,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),s.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},Nu=class extends Sa{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]]}})),this.moveColumnFeature=this.createManagedBean(new Fu(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new Iu(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(this)))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},Ou=class extends Sa{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(Xl(this.eResize,t),!t)return;const s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(s),i){const t=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",t)};this.eResize.addEventListener("dblclick",i);const s=new Qc(this.eResize);s.addEventListener("doubleTap",i),e.push((()=>{this.eResize.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}))}},n=()=>{e.forEach((e=>e())),e.length=0},o=()=>{const e=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||o!==i)&&(t=e,i=o,n(),s())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,o=this.normaliseResizeAmount(t),r=[{key:i,newWidth:n+o}];if(this.column.getPinned()){if(this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(o-s)>sc(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(r,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,s="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},Bu=class extends Sa{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Br(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new hh),this.cbSelectAll.addCssClass("ag-header-select-all"),Ol(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${t})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return!!ia(this.gos)||(ir(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return!(!xr(this.gos)&&!Mr(this.gos))||(ir(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t="object"===typeof e&&Zr(e)&&La(this.column),i=this.column.getColDef().headerCheckboxSelection;let s=!1;return s=!!t||("function"===typeof i?i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):!!i),s&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return"object"===typeof e?"multiRow"===e.mode&&"filtered"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return"object"===typeof e?"multiRow"===e.mode&&"currentPage"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},Gu=class extends ou{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=kl(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new Ou(this.getPinned(),this.column,i,e,this)),n.createManagedBean(new ru([this.column],t)),n.createManagedBean(new Jd(this.column,t,this.beans)),n.createManagedBean(new md(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],(()=>this.refresh(n))),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const o=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc((()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()}))}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),n=this.column.getMaxWidth(),o=Math.min(Math.max(i+e,s),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:l}=i,c=this.getPinned(),h=t.getBoundingClientRect().left,d=s.getActualWidth(),u=Lu({x:0===e!==o.get("enableRtl")?h-20:h+d+20,pinned:c,fromKeyboard:!0,gos:o,ctrlsService:n}),p=this.focusService.getFocusedHeader();ku({allMovingColumns:[s],isFromHeader:!0,fromLeft:1===e,xPosition:u,pinned:c,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:l,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.isAlive()&&!this.beans.gos.get("ensureDomOrder")||!p||this.restoreFocus(p)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,t)=>{this.beans.sortController.setSortForColumn(this.column,e,!!t,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,i)=>{this.setupTooltip(e,t,i)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new Bu(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===rh.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===rh.ENTER&&this.onEnterKeyDown(e),e.key===rh.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();i&&i instanceof ih&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s="whenTruncated"===this.gos.get("tooltipShowMode"),n=this.eGui,o=this.column.getColDef();i||!s||o.headerComponent||(i=()=>{const e=n.querySelector(".ag-header-cell-text");return!e||e.scrollWidth>e.clientWidth});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>{if(null!=t)return t;return this.column.getColDef().headerTooltip},shouldDisplayTooltip:i},a=e.createManagedBean(new Hc(r));this.setRefreshFunction("tooltip",(()=>a.refreshToolTip()))}setupClassesFromColDef(){const e=()=>{const e=eu(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach((e=>{t.has(e)?t.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),t.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gos:o}=this,{columnModel:r}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),Pu([t],!0)},onDragStopped:()=>Pu([t],!1),onDragCancelled:()=>Pu([t],!1),onGridEnter:e=>{if(a){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];r.setColsVisible(t,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];r.setColsVisible(t,!1,"uiColumnMoved")}}};n.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach((e=>e()))}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==t.componentClass)&&this.attemptHeaderCompRefresh(t.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this,n=this.beans.columnModel.getGroupRowsHeight(),o=0===n.reduce(((e,t)=>e+t),0);if(i.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:l}=s,c=l.getColumnHeaderRowHeight();if(0===r)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${c}px`);i.addOrRemoveCssClass("ag-header-span-total",a);let h=0;for(let d=0;d<r;d++)h+=n[n.length-1-d];e.style.setProperty("top",-h+"px"),e.style.setProperty("height",`${c+h}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Br(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof ih?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},zu=class extends Sa{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach((e=>{e.getColDef().suppressAutoSize||t.push(e.getColId())})),t.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")}))}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:this.getSizeRatiosOfColumns(t,i)};let n=null;if(e&&(n=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),n){const e=n.getDisplayedLeafColumns(),t=s.groupAfterColumns=e.filter((e=>e.isResizable())),i=s.groupAfterStartWidth=this.getInitialSizeOfColumns(t);s.groupAfterRatios=this.getSizeRatiosOfColumns(t,i)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,h=[];if(h.push({columns:n,ratios:r,width:t}),a){const e=t-o;h.push({columns:a,ratios:c,width:l-e})}this.columnSizeService.resizeColumnSets({resizeSets:h,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}getInitialSizeOfColumns(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}getSizeRatiosOfColumns(e,t){return e.map((e=>e.getActualWidth()/t))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},ju=class extends Sa{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}},Vu=class extends ou{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const e=this.getGui();this.setDragSource(e)}},this.column=e}setComp(e,t,i,s,n){this.comp=e,n=kl(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:s,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const o=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new ru(r,t)),n.createManagedBean(new Jd(this.column,t,this.beans)),n.createManagedBean(new ju(e,this.column)),this.resizeFeature=n.createManagedBean(new zu(e,i,o,this.column)),n.createManagedBean(new md(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,r),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc((()=>this.clearComponent()))}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=ra(t)===e;if(!i&&!s)return;const n=e.getHighlighted();let o=!1,r=!1;if(!!this.getParentRowCtrl().findHeaderCellCtrl((e=>e.getColumnGroupChild().isMoving()))){const e=this.beans.gos.get("enableRtl"),t=1===n,a=0===n;i&&(e?r=t:o=a),s&&(e?o=a:r=t)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",r)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:l}=t,c=o.get("enableRtl"),h=0===e,d=this.getPinned(),u=i.getBoundingClientRect(),p=u.left,g=u.width,m=Lu({x:h!==c?p-20:p+g+20,pinned:d,fromKeyboard:!0,gos:o,ctrlsService:n}),f=s.getGroupId(),v=this.focusService.getFocusedHeader();ku({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:1===e,xPosition:m,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:l,finished:!0});const y=s.getDisplayedLeafColumns(),C=h?y[0]:ra(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),this.isAlive()&&!this.beans.gos.get("ensureDomOrder")||!v||this.restoreFocus(f,s,v)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const o=this.findGroupWidthId(n,e);o&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:o}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:e=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),e,"gridInitializing")},setTooltip:(t,i)=>{this.setupTooltip(e,t,i)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),n="whenTruncated"===this.gos.get("tooltipShowMode"),o=this.eGui;i||!n||s?.headerGroupComponent||(i=()=>{const e=o.querySelector(".ag-header-group-text");return!e||e.scrollWidth>e.clientWidth});const r={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(s&&s.headerTooltip),shouldDisplayTooltip:i};s&&(r.getColDef=()=>s),e.createManagedBean(new Hc(r))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=eu(e,this.gos,null,this.column);if(this.column.isPadding()){t.push("ag-header-group-cell-no-group");this.column.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&t.push("ag-header-span-height")}else t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text");t.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(e){const t=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach((t=>{e.addManagedListeners(t,{movingChanged:i})})),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===rh.ENTER){const e=this.column,t=!e.isExpanded();this.beans.columnModel.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving())return;if(this.removeDragSource(),!e)return;const{beans:t,column:i,displayName:s,gos:n,dragAndDropService:o}=this,{columnModel:r}=t,a=i.getProvidedColumnGroup().getLeafColumns();let l=!n.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),Pu(a,!0)},onDragStopped:()=>Pu(a,!1),onDragCancelled:()=>Pu(a,!1),onGridEnter:e=>{if(l){const{columns:t=[],visibleState:i}=e??{},s=t.filter((e=>!e.getColDef().lockVisible&&(!i||i[e.getColId()])));r.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(l){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];r.setColsVisible(t,!1,"uiColumnMoved")}}};o.addDragSource(c,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach((e=>i[e.getId()]=e.isVisible()));const s=[];this.beans.visibleColsService.getAllCols().forEach((e=>{t.indexOf(e)>=0&&(s.push(e),ca(t,e))})),t.forEach((e=>s.push(e)));const n=[],o=e.getLeafColumns();for(const r of s)-1!==o.indexOf(r)&&n.push(r);return{columns:s,columnsInSplit:n,visibleState:i}}isSuppressMoving(){let e=!1;this.column.getLeafColumns().forEach((t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(e=!0)}));return e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Hu=0,Wu=class extends Sa{constructor(e,t,i){super(),this.instanceId=Hu++,this.rowIndex=e,this.pinned=t,this.type=i;const s="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Dr(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every((e=>null!=e.getGui()))}setComp(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.comp=e,t=kl(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return wr(this.headerCellCtrls).find((t=>t.getColumnGroupChild()===e))}onDisplayedColumnsChanged(){this.isPrintLayout=Dr(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],s=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();i.push(...s),i.push(n),t?.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let o=0;for(let r=0;r<this.rowIndex;r++)o+=i[r];return{topOffset:o,rowHeight:i[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=e=>{const{focusService:t,visibleColsService:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.getColumnGroupChild())};if(e)for(const[s,n]of e){i(n)?this.headerCellCtrls.set(s,n):this.destroyBean(n)}return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let s;t&&(s=t.get(i),t.delete(i));if(s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),null==s)switch(this.type){case"filter":s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break;case"group":s=this.createBean(new Vu(e,this.beans,this));break;default:s=this.createBean(new Gu(e,this.beans,this))}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach((s=>{const n=i.getHeadersToRender(s,t);e=e.concat(n)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return i="function"===typeof e?t.find(e):t.find((t=>t.getColumnGroupChild()==e)),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);if(!i)return!1;return i.focus(t)}destroy(){this.headerCellCtrls?.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}},_u=class extends Sa{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const s=`${"string"===typeof this.pinned?this.pinned:"center"}Header`;this.ctrlsService.register(s,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new kc,i=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const e=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let i=0;i<e;i++){const e=this.createBean(new Wu(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const i=t.next(),s=!this.hidden&&(null==this.columnsRowCtrl||!e||this.columnsRowCtrl.getRowIndex()!==i);(s||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),s&&(this.columnsRowCtrl=this.createBean(new Wu(i,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;const i=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void i();const s=t.next();if(this.filtersRowCtrl){const t=this.filtersRowCtrl.getRowIndex()!==s;e&&!t||i()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Wu(s,this.pinned,"filter")))})();const s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if($a(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const t=this.getAllCtrls()[e];return t?t.getType():void 0}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return!!s&&s.focusHeader(t,i)}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new Nu(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new Eu((e=>this.comp.setCenterWidth(`${e}px`)),!0))}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,t="right"===this.pinned;this.hidden=!0;const i=()=>{const i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==i)return;const s=0==i,n=this.hidden!==s,o=this.gos.get("enableRtl"),r=this.scrollVisibleService.getScrollbarWidth(),a=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?i+r:i;this.comp.setPinnedContainerWidth(`${a}px`),this.comp.setDisplayed(!s),n&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},Uu=class extends Sa{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return-1===["normal","print","autoHeight"].indexOf(e)?(ir(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},$u=class extends Uc{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=_c,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==rh.TAB||e.defaultPrevented||ya(e))return;if(this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let t=!1;t=e.shiftKey?this.focusService.focusGridView(ra(this.visibleColsService.getAllCols()),!0,!1):this.focusService.focusNextGridCoreContainer(!1),t&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Uu(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const e=Br(this.gos);e&&!Gr(this.gos)&&(this.elToFocusAfter=e)}e.then((t=>{if(this.activePromise!==e)return void(this.activeOverlay!==t&&(this.destroyBean(t),t=null));if(this.activePromise=null,!t)return;if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,s)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,(t=>{let{currentValue:i}=t;e.refresh?.(this.gos.addGridCommonParams({...i??{}}))}))}const n=this.focusService;i&&n.isGridFocused()&&n.focusInto(this.eOverlayWrapper)}))}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),cc(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},Ku=class extends Uc{constructor(e,t){super(),this.direction=t,this.eViewport=_c,this.eContainer=_c,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Fc()||Nc())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=zc(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null}),400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3?arguments[3]:void 0;const n=(new Date).getTime();let o=null,r=!1;const a=()=>{const a=(new Date).getTime()-n>i;(e()||a)&&(t(),r=!0,null!=o&&(window.clearInterval(o),o=null),a&&s&&ir(s))};a(),r||(o=window.setInterval(a,10))}((()=>uc(t)),(()=>this.setScrollPosition(e)),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Yu=class extends Ku{constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=_c,this.eRightSpacer=_c}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Eu((e=>this.eContainer.style.width=`${e}px`))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleService.getScrollbarWidth();i&&(t+=s),mc(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=s),mc(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleService.getScrollbarWidth()||0,n=i?0:0===s&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),fc(this.getGui(),n),fc(this.eViewport,n),fc(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return ac(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){uc(this.getViewportElement())||this.attemptSettingScrollPosition(e),lc(this.getViewportElement(),e,this.enableRtl)}},Zu=class extends Sa{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=null!=e?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},qu=class extends Ku{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Zu(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=0===i&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),mc(this.getGui(),s),mc(this.eViewport,s),mc(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,t=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=t.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){t||uc(this.getViewportElement())||this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},Qu=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(Qu||{}),Xu=class extends Sa{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=cr((()=>this.lastScrollSource[1]=null),500),this.resetLastVScrollDebounced=cr((()=>this.lastScrollSource[0]=null),500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(Qu)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?cr(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),s=t?cr(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(Qu),"Viewport"]){if(this.lastScrollSource[1]===t)continue;lc(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return"Viewport"===e?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=ac(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;t="Viewport"===e?this.eBodyViewport.scrollTop:this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0)||(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,"Viewport"===e?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})}),100)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!Nc())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=ic(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl?e>0?0:i:Math.min(Math.max(e,0),i)),lc(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight;return{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const t=this.rowModel.getRow(n);if("function"===typeof e){if(t&&e(t)){s=n;break}}else if(e===t||e===t.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(Dr(this.gos,"print"))return;const i=this.rowModel.getRowCount();if("number"!==typeof e||e<0||e>=i)return void ir("Invalid row index for ensureIndexVisible: "+e);const s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming((()=>{s||this.paginationService?.goToPageWithIndex(e);const i=this.ctrlsService.getGridBodyCtrl(),n=i.getStickyTopHeight(),o=i.getStickyBottomHeight(),r=this.rowModel.getRow(e);let a;do{const e=r.rowTop,i=r.rowHeight,s=this.pageBoundsService.getPixelOffset(),l=r.rowTop-s,c=l+r.rowHeight,h=this.getVScrollPosition(),d=this.heightScaler.getDivStretchOffset(),u=h.top+d,p=h.bottom+d,g=p-u,m=this.heightScaler.getScrollPositionForPixel(l),f=this.heightScaler.getScrollPositionForPixel(c-g),v=Math.min((m+f)/2,l);let y=null;"top"===t?y=m:"bottom"===t?y=f:"middle"===t?y=v:u+n>l?y=m-n:p-o<c&&(y=f+o),null!==y&&(this.setVerticalScrollPosition(y),this.rowRenderer.redraw({afterScroll:!0})),a=e!==r.rowTop||i!==r.rowHeight}while(a);this.animationFrameService.flushAllFrames()}))}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const i=this.columnModel.getCol(e);if(!i)return;if(i.isPinned())return;if(!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming((()=>{null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}))}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming((()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:s)||n,l=r?s:i;"auto"!==t&&(a="start"===t,l="end"===t);const c="middle"===t;if(a||l||c){const{colLeft:t,colMiddle:i,colRight:s}=this.getColumnBounds(e);return c?i-o/2:a?r?s:t:r?t-o:s-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),o=this.enableRtl;return{columnBeforeStart:o?t>n:i<n,columnAfterEnd:o?i<s:t>s}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,r=t?i-n:n;return{colLeft:r,colMiddle:r+s/2*o,colRight:r+s*o}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},Ju=class extends Sa{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame((()=>{this.onCenterViewportResized()}))};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=sc(this.gridBodyCtrl.getBodyViewportElement());if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const i=this.gos.getCallback("processUnpinnedColumns");if(t.length){if(i){t=i({columns:t,viewportWidth:e})}this.columnModel.setColsPinned(t,null,"viewportSizeFeature")}}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(t<e)return[];const i=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()];let n=0,o=0;const r=[];let a=t-0-e;for(;(o<i.length||n<s.length)&&a>0;){if(n<s.length){const e=s[n++];a-=e.getActualWidth(),r.push(e)}if(o<i.length&&a>0){const e=i[o++];a-=e.getActualWidth(),r.push(e)}}return r}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=ic(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==e&&(this.bodyHeight=e,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},ep=class extends Sa{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{qr(this.gos)?this.enableFeature():this.disableFeature()})),this.addDestroyFunc((()=>this.disableFeature()));qr(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},tp=class extends Uc{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[dh]),this.eCheckbox=_c}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=Zl(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:e=>va(e),click:e=>{va(e);const t="filteredDescendants"===sa(this.gos),i=this.eCheckbox.getValue();if(this.shouldHandleIndeterminateState(i,t)){0===this.onClicked(!0,t,e||{})&&this.onClicked(!1,t,e)}else i?this.onClicked(!1,t,e):this.onClicked(!0,t,e||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)});if(ea(this.gos)||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&xr(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if("function"===typeof t){const i=this.overrides?.callbackParams;if(this.column){const s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...i,...s})}else e=t({...i,node:this.rowNode,data:this.rowNode.data})}else e=t??!1;const i=this.gos.get("rowSelection");var s;if(i&&"string"!==typeof i?(s=i,!s?.hideDisabledCheckboxes):this.column?.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!e),this.setVisible(!0),void this.setDisplayed(!0);this.overrides?.removeHidden?this.setDisplayed(e):this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&"string"!==typeof e?Yr(e):this.column?.getColDef()?.checkboxSelection}},ip=class extends Uc{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Yc("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const t=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",t),e.dataTransfer.setData("text/plain",t)}catch(mK){}};if(t){t(this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e}))}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},sp=class extends Sa{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,(e=>this.cellComp.addOrRemoveCssClass(e,!0)),(e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if("function"===typeof e.cellStyle){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});t=(0,e.cellStyle)(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!0)))}destroy(){super.destroy()}},np=class extends Sa{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case rh.ENTER:this.onEnterKeyDown(e);break;case rh.F2:this.onF2KeyDown(e);break;case rh.ESCAPE:this.onEscapeKeyDown(e);break;case rh.TAB:this.onTabKeyDown(e);break;case rh.BACKSPACE:case rh.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case rh.DOWN:case rh.UP:case rh.RIGHT:case rh.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:o,rangeService:r,eventService:a}=s;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===rh.DELETE||!t&&e===rh.BACKSPACE&&Fc()}(e,o.get("enableCellEditingOnBackspace"))){if(r&&qr(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const e=i.getColumn(),t=this.beans.valueService.getDeleteValue(e,n);n.setDataValue(e,t,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?rh.UP:rh.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(rh.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(rh.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const t=e.key;" "===t?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(t,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&Rr(t)){const i=this.rowNode.isSelected(),s=!i,n="filteredDescendants"===sa(t),o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});void 0===i&&0===o&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},op=class extends Sa{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!ya(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:t,rangeService:i,gos:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);const r=this.column.getColDef();r.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{r.onCellClicked(o)}))}),0);!((s.get("singleClickEdit")||r.singleClickEdit)&&!s.get("suppressClickEdit"))||e.shiftKey&&0!=i?.getCellRanges().length||this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Nc()||Ca("dblclick"))return!1;const e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:n,frameworkOverrides:o,gos:r}=i,a=t.getColDef(),l=s.createEvent(e,"cellDoubleClicked");n.dispatchEvent(l),"function"===typeof a.onCellDoubleClicked&&window.setTimeout((()=>{o.wrapOutgoing((()=>{a.onCellDoubleClicked(l)}))}),0);!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:o,beans:r}=this,{eventService:a,rangeService:l,focusService:c,gos:h}=r;if(this.isRightClickInExistingRange(e))return;const d=l&&0!=l.getCellRanges().length;if(!s||!d){const t=h.get("enableCellTextSelection")&&e.defaultPrevented,i=(Tc()||t)&&!o.isEditing()&&!Ql(n);o.focusCell(i)}if(s&&d&&!c.isCellFocused(o.getCellPosition())){e.preventDefault();const t=c.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:s}=t,n=r.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s}),o=n?.getCellCtrl(e);o?.isEditing()&&o.stopEditing(),c.setFocusedCell({column:e,rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(l){const e=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(e);else{const s=t||i;l.setRangeToCell(e,s)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return ec(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},rp=class extends Sa{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();aa(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),i&&!pr(i))&&s===i.getPinned();n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?ra(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const t=this.beans.visibleColsService.getColsLeftWidth();if("right"===this.column.getPinned()){return t+this.beans.visibleColsService.getBodyContainerWidth()+(e||0)}return t+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=kr(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},ap="ag-cell-range-selected",lp=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(ap,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(`${ap}-1`,1===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${ap}-2`,2===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${ap}-3`,3===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${ap}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),Yl(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",i),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",s),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",n),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",o)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every((e=>ua([1,0],e.type)))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const o=this.cellCtrl.getCellPosition().column,r=this.beans.visibleColsService;let a,l;e?(a=r.getColAfter(o),l=r.getColBefore(o)):(a=r.getColBefore(o),l=r.getColAfter(o));const c=this.rangeService.getCellRanges().filter((e=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),e)));a||(n=!0),l||(i=!0);for(let h=0;h<c.length&&!(t&&i&&s&&n);h++){const e=c[h],o=this.rangeService.getRangeStartRow(e),r=this.rangeService.getRangeEndRow(e);!t&&this.beans.rowPositionUtils.sameRow(o,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(r,this.cellCtrl.getCellPosition())&&(s=!0),!n&&a&&e.columns.indexOf(a)<0&&(n=!0),!i&&l&&e.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=ra(t),n=this.cellCtrl.getCellPosition(),o=Qr(e)&&!this.cellCtrl.isSuppressFillHandle(),r=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!==typeof t&&"range"===t.handle?.mode:e.get("enableRangeHandle")}(e);let a=1===i&&!this.cellCtrl.isEditing()&&(o||r);if(this.hasChartRange){const e=1===t[0].type&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",e),a=0===s.type}return a&&null!=s.endRow&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,n)}addSelectionHandle(){const e=ra(this.rangeService.getCellRanges()).type,t=Qr(this.beans.gos)&&pr(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(t)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},cp=0,hp=class e extends Sa{constructor(e,t,i,s){super(),this.column=e,this.rowNode=t,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=e.getId()+"-"+cp++,this.colIdSanitised=dl(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new rp(this,this.beans),this.cellCustomStyleFeature=new sp(this,this.beans),this.cellMouseListenerFeature=new op(this,this.beans,this.column),this.cellKeyboardListenerFeature=new np(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();this.beans.rangeService&&qr(this.beans.gos)&&(this.cellRangeFeature=new lp(this.beans,this))}removeFeatures(){const e=this.beans.context;this.cellPositionFeature=e.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=e.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=e.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=e.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=e.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){const i="whenTruncated"===this.beans.gos.get("tooltipShowMode");t||!i||this.isCellRenderer()||(t=()=>{const e=this.getGui(),t=0===e.children.length?e:e.querySelector(".ag-cell-value");return!t||t.scrollWidth>t.clientWidth});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:null!=e?()=>e:()=>{const e=this.column.getColDef(),t=this.rowNode.data;if(e.tooltipField&&ur(t))return Va(t,e.tooltipField,this.column.isTooltipFieldContainsDots());const i=e.tooltipValueGetter;return i?i(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new Hc(s,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,i,s,n,o){this.cellComp=e,this.eGui=t,this.printLayout=s,o??(o=this),this.addDomData(o),this.addFeatures(),o.addDestroyFunc((()=>this.removeFeatures())),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(t),this.cellCustomStyleFeature?.setComp(e),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((e=>e())),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e,t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const i=e.parentElement,s=Ar(this.beans.gos,this.rowNode).height,n=o=>{if(this.editing)return;if(!this.isAlive()||!t.isAlive())return;const{paddingTop:r,paddingBottom:a,borderBottomWidth:l,borderTopWidth:c}=tc(i),h=r+a+l+c,d=e.offsetHeight+h;if(o<5){const t=Fr(this.beans.gos);if(!t||!t.contains(e)||0==d)return void window.setTimeout((()=>n(o+1)),0)}const u=Math.max(d,s);this.rowNode.setRowAutoHeight(u,this.column)},o=()=>n(0);o();const r=this.beans.resizeObserverService.observeResize(e,o);t.addDestroyFunc((()=>{r(),this.rowNode.setRowAutoHeight(void 0,this.column)}))}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}showValue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{beans:t,column:i,rowNode:s,cellRangeFeature:n,cellComp:o}=this,{userComponentFactory:r,animationFrameService:a}=t,l=this.getValueToDisplay();let c;if(s.stub&&null==s.groupData?.[this.column.getId()]){const e=this.createCellRendererParams();c=r.getLoadingCellRendererDetails(i.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();c=r.getCellRendererDetails(i.getColDef(),e)}o.setRenderDetails(c,l,e),a.requestAnimationFrame((()=>n?.refreshHandle()))}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned)&&("function"===typeof e||!0===e)}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||La(this.column)&&t&&"string"!==typeof t&&Yr(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||i||s||n}startEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{editService:s}=this.beans;return!(this.isCellEditable()&&!this.editing&&s)||(this.cellComp?s.startEditing(this,e,t,i):(this.onCellCompAttachedFuncs.push((()=>{this.startEditing(e,t,i)})),!0))}setEditing(e,t){this.editCompDetails=t,this.editing!==e&&(this.editing=e)}stopRowOrCellEdit(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onCellEditorAttachedFuncs=[];const{editService:t}=this.beans;return!(!this.editing||!t)&&t.stopEditing(this,e)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:e=>this.beans.valueService.setValue(this.rowNode,this.column,e),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(e,t,i,s)=>this.registerRowDragger(e,t,s),setTooltip:(e,t)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),i=null!=e&&!!e.newData,s=null!=e&&!!e.suppressFlash||!!t.suppressCellFlash,n=null==t.field&&null==t.valueGetter&&null==t.showRowGroup,o=e&&e.forceRefresh||n||i,r=!!this.cellComp,a=this.updateAndFormatValue(r);if(r){if(o||a){this.showValue(i);const e=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!e&&(this.beans.gos.get("enableCellChangeFlash")||t.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.beans.editService?.stopEditingAndFocus(this,e,t)}flashCell(e){const t=e?.flashDuration??e?.flashDelay,i=e?.fadeDuration??e?.fadeDelay;this.animateCell("data-changed",t,i)}animateCell(e,t,i){if(!this.cellComp)return;const{gos:s}=this.beans;if(t||(t=s.get("cellFlashDuration")),0===t)return;ur(i)||(i=s.get("cellFadeDuration"));const n=`ag-cell-${e}`,o=`ag-cell-${e}-animation`;this.cellComp.addOrRemoveCssClass(n,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")}),i))}),t)}))}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();Pr(this.beans.gos,i,e.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc((()=>Pr(this.beans.gos,i,e.DOM_DATA_KEY_CELL_CTRL,null)))}createEvent(e,t){return this.beans.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){this.cellKeyboardListenerFeature?.processCharacter(e)}onKeyDown(e){this.cellKeyboardListenerFeature?.onKeyDown(e)}onMouseEvent(e,t){this.cellMouseListenerFeature?.onMouseEvent(e,t)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:i}=this;tu(e,t,i.visibleColsService)}refreshAriaColIndex(){const e=this.beans.visibleColsService.getAriaColIndex(this.column);Ul(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cellComp?"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t):(this.onCellCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t)})),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(e){this.eGui&&Cc(this.eGui,"tabindex",e?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}onCellFocused(e){if(this.beans.focusService.isCellFocusSuppressed())return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(t&&e?.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",t),t&&e&&e.forceBrowserFocus){let t=this.cellComp.getFocusableElement();if(this.editing){const e=this.beans.focusService.findFocusableElements(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const i="fullRow"===this.beans.gos.get("editType");t||i||!this.editing||this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:dr(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)}onColumnHover(){if(!this.cellComp)return;if(!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu");this.beans.eventService.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new tp;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new ip(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const s=this.createRowDragComp(e,t,i);s&&(this.customRowDragComp=s,this.addDestroyFunc((()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null})))}createRowDragComp(e,t,i){const s=this.beans.gos.get("pagination"),n=this.beans.gos.get("rowDragManaged"),o=xr(this.beans.gos);if(n){if(!o)return void ir("managed row dragging is only allowed in the Client Side Row Model");if(s)return void ir("managed row dragging is not possible when doing pagination")}const r=new id((()=>this.value),this.rowNode,this.column,e,t,i);return this.beans.context.createBean(r),r}setSuppressRefreshCell(e){this.suppressRefreshCell=e}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(e){this.onCellEditorAttachedFuncs.push(e)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach((e=>e())),this.onCellEditorAttachedFuncs=[]}};hp.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var dp=hp,up=0,pp=class e extends Sa{constructor(e,t,i,s,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gos=t.gos,this.rowNode=e,this.paginationPage=t.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=n,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+up++,this.rowId=dl(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=dl(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,s){const n={rowComp:e,element:t,containerType:i,compBean:s=kl(this,this.beans.context,s)};this.allRowGuis.push(n),this.updateGui(i,n),this.initialiseRowComp(n),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),Rr(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach((e=>s.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Vl(t.element,1==this.rowNode.expanded),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),Pr(i,t.element,e.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc((()=>Pr(i,t.element,e.DOM_DATA_KEY_ROW_CTRL,null))),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKeySanitised&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=dl(this.rowNode.id),null!=this.rowId&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(lr((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(lr((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(qr(this.gos))return void ir("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");const t=this.beans.localeService.getLocaleTextFunc(),i=new id((()=>`1 ${t("rowDragRow","row")}`),this.rowNode,void 0,e.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s),e.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((e=>e!==s)),this.destroyBean(s,this.beans.context)}))}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if("FullWidthDetail"==this.rowType&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>e?.rowComp?.getFullWidthCellRenderer())):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const e=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),t=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return e&&t&&i}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),n=!!this.rowNode.group&&!this.rowNode.footer&&$r(this.gos,s);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":n?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s={list:[],map:{}},n=(e,t,i)=>{null!=i?s.list.splice(i,0,t):s.list.push(t),s.map[e]=t},o=[];for(const r of t){const t=r.getInstanceId();let i=e.map[t];i||(i=new dp(r,this.rowNode,this.beans,this)),n(t,i)}for(const r of e.list){const e=r.getColumn().getInstanceId();if(null!=s.map[e])continue;!this.isCellEligibleToBeRemoved(r,i)?o.push([e,r]):r.destroy()}if(o.length)for(const[r,a]of o){const e=s.list.findIndex((e=>e.getColumn().getLeft()>a.getColumn().getLeft())),t=-1===e?void 0:Math.max(e-1,0);n(r,a,t)}return s}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.columnViewportService,t=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0;if(e.getColumn().getPinned()!=t)return i;const s=e.isEditing(),n=this.beans.focusService.isCellFocused(e.getCellPosition());if(s||n){const t=e.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(t)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||Dr(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],(()=>{e.rowComp.setDomOrder(this.getDomOrder())}))}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=ur(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(t){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),s=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&i&&s&&n}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))})),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))},cellChanged:e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const i=0===e,s=1===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=1==this.rowNode.expanded;this.allRowGuis.forEach((i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),Vl(i.element,e&&t)}))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:dr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(e){return this.allRowGuis.find((t=>t.element.contains(e)))}onKeyboardNavigate(e){const t=this.findFullWidthRowGui(e.target);if(!((t?t.element:null)===e.target))return;const i=this.rowNode,s=this.beans.focusService.getFocusedCell(),n={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:s?.column??this.getColumnForFullWidth(t)};this.beans.navigationService.navigateToNextCell(e,e.key,n,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||ya(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,s=i===e.target,n=Br(this.gos);let o=!1;i&&n&&(o=i.contains(n)&&n.classList.contains("ag-cell"));let r=null;s||o||(r=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&s||!r)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find((e=>uc(e.element)))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach((e=>{Cc(e.element,"tabindex",t)}))}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned),s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.getColumn().getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){ya(e)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}getColumnForFullWidth(e){const{visibleColsService:t}=this.beans;switch(e?.containerType){case"center":return t.getCenterCols()[0];case"left":return t.getLeftCols()[0];case"right":return t.getRightCols()[0];default:return t.getAllCols()[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=ec(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const i=this.findFullWidthRowGui(e.target),s=i?.element,n=e.target;let o=!0;s&&s.contains(n)&&Ql(n)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:this.getColumnForFullWidth(i),rowPinned:t.rowPinned,forceBrowserFocus:o})}onRowClick(e){if(ya(e)||this.lastMouseDownOnDragger)return;const{gos:t}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",e));const i=e.ctrlKey||e.metaKey,s=e.shiftKey,n=this.rowNode.isSelected(),o=na(t),r=Jr(t),a=function(e){const t=Xr(e);return!0===t||"enableSelection"===t}(t);if(o&&this.rowNode.group||this.isRowSelectionBlocked()||!a&&!n||!r&&n)return;const l=function(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}(t),c="rowClicked";if(n)l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):i?r&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):a&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:c});else{const t=!l&&!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:t,rangeSelect:s,event:e,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!Rr(this.gos)}setupDetailRowAutoHeight(e){if("FullWidthDetail"!==this.rowType)return;if(!this.gos.get("detailRowAutoHeight"))return;const t=()=>{const t=e.clientHeight;if(null!=t&&t>0){const e=()=>{this.rowNode.setRowHeight(t),(xr(this.gos)||Mr(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(e,0)}},i=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(i),t()}createFullWidthCompDetails(e,t){const{gos:i,rowNode:s}=this,n=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,s)=>this.addFullWidthRowDragging(e,t,i,s),setTooltip:(e,t)=>this.refreshRowTooltip(e,t)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(n);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(n);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(n);default:return o.getFullWidthCellRendererDetails(n)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Hc(i,this.beans))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0;if(!this.isFullWidth())return;const n=new id((()=>i),this.rowNode,void 0,e,t,s);this.createBean(n,this.beans.context),this.addDestroyFunc((()=>{this.destroyBean(n,this.beans.context)}))}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,e)}setInlineEditingCss(){const e=this.editingRow||this.getAllCellCtrls().some((e=>e.isEditing()));this.allRowGuis.forEach((t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)}))}setEditingRow(e){this.editingRow=e}startRowEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!!this.editingRow||(this.beans.rowEditService?.startEditing(this,e,t,i)??!0)}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&"function"===typeof e)return void ir("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const t=this.gos.getCallback("getRowStyle");let i;if(t){i=t({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})}return i||e?Object.assign({},e,i):this.emptyStyle}onRowSelected(e){const t=!!this.rowNode.isSelected();this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",t),Yl(e.element,t);!e.element.contains(Br(this.gos))||e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}))}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&!Jr(this.gos))return;const t=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(t,"rowSelection")}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:s,beans:n,gos:o}=this;i.addManagedListeners(t,{mouseenter:()=>s.onMouseEnter(),mouseleave:()=>s.onMouseLeave()}),i.addManagedListeners(s,{mouseEnter:()=>{n.dragService.isDragging()||o.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),s.setHovered(!1)}})}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,s=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=Ir(this.gos)?Ar(this.gos,this.rowNode).height:void 0,n=s?Math.min(i,s)-2+"px":void 0;this.forEachGui(e,(e=>{e.element.style.height=`${t}px`,n&&e.element.style.setProperty("--ag-line-height",n)}))}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.active=!1,!e&&zr(this.gos)&&!this.isSticky()){if(null!=this.rowNode.rowTop){const e=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)))}this.rowNode.setHovered(!1);const t=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBoundsService.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&ur(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(this.isSticky())i=t.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,n=this.applyPaginationOffset(s);i=t.isRowPinned()?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach((i=>{i.getColumn()==e&&(t=i)})),null!=t||this.getAllCellCtrls().forEach((i=>{i.getColSpanningList().indexOf(e)>=0&&(t=i)})),t}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(null===t)return;const i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,n=i+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(t),e.rowComp.addOrRemoveCssClass("ag-row-even",s),e.rowComp.addOrRemoveCssClass("ag-row-odd",!s),Wl(e.element,n)}))}setStoppingRowEdit(e){this.stoppingRowEdit=e}};pp.DOM_DATA_KEY_ROW_CTRL="renderedRow";var gp=pp,mp=class extends Sa{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Ca("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||ya(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);"contextmenu"===e?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Nc())return;const e=new Qc(this.element);this.addManagedListeners(e,{longTap:e=>{const t=this.getRowForEvent(e.touchEvent),i=this.mouseEventService.getRenderedCellForEvent(e.touchEvent);this.handleContextMenuMouseEvent(void 0,e.touchEvent,t,i)}}),this.addDestroyFunc((()=>e.destroy()))}getRowForEvent(e){let t=e.target;for(;t;){const e=Lr(this.gos,t,gp.DOM_DATA_KEY_ROW_CTRL);if(e)return e;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,o=s?s.getColumn():null;let r=null;if(o){const i=e||t;s.dispatchCellContextMenuEvent(i??null),r=this.valueService.getValue(o,n)}const a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:o,value:r,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:ba(this.gos,e,dp.DOM_DATA_KEY_CELL_CTRL),rowCtrl:ba(this.gos,e,gp.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),o=e.isEditing();if(!Ad(this.gos,i,s,n,o)&&"keydown"===t){!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),Id(i)&&e.processCharacter(i)}"keydown"===t&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!Ad(this.gos,i,s,o,!1)){const s=i.key;if("keydown"===t)switch(s){case rh.PAGE_HOME:case rh.PAGE_END:case rh.PAGE_UP:case rh.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case rh.UP:case rh.DOWN:e.onKeyboardNavigate(i);break;case rh.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!this.mouseEventService.isEventFromThisGrid(e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=rh.A;break;case 67:i=rh.C;break;case 86:i=rh.V;break;case 68:i=rh.D;break;case 90:i=rh.Z;break;case 89:i=rh.Y;break;default:i=e.code}return i}(e);return i===rh.A?this.onCtrlAndA(e):i===rh.C?this.onCtrlAndC(e):i===rh.D?this.onCtrlAndD(e):i===rh.V?this.onCtrlAndV(e):i===rh.X?this.onCtrlAndX(e):i===rh.Y?this.onCtrlAndY():i===rh.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[e,n]=[t.isEmpty("top"),t.isEmpty("bottom")],o=e?null:"top";let r,a;n?(r=null,a=i.getRowCount()-1):(r="bottom",a=t.getPinnedBottomRowCount()-1);const l=this.visibleColsService.getAllCols();if(gr(l))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:r,columnStart:l[0],columnEnd:ra(l)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gos.get("undoRedoCellEditing")&&this.undoRedoService&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},fp=class extends Sa{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Xl(this.element,t),mc(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},vp=class extends Sa{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Xl(this.element,t),mc(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},yp=e=>e.getTopRowCtrls(),Cp=e=>e.getStickyTopRowCtrls(),bp=e=>e.getStickyBottomRowCtrls(),wp=e=>e.getBottomRowCtrls(),Sp=e=>e.getCentreRowCtrls(),xp={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Sp},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Sp},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Sp},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Sp},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:yp},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:yp},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:yp},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:yp},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Cp},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Cp},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Cp},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Cp},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:bp},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:bp},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:bp},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:bp},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:wp},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:wp},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:wp},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:wp}};function Mp(e){return xp[e]}var Dp=["center","left","right","fullWidth"],Rp=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Ep=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Ip=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Ap=["stickyTopCenter","stickyTopLeft","stickyTopRight"],kp=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Tp=[...Ap,"stickyTopFullWidth",...kp,"stickyBottomFullWidth"],Lp=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...Ap,...kp],Pp=class extends Sa{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Mp(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new Ju(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new mp(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const s=()=>this.onPinnedWidthChanged();this.forContainers(Ep,(()=>{this.pinnedWidthFeature=this.createManagedBean(new fp(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})})),this.forContainers(Ip,(()=>{this.pinnedWidthFeature=this.createManagedBean(new vp(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})})),this.forContainers(Dp,(()=>this.createManagedBean(new Zu(this.eContainer,"center"===this.name?i:void 0)))),this.forContainers(Lp,(()=>this.createManagedBean(new ep(this.eContainer)))),this.forContainers(Rp,(()=>this.createManagedBean(new Eu((e=>this.comp.setContainerWidth(`${e}px`)))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(Tp.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=Dr(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const e=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",e)))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return sc(this.eViewport)}getCenterViewportScrollLeft(){return ac(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return dc(this.eViewport)}getViewportScrollLeft(){return ac(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(e=this.eViewport).clientWidth<e.scrollWidth;var e}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){lc(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=Dr(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,n=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!s&&t:s||!t}));this.comp.setRowCtrls({rowCtrls:n,useFlushSync:e})}},Fp="ag-force-vertical-scroll",Np=class extends Sa{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,o,r){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${Mp("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${Mp("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${Mp("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${Mp("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new Uu(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Xu(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,o,r]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,s=ec(i,"ag-root",e);e.classList.toggle("ag-has-focus",!s)},focusout:t=>{const{target:i,relatedTarget:s}=t,n=e.contains(s),o=ec(s,"ag-root",e);ec(i,"ag-root",e)||n&&!o||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=`calc(100% + ${(e&&this.scrollVisibleService.getScrollbarWidth()||0)+(zc()?16:0)}px)`;this.animationFrameService.requestAnimationFrame((()=>this.comp.setBodyViewportWidth(t))),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=e=>{const i=e.relatedTarget;if(null===Bc(i))return void this.rowRenderer.stopEditing();let s=t.some((e=>e.contains(i)))&&this.mouseEventService.isElementInThisGrid(i);if(!s){const e=this.popupService;s=e.getActivePopups().some((e=>e.contains(i)))||e.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach((t=>this.addManagedElementListeners(t,{focusout:e})))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=-1===t?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?Fp:null,i=Dr(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&(s=this.eBodyViewport).clientHeight<s.scrollHeight;var s}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const t=e&&zr(this.gos)&&!this.rowContainerHeightService.isStretching(),i=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,t)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e,n=s||Math.abs(t)>Math.abs(i),o=e.target;n?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:s}=e||t;s!==this.eBodyViewport&&s!==this.ctrlsService.get("center").getViewportElement()||this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Nc())return;const t=new Qc(this.eBodyViewport);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new ed(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature)))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(e){const e=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel.getPinnedTopTotalHeight();let i=0;e>0&&(i+=e),t>0&&(i+=t),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight()+(this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0);this.comp.setStickyBottomBottom(`${e}px`)}sizeColumnsToFit(e,t){const i=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,s=sc(this.eGridBody)-i;s>0?this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,-1)}),500):ir("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function Op(e){return e.map((e=>`<ag-row-container name="${e}"></ag-row-container>`)).join("")}Op(["topLeft","topCenter","topRight","topFullWidth"]),Op(["left","center","right","fullWidth"]),Op(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]),Op(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]),Op(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]);var Bp=class extends Sa{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn((()=>{this.columnAnimationService.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))})):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"===typeof e&&e>=0?e:(null==Ic&&Gc(),Ic);null!=t&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},Gp="__ag_grid_instance",zp=class e extends Sa{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=e.gridInstanceSequence.next()}wireBeans(e){this.ctrlsService=e.ctrlsService}stampTopLevelGridCompWithGridInstance(e){e[Gp]=this.gridInstanceId}getRenderedCellForEvent(e){return ba(this.gos,e.target,dp.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const e=t[Gp];if(ur(e)){return e===this.gridInstanceId}t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=Dr(this.gos,"normal"),i=e;let s,n;if(null!=i.clientX||null!=i.clientY?(s=i.clientX,n=i.clientY):(s=i.x,n=i.y),t){const e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition();s+=e.getScrollFeature().getHScrollPosition().left,n+=t.top}return{x:s,y:n}}};zp.gridInstanceSequence=new kc;var jp=zp,Vp=class extends Sa{constructor(){super(),this.beanName="navigationService",this.onPageDown=hr(this.onPageDown,100),this.onPageUp=hr(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,r=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case rh.PAGE_HOME:case rh.PAGE_END:n||s||(this.onHomeOrEndKey(i),a=!0);break;case rh.LEFT:case rh.RIGHT:case rh.UP:case rh.DOWN:if(!r)return!1;!n||s||o||(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case rh.PAGE_DOWN:case rh.PAGE_UP:n||s||(a=this.handlePageUpDown(i,r,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),!!t&&(e===rh.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:o}=e;ur(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),ur(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),n=t.top+i,o=this.rowModel.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=t.top,n=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,n,!0):this.navigateToNextPage(e,n,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),r=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?a?.rowHeight-s-r:s-r,c=a?.rowTop+l;let h,d=this.rowModel.getRowIndexAtPixel(c+r);if(d===e.rowIndex){const s=i?-1:1;t=d=e.rowIndex+s}i?(h="bottom",d<n&&(d=n),t<n&&(t=n)):(h="top",d>o&&(d=o),t>o&&(t=o)),this.isRowTallerThanView(d)&&(t=d,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:d,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),s=this.pageBoundsService.getLastRow();let n=0,o=e.rowIndex;for(;o>=0&&o<=s;){const e=this.rowModel.getRow(o);if(e){const t=e.rowHeight??0;if(n+t>i)break;n+=t}o+=t}return Math.max(0,Math.min(o,s))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return"number"===typeof i&&i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,n=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===rh.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:ra(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(!1===s)if(i){const{rowIndex:i,rowPinned:s}=e.getRowPosition();(s?0===i:i===this.pageBoundsService.getFirstRow())&&(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof dp&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault();else s?t.preventDefault():null===s&&this.focusService.allowFocusForNextGridCoreContainer(i)}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!!(s||(s=this.rowRenderer.getRowByPosition(i),s&&s.isFullWidth()))&&!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s,n=e.isEditing();if(!n&&e instanceof dp){const t=e.getRowCtrl();t&&(n=t.isEditing())}return s=n?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===s?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return!1===n?null:null!=n&&(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(!1===n)return null;if(null==n)return!1;const o=n.getCellPosition(),r=this.isCellEditable(s),a=this.isCellEditable(o),l=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;if(r&&e.setFocusOutOnEditor(),!l){e.getRowCtrl().stopEditing();n.getRowCtrl().startRowEditing(void 0,void 0,i)}return a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;s=e instanceof gp?{...e.getRowPosition(),column:t?i[0]:ra(i)}:e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(!1===n)return null;if(n instanceof dp)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return ur(n)}findNextCellToFocusOn(e,t,i){let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const n=this.gos.getCallback("tabToNextCell");if(ur(n)){const o=n({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(!0===o||null===o)null===o&&ir("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(!1===o)return!1;s={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const e=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:e+s.rowIndex,column:s.column},fromCell:!0}),null}const o="fullRow"===this.gos.get("editType");if(i&&!o){if(!this.isCellEditable(s))continue}this.ensureCellVisible(s);const r=this.getCellByPosition(s);if(!r){const e=this.rowRenderer.getRowByPosition(s);if(!e||!e.isFullWidth()||i)continue;return e}if(!r.isSuppressNavigable())return this.rangeService?.setRangeToCell(s),r}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,o=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===rh.LEFT&&(n=this.getLastCellOfColSpan(n)):t===rh.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=pr(n);if(o&&e&&e.key===rh.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const s=this.gos.getCallback("navigateToNextCell");if(ur(s)){const o=s({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});n=ur(o)?{rowPinned:o.rowPinned,rowIndex:o.rowIndex,column:o.column}:null}}if(!n)return;if(n.rowIndex<0){const t=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:t+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const r=this.getNormalisedPosition(n);r?this.focusPosition(r):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?ra(i):i[0])};this.focusPosition(o);const r=null==t?null!=n&&this.rowPositionUtils.before(o,n):t;return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:r}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:ra(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=jr(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&pr(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},Hp=class extends Sa{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(t);return()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Wp=class extends Sa{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,(s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})}),i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(s=1,n="right");const r=o?void 0:4*s,a=o?void 0:4;this.showPopup(e,(s=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:s,nudgeX:r,nudgeY:a,alignSide:n,keepWithinBounds:!0,position:"under",column:e})}),i,t,o)}showPopup(e,t,i,s,n){const o=e?this.createBean(new cd(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const r=document.createElement("div");let a;Ol(r,"presentation"),r.classList.add("ag-menu"),n||r.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(r,{keydown:e=>this.trapFocusWithin(e,r)}),r.appendChild(o?.getGui());const l=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=this.localeService.getLocaleTextFunc(),h=n&&"columnFilter"!==i?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),d=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:t=>{e.setMenuVisible(!1,"contextMenu");const n=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),n&&s&&uc(s)){const e=this.focusService.findTabbableParent(s);e&&e.focus()}o?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},positionCallback:()=>t(r),anchorToElement:l,ariaLabel:h});d&&(this.hidePopup=a=d.hideFunc),o.afterInit().then((()=>{t(r),o.afterGuiAttached({container:i,hidePopup:a})})),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==rh.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},_p=class extends Sa{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const i=Nr(this.gos).ResizeObserver,s=i?new i(t):null;return s?.observe(e),()=>s?.disconnect()}},Up=class extends Sa{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&0===e){const e=this.paginationService?.getCurrentPage()??0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&ir(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,o=this.destroyTasks,r=(new Date).getTime();let a=(new Date).getTime()-r;const l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(n.length)this.sortTaskList(s),e=n.pop().task;else{if(!o.length){this.cancelledTasks.clear();break}e=o.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-r}i.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=Nr(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{this.isOn()?t||(t=!0,this.addDestroyTask((()=>{t=!1,e()}))):window.setTimeout(e,0)}}},$p=class extends Sa{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=xr(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode((e=>{e.id&&t.has(e.id)&&(e.expanded=!0)})),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode((t=>{let{expanded:i,id:s}=t;i&&s&&e.push(s)})),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},Kp=class extends Sa{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=s.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){const t=e.rowNode,i=e.column;let{anchorToElement:s,value:n}=e;t&&i&&null==n&&(n=this.valueService.getValueForDisplay(i,t)),null==s&&(s=this.getContextMenuAnchorElement(t,i)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,s)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){const t=e&&$a(e)?e.getColDef():e?.getColGroupDef();return!t?.suppressHeaderContextMenu&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Nc()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){const t=e.getColDef(),i=t.floatingFilterComponentParams?.suppressFilterButton;return null!=i&&ir("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==t.suppressFloatingFilterButton?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?!!this.gos.exists("suppressMenuHide")&&e:e}showColumnMenuCommon(e,t,i,s){const{positionBy:n}=t,o=t.column;if("button"===n){const{buttonElement:n}=t;e.showMenuAfterButtonClick(o,n,i,s)}else if("mouse"===n){const{mouseEvent:n}=t;e.showMenuAfterMouseEvent(o,n,i,s)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame((()=>{const t=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);t&&e.showMenuAfterButtonClick(o,t.getAnchorElementForMenu(s),i,!0)})))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return i?.getGui()||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const n=this.getCellGui(s,t);return n||(s.isFullWidth()?s.getFullWidthElement():i)}},Yp={selector:"AG-INPUT-TEXT-AREA",component:class extends ch{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},Zp=class extends yh{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Pr(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{Ad(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}},qp=class extends yh{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=_c}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:s}=e,n=this.eInput;let o;this.cellEditorInput.init(n,e);let r=!0;t?(this.focusAfterAttached=!0,i===rh.BACKSPACE||i===rh.DELETE?o="":i&&1===i.length?s?r=!1:o=i:(o=this.cellEditorInput.getStartValue(),i!==rh.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),r&&null!=o&&n.setStartValue(o),this.addManagedElementListeners(n.getGui(),{keydown:e=>{const{key:t}=e;t!==rh.PAGE_UP&&t!==rh.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Tc()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Qp=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[Td]}init(e,t){this.eInput=e,this.params=t,null!=t.maxLength&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return ur(e)||ur(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=ur(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},Xp=class extends qp{constructor(){super(new Qp)}},Jp=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[Pd]}init(e,t){this.eInput=e,this.params=t,null!=t.max&&e.setMax(t.max),null!=t.min&&e.setMin(t.min),null!=t.precision&&e.setPrecision(t.precision),null!=t.step&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==rh.UP&&e.key!==rh.DOWN||e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!ur(e)&&!ur(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(null==t)return t;if("string"===typeof t){if(""===t)return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){Tc()&&this.eInput.getInputElement().focus({preventScroll:!0})}},eg={selector:"AG-INPUT-DATE-FIELD",component:class extends kd{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Tc();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Br(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ud(e??null,!1)??void 0:e;return this.min===t||(this.min=t,Cc(this.eInput,"min",t)),this}setMax(e){const t=e instanceof Date?Ud(e??null,!1)??void 0:e;return this.max===t||(this.max=t,Cc(this.eInput,"max",t)),this}setStep(e){return this.step===e||(this.step=e,Cc(this.eInput,"step",e)),this}getDate(){if(this.eInput.validity.valid)return Yd(this.getValue())??void 0}setDate(e,t){this.setValue(Ud(e??null,!1),t)}}},tg=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[eg]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return ur(e)||ur(this.params.value)?e??null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ud(e,!1)}},ig=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[eg]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return ur(e)||ur(this.params.value)?this.params.parseValue(e??""):this.params.value}getStartValue(){return Ud(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Yd(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ud(e??null,!1)??void 0}},sg=class{constructor(e){this.cellValueChanges=e}},ng=class extends sg{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},og=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};function rg(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")}function ag(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")}var lg={version:au,moduleName:"@ag-grid-community/edit-core",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=this.createCellEditorParams(e,t,i),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n),a=null!=r?.popupFromSelector?r.popupFromSelector:!!o.cellEditorPopup,l=null!=r?.popupPositionFromSelector?r.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,r),e.getComp().setEditDetails(r,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(s,"cellEditingStarted")),!r?.params?.suppressPreventDefault}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:n}=this.takeValueFromCellEditor(t,i),o=e.getRowNode(),r=e.getColumn(),a=this.valueService.getValueForDisplay(r,o);let l=!1;return n&&(l=this.saveNewValue(e,a,s,o,r)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:l}),l}handleColDefChanged(e){const t=e.getCellEditor();if(t?.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,s),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n);t.refresh(r.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached((()=>t.getCellEditor()?.focusIn?.())))}stopEditingAndFocus(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new Zp(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();if(!s)return i;if(s.isCancelAfterEnd&&s.isCancelAfterEnd())return i;return{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const o=s.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,i){const s=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(s,n),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:t=>this.valueService.parseValue(s,n,t,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?rh.UP:rh.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}}]},cg={version:au,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:function(e){e.undoRedoService?.undo("api")},redoCellEditing:function(e){e.undoRedoService?.redo("api")},getCellEditorInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.rowRenderer.getCellEditorInstances(t).map($h)},getEditingCells:function(e){return e.rowRenderer.getEditingCells()},stopEditing:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.rowRenderer.stopEditing(t)},startEditingCell:function(e,t){const i=e.columnModel.getCol(t.colKey);if(!i)return void ir(`no column found for ${t.colKey}`);const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&ag(e,t.rowIndex),rg(e,t.colKey);const n=e.navigationService.getCellByPosition(s);if(!n)return;const{focusService:o,gos:r}=e,a=r.get("stopEditingWhenCellsLoseFocus")&&(()=>{const e=Br(r),t=n.getGui();return e!==t&&!!t?.contains(e)})();!a&&o.isCellFocused(s)||o.setFocusedCell({...s,forceBrowserFocus:a,preventScrollOnBrowserFocus:!0}),n.startRowOrCellEdit(t.key)},getCurrentUndoSize:function(e){return e.undoRedoService?.getCurrentUndoStackSize()??0},getCurrentRedoSize:function(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}},dependantModules:[lg]},hg={version:au,moduleName:"@ag-grid-community/undo-redo-edit",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:n,rowIndex:o,column:r,oldValue:a,value:l}=e,c={rowPinned:n,rowIndex:o,columnId:r.getColId(),newValue:l,oldValue:a};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new og(e),this.redoStack=new og(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,s,n){if(!e)return!1;const o=e.pop();return!(!o||!o.cellValueChanges)&&(this.processAction(o,(e=>e[s]),n),o instanceof ng?this.processRange(this.rangeService,o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:s,rowPinned:n,columnId:o}=e,r={rowIndex:s,rowPinned:n},a=this.rowPositionUtils.getRowNode(r);a.displayed&&a.setDataValue(o,t(e),i)}))}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach(((s,n)=>{if(!s)return;const o=s.startRow,r=s.endRow;n===t.length-1&&(i={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},o=this.rowPositionUtils.getRowNode(n),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),r=this.columnModel.getCol(s);if(!r)return;o.ensureIndexVisible(i),o.ensureColumnVisible(r);const a={rowIndex:i,column:r,rowPinned:n};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new sg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new sg(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new sg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new ng(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;e=this.rangeService&&qr(this.gos)?new ng(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new sg(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],dependantModules:[lg]},dg={version:au,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:Xp}],dependantModules:[lg]},ug={version:au,moduleName:"@ag-grid-community/editing",dependantModules:[lg,hg,{version:au,moduleName:"@ag-grid-community/full-row-edit",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=!0;return e.getAllCellCtrls().reduce(((e,o)=>{const r=o===i;return r?n=o.startEditing(t,r,s):o.startEditing(null,r,s),!!e||o.isEditing()}),!1)&&this.setEditing(e,!0),n}stopEditing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const o of i){const e=o.stopEditing(t);s&&!t&&!n&&e&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,(e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t)));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}}],dependantModules:[lg]},{version:au,moduleName:"@ag-grid-community/all-editors",dependantModules:[dg,{version:au,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:Xp},{name:"agNumberCellEditor",classImp:class extends qp{constructor(){super(new Jp)}},params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:class extends qp{constructor(){super(new tg)}}},{name:"agDateStringCellEditor",classImp:class extends qp{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new ig((()=>this.dataTypeService)))}}},{name:"agCheckboxCellEditor",classImp:class extends yh{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[dh]),this.eCheckbox=_c}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t);this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=Zl(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}}}],dependantModules:[dg]},{version:au,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:class extends yh{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[Md]),this.eSelect=_c,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:n,value:o,eventKey:r}=e;if(pr(n))return void ir("no values found for select cellEditor");this.startedByEnter=null!=r&&r===rh.ENTER;let a=!1;n.forEach((s=>{const n={value:s},r=i.formatValue(e.column,null,s),l=null!==r&&void 0!==r;n.text=l?r:s,t.addOption(n),a=a||o===s})),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:h}=e;null!=l&&t.setPickerGap(l),null!=h&&t.setPickerMaxHeight(h),null!=c&&t.setPickerMaxWidth(c),"fullRow"!==s.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}}],dependantModules:[lg]},{version:au,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:class extends yh{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[Yp]),this.eTextArea=_c}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),ur(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===rh.LEFT||t===rh.UP||t===rh.RIGHT||t===rh.DOWN||e.shiftKey&&t===rh.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return ur(e)||ur(this.params.value)?this.params.parseValue(e):this.params.value}}}],dependantModules:[lg]}]},cg]},pg=class extends Sa{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach((e=>this.cloneItemIntoDummy(e,t))),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);return s+this.getAutoSizePadding()}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((i=>{const s=i.getHtmlElementForColumnHeader(e);null!=s&&(t=s)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some((e=>o.classList.contains(e)))){for(let e=0;e<o.classList.length;e++){const t=o.classList[e];"ag-row-position-absolute"!=t&&n.add(t)}break}o=o.parentElement}s.appendChild(i),t.appendChild(s)}},gg=class extends Sa{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=xr(this.gos),this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl})),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.childStore?.getStoreBounds();return e.footer&&(t=e.sibling.childStore?.getStoreBounds()),(t?.heightPx??0)+(t?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=ra(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,o=e=>{if(n.add(e),t){const t=this.getLastPixelOfGroup(e),n=s+i+e.rowHeight;e.stickyRowTop=t<n?i+(t-n):i}else{const t=this.getFirstPixelOfGroup(e),n=s-(i+e.rowHeight);e.stickyRowTop=t>n?i-(t-n):i}i=0,n.forEach((e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)}))},r=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=t=>{if(!t.displayed)return!1;if(t.footer){if(!0===r)return!1;if("grand"===r&&-1===t.level)return!1;if("group"===r&&t.level>-1)return!1;const i=!!t.sibling.rowIndex&&t.sibling.rowIndex+1===t.rowIndex;if("bottom"===e&&i)return!1;return!n.has(t)}if(t.isExpandable()){if(!0===a)return!1;if("bottom"===e)return!1;return!n.has(t)&&t.expanded}return!1};for(let c=0;c<100;c++){let e=s+i;t||(e=s-i);const n=this.rowModel.getRowIndexAtPixel(e),r=this.rowModel.getRow(n);if(null==r)break;const a=this.getStickyAncestors(r).find((e=>(t?e.rowIndex<n:e.rowIndex>n)&&l(e)));if(a){o(a);continue}if(!(t?r.rowTop<e:r.rowTop+r.rowHeight>e)||!l(r))break;o(r)}return t||n.forEach((e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)})),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t=!!this.gos.get("groupIncludeFooter")||"group"===e,i=!!this.gos.get("groupIncludeTotalFooter")||"grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=jr(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some((t=>t.getRowNode()===e))){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const s="top"===e,n=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},r=[];for(let u=0;u<n.length;u++){const e=n[u].getRowNode();!t.has(e)?(o[e.id]=n[u],e.sticky=!1):r.push(n[u])}const a=new Set;for(let u=0;u<r.length;u++)a.add(r[u].getRowNode());const l=[];t.forEach((e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))}));let c=!!l.length||r.length!==n.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),c=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),c=!0),this.destroyRowCtrls(o,!1);const h=[...r,...l];h.sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex)),s||h.reverse(),h.forEach((e=>e.setRowTop(e.getRowNode().stickyRowTop)));let d=0;return s?(t.forEach((e=>{e.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=e.rowHeight)})),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach((e=>{e.rowIndex>this.pageBoundsService.getLastRow()&&(d+=e.rowHeight)})),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),!!c&&(s?this.stickyTopRowCtrls=h:this.stickyBottomRowCtrls=h,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.getRowNode();if(i.rowHeightEstimated){const t=Ar(this.gos,i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},mg=class extends Sa{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onCellSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>s())),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{qr(this.gos)?i():s()}));qr(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListener("suppressCellFocus",(e=>this.onSuppressCellFocusChanged(e.currentValue))),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],(()=>this.redrawRows())),jr(this.gos)&&(xr(this.gos)||Mr(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new gg(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Dr(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new fg(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=za(this.rowCtrlsByRowIndex),t=za(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onSuppressCellFocusChanged(e))),this.getFullWidthRowCtrls().forEach((t=>t.onSuppressCellFocusChanged(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach((t=>t.onFlashCells(e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.columnModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.getColumn()===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},s=()=>{t((e=>e.onWidthChanged()))},n=()=>{t((e=>e.onFirstRightPinnedChanged()))},o=()=>{t((e=>e.onLastLeftPinnedChanged()))},r=()=>{t((e=>e.onColDefChanged()))};e.addEventListener("leftChanged",i),e.addEventListener("widthChanged",s),e.addEventListener("firstRightPinnedChanged",n),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push((()=>{e.removeEventListener("leftChanged",i),e.removeEventListener("widthChanged",s),e.removeEventListener("firstRightPinnedChanged",n),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",r)}))}))}onDomLayoutChanged(){const e=Dr(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{const s=i.getCellElement(e);s&&t.push(s)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:s,printLayout:n}=this,o=Object.fromEntries(e.map((e=>[e.getRowNode().id,e])));i.forEachPinnedRow(t,((r,a)=>{const l=e[a];l&&void 0===i.getPinnedRowById(l.getRowNode().id,t)&&(l.destroyFirstPass(),l.destroySecondPass()),r.id in o?(e[a]=o[r.id],delete o[r.id]):e[a]=new gp(r,s,!1,!1,n)}));const r="top"===t?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=r}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.getRowNode()===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=Br(this.gos),s=Lr(this.gos,i,dp.DOM_DATA_KEY_CELL_CTRL),n=Lr(this.gos,i,gp.DOM_DATA_KEY_ROW_CTRL);return s||n?t:null}redrawAfterModelUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&zr(this.gos),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let t=this.pageBoundsService.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,(()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getAllRowCtrls().forEach((t=>{t.stopEditing(e)}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const i=t[s].getAllCellCtrls(),n=i.length;for(let t=0;t<n;t++)e.push(i[t])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getCellCtrls(e.rowNodes,e.columns).forEach((t=>t.flashCell(e)))}refreshCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&Oc()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){const t=this.getCellCtrls(e.rowNodes,e.columns).map((e=>e.getCellRenderer())).filter((e=>null!=e));if(e.columns?.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach((e=>{if(s&&!this.isRowInMap(e.getRowNode(),s))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let s=0;s<t.length;s++){const e=t[s];null!=e&&i.push(e)}})),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach((e=>{const i=e.getCellEditor();i&&t.push(i)})),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach((t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}})),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>{const i=e.getRowNode();return this.isRowInMap(i,t)})):i}getCellCtrls(e,t){let i;ur(t)&&(i={},t.forEach((e=>{const t=this.columnModel.getCol(e);ur(t)&&(i[t.getId()]=!0)})));const s=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.getColumn().getId();i&&!i[t]||s.push(e)}))})),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];Oa(this.rowCtrlsByRowIndex,((t,i)=>{null==i.getRowNode().id&&e.push(t)})),this.removeRowCtrls(e);const t={};return Oa(this.rowCtrlsByRowIndex,((e,i)=>{const s=i.getRowNode();t[s.id]=i})),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{afterScroll:t}=e;let i;this.stickyRowFeature&&Oc()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}const r=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if((!t||o||r)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==e&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const s=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=function(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}(this.firstRenderedRow,this.lastRenderedRow),i=(e,i)=>{const s=i.getRowNode().rowIndex;null!=s&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(i)&&t.push(s)};Oa(this.rowCtrlsByRowIndex,i),Oa(e,i),t.sort(((e,t)=>e-t));const s=[];for(let n=0;n<t.length;n++){const e=t[n],i=this.rowModel.getRow(e);i&&!i.sticky&&s.push(e)}return s}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t);const n=[];if(s.forEach((s=>{const o=this.createOrUpdateRowCtrl(s,e,t,i);ur(o)&&n.push(o)})),e){i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.getRowNode();return!(null!=t&&!this.isRowInMap(i,t))}))}createOrUpdateRowCtrl(e,t,i,s){let n,o=this.rowCtrlsByRowIndex[e];o||(n=this.rowModel.getRow(e),ur(n)&&ur(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null));if(!o){if(n||(n=this.rowModel.getRow(e)),!ur(n))return;o=this.createRowCon(n,i,s)}return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];Oa(e,((e,s)=>{if(s)if(this.cachedRowCtrls&&s.isCacheable())this.cachedRowCtrls.addRow(s);else if(s.destroyFirstPass(!t),t){const e=s.instanceId;this.zombieRowCtrls[e]=s,i.push((()=>{s.destroySecondPass(),delete this.zombieRowCtrls[e]}))}else s.destroySecondPass()})),t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),or(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*kr(this.gos)}workOutFirstAndLastRowsToRender(){let e,t;if(this.rowContainerHeightService.updateOffset(),this.rowModel.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const i=this.getRowBufferInPixels(),s=this.ctrlsService.getGridBodyCtrl(),n=this.gos.get("suppressRowVirtualisation");let o,r,a=!1;do{const e=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:t,pageLastPixel:l}=this.pageBoundsService.getCurrentPagePixelRange(),c=this.rowContainerHeightService.getDivStretchOffset(),h=s.getScrollFeature().getVScrollPosition(),d=h.top,u=h.bottom;n?(o=t+c,r=l+c):(o=Math.max(d+e-i,t)+c,r=Math.min(u+e+i,l)+c),this.firstVisibleVPixel=Math.max(d+e,t)+c,this.lastVisibleVPixel=Math.min(u+e,l)+c,a=this.ensureAllRowsInRangeHaveHeightsCalculated(o,r)}while(a);let l=this.rowModel.getRowIndexAtPixel(o),c=this.rowModel.getRowIndexAtPixel(r);const h=this.pageBoundsService.getFirstRow(),d=this.pageBoundsService.getLastRow();l<h&&(l=h),c>d&&(c=d),e=l,t=c}else e=0,t=-1;const i=Dr(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const o=e!==this.firstRenderedRow,r=t!==this.lastRenderedRow;(o||r)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame((()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})})))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),s=this.stickyRowFeature?.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),!!(s||n||i)&&(this.updateContainerHeights(),!0)}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const t=e.getRowNode(),i=this.focusService.isRowNodeFocused(t),s=e.isEditing(),n=t.detail;if(!(i||s||n))return false;return!!this.isRowPresent(t)}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(!this.paginationService||this.paginationService.isRowPresent(e))}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gos.get("suppressAnimationFrame"),o=i&&!n&&!this.printLayout;return new gp(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map((e=>e.getRowNode()))}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},fg=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.getRowNode()!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],ca(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],ca(this.entriesList,e)}getEntries(){return this.entriesList}},vg=class extends Sa{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new yg,this.pinnedBottomRows=new yg}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",(e=>this.setPinnedRowData(e.currentValue,"top"))),this.addManagedPropertyListener("pinnedBottomRowData",(e=>this.setPinnedRowData(e.currentValue,"bottom"))),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return("top"===e?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};this.pinnedBottomRows.forEach(e),this.pinnedTopRows.forEach(e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const s=Ar(this.gos,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return this.pinnedBottomRows?.forEach(i),t=0,this.pinnedTopRows?.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i="top"===t?this.pinnedTopRows:this.pinnedBottomRows;if(void 0===e)return void i.clear();const s=Kr(this.gos),n="top"===t?ld.ID_PREFIX_TOP_PINNED:ld.ID_PREFIX_BOTTOM_PINNED,o=i.getIds(),r=[],a=new Set;let l=0,c=-1;for(const h of e){const e=s?.({data:h,level:0,rowPinned:t})??n+this.nextId++;if(a.has(e)){ir("Duplicate ID",e,"found for pinned row with data",h,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,a.add(e),r.push(e);const d=i.getById(e);if(void 0!==d)d.data!==h&&d.setData(h),l+=this.setRowTopAndRowIndex(d,l,c),o.delete(e);else{const s=new ld(this.beans);s.id=e,s.data=h,s.rowPinned=t,l+=this.setRowTopAndRowIndex(s,l,c),i.push(s)}}o.forEach((e=>{i.getById(e)?.clearRowTopAndRowIndex()})),i.removeAllById(o),i.setOrder(r)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Ar(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return"top"===t?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return"top"===e?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(0===t)return 0;const i=e.getByIndex(t-1);return void 0===i?0:i.rowTop+i.rowHeight}},yg=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter((t=>!e.has(t)))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach(((t,i)=>{const s=this.cache[t];s&&e(s,i)}))}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return 0===this.ordering.length}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},Cg=class extends Sa{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted();this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(){const e={type:"loadComplete",success:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],block:this};this.dispatchLocalEvent(e)}},bg={version:au,moduleName:"@ag-grid-community/row-node-block",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=cr(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){ca(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),0==this.activeBlockLoadsCount&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(this.gos.get("debug")&&tr("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded"));const e=this.getAvailableLoadingCount(),t=this.blocks.filter((e=>"needsLoading"===e.getState())).slice(0,e);this.registerLoads(t.length),t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){if(Mr(this.gos)){return this.rowModel.getBlockStates()}const e={};return this.blocks.forEach((t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s})),e}printCacheStatus(){this.gos.get("debug")&&tr(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}}]},wg=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return null!==this.root&&this.getRange().some((t=>t.id===e.id))}getRoot(){return this.root&&null===this.root?.key&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&null===this.end?.key&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex((t=>t.id===e.id));if(s>-1){const n=t.slice(0,s),o=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find((e=>e.id===this.end?.id)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}},Sg=class extends Sa{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(null==t&&null==e)return;const o={},r={},a=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const n=e[s],l=t[n];let c;"string"===typeof l?c=this.expressionService.evaluate(l,i):"function"===typeof l&&(c=l(i)),a(n,(e=>{c?o[e]=!0:r[e]=!0}))}}e&&n&&Object.keys(e).forEach((e=>a(e,(e=>{o[e]||(r[e]=!0)})))),n&&Object.keys(r).forEach(n),Object.keys(o).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;if("function"===typeof i){s=i(t)}else s=i;return"string"===typeof s&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}},xg=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(xg||{}),Mg=class extends Sa{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:h,onTabKeyDown:d,handleKeyDown:u,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=h,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=u}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new md(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=Fr(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===s)return;let n,o;e?(n=0,o=s):(n=s+1,o=i.length);const r=i.slice(n,o),a=this.gos.get("tabIndex");r.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),s=parseInt(t.getAttribute("tabindex")||"0");return s===a?1:i===a?-1:0===i?1:0===s?-1:i-s})),r[e?r.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},Dg=class extends Sa{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],o={setTabIndex:e=>{n.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:h,onTabKeyDown:d,shouldStopEventPropagation:u,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new Mg({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:h,onTabKeyDown:d,shouldStopEventPropagation:u,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Fr(this.gos).createElement("div"),i="top"===e?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Ol(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];cc(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){yc(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},Rg=class extends Uc{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new Dg(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Eg=0,Ig=class extends Sa{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(-1!==s){this.popupList[s].alignedToElement=t}const n=t.getBoundingClientRect(),o=this.getParentRect(),r=this.keepXYWithinBounds(i,n.top-o.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const l=o.right-o.left-a;let c;function h(){return n.right-o.left-2}function d(){return n.left-o.left-a}this.gos.get("enableRtl")?(c=d(),c<0&&(c=h(),this.setAlignedStyles(i,"left")),c>l&&(c=0,this.setAlignedStyles(i,"right"))):(c=h(),c>l&&(c=d(),this.setAlignedStyles(i,"right")),c<0&&(c=0,this.setAlignedStyles(i,"left"))),i.style.left=`${c}px`,i.style.top=`${r}px`}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:a="over",column:l,rowNode:c,type:h}=e,d=o.getBoundingClientRect(),u=this.getParentRect(),p=this.getPopupIndex(t);if(-1!==p){this.popupList[p].alignedToElement=o}this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:()=>{let i,n=d.left-u.left;if("right"===r&&(n-=t.offsetWidth-d.width),"over"===a)i=d.top-u.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,d,u,e.nudgeY||0)?d.top-u.top+d.height:d.top-t.offsetHeight-2*(s||0)-u.top}return{x:n,y:i}},postProcessCallback:()=>this.callPostProcessPopup(h,t,o,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+s;return n>r?"under":o>r||o>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i],{alignedToElement:n}=s;if(!n)return;["right","left","over","above","under"].forEach((t=>{n.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`)})),t&&(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,o){const r=this.gos.getCallback("postProcessPopup");if(r){r({column:n,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:s})}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:s,nudgeX:n,nudgeY:o,skipObserver:r,updatePosition:a}=e,l={width:0,height:0},c=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:c,y:h}=a();r&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,n&&(c+=n),o&&(h+=o),s&&(c=t.keepXYWithinBounds(i,c,1),h=t.keepXYWithinBounds(i,h,0)),i.style.left=`${c}px`,i.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!r){const e=this.resizeObserverService.observeResize(i,(()=>c(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getPopupList(){return this.popupList}getParentRect(){const e=Fr(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),rc(t)}keepXYWithinBounds(e,t,i){const s=0===i,n=s?"clientHeight":"clientWidth",o=s?"top":"left",r=s?"height":"width",a=s?"scrollTop":"scrollLeft",l=Fr(this.gos),c=l.documentElement,h=this.getPopupParent(),d=e.getBoundingClientRect(),u=h.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=h===l.body,m=Math.ceil(d[r]);let f=g?(s?nc:oc)(c)+c[a]:h[n];g&&(f-=Math.abs(p[o]-u[o]));const v=f-m;return Math.min(Math.max(t,0),Math.abs(v))}addPopup(e){const t=Fr(this.gos),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=e;if(!t)return ir("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(-1!==a){return{hideFunc:this.popupList[a].hideFunc}}this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,s,!!n),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(i,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();ur(e.style.top)||(e.style.top=-1*t.top+"px"),ur(e.style.left)||(e.style.left=-1*t.left+"px")}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Ol(e,"dialog"),Bl(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){var t=this;const i=Fr(this.gos),s=this.getPopupParent(),{wrapperEl:n,eChild:o,closedCallback:r,afterGuiAttached:a,closeOnEsc:l,modal:c}=e;let h=!1;const d=e=>{if(!n.contains(Br(this.gos)))return;e.key!==rh.ESCAPE||ya(e)||g({keyboardEvent:e})},u=e=>g({mouseEvent:e}),p=e=>g({touchEvent:e}),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:a,touchEvent:l,keyboardEvent:c,forceHide:g}=e;(g||!t.isEventFromCurrentPopup({mouseEvent:a,touchEvent:l},o)&&!h)&&(h=!0,s.removeChild(n),i.removeEventListener("keydown",d),i.removeEventListener("mousedown",u),i.removeEventListener("touchstart",p),i.removeEventListener("contextmenu",u),t.eventService.removeEventListener("dragStarted",u),r&&r(a||l||c),t.removePopupFromPopupList(o))};return a&&a({hidePopup:g}),window.setTimeout((()=>{l&&i.addEventListener("keydown",d),c&&(i.addEventListener("mousedown",u),this.eventService.addEventListener("dragStarted",u),i.addEventListener("touchstart",p),i.addEventListener("contextmenu",u))}),0),g}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Eg++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then((e=>e&&e())),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,o=s.getBoundingClientRect(),r=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const s=i[e]-o[e],a=r(n.style[e]);return{initialDiff:s,lastDiff:s,initial:a,last:a,direction:t}},l=a("top",0),c=a("left",1),h=this.getFrameworkOverrides();return new xh((i=>{h.wrapIncoming((()=>{h.setInterval((()=>{const i=t.getBoundingClientRect(),o=s.getBoundingClientRect();if(0==o.top&&0==o.left&&0==o.height&&0==o.width)return void e.hidePopup();const a=(e,t)=>{const s=r(n.style[t]);e.last!==s&&(e.initial=s,e.last=s);const a=i[t]-o[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(n,e.initial+e.initialDiff-a,e.direction);n.style[t]=`${i}px`,e.last=i}e.lastDiff=a};a(l,"top"),a(c,"left")}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const o=this.getPopupIndex(t);if(-1===o)return!1;for(let r=o;r<this.popupList.length;r++){if(wa(this.popupList[r].element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=Fr(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return;const o=[],r=[];for(const h of i)h!==n&&(h.classList.contains("ag-always-on-top")?r.push(h):o.push(h));const a=[],l=r.length,c=n.classList.contains("ag-always-on-top")||!l?[...o,...r,n]:[...o,n,...r];for(let h=0;h<=s;h++){const e=c[h];if(i[h]===c[h]||e===n)continue;e.querySelectorAll("div").forEach((e=>{0!==e.scrollTop&&a.push([e,e.scrollTop])})),0===h?t.insertAdjacentElement("afterbegin",e):c[h-1].insertAdjacentElement("afterend",e)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}},Ag=["touchstart","touchend","touchmove","touchcancel"],kg=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(e,t){return new xh((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,s){const n=ua(Ag,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${"solid"===this.frameworkName?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},Tg=class extends Sa{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===rh.UP,s=e===rh.DOWN,n=e===rh.LEFT;let o,r;if(i||s)r=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{const e=this.visibleColsService.getAllCols(),i=this.gos.get("enableRtl");r=t.rowIndex,o=n!==i?e[0]:ra(e)}return{rowIndex:r,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case rh.UP:i=this.getCellAbove(i);break;case rh.DOWN:i=this.getCellBelow(i);break;case rh.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case rh.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,ir("unknown key for navigation ",e)}s=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex)}if(!i)return!1;return!t.isSuppressNavigable(i)}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(n);return o||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!jr(this.gos)||!e||!e.sticky)return;let i=[];i=this.rowRenderer.getStickyTopRowCtrls().some((t=>t.getRowNode().rowIndex===e.rowIndex))?[...this.rowRenderer.getStickyTopRowCtrls()].sort(((e,t)=>e.getRowNode().rowIndex-t.getRowNode().rowIndex)):[...this.rowRenderer.getStickyBottomRowCtrls()].sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex));const s=t?-1:1,n=i.findIndex((t=>t.getRowNode().rowIndex===e.rowIndex)),o=i[n+s];return o?{rowIndex:o.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;if("top"===t){return this.pinnedRowModel.getPinnedTopRowCount()-1<=i}if("bottom"===t){return this.pinnedRowModel.getPinnedBottomRowCount()-1<=i}return this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(i?0===t:t===this.pageBoundsService.getFirstRow())return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(n,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const o=this.getRowBelow(e);if(pr(o))return null;if(!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??1))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=ra(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(pr(o))return null;if(!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??1))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}},Lg=(e,t)=>{for(const i in t)t[i]=e;return t},Pg={...Lg("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Lg("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Lg("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...Lg("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Lg("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Lg("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Lg("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Lg("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Lg("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Lg("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...Lg("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Lg("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Lg("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Lg("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Lg("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Fg={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},Ng=(e,t)=>e.eventService.dispatchEvent(t),Og=class{};Reflect.defineProperty(Og,"name",{value:"GridApi"});var Bg=class extends Sa{constructor(){super(),this.beanName="apiFunctionService",this.api=new Og,this.fns={...Fg,dispatchEvent:Ng},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in Pg)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:s}=this;i!==Fg&&(i[e]=s?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){var t=this;return{[e]:function(){const{beans:i,fns:{[e]:s}}=t;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s?s(i,...o):t.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(t){const t=Pg[e];i.assertModuleRegistered(t,`api.${e}`)&&ir(`API function '${e}' not registered to module '${t}'`)}else ir(`Grid API function ${e}() cannot be called as the grid has been destroyed.\nEither clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\nTo run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${s}`)}destroy(){super.destroy(),this.fns=Fg,this.beans=null}};function Gg(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var zg=class extends Sa{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],n={};return e.forEach((e=>{let o=!0,r=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=n[a.getGroupId()];if(t){t.children.push(r),o=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[r],n[e.groupId]=e,r=e,a=a.getOriginalParent()),null!=a&&l===a){o=!1;break}l=a}o&&s.push(r)})),s}createDefFromGroup(e){const t=Ga(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Ga(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=!e.isVisible()||void 0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,s}},jg=class extends Sa{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:1===e.length?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:1===e.length?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:1===t.length?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&1===t.length?t[0]:null,toIndex:s,finished:n,source:i})}columnPinned(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.getPinned()));this.eventService.dispatchEvent({type:"columnPinned",pinned:null!=s?s:null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.isVisible()));this.eventService.dispatchEvent({type:"columnVisible",visible:s,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&1==t.length?t[0]:null,source:i})}columnResized(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:1===e.length?e[0]:null,flexColumns:s,finished:t,source:i})}},Vg=class extends Sa{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){if(pr(this.columnModel.getColDefCols())||!this.columnModel.isAlive())return[];const e=this.columnModel.getAllCols().map((e=>this.createStateItemFromColumn(e)));return this.orderColumnStateList(e),e}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,r=null!=e.getSort()?e.getSort():null,a=null!=e.getSortIndex()?e.getSortIndex():null,l=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:n,flex:l}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map(((e,t)=>[e.getColId(),t])));e.sort(((e,t)=>(i.has(e.colId)?i.get(e.colId):-1)-(i.has(t.colId)?i.get(t.colId):-1)))}},Hg=class extends Sa{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[];return Qa(null,this.columnModel.getColTree(),(t=>{xa(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];Qa(null,t,(e=>{if(xa(e)){const t=e.getColGroupDef(),s={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(s)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const i=[];e.forEach((e=>{const t=e.groupId,s=e.open,n=this.columnModel.getProvidedColGroup(t);n&&n.isExpanded()!==s&&(n.setExpanded(s),i.push(n))})),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},Wg=class extends Sa{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const e=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=e-this.scrollPosition-this.scrollWidth,this.viewportRight=e-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!this.isAnyParentAutoHeaderHeight(e))||this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200;return!(t<s&&i<s)&&!(t>n&&i>n)}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,t,(e=>{const t=e.getLeft();return ur(t)&&t>this.viewportLeft}))}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach((t=>e[t.getId()]=!0));const s=(t,i,n)=>{let o=!1;for(let r=0;r<t.length;r++){const a=t[r];let l=!1;if($a(a))l=!0===e[a.getId()];else{const e=a.getDisplayedChildren();e&&(l=s(e,i,n+1))}l&&(o=!0,i[n]||(i[n]=[]),i[n].push(a))}return o};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>`${e.getId()}-${e.getPinned()||"normal"}`)).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},_g=class extends Sa{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){return class{refresh(){return!1}getGui(){return this.eGui}init(t){const i=e(t),s=typeof i;this.eGui="string"!==s&&"number"!==s&&"boolean"!==s?null!=i?i:pc("<span></span>"):pc("<span>"+i+"</span>")}}}doesImplementIComponent(e){return!!e&&(e.prototype&&"getGui"in e.prototype)}},Ug=class extends Sa{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},$g=Object.fromEntries(["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"].map(((e,t)=>[e,t])));function Kg(e,t){return((e.beanName?$g[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?$g[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)}function Yg(e,t){return"gridDestroyService"===e?.beanName?-1:0}var Zg=class extends Sa{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e){const t=this.registry[e];if(null!=t){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return new t(...s)}}},qg=class extends Sa{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",(()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach((e=>e(this.params))),this.readyCallbacks.length=0)}),this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every((e=>e?.isAlive()??!1))}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc((()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)}))}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc((()=>{this.updateReady()}))}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Qg=class extends Sa{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${null==i?"null":i}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}},Xg=class extends Sa{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){xr(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(null==this.clientSideRowModel)return void this.eventService.dispatchEvent(e);this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach((e=>this.eventService.dispatchEvent(e))),this.events=[]};t?i():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},Jg=class extends Sa{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e,t=0;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),void 0===e?null:{rowIndex:t,rowPinned:e}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),void 0===e?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}before(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(ur(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}},em={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},tm={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},im={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},sm=class extends Sa{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",(()=>this.handleThemeGridOptionChange())),this.handleThemeGridOptionChange(),this.addDestroyFunc((()=>this.stopUsingTheme())),this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(em),this.getSizeEl(tm),this.getSizeEl(im)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(em)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(tm)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(im)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(null==t||isNaN(t)||!isFinite(t))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):""!=e?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===om?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${om}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"===s&&ir(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>n())),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver((()=>{const e=this.readAncestorThemeClasses();nm(e,this.ancestorThemeClasses)||(this.ancestorThemeClasses=e,this.fireGridStylesChangedEvent("themeChanged"))}));let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc((()=>e.disconnect()))}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter((e=>e.startsWith("ag-theme-")));for(const e of i)t.includes(e)||t.unshift(e);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,s=e.get("theme")||null;s!==i&&(i?.stopUse(),this.gridTheme=s,s?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},nm=(e,t)=>e.length===t.length&&-1===e.findIndex(((i,s)=>e[s]!==t[s])),om=15538,rm=class extends Sa{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Qo}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=Er(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},am=class e extends Sa{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(e){this.eGridDiv=e.eGridDiv,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.headerNavigationService=e.headerNavigationService,this.headerPositionUtils=e.headerPositionUtils,this.rowRenderer=e.rowRenderer,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.navigationService=e.navigationService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.rangeService=e.rangeService,this.advancedFilterService=e.advancedFilterService,this.overlayService=e.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",e.toggleKeyboardMode),t.addEventListener("mousedown",e.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",e.toggleKeyboardMode),t.removeEventListener("mousedown",e.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=e.keyboardModeActive,s="keydown"===t.type;s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(e.keyboardModeActive=s)}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl}))}registerKeyboardFocusEvents(){const t=Fr(this.gos);e.addKeyboardModeEvents(t),e.instanceCount++,this.addDestroyFunc((()=>{e.instanceCount--,e.removeKeyboardModeEvents(t)}))}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return e.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(Br(this.gos),gp.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(Br(this.gos),ou.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(Lr(this.gos,i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCellPosition=null}),0),!0)}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout((()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())}))}isCellRestoreFocused(e){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:s}=e,n={rowIndex:t,rowPinned:i,column:s,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(n.isFullWidthCell=o.isFullWidth()),n}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const e=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:o=!1}=e,r=this.columnModel.getCol(t);r?(this.focusedCellPosition={rowIndex:i,rowPinned:dr(s),column:r},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:n,preventScrollOnBrowserFocus:o})):this.focusedCellPosition=null}isCellFocused(e){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeaderPosition)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),s=e.getPinned(),{column:n,headerRowIndex:o}=this.focusedHeaderPosition;return t===n&&i===o&&s==n.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(e){if(this.isHeaderFocusSuppressed())return!1;const{direction:t,fromTab:i,allowUserOverride:s,event:n,fromCell:o,rowWithoutSpanValue:r}=e;let{headerPosition:a}=e;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(s){const e=this.getFocusedHeader(),s=this.headerNavigationService.getHeaderRowCount();if(i){const i=this.gos.getCallback("tabToNextHeader");i&&(a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:t,currentPosition:e,headerPosition:a,headerRowCount:s}))}else{const t=this.gos.getCallback("navigateToNextHeader");if(t&&n){a=t({key:n.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:s,event:n})}}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:n,fromCell:o,rowWithoutSpanValue:r})}focusHeaderPositionFromUserFunc(e){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:t,headerPosition:i,direction:s,event:n}=e,o=this.getFocusedHeader(),r=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:s,currentPosition:o,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:s,event:n})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:s,headerPosition:n,headerRowCount:o}=e,r=t({backwards:"Before"===i,previousHeaderPosition:s,nextHeaderPosition:n,headerRowCount:o});return!0===r||null===r?(null===r&&ir("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:s,rowWithoutSpanValue:n,event:o}=e,{column:r,headerRowIndex:a}=t;if(-1===a)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(r);this.headerNavigationService.scrollToColumn(r,i);const l=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()),c=l?.focusHeader(t.headerRowIndex,r,o)||!1;return c&&(null!=n||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(n??-1),c}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleColsService.getAllCols()[0];if(!e)return!1;e.getParent()&&(e=this.visibleColsService.getColGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const t=this.headerNavigationService.getHeaderRowCount()-1,i=ra(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===dr(t))}findFocusableElements(e,t){let i=ql;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter((e=>uc(e))),n=Array.prototype.slice.apply(e.querySelectorAll(i));if(!n.length)return s;return((e,t)=>e.filter((e=>-1===t.indexOf(e))))(s,n)}focusInto(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.findFocusableElements(e,null,i),n=t?ra(s):s[0];return!!n&&(n.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),s=i.indexOf(t);if(-1===s)return null;let n=-1;for(let o=s-1;o>=0;o--)if(i[o].classList.contains("ag-tab-guard-top")){n=o;break}return n<=0?null:i[n-1]}findNextFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eGridDiv,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const s=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),n=Br(this.gos);let o;o=t?s.findIndex((e=>e.contains(n))):s.indexOf(n);const r=o+(i?-1:1);return r<0||r>=s.length?null:s[r]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(`.${md.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(t))return!0;return!1}findTabbableParent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===Bc(e)&&++i<=t;)e=e.parentElement;return null===Bc(e)?null:e}focusOverlay(e){const t=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!t&&this.focusInto(t,e)}focusGridViewFailed(e,t){return t&&this.focusOverlay(e)||e&&this.focusLastHeader()}focusGridView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.overlayService.isExclusive())return i&&this.focusOverlay(t);if(this.isCellFocusSuppressed())return t&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():!(!i||!this.focusOverlay(t))||this.focusNextGridCoreContainer(!1);const s=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(s){const{rowIndex:i,rowPinned:n}=s;if(e??(e=this.getFocusedHeader()?.column),e&&void 0!==i&&null!==i){if(this.navigationService.ensureCellVisible({rowIndex:i,column:e,rowPinned:n}),t){const e=this.rowRenderer.getRowByPosition(s);if(e?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(s,t))return!0}return this.setFocusedCell({rowIndex:i,column:e,rowPinned:dr(n),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:i,rowPinned:n,column:e}),!0}}return!(!i||!this.focusOverlay(t))||!(!t||!this.focusLastHeader())}isGridFocused(){const e=Br(this.gos);return!!e&&this.eGridDiv.contains(e)}focusNextGridCoreContainer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(t||!this.gridCtrl.focusNextInnerContainer(e))||((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(e){this.gridCtrl.addFocusableContainer(e)}removeFocusableContainer(e){this.gridCtrl.removeFocusableContainer(e)}focusGridInnerElement(e){return this.gridCtrl.focusInnerElement(e)}allowFocusForNextGridCoreContainer(e){this.gridCtrl.allowFocusForNextCoreContainer(e)}};am.keyboardModeActive=!1,am.instanceCount=0;var lm=am,cm=class extends Sa{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=Dr(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},hm=class extends Sa{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:s,mouseEventService:n,ctrlsService:o,resizeObserverService:r}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};s.addDropTarget(a),this.addDestroyFunc((()=>s.removeDropTarget(a))),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Uu(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const l=r.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>l())),o.register("gridCtrl",this)}isDetailGrid(){const e=this.focusService.findTabbableParent(this.getGui());return e?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(0===s){if(i>0){const e=ra(this.visibleColsService.getAllCols());if(this.focusService.focusGridView(e,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),s=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(ra(i),!0);const e=ra(s);if(this.focusService.focusGridView(e,!0))return!0}if(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(s[0]))return!0;for(let e=1;e<i.length;e++)if(this.focusService.focusInto(i[e].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(-1===s||i<0||i>=t.length)return;const n=t[i];n.setAllowFocus?.(!0),setTimeout((()=>{n.setAllowFocus?.(!1)}))}getNextFocusableIndex(e,t){const i=Br(this.gos),s=e.findIndex((e=>e.getGui().contains(i)));return{indexWithFocus:s,nextIndex:s+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},dm={version:au,moduleName:"@ag-grid-community/aligned-grid",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t="function"===typeof e;"function"===typeof e&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map((e=>{if(!e)return sr("alignedGrids contains an undefined option."),t||sr('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void sr(i());if(this.isGridApi(e))return e;const s=e;return"current"in s?s.current?.api:(s.api||sr(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),s.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:e=>{let{event:t}=e;return this.onColumnEvent(t)},alignedGridScroll:e=>{let{event:t}=e;return this.onScrollEvent(t)}})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent((()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach((e=>{i.push(t(e))})):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,(e=>e))}getColumnIds(e){return this.extractDataFromEvent(e,(e=>e.getColId()))}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":ir("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach((e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:o,ctrlsService:r}=this;switch(e.type){case"columnMoved":{const t=e.api.getColumnState().map((e=>({colId:e.colId})));n.applyColumnState({state:t,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const t=e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})));n.applyColumnState({state:t},"alignedGridChanged")}break;case"columnPinned":{const t=e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})));n.applyColumnState({state:t},"alignedGridChanged")}break;case"columnResized":{const t=e,i={};s.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),t.flexColumns?.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),o.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const a=r.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",a)}))}}]};var um={version:au,moduleName:"@ag-grid-community/data-type",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Ja(e.source))}))}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=e=>t=>{const{column:i,node:s,value:n}=t;let o=i.getColDef().valueFormatter;return o===e.groupSafeValueFormatter&&(o=e.valueFormatter),this.valueService.formatValue(i,s,n,o)};Object.entries(e).forEach((e=>{let[i,s]=e;const n={...s,groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)};this.dataTypeDefinitions[i]=n,this.formatValueFuncs[i]=t(n)}));const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach((s=>{let[n,o]=s;const r=this.processDataTypeDefinition(o,i,[n],e);r&&(this.dataTypeDefinitions[n]=r,o.dataTypeMatcher&&(this.dataTypeMatchers[n]=o.dataTypeMatcher),this.formatValueFuncs[n]=t(r))})),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach((t=>{const i=this.dataTypeMatchers[t];i&&delete this.dataTypeMatchers[t],this.dataTypeMatchers[t]=i??e[t].dataTypeMatcher}))}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Pa(e.columnTypes),...Pa(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=s[o];const r=t[o];if(i&&r&&(i=r),!this.validateDataTypeDefinition(e,i,o))return;n=this.mergeDataTypeDefinitions(i,e)}else{if(i.includes(o))return void ir('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const r=t[o];if(!this.validateDataTypeDefinition(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],s);if(!a)return;n=this.mergeDataTypeDefinitions(a,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType===e.baseDataType||(ir('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(ir(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){const i=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(i){if("first"===i||"last"===i)return e.valueFormatter(t);if("number"===e.baseDataType&&"count"!==i){if("number"===typeof t.value)return e.valueFormatter(t);if("object"===typeof t.value){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||"groupRows"===this.gos.get("groupDisplayType"))&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&"string"===typeof t.value&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(void 0===s&&(s=e.cellDataType),null!=s&&!0!==s||(s=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(n,i)),!s)return void(e.cellDataType=!1);const o=this.dataTypeDefinitions[s];if(o)return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,o,i),o.columnTypes;ir(`Missing data type definition - "${s}"`)}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){if(!xr(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=null===t.type?e.type:t.type;if(s){const e=this.gos.get("columnTypes")??{};if(Pa(s).some((t=>{const s=e[t.trim()];return s&&this.doColDefPropsPreventInference(s,i)})))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((i=>{let[s,n]=i;return this.doesColDefPropPreventInference(e,t,s,n)}))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return null===n?(t[i]=!1,!1):void 0===s?!!n:n===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=Va(s,e,t)}else this.initWaitForRowData(t);if(null==i)return;const[n]=Object.entries(this.dataTypeMatchers).find((e=>{let[t,s]=e;return s(i)}))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach((e=>{let[o,r]=e;const a=this.columnModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const e=this.getUpdatedColumnState(a,r);e.rowGroup&&null==e.rowGroupIndex&&(s[o]=e),e.pivot&&null==e.pivotIndex&&(n[o]=e),i.push(e)}})),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(null==t)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!i||i(t)}validateColDef(e){const t=e=>ir(`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`);"object"===e.cellDataType&&(e.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){const n=this.formatValueFuncs[t];switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===rh.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=n;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.columnModel.getColDefCol(s),o=i?.getColDef();if(!i||!o)return 0;const r=null==e?"":n({column:i,node:null,value:e}),a=null==t?"":n({column:i,node:null,value:t});return r===a?0:r>a?1:-1},e.keyCreator=n}this.filterManager?.setColDefPropertiesForDataType(e,i,n)}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>""===e.newValue?.trim?.()?null:Number(e.newValue),valueFormatter:e=>null==e.value?"":"number"!==typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:mr(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>null==e.newValue?e.newValue:""===e.newValue?.trim?.()?null:"true"===String(e.newValue).toLowerCase(),valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:{baseDataType:"date",valueParser:e=>Yd(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?Ud(e.value,!1)??"":t("invalidDate","Invalid Date"),dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>Yd(e)??void 0,dateFormatter:e=>Ud(e??null,!1)??void 0,valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"===typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>mr(e.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}]};var pm={version:au,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;null===i?s.removeAttribute(n):s.setAttribute(n,i)},refreshCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e=>ir(`Since v31.1 api.flashCells parameter '${e}Delay' is deprecated. Please use '${e}Duration' instead.`);ur(t.fadeDelay)&&i("fade"),ur(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.flashCells(t)))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},isAnimationFrameQueueEmpty:function(e){return e.animationFrameService.isQueueEmpty()},flushAllAnimationFrames:function(e){e.animationFrameService.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:kr(e.gos),headerHeight:e.columnModel.getHeaderHeight()}},getCellRendererInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.rowRenderer.getCellRendererInstances(t).map($h)}}};function gm(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,o=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(pr(o))return null;const r=e.valueService.getValueForDisplay(o,s);if(n){return e.valueService.formatValue(o,s,r)??dl(r,!0)}return r}function mm(e,t){e.gos.updateGridOptions({options:t})}function fm(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function vm(e){return e.rowRenderer.getLastVirtualRenderedRow()}var ym={version:au,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},setRowNodeExpanded:function(e,t,i,s,n){e.expansionService.setRowNodeExpanded(t,i,s,n)},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRow:function(e){return fm(e)},getFirstDisplayedRowIndex:fm,getLastDisplayedRow:function(e){return vm(e)},getLastDisplayedRowIndex:vm,getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()},getModel:function(e){return e.rowModel}}},Cm={version:au,moduleName:"@ag-grid-community/api",dependantModules:[{version:au,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:function(e){return e.context.getGridId()},destroy:function(e){e.gridDestroyService.destroy()},isDestroyed:function(e){return e.gridDestroyService.isDestroyCalled()},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){mm(e,{[t]:i})},updateGridOptions:mm}},{version:au,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:function(e){return e.pinnedRowModel.getPinnedTopRowCount()},getPinnedBottomRowCount:function(e){return e.pinnedRowModel.getPinnedBottomRowCount()},getPinnedTopRow:function(e,t){return e.pinnedRowModel.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}}},{version:au,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:function(e,t){if(!t.nodes.every((e=>e.rowPinned?(ir("cannot select pinned rows"),!1):void 0!==e.id||(ir("cannot select node until id for node is known"),!1))))return;const{nodes:i,source:s,newValue:n}=t,o=i;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:n})},selectAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAll";e.selectionService.selectAllRowNodes({source:t})},deselectAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAll";e.selectionService.deselectAllRowNodes({source:t})},selectAllFiltered:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},deselectAllFiltered:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},selectAllOnCurrentPage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},deselectAllOnCurrentPage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},getSelectedNodes:function(e){return e.selectionService.getSelectedNodes()},getSelectedRows:function(e){return e.selectionService.getSelectedRows()}}},{version:au,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:function(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null},getColumnDefs:function(e){return e.columnModel.getColumnDefs()},sizeColumnsToFit:function(e,t){"number"===typeof t?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)},setColumnGroupOpened:function(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")},getColumnGroup:function(e,t,i){return e.visibleColsService.getColumnGroup(t,i)},getProvidedColumnGroup:function(e,t){return e.columnModel.getProvidedColGroup(t)},getDisplayNameForColumn:function(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""},getDisplayNameForColumnGroup:function(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""},getColumn:function(e,t){return e.columnModel.getColDefCol(t)},getColumns:function(e){return e.columnModel.getColDefCols()},applyColumnState:function(e,t){return e.columnApplyStateService.applyColumnState(t,"api")},getColumnState:function(e){return e.columnGetStateService.getColumnState()},resetColumnState:function(e){e.columnApplyStateService.resetColumnState("api")},getColumnGroupState:function(e){return e.columnGroupStateService.getColumnGroupState()},setColumnGroupState:function(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")},resetColumnGroupState:function(e){e.columnGroupStateService.resetColumnGroupState("api")},isPinning:function(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()},isPinningLeft:function(e){return e.visibleColsService.isPinningLeft()},isPinningRight:function(e){return e.visibleColsService.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleColsService.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleColsService.getColBefore(t)},setColumnVisible:function(e,t,i){e.columnModel.setColsVisible([t],i,"api")},setColumnsVisible:function(e,t,i){e.columnModel.setColsVisible(t,i,"api")},setColumnPinned:function(e,t,i){e.columnModel.setColsPinned([t],i,"api")},setColumnsPinned:function(e,t,i){e.columnModel.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.columnModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleColsService.getLeftCols()},getDisplayedCenterColumns:function(e){return e.visibleColsService.getCenterCols()},getDisplayedRightColumns:function(e){return e.visibleColsService.getRightCols()},getAllDisplayedColumns:function(e){return e.visibleColsService.getAllCols()},getAllDisplayedVirtualColumns:function(e){return e.columnViewportService.getViewportColumns()},moveColumn:function(e,t,i){e.columnMoveService.moveColumns([t],i,"api")},moveColumnByIndex:function(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){e.columnMoveService.moveColumns(t,i,"api")},setColumnWidth:function(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"api";e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,n)},setColumnWidths:function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";e.columnSizeService.setColumnWidths(t,!1,i,s)},getLeftDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeLeft()},getCenterDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeCenter()},getRightDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeRight()},getAllDisplayedColumnGroups:function(e){return e.visibleColsService.getAllTrees()},autoSizeColumn:function(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})},autoSizeColumns:function(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},autoSizeAllColumns:function(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}}},ym,{version:au,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:function(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)},removeRowDropZone:function(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)},getRowDropZoneParams:function(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}}},{version:au,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()},ensureColumnVisible:rg,ensureIndexVisible:ag,ensureNodeVisible:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}}},{version:au,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:function(e){e.overlayService.showLoadingOverlay()},showNoRowsOverlay:function(e){e.overlayService.showNoRowsOverlay()},hideOverlay:function(e){e.overlayService.hideOverlay()}}},{version:au,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:function(e){return e.focusService.getFocusedCell()},clearFocusedCell:function(e){return e.focusService.clearFocusedCell()},setFocusedCell:function(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})},tabToNextCell:function(e,t){return e.navigationService.tabToNextCell(!1,t)},tabToPreviousCell:function(e,t){return e.navigationService.tabToNextCell(!0,t)}}},{version:au,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:function(e,t,i){e.apiEventService.addEventListener(t,i)},addGlobalListener:function(e,t){e.apiEventService.addGlobalListener(t)},removeEventListener:function(e,t,i){e.apiEventService.removeEventListener(t,i)},removeGlobalListener:function(e,t){e.apiEventService.removeGlobalListener(t)}}},pm,{version:au,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:function(e){e.valueCache.expire()},getValue:function(e,t,i){return gm(e,{colKey:t,rowNode:i})},getCellValue:gm}},{version:au,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:function(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:function(e,t,i){let s=e.columnModel.getCol(t);s||(s=e.columnModel.getColDefCol(t)),s?e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"}):sr(`column '${t}' not found`)},showColumnMenu:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showColumnMenu({column:i,positionBy:"auto"}):sr(`column '${t}' not found`)},hidePopupMenu:function(e){e.menuService.hidePopupMenu()}}},{version:au,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:function(e){e.sortController.onSortChanged("api")}}}]};function bm(e){if((e={...e}).version||(e.version="32.1.0"),"32.1.0"===e.version)e=function(e){return e.cellSelection=function(e,t){if(e&&"object"===typeof e)return e[t]}(e,"rangeSelection"),e}(e);return e}var wm={version:au,moduleName:"@ag-grid-community/state-core",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=cr((()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=cr((()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),0),this.onRowSelectedDebounced=cr((()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=xr(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",au),this.ctrlsService.whenReady(this,(()=>this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnGridReady()))));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:t=>{let{source:i}=t;"gridInitializing"===i&&(e(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnColumnsInitialised())))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnRowCountReady()))},firstDataRendered:()=>{i?.(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnFirstDataRendered()))}})}getInitialState(){return bm(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&setTimeout((()=>{o()}))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:s}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!s?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();this.updateCachedState("rangeSelection",e),this.updateCachedState("cellSelection",e)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],o=[],r=[],a=[],l=[],c=[];let h=0;const d=this.columnGetStateService.getColumnState();for(let u=0;u<d.length;u++){const{colId:e,sort:p,sortIndex:g,rowGroup:m,rowGroupIndex:f,aggFunc:v,pivot:y,pivotIndex:C,pinned:b,hide:w,width:S,flex:x}=d[u];c.push(e),p&&(t[g??h++]={colId:e,sort:p}),m&&(i[f??0]=e),"string"===typeof v&&s.push({colId:e,aggFunc:v}),y&&(n[C??0]=e),b&&("right"===b?r:o).push(e),w&&a.push(e),(x||S)&&l.push({colId:e,flex:x??void 0,width:S})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:o.length||r.length?{leftColIds:o,rightColIds:r}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:o,columnVisibility:r,columnSizing:a,columnOrder:l,partialColumnState:c}=e,h={},d=e=>{let t=h[e];return t||(t={colId:e},h[e]=t,t)},u=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(((e,t)=>{let{colId:i,sort:s}=e;const n=d(i);n.sort=s,n.sortIndex=t})),u.sort=null,u.sortIndex=null),i&&(i.groupColIds.forEach(((e,t)=>{const i=d(e);i.rowGroup=!0,i.rowGroupIndex=t})),u.rowGroup=null,u.rowGroupIndex=null),s&&(s.aggregationModel.forEach((e=>{let{colId:t,aggFunc:i}=e;d(t).aggFunc=i})),u.aggFunc=null),n&&(n.pivotColIds.forEach(((e,t)=>{const i=d(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),u.pivot=null,u.pivotIndex=null),o&&(o.leftColIds.forEach((e=>{d(e).pinned="left"})),o.rightColIds.forEach((e=>{d(e).pinned="right"})),u.pinned=null),r&&(r.hiddenColIds.forEach((e=>{d(e).hide=!0})),u.hide=null),a&&(a.columnSizingModel.forEach((e=>{let{colId:t,flex:i,width:s}=e;const n=d(t);n.flex=i??null,n.width=s})),u.flex=null);const p=l?.orderedColIds,g=!!p?.length,m=g?p.map((e=>d(e))):Object.values(h);m.length&&(this.columnStates=m,this.columnApplyStateService.applyColumnState({state:m,applyOrder:g,defaultState:u},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,this.pivotResultColsService.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)this.pivotResultColsService.getPivotResultCol(e.colId)&&i.push(e);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach((e=>{let{groupId:i,open:s}=e;s&&t.push(i)})),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map((e=>{let{groupId:i}=e;const s=t.has(i);return s&&t.delete(i),{groupId:i,open:s}}));t.forEach((e=>{i.push({groupId:e,open:!0})})),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&0===Object.keys(e).length&&(e=void 0);const t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&this.filterManager?.setFilterModel(i,"columnFilter"),s&&this.filterManager?.setAdvancedFilterModel(s)}getRangeSelectionState(){const e=this.rangeService?.getCellRanges().map((e=>{const{id:t,type:i,startRow:s,endRow:n,columns:o,startColumn:r}=e;return{id:t,type:i,startRow:s,endRow:n,colIds:o.map((e=>e.getColId())),startColId:r.getColId()}}));return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:s,visibleColsService:n}=this;if(!qr(t)||!i)return;const o=[];if(e.cellRanges.forEach((e=>{const t=[];if(e.colIds.forEach((e=>{const i=s.getCol(e);i&&t.push(i)})),!t.length)return;let i=s.getCol(e.startColId);if(!i){const e=n.getAllCols(),s=new Set(t);i=e.find((e=>s.has(e)))}o.push({...e,columns:t,startColumn:i})})),function(e){return void 0!==e.get("cellSelection")}(t)&&function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!==typeof t&&(t?.suppressMultiRanges??!1):e.get("suppressMultiRangeSelection")}(t)&&o.length>1)return ir("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();return e||t?{page:e,pageSize:t}:void 0}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),"number"===typeof e.page&&this.paginationService.setPage(e.page))}getRowSelectionState(){const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(!1===e.selectAll||!1===e.selectAllChildren)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach((e=>{let[t,s]=e;Cr(s,this.cachedState[t])||(i=!0)})),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),Cr(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}}]},Sm={version:au,moduleName:"@ag-grid-community/state",dependantModules:[wm,{version:au,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:function(e){return e.stateService?.getState()??{}}},dependantModules:[wm]}]};var xm="paginationPageSizeSelector",Mm={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Uc{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(xm,(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){cc(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(xm)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),s=!0!==this.gos.get(xm);ir(`'paginationPageSize=${t}'${i?"":" (default value)"}, but ${t} is not included in${s?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),s||ir(`Either set '${xm}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?(aa(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map((e=>({value:String(e)})))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new xd).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(s).onValueChange((()=>this.handlePageSizeItemSelected())),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(xm);return!Array.isArray(t)||gr(t)?e:[...t].sort(((e,t)=>e-t))}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},Dm={selector:"AG-PAGINATION",component:class extends Rg{constructor(){super(),this.btFirst=_c,this.btPrevious=_c,this.btNext=_c,this.btLast=_c,this.lbRecordCount=_c,this.lbFirstRowOnPage=_c,this.lbLastRowOnPage=_c,this.lbCurrent=_c,this.lbTotal=_c,this.pageSizeComp=_c,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Mm]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",Yc(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Yc(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Yc(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",Yc(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):this.focusService.focusGridInnerElement(e)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){var e,t,i;this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==rh.ENTER&&e.key!==rh.SPACE||(e.preventDefault(),i())}})})),e=this,t=this.getGui(),i=this.focusService,e.addManagedElementListeners(t,{keydown:e=>{if(!e.defaultPrevented&&e.key===rh.TAB){const s=e.shiftKey;i.findNextFocusableElement(t,!1,s)||i.focusNextGridCoreContainer(s)&&e.preventDefault()}}}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}const i=this.localeService.getLocaleTextFunc();return _d(e,i("thousandSeparator",","),i("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),r=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-to">${i}</span>\n                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-of">${s}</span>\n                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-${l}-start-page">${t}</span>\n                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${l}-of-page">${s}</span>\n                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){!function(e,t){Ll(e,"disabled",t)}(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),s=e?i:null;if(1===s){const e=this.rowModel.getRow(0);if(e&&e.group&&!(e.groupData||e.aggData))return void this.setTotalLabelsToZero()}const n=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*n+1,a=r+o-1,e&&a>s&&(a=s));const l=!e&&i<r+o-1,c=this.formatNumber(r);let h;this.lbFirstRowOnPage.textContent=c;const d=this.localeService.getLocaleTextFunc();h=l?d("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=h;const u=t>0?n+1:0,p=this.formatNumber(u);let g,m;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),m=this.formatNumber(s);else{const e=d("more","more");g=e,m=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=m,this.announceAriaStatus(c,h,m,p,g)}announceAriaStatus(e,t,i,s,n){const o=this.localeService.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,h=`${r} ${s} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),h!==this.ariaPageStatus&&(this.ariaPageStatus=h,this.ariaAnnouncementService.announceValue(h,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}},Rm={version:au,moduleName:"@ag-grid-community/pagination-core",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Dm}isPaginateChildRows(){return!(!this.gos.get("groupRemoveSingleChildren")&&!this.gos.get("groupRemoveLowestSingleChildren"))||this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){this.active&&this.currentPage!==e&&"number"===typeof this.currentPage&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){if(!this.active)return!0;return this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ur(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:ur(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ur(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ur(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const e=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=e-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},class extends Sa{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const t=Math.max(kr(this.gos),1),i=Math.floor(e/t);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?cr((()=>t()),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}]},Em={version:au,moduleName:"@ag-grid-community/pagination",dependantModules:[Rm,{version:au,moduleName:"@ag-grid-community/pagination-api",dependantModules:[Rm],apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){return e.paginationService?.getPageSize()??100},paginationGetCurrentPage:function(e){return e.paginationService?.getCurrentPage()??0},paginationGetTotalPages:function(e){return e.paginationService?.getTotalPages()??1},paginationGetRowCount:function(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){e.paginationService?.goToNextPage()},paginationGoToPreviousPage:function(e){e.paginationService?.goToPreviousPage()},paginationGoToFirstPage:function(e){e.paginationService?.goToFirstPage()},paginationGoToLastPage:function(e){e.paginationService?.goToLastPage()},paginationGoToPage:function(e,t){e.paginationService?.goToPage(t)}}}]},Im="clientSide",Am="serverSide",km="infinite",Tm={onGroupExpandedOrCollapsed:[Im],refreshClientSideRowModel:[Im],isRowDataEmpty:[Im],forEachLeafNode:[Im],forEachNodeAfterFilter:[Im],forEachNodeAfterFilterAndSort:[Im],resetRowHeights:[Im],applyTransaction:[Im],applyTransactionAsync:[Im],flushAsyncTransactions:[Im],getBestCostNodeSelection:[Im],getServerSideSelectionState:[Am],setServerSideSelectionState:[Am],applyServerSideTransaction:[Am],applyServerSideTransactionAsync:[Am],applyServerSideRowData:[Am],retryServerSideLoads:[Am],flushServerSideAsyncTransactions:[Am],refreshServerSide:[Am],getServerSideGroupLevelState:[Am],refreshInfiniteCache:[km],purgeInfiniteCache:[km],getInfiniteRowCount:[km],isLastRowIndexKnown:[km,Am],expandAll:[Im,Am],collapseAll:[Im,Am],onRowHeightChanged:[Im,Am],setRowCount:[km,Am],getCacheBlockState:[km,Am]},Lm={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};var Pm=(e,t)=>{const i=t.rowModelType??"clientSide";return"clientSide"===i||"serverSide"===i?{module:"@ag-grid-enterprise/row-grouping"}:null},Fm={enableRowGroup:Pm,rowGroup:Pm,rowGroupIndex:Pm,enablePivot:Pm,enableValue:Pm,pivot:Pm,pivotIndex:Pm,aggFunc:Pm,cellEditor:e=>"agRichSelect"===e.cellEditor||"agRichSelectCellEditor"===e.cellEditor?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some((e=>t.includes(e)))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:()=>Nm},Nm={objectName:"colDef",allProperties:Object.keys({headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0}),docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:Fm},Om={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1};var Bm={version:au,moduleName:"@ag-grid-community/core"},Gm={version:au,moduleName:"@ag-grid-community/core-validations",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...Rl.ALL_PROPERTIES,...Il.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}},validations:{sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":{const t="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?t:null}}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"===typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},rowSelection:{validate(e){let{rowSelection:t}=e;return t&&"string"===typeof t?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':t&&"object"!==typeof t?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Nm,defaultColDef:()=>Nm,defaultColGroupDef:()=>Nm,autoGroupColumnDef:()=>Nm,selectionColumnDef:()=>Nm}})}validateApiFunction(e,t){return function(e,t,i){const s=Lm[e];if(s){const{version:i,new:n,old:o,message:r}=s,a=o??e;return function(){ir(`Since ${i} api.${a} is deprecated. ${n?`Please use ${n} instead. `:""}${r??""}`);for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return t.apply(t,s)}}const n=Tm[e];return n?function(){const s=i.rowModel.getType();if(n.includes(s)){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t.apply(t,r)}sr(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`)}:t}(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:a}=t;n&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...o??[],...Object.keys(s)],n,r,a);const l=new Set;Object.keys(e).forEach((t=>{const n=s[t];if(n)if("renamed"in n){const{renamed:i,version:s}=n;l.add(`As of v${s}, ${String(t)} is deprecated. Please use ${String(i)} instead.`),e[i]=e[t]}else{const{message:e,version:i}=n;l.add(`As of v${i}, ${String(t)} is deprecated. ${e??""}`)}const o=e[t];if(null==o||!1===o)return;const r=i[t];let a;if(!r)return;if("function"===typeof r){const i=r(e,this.gridOptions);if(!i)return;if("objectName"in i){const s=e[t];return Array.isArray(s)?void s.forEach((e=>{this.processOptions(e,i)})):void this.processOptions(e[t],i)}a=i}else a=r;const{module:c,dependencies:h,validate:d,supportedRowModels:u}=a;if(u){const e=this.gridOptions.rowModelType??"clientSide";if(!u.includes(e))return void l.add(`${String(t)} is not supported with the '${e}' row model.`)}if(c){const e=Array.isArray(c)?c:[c];let i=!0;if(e.forEach((e=>{this.gos.assertModuleRegistered(e,String(t))||(i=!1,l.add(`${String(t)} is only available when ${e} is loaded.`))})),!i)return}if(h){const i=this.checkForRequiredDependencies(t,h,e);if(i)return void l.add(i)}if(d){const t=d(e,this.gridOptions);if(t)return void l.add(t)}})),l.size>0&&l.forEach((e=>{ir(e)}))}checkForRequiredDependencies(e,t,i){const s=Object.entries(t).find((e=>{let[t,s]=e;const n=i[t];return!s.includes(n)}));if(!s)return null;const[n,o]=s;return o.length>1?`'${String(e)}' requires '${n}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${n}' to be ${o[0]}.`}checkProperties(e,t,i,s,n){const o=function(e,t,i){const s={},n=e.filter((e=>!t.some((t=>t===e))));n.length>0&&n.forEach((e=>s[e]=bh({inputValue:e,allSuggestions:i}).values));return s}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i);if(Oa(o,((e,t)=>{let n=`invalid ${s} property '${e}' did you mean any of these: ${t.slice(0,8).join(", ")}.`;i.includes("context")&&(n+=`\nIf you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),ir(n)})),Object.keys(o).length>0&&n){const e=this.getFrameworkOverrides().getDocLink(n);ir(`to see all the valid ${s} properties please check: ${e}`)}}}]},zm={version:au,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Bm,Gm,ug,xu,Sm,um,dm,Em,Cm]},jm=class extends Sa{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Vm=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Hm=new Map([...Rl.BOOLEAN_PROPERTIES.map((e=>[e,yr])),...Rl.NUMBER_PROPERTIES.map((e=>[e,Vd])),["groupAggFiltering",e=>"function"===typeof e?e:yr(e)],["pageSize",Hd(1)],["autoSizePadding",Hd(0)],["keepDetailRowsCount",Hd(1)],["rowBuffer",Hd(0)],["infiniteInitialRowCount",Hd(1)],["cacheOverflowSize",Hd(1)],["cacheBlockSize",Hd(1)],["serverSideInitialRowCount",Hd(1)],["viewportRowModelPageSize",Hd(1)],["viewportRowModelBufferSize",Hd(0)]]);function Wm(e,t){const i=Hm.get(e);return i?i(t):t}var _m=class e extends Sa{constructor(){super(...arguments),this.beanName="gos",this.gridReadyFired=!1,this.queueEvents=[],this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Qo,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const s=Vm.has(t);if(s&&!e||!s&&e)return;const n=(e,t)=>{const s=this.gridOptions[Il.getCallbackForEvent(e)];"function"===typeof s&&this.frameworkOverrides.wrapOutgoing((()=>s(i)))};if(this.gridReadyFired)n(t);else if("gridReady"===t){n(t),this.gridReadyFired=!0;for(const e of this.queueEvents)n(e.eventName,e.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.eGridDiv=e.eGridDiv,this.validationService=e.validationService,this.environment=e.environment,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??Om[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return ur(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>{const i=t;return i.api=this.api,i.context=this.gridOptionsContext,e(i)}}return e}updateGridOptions(t){let{options:i,force:s,source:n="api"}=t;const o={id:e.changeSetId++,properties:[]},r=[];Object.entries(i).forEach((e=>{let[t,i]=e;"api"===n&&Ml[t]&&ir(`${t} is an initial property and cannot be updated.`);const a=Wm(t,i),l=s||"object"===typeof a&&"api"===n,c=this.gridOptions[t];if(l||c!==a){this.gridOptions[t]=a;const e={type:t,currentValue:a,previousValue:c,changeSet:o,source:n};r.push(e)}})),this.validationService?.processGridOptions(this.gridOptions),o.properties=r.map((e=>e.type)),r.forEach((e=>{this.gridOptions.debug&&tr(`Updated property ${e.type} from`,e.previousValue," to ",e.currentValue),this.propertyEventService.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removePropertyEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(e){const t=e;return t.api=this.api,t.context=this.gridOptionsContext,t}assertModuleRegistered(e,t){return Yh.__assertRegistered(e,t,this.gridId)}isModuleRegistered(e){return Yh.__isRegistered(e,this.gridId)}};_m.changeSetId=0;var Um=_m,$m=class extends Sa{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(fl(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:n}=e;if("filter"!==this.getHeaderRowType(n)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[e.length-1-n]}const{column:o,headerRowIndex:r}=this.getHeaderIndexToFocus(i,n);return{column:o,headerRowIndex:r}}getHeaderIndexToFocus(e,t){let i;if(fl(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s="column"===i;let n="filter"===i?e:e.getParent(),o=t-1,r=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;n&&n.isPadding();)n=n.getParent(),o--;r=o,o<0&&(n=e,o=t,r=void 0)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:r}}getColumnVisibleChild(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"After";let s=e,n=t+1;const o=n;if("group"===this.getHeaderRowType(t)){const t=e.getDisplayedLeafColumns(),o="After"===i?t[0]:ra(t),r=[];let a=o;for(;a.getParent()!==e;)a=a.getParent(),r.push(a);if(s=o,o.isSpanHeaderHeight())for(let e=r.length-1;e>=0;e--){const t=r[e];if(!t.isPadding()){s=t;break}n++}else s=ra(r),s||(s=o)}return{column:s,headerRowIndex:n,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i["start"===t?0:i.length-1];if(!s)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()),o=n?.getRowType(e);if("group"==o){return{headerRowIndex:e,column:this.visibleColsService.getColGroupAtLevel(s,e)}}return{headerRowIndex:null==o?-1:e,column:s}}},Km=class extends Sa{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(t,i,s)=>e({key:t,defaultValue:i,variableValues:s});const t=this.gos.get("localeText");return(e,i,s)=>{let n=t&&t[e];if(n&&s&&s.length){let e=0;for(;!(e>=s.length);){if(-1===n.indexOf("${variable}"))break;n=n.replace("${variable}",s[e++])}}return n??i}}},Ym=class extends Sa{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Fa(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(e,t),s=Er(this.gos)&&!Vm.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){const i=this.frameworkEventWrappingService.unwrap(e,t),s=this.asyncEventListeners.get(e),n=!!s?.delete(i);n||this.syncEventListeners.get(e)?.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(Er(this.gos)){const i=(e,i)=>{Vm.has(e)&&t(e,i)},s=(e,i)=>{Vm.has(e)||t(e,i)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventService.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventService.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach((e=>{let{syncListener:t,asyncListener:i}=e;this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(i,!0)})),this.globalEventListenerPairs.clear()}},Zm=class extends Sa{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},qm=class extends Sa{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return pr(this.topRowBounds)||pr(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=ur(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Qm=class extends Sa{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=cr(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=Fr(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),zl(t,"polite"),Ll(t,"relevant","additions text"),function(e,t){Ll(e,"atomic",t)}(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout((()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)}),50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(cc(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},Xm=class extends Sa{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush((()=>this.activeNext=!1),(()=>this.active=!1))}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)}))}flush(e,t){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return e(),void t();const i=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e(),i(this.executeNextFuncs)}),0),window.setTimeout((()=>{t(),i(this.executeLaterFuncs)}),200)}))}},Jm=class extends Sa{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},ef=class extends Sa{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=xr(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.overlayWrapperComp}isExclusive(){return 1===this.state&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");(e||void 0===e&&!this.gos.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?ir("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead."):this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp)return void(this.state=0);let e=this.gos.get("loading");this.showInitialOverlay&&void 0===e&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?1!==this.state&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?2!==this.state&&this.doShowNoRowsOverlay():0!==this.state&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const s=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(2===this.state){const t=this.ctrlsService.get("gridHeaderCtrl");e=t?.getHeaderHeight()||0}else 0!==this.wrapperPadding&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},tf=class extends Sa{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return ur(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),pa(t,this.processClassesFromGridOptions(e.rowNode)),pa(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&t.push("ag-cell-last-left-pinned"),"right"===e.pinned&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=e=>{"string"===typeof e?t.push(e):Array.isArray(e)&&e.forEach((e=>t.push(e)))},s=this.gos.get("rowClass");if(s){if("function"===typeof s)return ir("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gos.getCallback("getRowClass");if(n){i(n({data:e.data,node:e,rowIndex:e.rowIndex}))}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,(e=>{t.push(e)}),(()=>{})),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},sf=class extends Sa{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==Ac)return Ac;if(!document.body)return-1;let e=1e6;const t=Pc()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=2*e;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),Ac=e,e}(),this.gos.get("debug")&&tr("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&tr(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},nf=class extends Sa{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Vr(this.gos),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=Vr(this.gos)))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let o=0,r=e.length;o<r;o++){const t=e[o],i="desc"===t.sort,r=this.getValue(s,t.column),a=this.getValue(n,t.column);let l;const c=this.getComparator(t,s);l=c?c(r,a,s,n,i):br(r,a,this.isAccentedSort);if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(null!=s)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.columnModel.getColDefCol(n);return o?o.getColDef().comparator:void 0}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if($r(this.gos,this.columnModel.isPivotActive())){const i=e.allLeafChildren?.[0];return i?this.valueService.getValue(t,i,!1,!1):void 0}const i=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());if(!i)return;return e.groupData?.[i.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:this.valueService.getValue(t,e,!1,!1)}},of=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}},rf=class extends Sa{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new wg,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=ta(e),this.groupSelectsChildren=na(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],(()=>{const t=na(e),i=ta(e);t===this.groupSelectsChildren&&i===this.rowSelectionMode||(this.groupSelectsChildren=t,this.rowSelectionMode=i,this.deselectAllRowNodes({source:"api"}))})),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return"multiRow"===this.rowSelectionMode}overrideSelectionValue(e,t){if(!(e=>"checkboxSelected"===e||"rowClicked"===e||"spaceKey"===e||"uiSelectAll"===e||"uiSelectAllCurrentPage"===e||"uiSelectAllFiltered"===e)(t))return e;const i=this.selectionCtx.getRoot();return!i||(i.isSelected()??!1)}setNodesSelected(e){const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:n,nodes:o,event:r,source:a}=e;if(0===o.length)return 0;if(o.length>1&&!this.isMultiSelect())return ir("cannot multi select unless selection mode is 'multiRow'"),0;const l=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,c=o.map((e=>e.footer?e.sibling:e));if(n){if(c.length>1)return ir("cannot range select while selecting multiple rows"),0;const e=c[0],i=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(e)){const t=this.selectionCtx.truncate(e);return i&&this.selectRange(t.discard,!1,a),this.selectRange(t.keep,i,a)}if(this.selectionCtx.getRoot()!==e){const t=this.selectionCtx.extend(e,this.groupSelectsChildren);return i&&this.selectRange(t.discard,!1,a),this.selectRange(t.keep,i,a)}}else;}s||this.selectionCtx.setRoot(c[0]);let h=0;for(let d=0;d<c.length;d++){const e=c[d];if(!(l&&e.group)){e.selectThisNode(t,r,a)&&h++}this.groupSelectsChildren&&e.childrenAfterGroup?.length&&(h+=this.selectChildren(e,t,l,a))}if(!s){t&&(i||!this.isMultiSelect())&&(h+=this.clearOtherNodes(c[0],a)),h>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))}return h}selectRange(e,t,i){let s=0;return e.forEach((e=>{if(e.group&&this.groupSelectsChildren)return;e.selectThisNode(t,void 0,i)&&s++})),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return pr(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach((t=>{t&&e.push(t)})),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>{t&&t.data&&e.push(t.data)})),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,s)=>{i&&e(i)&&t.set(s,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren)return!1;if(!xr(this.gos))return!1;const i=this.rowModel.getRootNode();t||(t=new of(!0,i)).setInactive();let s=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==i){const i=t.calculateSelectedFromChildren();s=t.selectThisNode(null!==i&&i,void 0,e)||s}})),s}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach((n=>{if(n&&n.id!==e.id){const e=this.selectedNodes.get(n.id);s+=e.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}})),i.forEach((e=>{const i=e.calculateSelectedFromChildren();e.selectThisNode(null!==i&&i,void 0,t)})),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(ur(t)&&e.id!==t.id&&t){const i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!xr(this.gos))return;const e=this.rowModel.getTopLevelNodes();if(null===e)return;const t=[];return function e(i){for(let s=0,n=i.length;s<n;s++){const n=i[s];if(n.isSelected())t.push(n);else{const t=n;t.group&&t.children&&e(t.children)}}}(e),t}isEmpty(){let e=0;return this.selectedNodes.forEach((t=>{t&&e++})),0===e}deselectAllRowNodes(e){const t=e=>e.selectThisNode(!1,void 0,s),i=xr(this.gos),{source:s,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!i)return void sr("selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(n,o).forEach(t)}else this.selectedNodes.forEach((e=>{e&&t(e)})),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;return this.getNodesToSelect(e,t).forEach((e=>{this.groupSelectsChildren&&e.group||(e.isSelected()?i++:e.selectable&&s++)})),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return(0!==i||0!==s)&&(i>0&&s>0?null:i>0)}hasNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getNodesToSelect(e,t).filter((e=>e.selectable)).length>0}getNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded)this.groupSelectsChildren||i.push(e);else{const t=e=>{i.push(e),e.childrenAfterFilter?.length&&e.childrenAfterFilter.forEach(t)};t(e)}else i.push(e)})),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter((e=>{i.push(e)})),i):(s.forEachNode((e=>{i.push(e)})),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const t=this.rowModel.getRow(s);t&&e(t)}}selectAllRowNodes(e){if("string"!==typeof this.gos.get("rowSelection")&&!ia(this.gos))return ir("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:s}=e,n=this.getNodesToSelect(i,s);n.forEach((e=>e.selectThisNode(!0,void 0,t))),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(ra(n)??null),xr(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{t?.id&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return sr("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),s=[];this.rowModel.forEachNode((e=>{i.has(e.id)&&s.push(e)})),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!xr(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},af=class extends Sa{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],(()=>this.updateSelectable()))}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{gos:t}=this,i=Rr(t),s=ea(t);if(!i||!s)return;const n=na(t),o=xr(t)&&n,r=[],a=t=>{if(e&&!t.group)return;if(o&&t.group){const e=t.childrenAfterGroup.some((e=>!0===e.selectable));return void t.setRowSelectable(e,!0)}const i=s?.(t)??!0;t.setRowSelectable(i,!0),!i&&t.isSelected()&&r.push(t)};if(o){const e=this.rowModel;new of(!1,e.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof rf&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},lf=["asc","desc",null],cf=class extends Sa{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){"asc"!==t&&"desc"!==t&&(t=null);let n=[e];if(Vr(this.gos)&&e.getColDef().showRowGroup){const t=this.funcColsService.getSourceColumnsForGroupColumn(e),i=t?.filter((e=>e.isSortable()));i&&(n=[e,...i])}n.forEach((e=>e.setSort(t,s)));const o=[];if(!((i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(n,s);o.push(...e)}this.updateSortIndex(e),o.push(...n),this.dispatchSortChangedEvents(s,o)}updateSortIndex(e){const t=Vr(this.gos),i=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach((e=>e.setSortIndex(null)));const o=n.filter((e=>(!t||!e.getColDef().showRowGroup)&&e!==s));(s.getSort()?[...o,s]:o).forEach(((e,t)=>{e.setSortIndex(t)}))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach((s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))})),i}getNextSortDirection(e){let t;if(t=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gos.get("sortingOrder")?this.gos.get("sortingOrder"):lf,!Array.isArray(t)||t.length<=0)return ir(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let o;return o=s||n?t[0]:t[i+1],lf.indexOf(o)<0?(ir("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));if(this.columnModel.isPivotMode()){const t=Vr(this.gos);e=e.filter((e=>{const i=!!e.getAggFunc(),s=!e.isPrimary(),n=t?this.showRowGroupColsService?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return i||s||n}))}const t=this.funcColsService.getRowGroupColumns().filter((e=>!!e.getSort())),i={};e.forEach(((e,t)=>i[e.getId()]=t)),e.sort(((e,t)=>{const s=e.getSortIndex(),n=t.getSortIndex();if(null!=s&&null!=n)return s-n;if(null==s&&null==n){return i[e.getId()]>i[t.getId()]?1:-1}return null==n?-1:1}));const s=Vr(this.gos)&&!!t.length;s&&(e=[...new Set(e.map((e=>this.showRowGroupColsService?.getShowRowGroupCol(e.getId())??e)))]);const n=new Map;return e.forEach(((e,t)=>n.set(e,t))),s&&t.forEach((e=>{const t=this.showRowGroupColsService.getShowRowGroupCol(e.getId());n.set(e,n.get(t))})),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(((e,t)=>{let[i,s]=e,[n,o]=t;return s-o})).map((e=>{let[t]=e;return t}))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=Vr(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every((e=>e.getSort()==s))?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},hf=class extends Sa{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.ctrlsService.whenReady(this,(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&tr(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.columnModel.setColumnDefs(t,Ja(e.source))}},df=class extends Sa{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){xr(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),n=new of(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst((e=>{i.push(e)}))}this.rowRenderer.refreshCells({rowNodes:i})}},uf=class extends Sa{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);sr("value should be either a string or a function",e)}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(mK){return tr("Processing of the expression failed"),tr("Expression = ",e),tr("Params = ",t),tr("Exception = ",mK),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},pf=class extends Sa{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}},gf=class extends Sa{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=Mr(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e),t=Er(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc((()=>this.eventService.removeEventListener("cellValueChanged",e,t))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!i,n=this.gos.get("groupSuppressBlankHeader");if(!s||n)return this.getValue(e,t);let o=!1;const r=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");if("function"!==typeof r)o=!!r;else{o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this})}const a=s&&o;return this.getValue(e,t,!1,a)}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;let l;const c=t.groupData&&void 0!==t.groupData[r],h=!s&&t.aggData&&void 0!==t.aggData[r],d=this.isSsrm&&s&&!!e.getColDef().aggFunc,u=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?l=this.executeFilterValueGetter(n.filterValueGetter,a,e,t):this.isTreeData&&h?l=t.aggData[r]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&o&&a?l=Va(a,o,e.isFieldContainsDots()):c?l=t.groupData[r]:h?l=t.aggData[r]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):u?l=Va(a,t.field,e.isFieldContainsDots()):o&&a&&!d&&(l=Va(a,o,e.isFieldContainsDots())),this.cellExpressions&&"string"===typeof l&&0===l.indexOf("=")){const i=l.substring(1);l=this.executeValueGetter(i,a,e,t)}if(null==l){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return l}parseValue(e,t,i,s){const n=e.getColDef(),o=n.valueParser;if(ur(o)){const r=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:s,newValue:i,colDef:n,column:e});return"function"===typeof o?o(r):this.expressionService.evaluate(o,r)}return i}getDeleteValue(e,t){return ur(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,s){let n,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=null;const a=e.getColDef();if(s?n=s:o&&(n=a.valueFormatter),n){const s=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});r="function"===typeof n?n(s):this.expressionService.evaluate(n,s)}else if(a.refData)return a.refData[i]||"";return null==r&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let s=e.parent;for(;null!=s;){if(s.rowGroupColumn&&(!0===i||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,s){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;pr(e.data)&&(e.data={});const{field:o,valueSetter:r}=n.getColDef();if(pr(o)&&pr(r))return ir("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return ir("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});let l;if(a.newValue=i,l=ur(r)?"function"===typeof r?r(a):this.expressionService.evaluate(r,a):this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),void 0===l&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const c=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.getFrameworkOverrides().wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(s){const s=t.split(".");let o=e;for(;s.length>0&&o;){const e=s.shift();0===s.length?(n=o[e]===i,n||(o[e]=i)):o=o[e]}}else n=e[t]===i,n||(e[t]=i);return!n}executeFilterValueGetter(e,t,i,s){const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return"function"===typeof e?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),o=this.valueCache.getValue(s,n);if(void 0!==o)return o;const r=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return a="function"===typeof e?e(r):this.expressionService.evaluate(e,r),this.valueCache.setValue(s,n,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){n=s(this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof n||null==n||(n=String(n),"[object Object]"===n&&ir("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},mf=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return t;let i={};return ja(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?ja(i,t,!0,!0):i={...i,...t},e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&ja(t.context,i.context,!0,!0),i.context=t.context),i}};mf.gridOptions=void 0,mf.mergeStrategy="shallow";var ff=mf;var vf=1,yf=class{create(e,t,i,s,n){const o=function(e){const t={};return Object.entries(e).forEach((e=>{let[i,s]=e;const n=Wm(i,s);t[i]=n})),t}(ff.applyGlobalGridOptions(t)),r=o.gridId??String(vf++),a=this.getRegisteredModules(n,r),l=this.createBeansList(o.rowModelType,a,r),c=this.createProvidedBeans(e,o,n);if(!l)return void sr("Failed to create grid.");const h=new qh({providedBeanInstances:c,beanClasses:l,gridId:r,beanInitComparator:Kg,beanDestroyComparator:Yg,derivedBeans:[Gg]});return this.registerModuleUserComponents(h,a),this.registerControllers(h,a),this.registerModuleApiFunctions(h,a),i(h),h.getBean("syncService").start(),s&&s(h),h.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach((e=>{e.controllers&&e.controllers.forEach((e=>i.register(e)))}))}getRegisteredModules(e,t){const i=e?e.modules:null,s=Yh.__getRegisteredModules(t),n=[],o={},r=(e,t,i)=>{var s;o[(s=t).moduleName]||(o[s.moduleName]=!0,n.push(s),Yh.__register(s,e,i)),t.dependantModules&&t.dependantModules.forEach((t=>r(e,t,i)))};return r(!!i?.length||!Yh.__isPackageBased(),zm,void 0),i&&i.forEach((e=>r(!0,e,t))),s&&s.forEach((e=>r(!Yh.__isPackageBased(),e,void 0))),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,(e=>e.userComponents?e.userComponents:[])),s=e.getBean("userComponentRegistry");i.forEach((e=>{let{name:t,classImp:i,params:n}=e;s.registerDefaultComponent(t,i,n)}))}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach((e=>{const t=e.apiFunctions;if(t){Object.keys(t).forEach((e=>{i?.addFunction(e,t[e])}))}}))}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;pr(s)&&(s=new kg);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clientSide",t=arguments.length>2?arguments[2]:void 0;const i=(arguments.length>1?arguments[1]:void 0).filter((t=>!t.rowModel||t.rowModel===e)),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e])return void sr("Could not find row model for rowModelType = ",e);if(!Yh.__assertRegistered(s[e],`rowModelType = '${e}'`,t))return;const n=[Jg,Qg,$m,jm,Bg,Sh,_g,Ug,_p,Uh,sf,Hp,Km,vg,td,Cl,rm,Um,Ig,rf,Xa,Du,qm,Zm,mg,uf,qa,Vp,pf,gf,pg,Wp,Xh,lm,jp,sm,Tg,Sg,Bp,cf,Jm,Xm,af,df,Up,zg,tf,nf,qg,cm,Xg,Zg,hf,ef,$p,Ym,Qm,Kp,ol,jg,al,sl,Vg,Hg,gl,nl,ul,Wg,pl,Ra],o=this.extractModuleEntity(i,(e=>e.beans?e.beans:[]));n.push(...o);const r=[];return n.forEach((e=>{r.indexOf(e)<0&&r.push(e)})),r}extractModuleEntity(e,t){return[].concat(...e.map(t))}},Cf=class extends Sa{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};var bf={version:au,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:function(e){e.expansionService.expandAll(!0)},collapseAll:function(e){e.expansionService.expandAll(!1)},onRowHeightChanged:function(e){const t=e.rowModelHelperService?.getClientSideRowModel(),i=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}}},wf={version:au,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:function(e,t,i){const s=e.rowModelHelperService?.getServerSideRowModel();if(s)return e.funcColsService.isRowGroupEmpty()?void s.setRowCount(t,i):void sr("setRowCount cannot be used while using row grouping.");const n=e.rowModelHelperService?.getInfiniteRowModel();n&&n.setRowCount(t,i)},getCacheBlockState:function(e){return e.rowNodeBlockLoader?.getBlockState()??{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}},Sf=class{wrap(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const n=this.createWrapper(e,s);return t.forEach((e=>{this.createMethod(n,e,!0)})),i.forEach((e=>{this.createMethod(n,e,!1)})),n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&ir("Framework component is missing the method "+t+"()"),null)}}},xf=class{};xf.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},xf.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],xf.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Mf="undefined"===typeof global?{}:global;Mf.HTMLElement="undefined"===typeof HTMLElement?{}:HTMLElement,Mf.HTMLButtonElement="undefined"===typeof HTMLButtonElement?{}:HTMLButtonElement,Mf.HTMLSelectElement="undefined"===typeof HTMLSelectElement?{}:HTMLSelectElement,Mf.HTMLInputElement="undefined"===typeof HTMLInputElement?{}:HTMLInputElement,Mf.Node="undefined"===typeof Node?{}:Node,Mf.MouseEvent="undefined"===typeof MouseEvent?{}:MouseEvent;var Df=class{constructor(e,t,i,s,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id="ROOT_NODE_ID",this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return Ba(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if("string"===typeof e)return void ir("rowData must be an array.");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(((e,t)=>this.createNode(e,this.rootNode,0,t))):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=t?.length??0,s=new Map;let n=-1,o=-1;for(let r=0;r<i;++r){const i=t[r],a=i.data;a!==e[r]&&(o<0&&(n=r),o=r,s.set(a,i))}if(n<0)return!1;for(let r=n;r<=o;++r){const i=s.get(e[r]);void 0!==i&&(t[r]=i,i.sourceRowIndex=r)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(gr(i))return;const s=this.rootNode.allLeafChildren;let n=s.length;if("number"===typeof e.addIndex&&(n=this.sanitizeAddIndex(e.addIndex),n>0)){if(this.gos.get("treeData"))for(let e=0;e<s.length;e++){const t=s[e];if(t?.rowIndex==n-1){n=e+1;break}}}const o=i.map(((e,t)=>this.createNode(e,this.rootNode,0,n+t)));if(n<s.length){const e=s.slice(0,n),i=s.slice(n,s.length),r=e.length+o.length;for(let t=0,s=i.length;t<s;++t)i[t].sourceRowIndex=r+t;this.rootNode.allLeafChildren=[...e,...o,...i],t.rowsInserted=!0}else this.rootNode.allLeafChildren=s.concat(o);const r=this.rootNode.sibling;r&&(r.allLeafChildren=s),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,t,i){let{rowNodeTransaction:s}=t;const{remove:n}=e;if(gr(n))return;const o={};n.forEach((e=>{const t=this.lookupRowNode(e);t&&(t.isSelected()&&i.push(t),t.clearRowTopAndRowIndex(),o[t.id]=!0,delete this.allNodesMap[t.id],s.remove.push(t))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter((e=>!o[e.id]))??null,this.rootNode.allLeafChildren?.forEach(((e,t)=>{e.sourceRowIndex=t}));const r=this.rootNode.sibling;r&&(r.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,i){let{rowNodeTransaction:s}=t;const{update:n}=e;gr(n)||n.forEach((e=>{const t=this.lookupRowNode(e);t&&(t.updateData(e),!t.selectable&&t.isSelected()&&i.push(t),this.setMasterForRow(t,e,0,!1),s.update.push(t))}))}lookupRowNode(e){const t=Kr(this.gos);let i;if(t){const s=t({data:e,level:0});if(i=this.allNodesMap[s],!i)return sr(`could not find row id=${s}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren?.find((t=>t.data===e)),!i)return sr("could not find data item as object was not found",e),sr("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,s){const n=new ld(this.beans);return n.sourceRowIndex=s,n.group=!1,this.setMasterForRow(n,e,i,!0),t&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&ir(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const i=this.gos.get("isRowMaster");i?e.setMaster(i(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const t=this.funcColsService.getRowGroupColumns(),s=i+(t?t.length:0);e.expanded=!!e.master&&this.isExpanded(s)}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return-1===t||e<t}};var Rf="32.3.8",Ef={version:Rf,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=cr(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new ld(this.beans),this.nodeManager=new Df(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),r=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...s,...s,...n,...o,...r,...a];this.addManagedPropertyListeners(l,(l=>{const c=l.changeSet?.properties;if(!c)return;const h=e=>c.some((t=>e.has(t)));h(e)?this.setRowData(this.rootNode.allLeafChildren.map((e=>e.data))):h(t)?this.refreshModel({step:"group"}):h(i)?this.refreshModel({step:"filter"}):h(s)?this.refreshModel({step:"pivot"}):h(n)?this.refreshModel({step:"aggregate"}):h(o)?this.refreshModel({step:"sort"}):h(r)?this.refreshModel({step:"filter_aggregates"}):h(a)&&this.refreshModel({step:"map"})})),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,o=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),c=Math.min(a,s);for(let e=l;e<=c;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=Ar(this.gos,t);t.setRowHeight(e.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=Dr(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){const o=this.rowsToDisplay[n];if(null!=o.id&&i.add(o.id),null==o.rowHeight){const t=Ar(this.gos,o,s,e);o.setRowHeight(t.height,t.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},n=e=>{if(s(e),s(e.detailNode),s(e.sibling),e.hasChildren()&&e.childrenAfterGroup){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=this.getRowIndexAtPixel(t),n=this.getRow(s),o=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;const r=this.rootNode.allLeafChildren;return e.forEach((e=>{ca(r,e)})),e.forEach(((e,t)=>{ha(r,e,Math.max(s+i,0)+t)})),e.forEach(((e,t)=>{e.sourceRowIndex=t})),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,s=null!=i?this.getRow(i):null;if(!s||!e||null==t)return void this.clearHighlightedRow();const n=this.getHighlightPosition(t,s),o=this.isHighlightingCurrentPosition(e,s,n),r=null!=this.lastHighlightedRow&&this.lastHighlightedRow!==s;(o||r)&&(this.clearHighlightedRow(),o)||(s.setHighlighted(n),this.lastHighlightedRow=s)}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const s=0===i?-1:1;return this.getRow(t.rowIndex+s)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter,t=this.rootNode.sibling?1:0;return(e?e.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let t=e;if(this.rowsToDisplay[0].footer){if(0===e)return 0;t-=1}const i=this.rowsToDisplay[this.rowsToDisplay.length-1],s=t>=this.rootNode.childrenAfterSort.length;if(i.footer&&s)return i.rowIndex;let n=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;n.expanded&&n.childrenAfterSort&&n.childrenAfterSort.length>0;)n=n.childrenAfterSort[0];return n.rowIndex}getRowBounds(e){if(pr(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=zr(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=zr(this.gos),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=zr(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=gr(e),i=new of(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==e.rowNodeTransactions)return!1;const t=e.rowNodeTransactions.filter((e=>null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0));return null==t||0==t.length}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(ur(e)&&(t=i[e]),pr(t))return void sr(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gos.get("suppressAnimationFrame")}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t="object"===typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!t)return;if(this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=pr(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return pr(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return ur(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],o=na(this.gos);return this.forEachNodeAfterFilterAndSort((r=>{if(s)return;if(i&&(r===t||r===e)&&(s=!0,r.group&&o))return void n.push(...r.allLeafChildren);if(!i){if(r!==t&&r!==e)return;i=!0}(!r.group||!o)&&n.push(r)})),n}setDatasource(e){sr("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(ra(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,n=-1;for(;;){const o=Math.floor((t+i)/2),r=this.rowsToDisplay[o];if(this.isRowInPixel(r,e))return o;r.rowTop<e?t=o+1:r.rowTop>e&&(i=o-1);if(s===t&&n===i)return o;s=t,n=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(((t,i)=>e(t,i)))}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:n}=e;let{index:o}=e;const r=e=>{const s=t[0]?.parent;if(!s)return;const r=n&&Wr(this.gos),a=_r(this.gos),l=n&&a({node:s});s===this.rootNode?r===e&&(s.createFooter(),i(s.sibling,o++)):l===e&&(s.createFooter(),i(s.sibling,o++))};r("top");for(let a=0;a<t.length;a++){const e=t[a];if(i(e,o++),e.hasChildren()&&!e.footer){let t=null;switch(s){case 0:t=e.childrenAfterGroup;break;case 1:t=e.childrenAfterAggFilter;break;case 2:t=e.childrenAfterSort;break;case 3:t=e.leafGroup?null:e.childrenAfterSort}t&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...t],callback:i,recursionType:s,index:o,includeFooterNodes:n}))}}return r("bottom"),o}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=n=>{n&&n.forEach((n=>{const o=()=>{n.expanded=e,s(n.childrenAfterGroup)};if(t){return void(ur(n.childrenAfterGroup)&&o())}if(i){return void(!n.leafGroup&&o())}n.group&&o()}))};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),na(this.gos)){this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"})}}else{const e=this.rootNode,t=e.sibling;e.childrenAfterGroup=e.allLeafChildren,t&&(t.childrenAfterGroup=e.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if("string"==typeof e&&0==e.indexOf(ld.ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.isAlive()&&this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;this.rowDataTransactionBatch?.forEach((s=>{const{rowNodeTransaction:n,rowsInserted:o}=this.nodeManager.updateRowData(s.rowDataTransaction);o&&(i=!0),t.push(n),s.callback&&e.push(s.callback.bind(null,n))})),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}},class extends Sa{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const e=(t,s)=>{if(t.childrenAfterGroup)for(let n=0;n<t.childrenAfterGroup.length;n++){const o=t.childrenAfterGroup[n],r=s||this.filterManager.doesRowPassFilter({rowNode:o});o.childrenAfterGroup?e(t.childrenAfterGroup[n],r):i(o,r)}i(t,s)},s=t=>e(t,!1);t.executeFromRootNode(s)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},class extends Sa{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=ur(t)&&t.length>0,s=i&&ur(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some((e=>Vr(this.gos)?e.column.isPrimary()&&e.column.isRowGroupActive():!!e.column.getColDef().showRowGroup));this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}},class extends Sa{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,o=n?[t]:t.childrenAfterSort,r=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(r,o,i,s,0);if(!n&&i.length>0&&r.grandTotalRow){t.createFooter();const e="top"===r.grandTotalRow;this.addRowNodeToRowsToDisplay(r,t.sibling,i,0,e)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:Ur(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:Wr(this.gos),groupTotalRow:_r(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!gr(t))for(let o=0;o<t.length;o++){const r=t[o],a=r.hasChildren(),l=s&&!a,c=e.groupRemoveSingleChildren&&a&&1===r.childrenAfterGroup.length,h=e.groupRemoveLowestSingleChildren&&a&&r.leafGroup&&1===r.childrenAfterGroup.length,d=s&&r.leafGroup,u=e.hideOpenParents&&r.expanded&&!r.master&&!d;if(!l&&!u&&!c&&!h&&this.addRowNodeToRowsToDisplay(e,r,i,n),!s||!r.leafGroup)if(a){const t=c||h;if(r.expanded||t){const o=e.groupTotalRow({node:r});o||r.destroyFooter();const a=t?n:n+1;"top"===o&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,a)),this.recursivelyAddToRowsToDisplay(e,r.childrenAfterSort,i,s,a),"bottom"===o&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,a))}}else if(r.master&&r.expanded){const t=this.createDetailNode(r);this.addRowNodeToRowsToDisplay(e,t,i,n)}}}addRowNodeToRowsToDisplay(e,t,i,s,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(ur(e.detailNode))return e.detailNode;const t=new ld(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,ur(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},class extends Sa{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,n,o){const r=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some((e=>e.isRowGroupActive()));let l={};i&&s&&(l=this.calculateDirtyNodes(s));const c=this.columnModel.isPivotMode(),h=this.gos.getCallback("postSortRows"),d=s=>{this.pullDownGroupDataForHideOpenParents(s.childrenAfterAggFilter,!0);const d=c&&s.leafGroup;if(r&&a&&!s.leafGroup&&!o){const e=this.funcColsService.getRowGroupColumns()?.[s.level+1],t=null===e?.getSort(),i=s.childrenAfterAggFilter.slice(0);if(s.childrenAfterSort&&!t){const e={};s.childrenAfterSort.forEach(((t,i)=>{e[t.id]=i})),i.sort(((t,i)=>(e[t.id]??0)-(e[i.id]??0)))}s.childrenAfterSort=i}else s.childrenAfterSort=!t||d?s.childrenAfterAggFilter.slice(0):i?this.doDeltaSort(s,l,n,e):this.rowNodeSorter.doFullSort(s.childrenAfterAggFilter,e);if(s.sibling&&(s.sibling.childrenAfterSort=s.childrenAfterSort),this.updateChildIndexes(s),h){const e={nodes:s.childrenAfterSort};h(e)}};n&&n.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=e=>{e&&e.forEach((e=>t[e.id]=!0))};return e&&e.forEach((e=>{i(e.add),i(e.update),i(e.remove)})),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,s);const r={},a=[];n.forEach((e=>{t[e.id]||!i.canSkip(e)?a.push(e):r[e.id]=!0}));const l=o.filter((e=>r[e.id])),c=(e,t)=>({currentPos:t,rowNode:e}),h=a.map(c).sort(((e,t)=>this.rowNodeSorter.compareRowNodes(s,e,t)));return this.mergeSortedArrays(s,h,l.map(c)).map((e=>{let{rowNode:t}=e;return t}))}mergeSortedArrays(e,t,i){const s=[];let n=0,o=0;for(;n<t.length&&o<i.length;){this.rowNodeSorter.compareRowNodes(e,t[n],i[o])<0?s.push(t[n++]):s.push(i[o++])}for(;n<t.length;)s.push(t[n++]);for(;o<i.length;)s.push(i[o++]);return s}updateChildIndexes(e){if(pr(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=0===i,o=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(o),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return ir("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((e=>{e.hasChildren()&&t(e)}))};e&&e.executeFromRootNode((e=>t(e)))}pullDownGroupDataForHideOpenParents(e,t){this.gos.get("groupHideOpenParents")&&!pr(e)&&e.forEach((e=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach((i=>{const s=i.getColDef().showRowGroup;if("string"!==typeof s)return void sr("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const n=s,o=this.columnModel.getColDefCol(n);if(!(o===e.rowGroupColumn))if(t)e.setGroupValue(i.getId(),void 0);else{const t=this.getFirstChildOfFirstChild(e,o);t&&e.setGroupValue(i.getId(),t.key)}}))}))}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const e=i.parent;if(!e||!i.firstChild)return null;if(e.rowGroupColumn===t)return e;i=e}return null}},class extends Sa{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){xr(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",(()=>this.onRowDataUpdated())))}isActive(){const e=this.gos.exists("getRowId");return!this.gos.get("resetRowDataOnUpdate")&&e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:s,rowsInserted:n}=i.updateRowData(t);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(s,o||n)}createTransactionForRowData(e){if(!xr(this.gos))return sr("ImmutableService only works with ClientSideRowModel"),null;const t=Kr(this.gos);if(null==t)return sr("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),s=[],n=[],o=[];return ur(e)&&e.forEach((e=>{const s=t({data:e,level:0}),r=i[s];if(r){r.data!==e&&n.push(e),i[s]=void 0}else o.push(e)})),Oa(i,((e,t)=>{t&&s.push(t.data)})),{remove:s,update:n,add:o}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}}]},If={version:Rf,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[Cf],apiFunctions:{onGroupExpandedOrCollapsed:function(e){e.expansionService.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)},isRowDataEmpty:function(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0},forEachLeafNode:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)},resetRowHeights:function(e){e.columnModel.isAutoRowHeightActive()?ir("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height."):e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t)))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,i)))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions()))},getBestCostNodeSelection:function(e){return e.selectionService.getBestCostNodeSelection()}},dependantModules:[Ef,bf]},Af={version:Rf,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[Ef,If]},kf=class extends Sa{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},Tf=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:n,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=n,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){const o=this.gos.get("groupHideOpenParents")&&!n.footer||!this.shouldRenderGroupSummaryCell(n,e,t)?this.valueService.getValue(e,n):this.createValueForGroupNode(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){if(!(e&&e.group))return!1;if(-1!==this.groupColumns.indexOf(t)){const i=e.groupData?.[t.getId()],s=this.gos.get("suppressGroupMaintainValueType");if(s&&null!=i||!s&&void 0!==i)return!0;if(Mr(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const s=$r(this.gos,this.columnModel.isPivotMode());return 0===i&&s}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),n=t=>{if(i||s)return t.key;const n=t.groupData?.[e.getId()];return n&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport?this.valueService.formatValue(t.rowGroupColumn,t,n)??n:n},o=t.footer,r=[n(t)];if(!Ur(this.gos))for(;t.parent;)t=t.parent,r.push(n(t));const a=r.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:n,processCellCallback:o,type:r}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:n,type:r,parseValue:e=>this.valueService.parseValue(s,i,e,this.valueService.getValue(s,i)),formatValue:e=>this.valueService.formatValue(s,i,e)??e}))??""}:!1!==s.getColDef().useValueFormatterForExport?{value:n??"",valueFormatted:this.valueService.formatValue(s,i,n)}:{value:n??""}}},Lf=class{static download(e,t){const i=document.defaultView||window;if(!i)return void ir("There is no `window` associated with the current `document`");const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout((()=>{i.URL.revokeObjectURL(n)}),0)}},Pf=class extends Tf{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){0!=t&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(ir("unknown value type during csv conversion"),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var Ff="32.3.8",Nf={version:Ff,moduleName:"@ag-grid-community/csv-export-core",beans:[class extends kf{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void ir("Export cancelled. Export is not allowed as per your configuration.");const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\ufeff",i],{type:"text/plain"}),n="function"===typeof t.fileName?t.fileName(this.gos.getGridCommonParams()):t.fileName;Lf.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:h,columnSeparator:d}=e;return new Pf({columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:h||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},class extends Sa{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,o=this.getColumnsToExport(i,n,s),r=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.reduce(((e,t)=>t(e)),e)}(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t));return r(e).parse()}processRow(e,t,i,s){const n=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),r=this.gos.get("groupRemoveLowestSingleChildren"),a=null!=t.rowPositions||!!t.onlySelected,l=this.gos.get("groupHideOpenParents")&&!a,c=this.columnModel.isPivotMode()?s.leafGroup:!s.group,h=!!s.footer,d=r&&s.leafGroup,u=1===s.allChildrenCount&&1===s.childrenAfterGroup?.length&&(o||d);if(!c&&!h&&(t.skipRowGroups||u||l)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&"top"===s.rowPinned||t.skipPinnedBottom&&"bottom"===s.rowPinned)return;if(-1===s.level&&!c&&!h)return;if(n(this.gos.addGridCommonParams({node:s})))return;const p=e.onNewBodyRow(s);if(i.forEach(((e,t)=>{p.onColumn(e,t,s)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new yl,n=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedTopRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=xr(this.gos),o=Mr(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>s.getRow(e.rowIndex))).forEach(a);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(a,!0):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||r){const e=this.selectionService.getSelectedNodes();this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?s.forEachNode(a):n||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(e,s)=>null!=e.rowIndex&&null!=s.rowIndex?e.rowIndex-s.rowIndex:e.level===s.level?e.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:e,currentPos:e.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):i(e.parent,s.parent):e.level>s.level?i(e.parent,s):i(e,s.parent);e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedBottomRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedRow("bottom",s),i}}getColumnsToExport(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let o=[];return o=e&&!s?this.columnModel.getCols():this.visibleColsService.getAllCols(),t&&!n&&(o=o.filter((e=>!Ta(e)&&!La(e)))),o}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>s.push(e)))})),e.length>0&&fl(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach((e=>{const t=e;let o;o=i?i(this.gos.addGridCommonParams({columnGroup:t})):this.columnNameService.getDisplayNameForColumnGroup(t,"header");const r=t.getLeafColumns().reduce(((e,t,i,s)=>{let n=ra(e);return"open"===t.getColumnGroupShow()?n&&null==n[1]||(n=[i],e.push(n)):n&&null==n[1]&&(n[1]=i-1),i===s.length-1&&n&&null==n[1]&&(n[1]=i),e}),[]);s.onColumn(t,o||"",n++,t.getLeafColumns().length-1,r)}))}}]},Of={version:Ff,moduleName:"@ag-grid-community/csv-export",dependantModules:[Nf,{version:Ff,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:function(e,t){return e.csvCreator?.getDataAsCsv(t)},exportDataAsCsv:function(e,t){e.csvCreator?.exportDataAsCsv(t)}},dependantModules:[Nf]}]};var Bf=async e=>{const t=new Blob([e]),{size:i,content:s}=await(async e=>{let t=0;const i=[],s=new WritableStream({write:e=>{i.push(e),t+=e.length}}),n=new ReadableStream({start:t=>{const i=new FileReader;i.onload=e=>{e.target?.result&&t.enqueue(e.target.result),t.close()},i.readAsArrayBuffer(e)}}),o=new window.CompressionStream("deflate-raw");return await n.pipeThrough(o).pipeTo(s),{size:t,content:new Blob(i)}})(t);return{size:i,content:new Uint8Array(await s.arrayBuffer())}};function Gf(e,t){let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(255&e),e>>>=8;return i}var zf=e=>{if(!e.length)return 0;let t=-1,i=0,s=0,n=0;for(let o=0;o<e.length;o++)i=e[o],s=255&(t^i),n=Vf[s],t=t>>>8^n;return-1^t},jf=e=>e.length?zf("string"===typeof e?(new TextEncoder).encode(e):e):0,Vf=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Hf=(e,t,i,s,n,o)=>{const{content:r,path:a,created:l}=e,c=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(l),h=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(l),d=jf(n),u=void 0!==o?o:s,p=hl(a),g=p!==a;let m="";if(g){const e=Gf(1,1)+Gf(jf(p),4)+p;m="up"+Gf(e.length,2)+e}const f="\x14\0"+(g?"\0\b":"\0\0")+Gf(t?8:0,2)+Gf(c,2)+Gf(h,2)+Gf(u?d:0,4)+Gf(o??s,4)+Gf(s,4)+Gf(p.length,2)+Gf(m.length,2),v="PK\x03\x04"+f+p+m,y="PK\x01\x02\x14\0"+f+"\0\0\0\0\0\0"+(r?"\0\0\0\0":"\x10\0\0\0")+Gf(i,4)+p+m;return{localFileHeader:Uint8Array.from(v,(e=>e.charCodeAt(0))),centralDirectoryHeader:Uint8Array.from(y,(e=>e.charCodeAt(0)))}},Wf=e=>{let t;if("string"===typeof e){const i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,(e=>e.charCodeAt(0)))}else t=e;return{size:t.length,content:t}},_f=async(e,t)=>{const{content:i}=e,{size:s,content:n}=i?Wf(i):{size:0,content:Uint8Array.from([])};let o,r,a=!1;if("file"===e.type&&n&&s>0){const e=await Bf(n);o=e.content,r=e.size,a=!0}return{...Hf(e,a,t,s,n,r),content:o||n,isCompressed:a}},Uf=(e,t)=>{const{content:i}=e,{content:s}=i?Wf(i):{content:Uint8Array.from([])};return{...Hf(e,!1,t,s.length,s,void 0),content:s,isCompressed:!1}},$f=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.files.push({path:e,created:new Date,content:i?t:(new TextEncoder).encode(t),isBase64:i,type:"file"})}static async getZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}static getUncompressedZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,i=0;for(const c of e){const{localFileHeader:e,centralDirectoryHeader:s,content:n}=c;t+=e.length+n.length,i+=s.length}const s=new Uint8Array(t),n=new Uint8Array(i);let o=0,r=0;for(const c of e){const{localFileHeader:e,centralDirectoryHeader:t,content:i}=c;s.set(e,o),o+=e.length,s.set(i,o),o+=i.length,n.set(t,r),r+=t.length}const a=((e,t,i)=>{const s="PK\x05\x06\0\0\0\0"+Gf(e,2)+Gf(e,2)+Gf(t,4)+Gf(i,4)+"\0\0";return Uint8Array.from(s,(e=>e.charCodeAt(0)))})(e.length,i,t),l=new Uint8Array(s.length+n.length+a.length);return l.set(s),l.set(n,s.length),l.set(a,s.length+n.length),l}static async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=await _f(s,i),{localFileHeader:n,content:o}=e;t.push(e),i+=n.length+o.length}return this.packageFiles(t)}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=Uf(s,i),{localFileHeader:n,content:o}=e;t.push(e),i+=n.length+o.length}return this.packageFiles(t)}};$f.folders=[],$f.files=[];var Kf=class extends Cg{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){ur(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();pr(this.params.datasource.getRows)?ir("datasource is missing getRows method"):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach(((s,n)=>{this.startRow+n<i&&e(s,t.next())}))}getLastAccessed(){return this.lastAccessed}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.next());const t=e-this.startRow;return this.rowNodes[t]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new ld(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach(((t,i)=>{const s=e.rowData?e.rowData[i]:void 0;!t.id&&t.alreadyRendered&&s&&(this.rowNodes[i]=new ld(this.beans),this.rowNodes[i].setRowIndex(t.rowIndex),this.rowNodes[i].setRowTop(t.rowTop),this.rowNodes[i].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],s,this.startRow+i)}));const t=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}},Yf=class extends Sa{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new Kf(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&tr(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.getLastAccessed()-e.getLastAccessed()));const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.getState()&&t>=1||!!i&&t>=s){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const t=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<t&&(this.rowCount=t)}}setRowCount(e,t){this.rowCount=e,ur(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new kc;this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){const e=za(this.blocks).sort(((e,t)=>e.getId()-t.getId()));return e}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const o=new kc;let r=!1;this.getBlocksInOrder().forEach((a=>{r||(n&&s+1!==a.getId()?r=!0:(s=a.getId(),a.forEachNode((s=>{const o=s===e||s===t;(n||o)&&i.push(s),o&&(n=!n)}),o,this.rowCount)))}));return r||n?[]:i}};var Zf="32.3.8",qf={version:Zf,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[class extends Sa{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=kr(this.gos),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&ir("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=kr(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;e=!this.cacheParams||this.isSortModelDifferent(),e&&this.reset()}isSortModelDifferent(){return!Cr(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;null!=Kr(this.gos)||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:kr(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new kc},this.infiniteCache=this.createBean(new Yf(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)})),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}}],dependantModules:[bg]},Qf={version:Zf,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[qf,{version:Zf,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[Cf],apiFunctions:{refreshInfiniteCache:function(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()},purgeInfiniteCache:function(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()},getInfiniteRowCount:function(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}},dependantModules:[qf,wf]}]};(e=>{const t=new Map})((e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if("spacing"===e||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)})),"object"!==typeof window||!window||"object"!==typeof document||(window.document,document);Yh.__registerModules([zm,Af,Qf,Of],!1,void 0);var Xf=o.createContext({}),Jf=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const n=e.newAgStackInstance();if(null==n)return;let o,r,a=!1;return n.then((e=>{a?t.destroyBean(e):(o=e,r=o.getGui(),i.appendChild(r),ev(s,o))})),()=>{a=!0,o&&(r?.parentElement?.removeChild(r),t.destroyBean(o),s&&ev(s,void 0))}},ev=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},tv=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>null!=e&&""!==e)).join(" ")},iv=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new e;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},sv=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),nv=o.version?.split(".")[0],ov="16"===nv||"17"===nv;var rv=!1;var av=(e,t)=>{ov||!e||rv?t():l.flushSync(t)};function lv(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const s=[],n=[],o=new Map,r=new Map;for(let a=0;a<t.length;a++){const e=t[a];r.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];o.set(t.instanceId,t),r.has(t.instanceId)&&s.push(t)}for(let a=0;a<t.length;a++){const e=t[a],i=e.instanceId;o.has(i)||n.push(e)}return s.length===e.length&&0===n.length?e:0===s.length&&n.length===t.length?t:0===s.length?n:0===n.length?s:[...s,...n]}var cv=(0,o.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:s}=(0,o.useContext)(Xf),n=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)(null),l=(0,o.useRef)(null),c=(0,o.useRef)(null),h=(0,o.useRef)(),[d,u]=(0,o.useState)(),[p,g]=(0,o.useState)(),[m,f]=(0,o.useState)(),[v,y]=(0,o.useState)((()=>new iv)),[C,b]=(0,o.useState)((()=>new iv("ag-hidden"))),[w,S]=(0,o.useState)((()=>new iv("ag-hidden"))),[x,M]=(0,o.useState)((()=>new iv("ag-invisible")));(0,o.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,o.useLayoutEffect)((()=>Jf(d,s,r.current)),[d]);const D=(0,o.useCallback)((t=>{if(n.current=t,!t)return void(h.current=s.destroyBean(h.current));const o={setInnerRenderer:(e,t)=>{u(e),f(t)},setChildCount:e=>g(e),addOrRemoveCssClass:(e,t)=>y((i=>i.setClass(e,t))),setContractedDisplayed:e=>S((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>b((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>M((t=>t.setClass("ag-invisible",!e)))},r=i.getInstance("groupCellRendererCtrl");r&&(h.current=s.createBean(r),h.current.init(o,t,a.current,l.current,c.current,cv,e))}),[]),R=(0,o.useMemo)((()=>`ag-cell-wrapper ${v.toString()}`),[v]),E=(0,o.useMemo)((()=>`ag-group-expanded ${C.toString()}`),[C]),I=(0,o.useMemo)((()=>`ag-group-contracted ${w.toString()}`),[w]),A=(0,o.useMemo)((()=>`ag-group-checkbox ${x.toString()}`),[x]),k=d&&d.componentFromFramework,T=k?d.componentClass:void 0,L=null==d&&null!=m,P=dl(m,!0);return o.createElement("span",{className:R,ref:D,...e.colDef?{}:{role:h.current?.getCellAriaRole()}},o.createElement("span",{className:E,ref:l}),o.createElement("span",{className:I,ref:c}),o.createElement("span",{className:A,ref:a}),o.createElement("span",{className:"ag-group-value",ref:r},L&&o.createElement(o.Fragment,null,P),k&&o.createElement(T,{...d.params})),o.createElement("span",{className:"ag-group-child-count"},p))})),hv=cv,dv=(0,o.createContext)({setMethods:()=>{}}),uv=(0,o.memo)((e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:s,setMethods:n}=e,[{key:r,...a},l]=(0,o.useState)(t);return(0,o.useEffect)((()=>{i((e=>l(e)))}),[]),o.createElement(dv.Provider,{value:{setMethods:n}},o.createElement(s,{key:r,...a}))})),pv=0;function gv(){return"agPortalKey_"+ ++pv}var mv=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=gv(),this.portalKey=gv(),this.instanceCreated=this.isStatelessComponent()?xh.resolve(!1):new xh((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){if(this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ir('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses())){ir('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.');this.componentInstance.getReactContainerClasses().forEach((e=>this.eParentElement.classList.add(e)))}}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout((()=>this.callMethod(e,t)));const s=i[e];return s?s.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new xh((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{this.componentInstance=e,this.addParentContainerStyleAndClasses(),this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=(0,l.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,o.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this[`${e}Component`]}};function fv(e,t,i){e.forEach((e=>{const s=t[e];s&&(i[e]=s)}))}var vv=class extends mv{constructor(){super(...arguments),this.awaitUpdateCallback=new xh((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=uv}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new xh((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,fv(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new xh((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},yv=class extends vv{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Cv=class extends vv{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},bv=class extends vv{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:s}=this;return e.label=t,e.icon=i,e.shake=s,e}},wv=class extends vv{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){!1===this.expectingNewMethods&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function Sv(e,t){e.parentFilterInstance((i=>{(i.setModel(t)||xh.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var xv=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){fv(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Sv(this.floatingFilterParams,e)}},Mv=class extends vv{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Sv(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Dv=class extends vv{refresh(e){this.sourceParams=e,this.refreshProps()}},Rv=class extends vv{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Ev=class extends vv{refresh(e){this.sourceParams=e,this.refreshProps()}},Iv=class extends vv{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Av=class extends vv{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function kv(){ir("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var Tv=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout((()=>{this.waitForInstance(e,t,i)}))}}},Lv=(0,o.memo)((e=>{let{ctrl:t}=e;const i=t.isAlive(),{context:s}=(0,o.useContext)(Xf),n=i?t.getColId():void 0,[r,a]=(0,o.useState)(),l=(0,o.useRef)(),c=(0,o.useRef)(null),h=(0,o.useRef)(null),d=(0,o.useRef)(null),u=(0,o.useRef)(),p=(0,o.useRef)();i&&!p.current&&(p.current=new Tl((()=>c.current)));const g=(0,o.useCallback)((e=>{if(c.current=e,l.current=e?s.createBean(new Al):s.destroyBean(l.current),!e||!i)return;const n={setWidth:e=>{c.current&&(c.current.style.width=e)},addOrRemoveCssClass:(e,t)=>p.current.addOrRemoveCssClass(e,t),setAriaSort:e=>{c.current&&(e?$l(c.current,e):Kl(c.current))},setUserCompDetails:e=>a(e),getUserCompInstance:()=>u.current||void 0};t.setComp(n,e,h.current,d.current,l.current);const o=t.getSelectAllGui();h.current?.insertAdjacentElement("afterend",o),l.current.addDestroyFunc((()=>o.remove()))}),[]);(0,o.useLayoutEffect)((()=>Jf(r,s,d.current,u)),[r]),(0,o.useEffect)((()=>{t.setDragSource(c.current)}),[r]);const m=(0,o.useMemo)((()=>!!(r?.componentFromFramework&&sv(r.componentClass))),[r]),f=r&&r.componentFromFramework,v=r&&r.componentClass;return o.createElement("div",{ref:g,className:"ag-header-cell","col-id":n,role:"columnheader"},o.createElement("div",{ref:h,className:"ag-header-cell-resize",role:"presentation"}),o.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&m&&o.createElement(v,{...r.params}),f&&!m&&o.createElement(v,{...r.params,ref:u})))})),Pv=(0,o.memo)((e=>{let{ctrl:t}=e;const{context:i,gos:s}=(0,o.useContext)(Xf),[n,r]=(0,o.useState)((()=>new iv("ag-header-cell","ag-floating-filter"))),[a,l]=(0,o.useState)((()=>new iv)),[c,h]=(0,o.useState)((()=>new iv("ag-floating-filter-button","ag-hidden"))),[d,u]=(0,o.useState)("false"),[p,g]=(0,o.useState)(),[,m]=(0,o.useState)(1),f=(0,o.useRef)(),v=(0,o.useRef)(null),y=(0,o.useRef)(null),C=(0,o.useRef)(null),b=(0,o.useRef)(null),w=(0,o.useRef)(),S=(0,o.useRef)(),x=e=>{null!=e&&w.current&&w.current(e)},M=(0,o.useCallback)((e=>{if(v.current=e,f.current=e?i.createBean(new Al):i.destroyBean(f.current),!e)return;S.current=new xh((e=>{w.current=e}));const s={addOrRemoveCssClass:(e,t)=>r((i=>i.setClass(e,t))),addOrRemoveBodyCssClass:(e,t)=>l((i=>i.setClass(e,t))),setButtonWrapperDisplayed:e=>{h((t=>t.setClass("ag-hidden",!e))),u(e?"false":"true")},setWidth:e=>{v.current&&(v.current.style.width=e)},setCompDetails:e=>g(e),getFloatingFilterComp:()=>S.current?S.current:null,setMenuIcon:e=>b.current?.appendChild(e)};t.setComp(s,e,b.current,y.current,f.current)}),[]);(0,o.useLayoutEffect)((()=>Jf(p,i,y.current,x)),[p]);const D=(0,o.useMemo)((()=>n.toString()),[n]),R=(0,o.useMemo)((()=>a.toString()),[a]),E=(0,o.useMemo)((()=>c.toString()),[c]),I=(0,o.useMemo)((()=>!!(p&&p.componentFromFramework&&sv(p.componentClass))),[p]),A=(0,o.useMemo)((()=>s.get("reactiveCustomComponents")),[]),k=(0,o.useMemo)((()=>{if(p){if(A){const e=new xv(p.params,(()=>m((e=>e+1))));return x(e),e}p.componentFromFramework&&kv()}}),[p]),T=k?.getProps(),L=p&&p.componentFromFramework,P=p&&p.componentClass;return o.createElement("div",{ref:M,className:D,role:"gridcell"},o.createElement("div",{ref:y,className:R,role:"presentation"},L&&!A&&o.createElement(P,{...p.params,ref:I?()=>{}:x}),L&&A&&o.createElement(dv.Provider,{value:{setMethods:e=>k.setMethods(e)}},o.createElement(P,{...T}))),o.createElement("div",{ref:C,"aria-hidden":d,className:E,role:"presentation"},o.createElement("button",{ref:b,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),Fv=(0,o.memo)((e=>{let{ctrl:t}=e;const{context:i}=(0,o.useContext)(Xf),[s,n]=(0,o.useState)((()=>new iv)),[r,a]=(0,o.useState)((()=>new iv)),[l,c]=(0,o.useState)("false"),[h,d]=(0,o.useState)(),[u,p]=(0,o.useState)(),g=(0,o.useMemo)((()=>t.getColId()),[]),m=(0,o.useRef)(),f=(0,o.useRef)(null),v=(0,o.useRef)(null),y=(0,o.useRef)(null),C=(0,o.useRef)(),b=(0,o.useCallback)((e=>{if(f.current=e,m.current=e?i.createBean(new Al):i.destroyBean(m.current),!e)return;const s={setWidth:e=>{f.current&&(f.current.style.width=e)},addOrRemoveCssClass:(e,t)=>n((i=>i.setClass(e,t))),setHeaderWrapperHidden:e=>{const t=y.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=y.current;t&&(null!=e?t.style.setProperty("max-height",`${e}px`):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>p(e),setResizableDisplayed:e=>{a((t=>t.setClass("ag-hidden",!e))),c(e?"false":"true")},setAriaExpanded:e=>d(e),getUserCompInstance:()=>C.current||void 0};t.setComp(s,e,v.current,y.current,m.current)}),[]);(0,o.useLayoutEffect)((()=>Jf(u,i,y.current)),[u]),(0,o.useEffect)((()=>{f.current&&t.setDragSource(f.current)}),[u]);const w=(0,o.useMemo)((()=>!!(u?.componentFromFramework&&sv(u.componentClass))),[u]),S=(0,o.useMemo)((()=>"ag-header-group-cell "+s.toString()),[s]),x=(0,o.useMemo)((()=>"ag-header-cell-resize "+r.toString()),[r]),M=u&&u.componentFromFramework,D=u&&u.componentClass;return o.createElement("div",{ref:b,className:S,"col-id":g,role:"columnheader","aria-expanded":h},o.createElement("div",{ref:y,className:"ag-header-cell-comp-wrapper",role:"presentation"},M&&w&&o.createElement(D,{...u.params}),M&&!w&&o.createElement(D,{...u.params,ref:C})),o.createElement("div",{ref:v,"aria-hidden":l,className:x}))})),Nv=(0,o.memo)((e=>{let{ctrl:t}=e;const{context:i}=(0,o.useContext)(Xf),{topOffset:s,rowHeight:n}=(0,o.useMemo)((()=>t.getTopAndHeight()),[]),r=t.getAriaRowIndex(),a=t.getHeaderRowClass(),[l,c]=(0,o.useState)((()=>n+"px")),[h,d]=(0,o.useState)((()=>s+"px")),u=(0,o.useRef)(null),p=(0,o.useRef)(null),[g,m]=(0,o.useState)((()=>t.getHeaderCtrls())),f=(0,o.useRef)(),v=(0,o.useRef)(null),y=(0,o.useCallback)((e=>{if(v.current=e,f.current=e?i.createBean(new Al):i.destroyBean(f.current),!e)return;const s={setHeight:e=>c(e),setTop:e=>d(e),setHeaderCtrls:(e,t,i)=>{p.current=u.current,u.current=e;const s=lv(p.current,e,t);s!==p.current&&av(i,(()=>m(s)))},setWidth:e=>{v.current&&(v.current.style.width=e)}};t.setComp(s,f.current,!1)}),[]),C=(0,o.useMemo)((()=>({height:l,top:h})),[l,h]),b=(0,o.useCallback)((e=>{switch(t.getType()){case Mu.COLUMN_GROUP:return o.createElement(Fv,{ctrl:e,key:e.instanceId});case Mu.FLOATING_FILTER:return o.createElement(Pv,{ctrl:e,key:e.instanceId});default:return o.createElement(Lv,{ctrl:e,key:e.instanceId})}}),[]);return o.createElement("div",{ref:y,className:a,role:"row",style:C,"aria-rowindex":r},g.map(b))})),Ov=(0,o.memo)((e=>{let{pinned:t}=e;const[i,s]=(0,o.useState)(!0),[n,r]=(0,o.useState)([]),{context:a}=(0,o.useContext)(Xf),l=(0,o.useRef)(null),c=(0,o.useRef)(null),h=(0,o.useRef)(),d="left"===t,u="right"===t,p=!d&&!u,g=(0,o.useCallback)((e=>{if(l.current=e,h.current=e?a.createBean(new _u(t)):a.destroyBean(h.current),!e)return;const i={setDisplayed:s,setCtrls:e=>r(e),setCenterWidth:e=>{c.current&&(c.current.style.width=e)},setViewportScrollLeft:e=>{l.current&&(l.current.scrollLeft=e)},setPinnedContainerWidth:e=>{l.current&&(l.current.style.width=e,l.current.style.minWidth=e,l.current.style.maxWidth=e)}};h.current.setComp(i,l.current)}),[]),m=i?"":"ag-hidden",f=()=>n.map((e=>o.createElement(Nv,{ctrl:e,key:e.instanceId})));return o.createElement(o.Fragment,null,d&&o.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!i,role:"rowgroup"},f()),u&&o.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!i,role:"rowgroup"},f()),p&&o.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"presentation"},o.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},f())))})),Bv=(0,o.memo)((()=>{const[e,t]=(0,o.useState)((()=>new iv)),[i,s]=(0,o.useState)(),{context:n}=(0,o.useContext)(Xf),r=(0,o.useRef)(null),a=(0,o.useRef)(),l=(0,o.useCallback)((e=>{if(r.current=e,a.current=e?n.createBean(new Ru):n.destroyBean(a.current),!e)return;const i={addOrRemoveCssClass:(e,i)=>t((t=>t.setClass(e,i))),setHeightAndMinHeight:e=>s(e)};a.current.setComp(i,e,e)}),[]),c=(0,o.useMemo)((()=>"ag-header "+e.toString()),[e]),h=(0,o.useMemo)((()=>({height:i,minHeight:i})),[i]);return o.createElement("div",{ref:l,className:c,style:h,role:"presentation"},o.createElement(Ov,{pinned:"left"}),o.createElement(Ov,{pinned:null}),o.createElement(Ov,{pinned:"right"}))})),Gv=(e,t)=>{(0,o.useEffect)((()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const s=document.createComment(e);return t.insertBefore(s,i),()=>{t.removeChild(s)}}}}),[e])},zv=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new xh((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){fv(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},jv=(0,o.memo)((e=>{const[t,i]=(0,o.useState)(),{context:s,popupService:n,localeService:r,gos:a,editService:c}=(0,o.useContext)(Xf);return(e=>{const t=(0,o.useRef)(e),i=(0,o.useRef)(),s=(0,o.useRef)(!1),n=(0,o.useRef)(!1),[,r]=(0,o.useState)(0);s.current&&(n.current=!0),(0,o.useEffect)((()=>(s.current||(i.current=t.current(),s.current=!0),r((e=>e+1)),()=>{n.current&&i.current?.()})),[])})((()=>{const{editDetails:t,cellCtrl:o,eParentCell:l}=e,{compDetails:h}=t,d=a.get("stopEditingWhenCellsLoseFocus"),u=s.createBean(c.createPopupEditorWrapper(h.params)),p=u.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&p.appendChild(t)}const g={column:o.getColumn(),rowNode:o.getRowNode(),type:"popupCellEditor",eventSource:l,ePopup:p,position:t.popupPosition,keepWithinBounds:!0},m=n.positionPopupByComponent.bind(n,g),f=r.getLocaleTextFunc(),v=n.addPopup({modal:d,eChild:p,closeOnEsc:!0,closedCallback:()=>{o.onPopupEditorClosed()},anchorToElement:l,positionCallback:m,ariaLabel:f("ariaLabelCellEditor","Cell Editor")}),y=v?v.hideFunc:void 0;return i(u),e.jsChildComp?.afterGuiAttached?.(),()=>{y?.(),s.destroyBean(u)}})),o.createElement(o.Fragment,null,t&&e.wrappedContent&&(0,l.createPortal)(e.wrappedContent,t.getGui()))})),Vv=(e,t,i,s,n,r)=>{const{context:a}=(0,o.useContext)(Xf),l=(0,o.useCallback)((()=>{const e=n.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),n.current=void 0}),[]);(0,o.useEffect)((()=>{const s=null!=e,o=e?.compDetails&&!e.compDetails.componentFromFramework;if(!(s&&o&&!(t&&null==i)))return void l();const a=e.compDetails;if(n.current){const t=n.current,i=!!(null!=t.refresh&&0==e.force)&&t.refresh(a.params);if(!0===i||void 0===i)return;l()}const c=a.newAgStackInstance();null!=c&&c.then((e=>{if(!e)return;const s=e.getGui();if(!s)return;(t?i:r.current).appendChild(s),n.current=e}))}),[e,t,s]),(0,o.useEffect)((()=>l),[])},Hv=(e,t,i)=>{const s=e.compProxy;return o.createElement(o.Fragment,null,s?((e,t,i)=>{const{compProxy:s}=e;i(s);const n=s.getProps(),r=sv(t);return o.createElement(dv.Provider,{value:{setMethods:e=>s.setMethods(e)}},r?o.createElement(t,{...n}):o.createElement(t,{...n,ref:e=>s.setRef(e)}))})(e,t,i):o.createElement(t,{...e.compDetails.params,ref:i}))},Wv=(0,o.memo)((e=>{let{cellCtrl:t,printLayout:i,editingRow:s}=e;const{context:n}=(0,o.useContext)(Xf),{colIdSanitised:r,instanceId:a}=t,l=(0,o.useRef)(),[c,h]=(0,o.useState)((()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1})),[d,u]=(0,o.useState)(),[p,g]=(0,o.useState)(1),[m,f]=(0,o.useState)(),[v,y]=(0,o.useState)(!1),[C,b]=(0,o.useState)(!1),[w,S]=(0,o.useState)(!1),[x,M]=(0,o.useState)(),D=(0,o.useMemo)((()=>t.isForceWrapper()),[t]),R=(0,o.useMemo)((()=>t.getCellAriaRole()),[t]),E=(0,o.useRef)(null),I=(0,o.useRef)(null),A=(0,o.useRef)(),k=(0,o.useRef)(),T=(0,o.useRef)(),L=(0,o.useRef)([]),P=(0,o.useRef)(),[F,N]=(0,o.useState)(0),O=(0,o.useCallback)((e=>{P.current=e,N((e=>e+1))}),[]),B=D||null!=c&&(v||w||C),G=(0,o.useCallback)((e=>{if(k.current=e,e){const i=e.isCancelBeforeStart&&e.isCancelBeforeStart();setTimeout((()=>{i?(t.stopEditing(!0),t.focusCell(!0)):t.cellEditorAttached()}))}}),[t]),z=(0,o.useRef)();z.current||(z.current=new Tl((()=>E.current))),Vv(c,B,P.current,F,A,E);const j=(0,o.useRef)();(0,o.useLayoutEffect)((()=>{const e=j.current,t=c;if(j.current=c,null==e||null==e.compDetails||null==t||null==t.compDetails)return;const i=e.compDetails,s=t.compDetails;if(i.componentClass!=s.componentClass)return;if(null==I.current?.refresh)return;1!=I.current.refresh(s.params)&&g((e=>e+1))}),[c]),(0,o.useLayoutEffect)((()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const e=d.compDetails,t=!0===d.popup,i=e.newAgStackInstance();return i.then((e=>{if(!e)return;const i=e.getGui();if(G(e),!t){const t=(D?T:E).current;t?.appendChild(i),e.afterGuiAttached&&e.afterGuiAttached()}M(e)})),()=>{i.then((e=>{const t=e.getGui();n.destroyBean(e),G(void 0),M(void 0),t?.parentElement?.removeChild(t)}))}}),[d]);const V=(0,o.useCallback)((e=>{if(T.current=e,!e)return L.current.forEach((e=>e())),void(L.current=[]);const i=t=>{if(t){const i=t.getGui();e.insertAdjacentElement("afterbegin",i),L.current.push((()=>{n.destroyBean(t),hc(i)}))}return t};if(v){i(t.createSelectionCheckbox())}w&&i(t.createDndSource()),C&&i(t.createRowDragComp())}),[t,n,w,C,v]),H=(0,o.useCallback)((e=>{if(E.current=e,l.current=e?n.createBean(new Al):n.destroyBean(l.current),!e||!t)return;const o={addOrRemoveCssClass:(e,t)=>z.current.addOrRemoveCssClass(e,t),setUserStyles:e=>f(e),getFocusableElement:()=>E.current,setIncludeSelection:e=>y(e),setIncludeRowDrag:e=>b(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>k.current||null,getCellRenderer:()=>I.current??A.current,getParentOfValue:()=>P.current??T.current??E.current,setRenderDetails:(e,t,i)=>{h((s=>s?.compDetails!==e||s?.value!==t||s?.force!==i?{value:t,compDetails:e,force:i}:s))},setEditDetails:(e,t,i,s)=>{if(e){let n;s?n=new zv(e.params,(()=>g((e=>e+1)))):e.componentFromFramework&&kv(),u({compDetails:e,popup:t,popupPosition:i,compProxy:n}),t||h(void 0)}else u((e=>{e?.compProxy&&(k.current=void 0)}))}},r=T.current||void 0;t.setComp(o,e,r,i,s,l.current)}),[]),W=(0,o.useMemo)((()=>!!(c?.compDetails?.componentFromFramework&&sv(c.compDetails.componentClass))),[c]);(0,o.useLayoutEffect)((()=>{E.current&&(z.current.addOrRemoveCssClass("ag-cell-value",!B),z.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),z.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),z.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),t.getRowCtrl()?.setInlineEditingCss(),t.shouldRestoreFocus()&&!t.isEditing()&&E.current.focus({preventScroll:!0}))}));const _=()=>o.createElement(o.Fragment,null,null!=c&&((e,t,i,s,n,r,a)=>{const{compDetails:l,value:c}=e,h=!l,d=l&&l.componentFromFramework,u=l&&l.componentClass,p=c?.toString?c.toString():c,g=()=>o.createElement(o.Fragment,null,h&&o.createElement(o.Fragment,null,p),d&&!r&&o.createElement(u,{...l.params,key:t,ref:s}),d&&r&&o.createElement(u,{...l.params,key:t}));return o.createElement(o.Fragment,null,n?o.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:a},g()):g())})(c,p,a,I,B,W,O),null!=d&&((e,t,i,s,n)=>{const r=e.compDetails,a=r.componentClass,l=r.componentFromFramework&&!e.popup,c=r.componentFromFramework&&e.popup,h=!r.componentFromFramework&&e.popup;return o.createElement(o.Fragment,null,l&&Hv(e,a,t),c&&o.createElement(jv,{editDetails:e,cellCtrl:s,eParentCell:i,wrappedContent:Hv(e,a,t)}),h&&n&&o.createElement(jv,{editDetails:e,cellCtrl:s,eParentCell:i,jsChildComp:n}))})(d,G,E.current,t,x)),U=(0,o.useCallback)((()=>t.onFocusOut()),[]);return o.createElement("div",{ref:H,style:m,role:R,"col-id":r,onBlur:U},B?o.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:V},_()):_())})),_v=(0,o.memo)((e=>{let{rowCtrl:t,containerType:i}=e;const{context:s,gos:n}=(0,o.useContext)(Xf),r=(0,o.useRef)(),a=(0,o.useRef)(t.getDomOrder()),l=t.isFullWidth(),c=t.getRowNode().displayed,[h,d]=(0,o.useState)((()=>c?t.getRowIndex():null)),[u,p]=(0,o.useState)((()=>t.getRowId())),[g,m]=(0,o.useState)((()=>t.getBusinessKey())),[f,v]=(0,o.useState)((()=>t.getRowStyles())),y=(0,o.useRef)(null),C=(0,o.useRef)(null),[b,w]=(0,o.useState)((()=>null)),[S,x]=(0,o.useState)(),[M,D]=(0,o.useState)((()=>c?t.getInitialRowTop(i):void 0)),[R,E]=(0,o.useState)((()=>c?t.getInitialTransform(i):void 0)),I=(0,o.useRef)(null),A=(0,o.useRef)(),k=(0,o.useRef)(!1),[T,L]=(0,o.useState)(0);(0,o.useEffect)((()=>{if(k.current||!S||T>10)return;const e=I.current?.firstChild;e?(t.setupDetailRowAutoHeight(e),k.current=!0):L((e=>e+1))}),[S,T]);const P=(0,o.useRef)();P.current||(P.current=new Tl((()=>I.current)));const F=(0,o.useCallback)((e=>{if(I.current=e,r.current=e?s.createBean(new Al):s.destroyBean(r.current),!e)return void t.unsetComp(i);if(!t.isAlive())return;const n={setTop:D,setTransform:E,addOrRemoveCssClass:(e,t)=>P.current.addOrRemoveCssClass(e,t),setDomOrder:e=>a.current=e,setRowIndex:d,setRowId:p,setRowBusinessKey:m,setUserStyles:v,setCellCtrls:(e,t)=>{C.current=y.current;const i=lv(C.current,e,a.current);i!==C.current&&(y.current=i,av(t,(()=>w(i))))},showFullWidth:e=>x(e),getFullWidthCellRenderer:()=>A.current,refreshFullWidth:e=>z.current?(x((t=>({...t,params:e()}))),!0):!(!A.current||!A.current.refresh)&&A.current.refresh(e())};t.setComp(n,e,i,r.current)}),[]);(0,o.useLayoutEffect)((()=>Jf(S,s,I.current,A)),[S]);const N=(0,o.useMemo)((()=>{const e={top:M,transform:R};return Object.assign(e,f),e}),[M,R,f]),O=l&&S?.componentFromFramework,B=!l&&null!=b,G=(0,o.useMemo)((()=>!!(S?.componentFromFramework&&sv(S.componentClass))),[S]),z=(0,o.useRef)(!1);(0,o.useEffect)((()=>{z.current=G&&!!S&&!!n.get("reactiveCustomComponents")}),[G,S]);return o.createElement("div",{ref:F,role:"row",style:N,"row-index":h,"row-id":u,"row-business-key":g},B&&b?.map((e=>o.createElement(Wv,{cellCtrl:e,editingRow:t.isEditing(),printLayout:t.isPrintLayout(),key:e.instanceId}))),O&&(()=>{const e=S.componentClass;return o.createElement(o.Fragment,null,G?o.createElement(e,{...S.params}):o.createElement(e,{...S.params,ref:A}))})())})),Uv=(0,o.memo)((e=>{let{name:t}=e;const{context:i}=(0,o.useContext)(Xf),s=(0,o.useMemo)((()=>Mp(t)),[t]),n=(0,o.useRef)(null),r=(0,o.useRef)(null),a=(0,o.useRef)([]),l=(0,o.useRef)([]),[c,h]=(0,o.useState)((()=>[])),d=(0,o.useRef)(!1),u=(0,o.useRef)(),p=(0,o.useMemo)((()=>tv(s.viewport)),[s]),g=(0,o.useMemo)((()=>tv(s.container)),[s]),m="center"===s.type;Gv(" AG Row Container "+t+" ",m?n:r);const f=(0,o.useCallback)((()=>m?null!=n.current&&null!=r.current:null!=r.current),[]),v=(0,o.useCallback)((()=>m?null==n.current&&null==r.current:null==r.current),[]),y=(0,o.useCallback)((()=>{if(v()&&(u.current=i.destroyBean(u.current)),f()){const e=e=>{const t=lv(l.current,a.current,d.current);t!==l.current&&(l.current=t,av(e,(()=>h(t))))},s={setHorizontalScroll:e=>{n.current&&(n.current.scrollLeft=e)},setViewportHeight:e=>{n.current&&(n.current.style.height=e)},setRowCtrls:t=>{let{rowCtrls:i,useFlushSync:s}=t;const n=!!s&&a.current.length>0&&i.length>0;a.current=i,e(n)},setDomOrder:t=>{d.current!=t&&(d.current=t,e(!1))},setContainerWidth:e=>{r.current&&(r.current.style.width=e)},setOffsetTop:e=>{r.current&&(r.current.style.transform=`translateY(${e})`)}};u.current=i.createBean(new Pp(t)),u.current.setComp(s,r.current,n.current)}}),[f,v]),C=(0,o.useCallback)((e=>{r.current=e,y()}),[y]),b=(0,o.useCallback)((e=>{n.current=e,y()}),[y]),w=()=>o.createElement("div",{className:g,ref:C,role:"rowgroup"},c.map((e=>o.createElement(_v,{rowCtrl:e,containerType:s.type,key:e.instanceId}))));return o.createElement(o.Fragment,null,m?o.createElement("div",{className:p,ref:b,role:"presentation"},w()):w())})),$v=(0,o.memo)((()=>{const{context:e,resizeObserverService:t}=(0,o.useContext)(Xf),[i,s]=(0,o.useState)(""),[n,r]=(0,o.useState)(0),[a,l]=(0,o.useState)(0),[c,h]=(0,o.useState)("0px"),[d,u]=(0,o.useState)("0px"),[p,g]=(0,o.useState)("100%"),[m,f]=(0,o.useState)("0px"),[v,y]=(0,o.useState)("0px"),[C,b]=(0,o.useState)("100%"),[w,S]=(0,o.useState)(""),[x,M]=(0,o.useState)(""),[D,R]=(0,o.useState)(null),[E,I]=(0,o.useState)(""),[A,k]=(0,o.useState)(null),[T,L]=(0,o.useState)("ag-layout-normal"),P=(0,o.useRef)();P.current||(P.current=new Tl((()=>F.current)));const F=(0,o.useRef)(null),N=(0,o.useRef)(null),O=(0,o.useRef)(null),B=(0,o.useRef)(null),G=(0,o.useRef)(null),z=(0,o.useRef)(null),j=(0,o.useRef)(null),V=(0,o.useRef)([]),H=(0,o.useRef)([]);Gv(" AG Grid Body ",F),Gv(" AG Pinned Top ",N),Gv(" AG Sticky Top ",O),Gv(" AG Middle ",z),Gv(" AG Pinned Bottom ",j);const W=(0,o.useCallback)((i=>{if(F.current=i,!i)return V.current=e.destroyBeans(V.current),H.current.forEach((e=>e())),void(H.current=[]);if(!e)return;const n=(e,t)=>{e.appendChild(t),H.current.push((()=>e.removeChild(t)))},o=(t,i,s)=>{n(t,document.createComment(s)),n(t,(t=>{const i=e.createBean(new t);return V.current.push(i),i})(i).getGui())};o(i,Yu," AG Fake Horizontal Scroll "),o(i,$u," AG Overlay Wrapper "),G.current&&o(G.current,qu," AG Fake Vertical Scroll ");const a={setRowAnimationCssOnBodyViewport:s,setColumnCount:e=>{F.current&&_l(F.current,e)},setRowCount:e=>{F.current&&Hl(F.current,e)},setTopHeight:r,setBottomHeight:l,setStickyTopHeight:h,setStickyTopTop:u,setStickyTopWidth:g,setTopDisplay:S,setBottomDisplay:M,setColumnMovingCss:(e,t)=>P.current.addOrRemoveCssClass(e,t),updateLayoutClasses:L,setAlwaysVerticalScrollClass:R,setPinnedTopBottomOverflowY:I,setCellSelectableCss:(e,t)=>k(t?e:null),setBodyViewportWidth:e=>{z.current&&(z.current.style.width=e)},registerBodyViewportResizeListener:e=>{if(z.current){const i=t.observeResize(z.current,e);H.current.push((()=>i()))}},setStickyBottomHeight:f,setStickyBottomBottom:y,setStickyBottomWidth:b},c=e.createBean(new Np);V.current.push(c),c.setComp(a,i,z.current,N.current,j.current,O.current,B.current)}),[]),_=(0,o.useMemo)((()=>tv("ag-root","ag-unselectable",T)),[T]),U=(0,o.useMemo)((()=>tv("ag-body-viewport",i,T,D,A)),[i,T,D,A]),$=(0,o.useMemo)((()=>tv("ag-body",T)),[T]),K=(0,o.useMemo)((()=>tv("ag-floating-top",A)),[A]),Y=(0,o.useMemo)((()=>tv("ag-sticky-top",A)),[A]),Z=(0,o.useMemo)((()=>tv("ag-sticky-bottom","0px"===m?"ag-hidden":null,A)),[A,m]),q=(0,o.useMemo)((()=>tv("ag-floating-bottom",A)),[A]),Q=(0,o.useMemo)((()=>({height:n,minHeight:n,display:w,overflowY:E})),[n,w,E]),X=(0,o.useMemo)((()=>({height:c,top:d,width:p})),[c,d,p]),J=(0,o.useMemo)((()=>({height:m,bottom:v,width:C})),[m,v,C]),ee=(0,o.useMemo)((()=>({height:a,minHeight:a,display:x,overflowY:E})),[a,x,E]),te=e=>o.createElement(Uv,{name:e,key:`${e}-container`}),ie=e=>{let{section:t,children:i,className:s,style:n}=e;return o.createElement("div",{ref:t,className:s,role:"presentation",style:n},i.map(te))};return o.createElement("div",{ref:W,className:_,role:"treegrid"},o.createElement(Bv,null),ie({section:N,className:K,style:Q,children:["topLeft","topCenter","topRight","topFullWidth"]}),o.createElement("div",{className:$,ref:G,role:"presentation"},ie({section:z,className:U,children:["left","center","right","fullWidth"]})),ie({section:O,className:Y,style:X,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ie({section:B,className:Z,style:J,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ie({section:j,className:q,style:ee,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))})),Kv=(0,o.forwardRef)(((e,t)=>{const{children:i,eFocusableElement:s,onTabKeyDown:n,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:a}=e,{context:l}=(0,o.useContext)(Xf),c=(0,o.useRef)(null),h=(0,o.useRef)(null),d=(0,o.useRef)(),u=e=>{const t=null==e?void 0:parseInt(e,10).toString();[c,h].forEach((e=>{void 0===t?e.current?.removeAttribute("tabindex"):e.current?.setAttribute("tabindex",t)}))};(0,o.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){d.current?.forceFocusOutOfContainer(e)}})));const p=(0,o.useCallback)((()=>{const e=c.current,t=h.current;if(e||t){if(e&&t){const i={setTabIndex:u};d.current=l.createBean(new Mg({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:s,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>r.focusInnerElement(e)}))}}else d.current=l.destroyBean(d.current)}),[]),g=(0,o.useCallback)((e=>{c.current=e,p()}),[p]),m=(0,o.useCallback)((e=>{h.current=e,p()}),[p]),f=e=>{const t="top"===e?xg.TAB_GUARD_TOP:xg.TAB_GUARD_BOTTOM;return o.createElement("div",{className:`${xg.TAB_GUARD} ${t}`,role:"presentation",ref:"top"===e?g:m})};return o.createElement(o.Fragment,null,f("top"),i,f("bottom"))})),Yv=(0,o.memo)(Kv),Zv=(0,o.memo)((e=>{let{context:t}=e;const[i,s]=(0,o.useState)(""),[n,r]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[c,h]=(0,o.useState)(null),[d,u]=(0,o.useState)(null),[p,g]=(0,o.useState)(!1),[m,f]=(0,o.useState)(),v=(0,o.useRef)(),y=(0,o.useRef)(null),C=(0,o.useRef)(),[b,w]=(0,o.useState)(null),S=(0,o.useRef)((()=>{})),x=(0,o.useRef)(),M=(0,o.useRef)([]),D=(0,o.useCallback)((()=>{}),[]),R=(0,o.useMemo)((()=>t.isDestroyed()?null:t.getBeans()),[t]);Gv(" AG Grid ",y);const E=(0,o.useCallback)((e=>{if(y.current=e,v.current=e?t.createBean(new hm):t.destroyBean(v.current),!e||t.isDestroyed())return;const i=v.current;S.current=i.focusInnerElement.bind(i);const n={destroyGridUi:()=>{},setRtlClass:s,setGridThemeClass:r,forceFocusOutOfContainer:e=>{e||!x.current?.isDisplayed()?C.current?.forceFocusOutOfContainer(e):x.current.forceFocusOutOfContainer(e)},updateLayoutClasses:l,getFocusableContainers:()=>{const e=[],t=y.current?.querySelector(".ag-root");return t&&e.push({getGui:()=>t}),M.current.forEach((t=>{t.isDisplayed()&&e.push(t)})),e},setCursor:h,setUserSelect:u};i.setComp(n,e,e),g(!0)}),[]);(0,o.useEffect)((()=>{const e=v.current,i=y.current;if(!m||!R||!e||!b||!i)return;const s=[],{watermarkSelector:n,paginationSelector:o,sideBarSelector:r,statusBarSelector:a,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),c=[];if(l){const e=t.createBean(new l.component),n=e.getGui();i.insertAdjacentElement("afterbegin",n),c.push(n),s.push(e)}if(r){const e=t.createBean(new r.component),i=e.getGui(),n=b.querySelector(".ag-tab-guard-bottom");n&&(n.insertAdjacentElement("beforebegin",i),c.push(i)),s.push(e),M.current.push(e)}const h=e=>{const n=t.createBean(new e),o=n.getGui();return i.insertAdjacentElement("beforeend",o),c.push(o),s.push(n),n};if(a&&h(a.component),o){const e=h(o.component);x.current=e,M.current.push(e)}return n&&h(n.component),()=>{t.destroyBeans(s),c.forEach((e=>{e.parentElement?.removeChild(e)}))}}),[m,b,R]);const I=(0,o.useMemo)((()=>tv("ag-root-wrapper",i,n,a)),[i,n,a]),A=(0,o.useMemo)((()=>tv("ag-root-wrapper-body","ag-focus-managed",a)),[a]),k=(0,o.useMemo)((()=>({userSelect:null!=d?d:"",WebkitUserSelect:null!=d?d:"",cursor:null!=c?c:""})),[d,c]),T=(0,o.useCallback)((e=>{C.current=e,f(null!==e)}),[]);return o.createElement("div",{ref:E,className:I,style:k,role:"presentation"},o.createElement("div",{className:A,ref:w,role:"presentation"},p&&b&&R&&o.createElement(Xf.Provider,{value:R},o.createElement(Yv,{ref:T,eFocusableElement:b,onTabKeyDown:D,gridCtrl:v.current,forceFocusOutWhenTabGuardsAreEmpty:!0},o.createElement($v,null)))))})),qv=class extends Sa{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},Qv=e=>{const t=(0,o.useRef)(),i=(0,o.useRef)(null),s=(0,o.useRef)(null),n=(0,o.useRef)([]),r=(0,o.useRef)([]),a=(0,o.useRef)(e),l=(0,o.useRef)(),c=(0,o.useRef)(),h=(0,o.useRef)(!1),[d,u]=(0,o.useState)(void 0),[,p]=(0,o.useState)(0),g=(0,o.useCallback)((o=>{if(i.current=o,!o)return n.current.forEach((e=>e())),void(n.current.length=0);const a=e.modules||[];s.current||(s.current=new Tv((()=>p((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push((()=>{s.current?.destroy(),s.current=null})));const d=function(e,t){"object"!==typeof e&&(e={});const i={...e};return Il.ALL_PROPERTIES_AND_CALLBACKS.forEach((e=>{const s=t[e];"undefined"!==typeof s&&s!==Il.VUE_OMITTED_PROPERTY&&(i[e]=s)})),i}(e.gridOptions,e),g=new ey((()=>{if(h.current){const e=()=>l.current?.shouldQueueUpdates()?void 0:r.current.shift();let t=e();for(;t;)t(),t=e()}}));l.current=g;const m=new qv,f={providedBeanInstances:{frameworkComponentWrapper:new Xv(s.current,d.reactiveCustomComponents??(v="reactiveCustomComponents",ff.gridOptions?.[v])??!0),renderStatusService:m},modules:a,frameworkOverrides:g};var v;const y=new yf;d.gridId??(d.gridId=c.current),t.current=y.create(o,d,(i=>{u(i),i.createBean(m),n.current.push((()=>{i.destroy()})),i.getBean("ctrlsService").whenReady({addDestroyFunc:e=>{n.current.push(e)}},(()=>{if(i.isDestroyed())return;const s=t.current;s&&e.setGridApi?.(s)}))}),(e=>{e.getBean("ctrlsService").whenReady({addDestroyFunc:e=>{n.current.push(e)}},(()=>{r.current.forEach((e=>e())),r.current.length=0,h.current=!0}))}),f),n.current.push((()=>{t.current=void 0})),t.current&&(c.current=t.current.getGridId())}),[]),m=(0,o.useMemo)((()=>({height:"100%",...e.containerStyle||{}})),[e.containerStyle]),f=(0,o.useCallback)((e=>{h.current&&!l.current?.shouldQueueUpdates()?e():r.current.push(e)}),[]);return(0,o.useEffect)((()=>{const i=function(e,t){const i={};return Object.keys(t).forEach((s=>{const n=t[s];e[s]!==n&&(i[s]=n)})),i}(a.current,e);a.current=e,f((()=>{t.current&&function(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter((e=>Il.ALL_PROPERTIES_AND_CALLBACKS_SET.has(e))).forEach((t=>{i[t]=e[t],s=!0})),!s)return;const n={type:"gridOptionsChanged",options:i};t.dispatchEvent(n);const o={type:"componentStateChanged"};Oa(i,((e,t)=>{o[e]=t})),t.dispatchEvent(o)}(i,t.current)}))}),[e]),o.createElement("div",{style:m,className:e.className,ref:g},d&&!d.isDestroyed()?o.createElement(Zv,{context:d}):null,s.current?.getPortals()??null)};var Xv=class extends Sf{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(e=>{switch(e){case"filter":return wv;case"floatingFilterComponent":return Mv;case"dateComponent":return Cv;case"dragAndDropImageComponent":return bv;case"loadingOverlayComponent":return Dv;case"noRowsOverlayComponent":return Ev;case"statusPanel":return Iv;case"toolPanel":return Av;case"menuItem":return Rv;case"cellRenderer":return yv}})(t.propertyName);if(i)return new i(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":kv()}const i=!t.cellRenderer&&"toolPanel"!==t.propertyName;return new mv(e,this.parent,t,i)}},Jv=(0,o.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:s,gos:n,resizeObserverService:r,rowModel:a}=(0,o.useContext)(Xf),[l,c]=(0,o.useState)((()=>new iv)),[h,d]=(0,o.useState)((()=>new iv)),[u,p]=(0,o.useState)(),[g,m]=(0,o.useState)(),f=(0,o.useRef)(),v=(0,o.useRef)(null),y=(0,o.useRef)(),C=(0,o.useMemo)((()=>Yh.__getGridRegisteredModules(e.api.getGridId())),[e]),b=(0,o.useMemo)((()=>l.toString()+" ag-details-row"),[l]),w=(0,o.useMemo)((()=>h.toString()+" ag-details-grid"),[h]);t&&(0,o.useImperativeHandle)(t,(()=>({refresh:()=>f.current?.refresh()??!1}))),e.template&&ir("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const S=(0,o.useCallback)((t=>{if(v.current=t,!t)return f.current=s.destroyBean(f.current),void y.current?.();const o={addOrRemoveCssClass:(e,t)=>c((i=>i.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>d((i=>i.setClass(e,t))),setDetailGrid:e=>p(e),setRowData:e=>m(e),getGui:()=>v.current},l=i.getInstance("detailCellRenderer");if(l&&(s.createBean(l),l.init(o,e),f.current=l,n.get("detailRowAutoHeight"))){const i=()=>{if(null==v.current)return;const t=v.current.clientHeight;if(null!=t&&t>0){setTimeout((()=>{e.node.setRowHeight(t),(xr(n)||Mr(n))&&a.onRowHeightChanged()}),0)}};y.current=r.observeResize(t,i),i()}}),[]),x=(0,o.useCallback)((e=>{f.current?.registerDetailWithMaster(e)}),[]);return o.createElement("div",{className:b,ref:S},u&&o.createElement(Qv,{className:w,...u,modules:C,rowData:g,setGridApi:x}))})),ey=class extends kg{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:hv,agGroupRowRenderer:hv,agDetailCellRenderer:Jv},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,rv||setTimeout((()=>rv=!1),0),rv=!0,i()):e();var i},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===nv}},ty=class extends o.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return o.createElement(Qv,{...this.props,setGridApi:this.setGridApi})}};const iy=e=>{let{rowData:t,columnDefinitions:i,fetchData:s,isExternalFilterPresent:n,doesExternalFilterPass:r}=e;const a=(0,o.useMemo)((()=>({object:{baseDataType:"object",extendsDataType:"object",valueParser:e=>({name:e.newValue}),valueFormatter:e=>null==e.value?"":e.value.name}})),[]);return(0,Do.jsx)("div",{className:"ag-grid-wrapper",children:(0,Do.jsx)(ty,{rowData:t,columnDefs:i,rowHeight:30,headerHeight:30,rowSelection:"multiple",dataTypeDefinitions:a,onGridReady:s,suppressClickEdit:!0,className:"ag-theme-quartz",isExternalFilterPresent:n,doesExternalFilterPass:r})})},sy=e=>{let{LeftComponent:t,RightComponent:i,ContainerComponent:s}=e;return(0,Do.jsxs)("div",{className:"structure-container",children:[s,(0,Do.jsx)("div",{className:"structure-left",children:t}),(0,Do.jsx)("div",{className:"structure-right",children:i})]})},ny={LOCATIONS:[{label:"Bangalore",value:"Bangalore"},{label:"Chennai",value:"Chennai"},{label:"Hyderabad",value:"Hyderabad"},{label:"Mumbai",value:"Mumbai"},{label:"Pune",value:"Pune"},{label:"Delhi",value:"Delhi"},{label:"Kolkata",value:"Kolkata"},{label:"Ahmedabad",value:"Ahmedabad"},{label:"Other",value:"Other"}],CTC:[{label:"Less than 10LPA",value:10},{label:"10-20LPA",value:20},{label:"20-30LPA",value:30},{label:"More than 30LPA",value:31}],BASE:[{label:"Less than 5LPA",value:5},{label:"5-10LPA",value:10},{label:"10-15LPA",value:15},{label:"More than 15LPA",value:16}],STATUS:[{label:"Completed",value:"completed"},{label:"Ongoing",value:"ongoing"},{label:"Cancelled",value:"cancelled"}],OFFERS:[{label:"PPO",value:"PPO"},{label:"FTE",value:"FTE"},{label:"6M+FTE",value:"6M+FTE"},{label:"Intern",value:"Intern"}],PROFILE_CATEGORIES:[{label:"Software",value:"Software"},{label:"Analyst",value:"Analyst"},{label:"Others",value:"Others"}],NUMERIC_RANGES:{BASIC:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:">3",value:4}]},ROLES:[{value:"student",label:"Student"},{value:"placementCoordinator",label:"PC"},{value:"admin",label:"Admin"}],VERIFICATION:[{value:"verified",label:"Verified"},{value:"unverified",label:"Unverified"}],BATCHES:[{value:2023,label:"2023"},{value:2024,label:"2024"},{value:2025,label:"2025"},{value:2026,label:"2026"}],PLACEMENT_STATUS:[{value:"placed",label:"Placed"},{value:"notPlaced",label:"Not Placed"}],GAP:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"More than 2",value:3}],BACKLOGS:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"More than 2",value:3}],CGPA_RANGES:{PG:[{label:"Less than 6.5",value:6.5},{label:"6.5-7",value:7},{label:"7-7.5",value:7.5},{label:"7.5-8",value:8},{label:"More than 8",value:9}],OVERALL:[{label:"Less than 6.5",value:6.5},{label:"More than 6.5",value:7},{label:"More than 7",value:7.5},{label:"More than 7.5",value:8},{label:"More than 8",value:9}]}},oy=e=>{let{allOptions:t,optionClickHandler:i}=e;return(0,Do.jsxs)("div",{className:"filter",children:[(0,Do.jsx)("h3",{children:"Filters"}),Object.keys(t).map((e=>{return s=e,n=t[e],(0,Do.jsxs)("div",{className:"filter__item",children:[(0,Do.jsx)("div",{className:"filter__item__label",children:s}),(0,Do.jsx)("div",{className:"filter__item__values",children:n.map((e=>(0,Do.jsx)("button",{id:`${s.toLowerCase()}-${e.value}`,className:"filter__item__value",onClick:()=>i(s,e.value),children:e.label},e.value)))})]});var s,n}))]})},ry=e=>{let{optionClickHandler:t}=e;const i={Status:ny.STATUS,Offer:ny.OFFERS,"Profile Category":ny.PROFILE_CATEGORIES,Shortlists:ny.NUMERIC_RANGES.BASIC,Selects:ny.NUMERIC_RANGES.BASIC,CTC:ny.CTC,Base:ny.BASE,Locations:ny.LOCATIONS};return(0,Do.jsx)(oy,{allOptions:i,optionClickHandler:t})},ay=e=>`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`,ly=e=>{let{actionFunc:t,handleFormClose:i,initialData:s,isAdd:n}=e;const[r,a]=(0,o.useState)((e=>{const t={name:"",status:"",interviewShortlist:0,selectedStudentsRollNo:[],dateOfOffer:ay(new Date),locations:[],cutoff_pg:0,cutoff_ug:0,cutoff_12:0,cutoff_10:0,typeOfOffer:"",profile:"",profileCategory:"",ctc:0,ctcBase:0,bond:0};var i,s,n,o,r,a,l,c,h,d,u,p,g,m,f,v;return e&&(t.name=e.name,t.status=e.status,t.interviewShortlist=e.interviewShortlist,t.selectedStudentsRollNo=e.selectedStudentsRollNo,t.dateOfOffer=ay(new Date(e.dateOfOffer)),t.locations=e.locations,t.cutoff_pg=(null===(i=e.cutoffs)||void 0===i||null===(s=i.pg)||void 0===s?void 0:s.cgpa)||(null===(n=e.cutoffs)||void 0===n||null===(o=n.pg)||void 0===o?void 0:o.percentage),t.cutoff_ug=(null===(r=e.cutoffs)||void 0===r||null===(a=r.ug)||void 0===a?void 0:a.cgpa)||(null===(l=e.cutoffs)||void 0===l||null===(c=l.ug)||void 0===c?void 0:c.percentage),t.cutoff_12=(null===(h=e.cutoffs)||void 0===h||null===(d=h.twelth)||void 0===d?void 0:d.cgpa)||(null===(u=e.cutoffs)||void 0===u||null===(p=u.twelth)||void 0===p?void 0:p.percentage),t.cutoff_10=(null===(g=e.cutoffs)||void 0===g||null===(m=g.tenth)||void 0===m?void 0:m.cgpa)||(null===(f=e.cutoffs)||void 0===f||null===(v=f.tenth)||void 0===v?void 0:v.percentage),t.typeOfOffer=e.typeOfOffer,t.profile=e.profile,t.profileCategory=e.profileCategory,t.ctc=e.ctc,t.ctcBase=e.ctcBreakup.base,t.bond=e.bond),t})(s)),l=(0,o.useCallback)(((e,t)=>{a((i=>({...i,[e]:t})))}),[]),c=(0,o.useCallback)(((e,t)=>{l(e,""===t?[]:t.split(",").map((e=>e.trim())))}),[l]),h=e=>({cgpa:e<=10?e:0,percentage:e>10?e:0}),d=(e,t,i,s)=>(0,Do.jsxs)("div",{className:"form-group",children:[(0,Do.jsx)("label",{htmlFor:t,children:e}),(0,Do.jsx)("input",{type:i,id:t,className:"form-control",placeholder:e,value:s,onChange:e=>l(t,e.target.value)})]}),u=(e,t,i)=>(0,Do.jsxs)("div",{className:"form-group",children:[(0,Do.jsx)("label",{htmlFor:t,children:e}),(0,Do.jsx)("textarea",{id:t,className:"form-control",placeholder:`(Comma separated ${e})`,value:i.join(","),onChange:e=>c(t,e.target.value)})]}),p=(e,t,i,s)=>(0,Do.jsxs)("div",{className:"form-group",children:[(0,Do.jsx)("label",{htmlFor:t,children:e}),(0,Do.jsxs)("select",{id:t,className:"form-select",value:s,onChange:e=>l(t,e.target.value),children:[(0,Do.jsxs)("option",{value:"",disabled:!0,children:["Select ",e]}),i.map((e=>(0,Do.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),g=(0,o.useMemo)((()=>[{label:"Ongoing",value:"ongoing"},{label:"Completed",value:"completed"},{label:"Cancelled",value:"cancelled"}]),[]),m=(0,o.useMemo)((()=>[{label:"Software",value:"Software"},{label:"Analyst",value:"Analyst"},{label:"Others",value:"Others"}]),[]),f=(0,o.useMemo)((()=>[{label:"PPO",value:"PPO"},{label:"FTE",value:"FTE"},{label:"6M+FTE",value:"6M+FTE"},{label:"Intern",value:"Intern"}]),[]);return(0,Do.jsx)("div",{className:"overlay",id:"companyFormModal",children:(0,Do.jsxs)("form",{className:"company-form",onSubmit:async e=>{e.preventDefault();let o=r.dateOfOffer;if(o){if(!/^\d{4}-\d{2}-\d{2}$/.test(o)){const e=new Date(o);o=isNaN(e.getTime())?ay(new Date):ay(e)}}else o=ay(new Date);const a={...r,selected:r.selectedStudentsRollNo.length,dateOfOffer:o,cutoffs:{pg:h(r.cutoff_pg),ug:h(r.cutoff_ug),twelth:h(r.cutoff_12),tenth:h(r.cutoff_10)},ctcBreakup:{base:r.ctcBase,other:(r.ctc-r.ctcBase).toFixed(2)}};try{const e=n?await t(a):await t(s._id,a);200===e.status?xi.success((0,Do.jsx)(ko,{res:"Success",messages:[`Company ${n?"added":"updated"} successfully`]})):xi.error((0,Do.jsx)(ko,{res:"Error",messages:e.data.errors})),i(!0)}catch(Ey){console.error("Error:",Ey),xi.error((0,Do.jsx)(ko,{res:"Error",messages:Ey.response.data.errors}))}},children:[d("Company Name","name","text",r.name),p("Status","status",g,r.status),(0,Do.jsxs)("div",{className:"input-group",children:[d("Interview/Intern Shortlists","interviewShortlist","number",r.interviewShortlist),d("Date of Offer","dateOfOffer","date",r.dateOfOffer)]}),u("Selected Students Roll No","selectedStudentsRollNo",r.selectedStudentsRollNo),u("Locations","locations",r.locations),(0,Do.jsxs)("div",{className:"input-group-out",children:[(0,Do.jsxs)("div",{className:"input-group",children:[d("Cutoff PG","cutoff_pg","number",r.cutoff_pg),d("Cutoff UG","cutoff_ug","number",r.cutoff_ug)]}),(0,Do.jsxs)("div",{className:"input-group",children:[d("Cutoff 12","cutoff_12","number",r.cutoff_12),d("Cutoff 10","cutoff_10","number",r.cutoff_10)]})]}),p("Offer","typeOfOffer",f,r.typeOfOffer),(0,Do.jsxs)("div",{className:"input-group",children:[d("Profile","profile","text",r.profile),p("Profile Category","profileCategory",m,r.profileCategory)]}),(0,Do.jsxs)("div",{className:"input-group",children:[d("CTC","ctc","number",r.ctc),d("CTC Base","ctcBase","number",r.ctcBase),d("Bond","bond","number",r.bond)]}),(0,Do.jsxs)("div",{className:"company-form__buttons",children:[(0,Do.jsx)("button",{type:"submit",className:"btn btn-primary",children:n?"Add":"Update"}),(0,Do.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>i(!1),children:"Cancel"})]})]})})},cy=()=>{const[e,t]=(0,o.useState)([]),[i,s]=(0,o.useState)(null),[n,r]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[h,d]=(0,o.useState)(!1),[u,p]=(0,o.useState)(null),[g,m]=(0,o.useState)({}),f=(0,o.useCallback)((async()=>{try{const e=await Promise.all([zo(),qo()]),i=e[0];m(e[1]),i.data.forEach((e=>{e.id=e._id,e.selectedStudents=e.selectedStudentsRollNo.length,e.cutoff_pg=w(e.cutoffs.pg),e.cutoff_ug=w(e.cutoffs.ug),e.cutoff_12=w(e.cutoffs.twelth),e.cutoff_10=w(e.cutoffs.tenth),e.ctcBase=e.ctcBreakup.base})),t(i.data)}catch(Ey){console.error("Error fetching companies:",Ey),xi.error((0,Do.jsx)(ko,{res:"error",messages:["Error fetching companies."]}))}}),[]),v=e=>{d(!0),p(e)},y=async e=>{try{const t=await jo(e.id);s(t.data),c(!1),r(!0)}catch(Ey){console.error("Error fetching company:",Ey),xi.error((0,Do.jsx)(ko,{res:"error",messages:[`Error fetching company ${e.name}.`]}))}},C=function(e,t,i){return{field:e,headerName:t,width:i,pinned:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,sortable:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],resizable:!(arguments.length>5&&void 0!==arguments[5])||arguments[5],cellRenderer:arguments.length>6&&void 0!==arguments[6]?arguments[6]:null}},b=(e,t)=>({headerName:e,children:t}),w=e=>e.cgpa?`${e.cgpa} CGPA`:`${e.percentage}%`,S=(e,t,i,s)=>(0,Do.jsx)("button",{className:t,onClick:()=>s(e.data),children:i}),x=b("Actions",[C(null,"Del",45,"left",!1,!1,(e=>S(e,"btn--icon--del",(0,Do.jsx)(Oo,{}),v))),C(null,"Edit",45,"left",!1,!1,(e=>S(e,"btn--icon--edit",(0,Do.jsx)(Bo,{}),y)))]),M=[..."admin"===g.role||"placementCoordinator"===g.role?[x]:[],C("name","Name",150,"left"),C("status","Status",90,null,!1),C("typeOfOffer","Offer",80,null,!1,!1),C("profile","Profile",130),C("profileCategory","Category",85,null,!1,!1),C("interviewShortlist","Shortlists",105,null,!0,!1),C("selectedStudents","Selects",95,null,!0,!1),C("dateOfOffer","Offer Date",115,null,!0,!1,(e=>e.value?new Date(e.value).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}):"")),C("locations","Locations",130,null,!1,!0),b("CTC (LPA)",[C("ctc","CTC",75,null,!0,!1,(e=>e.value.toFixed(2))),C("ctcBase","Base",75,null,!0,!1,(e=>e.value.toFixed(2)))]),b("Cutoffs",[C("cutoff_pg","PG",80,null,!1,!1),C("cutoff_ug","UG",80,null,!1,!1),C("cutoff_12","12",80,null,!1,!1),C("cutoff_10","10",80,null,!1,!1)]),C("bond","Bond",60,null,!1,!1)],D=(0,o.useCallback)((e=>{r(!1),e&&f()}),[f]),[R,E]=(0,o.useState)(!1),[I,A]=(0,o.useState)([]),[k,T]=(0,o.useState)([]),[L,P]=(0,o.useState)([]),[F,N]=(0,o.useState)([]),[O,B]=(0,o.useState)([]),[G,z]=(0,o.useState)([]),[j,V]=(0,o.useState)([]),[H,W]=(0,o.useState)([]),_=(0,o.useCallback)((()=>R),[R]),U=(0,o.useCallback)((e=>0===I.length||I.includes(e.status.toLowerCase())),[I]),$=(0,o.useCallback)((e=>0===H.length||H.includes(e.typeOfOffer)),[H]),K=(0,o.useCallback)((e=>0===k.length||k.includes(e.profileCategory)),[k]),Y=(0,o.useCallback)((e=>0===L.length||L.includes(e.interviewShortlist)||L.includes(4)&&e.interviewShortlist>=4),[L]),Z=(0,o.useCallback)((e=>0===F.length||F.includes(e.selectedStudents)||F.includes(4)&&e.selectedStudents>=4),[F]),q=(0,o.useCallback)((e=>0===O.length||O.some((t=>31===t?e.ctc>=t:e.ctc<t))||O.includes(10)&&e.ctc<10||O.includes(20)&&e.ctc>=10&&e.ctc<20||O.includes(30)&&e.ctc>=20&&e.ctc<30),[O]),Q=(0,o.useCallback)((e=>0===G.length||G.some((t=>16===t?e.ctcBase>=t:e.ctcBase<t))||G.includes(5)&&e.ctcBase<5||G.includes(10)&&e.ctcBase>=5&&e.ctcBase<10||G.includes(15)&&e.ctcBase>=10&&e.ctcBase<15),[G]),X=(0,o.useCallback)((e=>0===j.length||j.some((t=>e.locations.includes(t)))),[j]),J=(0,o.useCallback)((e=>{if(!e.data)return!0;const{data:t}=e;return U(t)&&$(t)&&K(t)&&Y(t)&&Z(t)&&q(t)&&Q(t)&&X(t)}),[U,$,K,Y,Z,q,Q,X]);return(0,Do.jsx)(sy,{LeftComponent:(0,Do.jsxs)(Do.Fragment,{children:[("admin"===g.role||"placementCoordinator"===g.role)&&(0,Do.jsx)("button",{className:"btn btn-primary",onClick:()=>{c(!0),s(null),r(!0)},children:"Add Company"}),(0,Do.jsx)(ry,{optionClickHandler:(e,t)=>{E(!0);const i=document.getElementById(`${e.toLowerCase()}-${t}`);i.classList.add("active");({Status:A,Offer:W,"Profile Category":T,Shortlists:P,Selects:N,CTC:B,Base:z,Locations:V})[e]((e=>e.includes(t)?(i.classList.remove("active"),e.filter((e=>e!==t))):[...e,t]))}})]}),RightComponent:(0,Do.jsx)(iy,{rowData:e,columnDefinitions:M,fetchData:f,isExternalFilterPresent:_,doesExternalFilterPass:J}),ContainerComponent:(0,Do.jsxs)(Do.Fragment,{children:[n?l.createPortal((0,Do.jsx)(ly,{actionFunc:a?Vo:Ho,initialData:i,handleFormClose:D,isAdd:a}),document.getElementById("form-root")):null,(0,Do.jsx)(Ro,{isOpen:h,onClose:()=>d(!1),onConfirm:async()=>{try{await(e=u.id,wo.delete(`/companies/delete/${e}`)),xi.success((0,Do.jsx)(ko,{res:"success",messages:[`Company ${u.name} deleted successfully.`]})),d(!1),t((e=>e.filter((e=>e.id!==u.id))))}catch(Ey){console.error("Error deleting company:",Ey),xi.error((0,Do.jsx)(ko,{res:"error",messages:[`Error deleting company ${u.name}.`]}))}var e},message:"Are you sure you want to delete this company?",buttonTitle:"Delete"})]})})},hy=()=>(0,Do.jsxs)("div",{className:"container page-container",children:[(0,Do.jsxs)("div",{className:"page-header animate-fadeInDown",children:[(0,Do.jsxs)("h1",{className:"page-title",children:[(0,Do.jsx)("span",{className:"title-icon animate-float",children:"\ud83c\udfe2"}),"Companies",(0,Do.jsx)("div",{className:"title-underline title-underline-sm"})]}),(0,Do.jsx)("p",{className:"page-subtitle animate-fadeInUp animate-delay-300",children:"Explore top recruiting companies and their placement opportunities"})]}),(0,Do.jsx)("div",{className:"page-content animate-fadeInUp animate-delay-500",children:(0,Do.jsx)(cy,{})})]}),dy=e=>{var t;let{closeExperienceAddModal:i,initialData:s,isAdd:n}=e;const[r,a]=(0,o.useState)({companyName:(null===s||void 0===s?void 0:s.companyName)||"",content:(null===s||void 0===s?void 0:s.content)||"",tags:(null===s||void 0===s||null===(t=s.tags)||void 0===t?void 0:t.join(", "))||"",rating:(null===s||void 0===s?void 0:s.rating)||5,interviewProcess:(null===s||void 0===s?void 0:s.interviewProcess)||"",tips:(null===s||void 0===s?void 0:s.tips)||"",difficulty:(null===s||void 0===s?void 0:s.difficulty)||"Medium"}),[l,c]=(0,o.useState)(!1),h={width:"100%",padding:"0.75rem",marginTop:"0.5rem",border:"1px solid transparent",borderRadius:"0.5rem",fontSize:"1rem",fontFamily:"'Comic Sans MS', 'Comic Sans', cursive",outline:"none",background:"var(--color-bg)",color:"var(--color-white)",transition:"all 0.4s ease-in-out",resize:"vertical"},d={display:"block",marginBottom:"0.25rem",fontWeight:"600",color:"var(--color-light)",fontSize:"1rem",fontFamily:"'Comic Sans MS', 'Comic Sans', cursive"},u={marginBottom:"1.5rem"};return(0,Do.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,fontFamily:"'Comic Sans MS', 'Comic Sans', cursive"},children:(0,Do.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{const e=await qo(),t={...r,tags:r.tags.split(",").map((e=>e.trim())).filter((e=>e.length>0))||["General"],studentDetails:{rollNo:e.rollNo,name:e.name,batch:e.batch}};n?await(async e=>wo.post("/experiences/add",e))(t):await(async(e,t)=>wo.put(`/experiences/update/${e}`,t))(s._id,t),xi.success((0,Do.jsx)(ko,{res:"Success",messages:[`Experience ${n?"added":"updated"} successfully!`]})),i(!0)}catch(Ey){var t,o;console.error("Error submitting experience:",Ey),xi.error((0,Do.jsx)(ko,{res:"Error",messages:(null===(t=Ey.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.errors)||["Failed to submit experience"]}))}finally{c(!1)}},style:{background:"var(--color-bg-variant)",padding:"2rem",borderRadius:"1rem",minWidth:"500px",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 0 20px rgba(0, 0, 0, 0.6)",border:"1px solid var(--color-bg-variant-2)",opacity:"0.95",transition:"all 0.4s ease-in-out"},children:[(0,Do.jsx)("div",{style:{textAlign:"center",marginBottom:"2rem",borderBottom:"2px solid var(--color-primary-variant)",paddingBottom:"1rem"},children:(0,Do.jsx)("h2",{style:{margin:0,color:"var(--color-primary)",fontSize:"2rem",fontWeight:"600",fontFamily:"'Comic Sans MS', 'Comic Sans', cursive",textShadow:"0 0 10px rgba(255, 204, 102, 0.3)"},children:n?"Add New Experience":"Edit Experience"})}),(0,Do.jsxs)("div",{style:u,children:[(0,Do.jsx)("label",{style:d,children:"Company Name *"}),(0,Do.jsx)("input",{type:"text",value:r.companyName,onChange:e=>a((t=>({...t,companyName:e.target.value}))),placeholder:"Enter company name",required:!0,style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"}})]}),(0,Do.jsxs)("div",{style:u,children:[(0,Do.jsx)("label",{style:d,children:"Experience Content *"}),(0,Do.jsx)("textarea",{value:r.content,onChange:e=>a((t=>({...t,content:e.target.value}))),placeholder:"Share your detailed experience...",required:!0,rows:6,style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"}})]}),(0,Do.jsxs)("div",{style:u,children:[(0,Do.jsx)("label",{style:d,children:"Tags"}),(0,Do.jsx)("input",{type:"text",value:r.tags,onChange:e=>a((t=>({...t,tags:e.target.value}))),placeholder:"Enter tags separated by commas (e.g., Technical, HR, Final Round)",style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"}})]}),(0,Do.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},children:[(0,Do.jsxs)("div",{children:[(0,Do.jsx)("label",{style:d,children:"Overall Rating *"}),(0,Do.jsxs)("select",{value:r.rating,onChange:e=>a((t=>({...t,rating:parseInt(e.target.value)}))),required:!0,style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"},children:[(0,Do.jsx)("option",{value:1,children:"1 - Poor"}),(0,Do.jsx)("option",{value:2,children:"2 - Fair"}),(0,Do.jsx)("option",{value:3,children:"3 - Good"}),(0,Do.jsx)("option",{value:4,children:"4 - Very Good"}),(0,Do.jsx)("option",{value:5,children:"5 - Excellent"})]})]}),(0,Do.jsxs)("div",{children:[(0,Do.jsx)("label",{style:d,children:"Difficulty Level *"}),(0,Do.jsxs)("select",{value:r.difficulty,onChange:e=>a((t=>({...t,difficulty:e.target.value}))),required:!0,style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"},children:[(0,Do.jsx)("option",{value:"Easy",children:"Easy"}),(0,Do.jsx)("option",{value:"Medium",children:"Medium"}),(0,Do.jsx)("option",{value:"Hard",children:"Hard"})]})]})]}),(0,Do.jsxs)("div",{style:u,children:[(0,Do.jsx)("label",{style:d,children:"Interview Process"}),(0,Do.jsx)("textarea",{value:r.interviewProcess,onChange:e=>a((t=>({...t,interviewProcess:e.target.value}))),placeholder:"Describe the interview process, rounds, etc.",rows:4,style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"}})]}),(0,Do.jsxs)("div",{style:u,children:[(0,Do.jsx)("label",{style:d,children:"Tips & Advice"}),(0,Do.jsx)("textarea",{value:r.tips,onChange:e=>a((t=>({...t,tips:e.target.value}))),placeholder:"Share tips and advice for future candidates...",rows:4,style:h,onFocus:e=>{e.target.style.borderColor="var(--color-primary-variant)",e.target.style.transform="scale(1.02)",e.target.style.boxShadow="0 0 15px rgba(255, 204, 102, 0.3)"},onBlur:e=>{e.target.style.borderColor="transparent",e.target.style.transform="scale(1)",e.target.style.boxShadow="none"}})]}),(0,Do.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end",marginTop:"2rem",paddingTop:"1rem",borderTop:"2px solid var(--color-primary-variant)"},children:[(0,Do.jsx)("button",{type:"submit",disabled:l,style:{padding:"1rem 2rem",backgroundColor:l?"var(--color-bg-variant-2)":"var(--color-primary)",color:l?"var(--color-light)":"var(--color-bg)",border:"1px solid transparent",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",fontFamily:"'Comic Sans MS', 'Comic Sans', cursive",cursor:l?"not-allowed":"pointer",minWidth:"140px",transition:"all 0.4s ease-in-out",textShadow:l?"none":"0 0 5px rgba(0, 0, 0, 0.3)"},onMouseEnter:e=>{l||(e.target.style.backgroundColor="var(--color-primary-variant)",e.target.style.borderColor="var(--color-primary)",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 5px 15px rgba(255, 204, 102, 0.4)")},onMouseLeave:e=>{l||(e.target.style.backgroundColor="var(--color-primary)",e.target.style.borderColor="transparent",e.target.style.transform="translateY(0)",e.target.style.boxShadow="none")},children:l?"Saving...":n?"Add Experience":"Update Experience"}),(0,Do.jsx)("button",{type:"button",onClick:()=>i(!1),disabled:l,style:{padding:"1rem 2rem",backgroundColor:"var(--color-bg-variant-2)",color:"var(--color-light)",border:"1px solid var(--color-bg-variant-2)",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",fontFamily:"'Comic Sans MS', 'Comic Sans', cursive",cursor:l?"not-allowed":"pointer",minWidth:"140px",transition:"all 0.4s ease-in-out"},onMouseEnter:e=>{l||(e.target.style.backgroundColor="var(--color-danger)",e.target.style.borderColor="var(--color-danger)",e.target.style.color="var(--color-white)",e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 5px 15px rgba(255, 102, 102, 0.4)")},onMouseLeave:e=>{l||(e.target.style.backgroundColor="var(--color-bg-variant-2)",e.target.style.borderColor="var(--color-bg-variant-2)",e.target.style.color="var(--color-light)",e.target.style.transform="translateY(0)",e.target.style.boxShadow="none")},children:"Cancel"})]})]})})},uy=e=>{let{closeExperienceViewModal:t,experienceViewModalData:i,user:s}=e;const[n,r]=(0,o.useState)({}),[a,c]=(0,o.useState)(!1),[h,d]=(0,o.useState)(!1),[u,p]=(0,o.useState)({}),g=e=>{c(!1),e&&t(!0)};return(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsx)("div",{className:"overlay",id:"experience-view-modal",children:(0,Do.jsxs)("div",{className:"experience-view",children:[(0,Do.jsxs)("div",{className:"experience-header",children:[(0,Do.jsxs)("h3",{className:"experience-student-details",children:[i.studentDetails.name," (",i.studentDetails.batch,")"]}),(0,Do.jsx)("div",{children:i.createdAt})]}),(0,Do.jsx)("h3",{className:"experience-Title",children:i.companyName}),(0,Do.jsx)("div",{className:"experience-content",children:i.content}),(0,Do.jsx)("div",{className:"experience-view-tags",children:i.tags.map((e=>(0,Do.jsxs)("div",{className:"experience-view-tag",children:["#",e]},e)))}),(0,Do.jsx)("div",{className:"experience-comments",children:i.Comments.map((e=>(0,Do.jsx)("div",{className:"experience-comment",children:e.content},e._id)))}),(0,Do.jsxs)("div",{className:"modal-buttons",children:[s.rollNo===i.studentDetails.rollNo&&(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>(r(i),void c(!0)),children:"Edit"}),(0,Do.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{return e=i,d(!0),void p(e);var e},children:"Delete"})]}),(0,Do.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>t(!1),children:"Close"})]})]})}),a?l.createPortal((0,Do.jsx)(dy,{closeExperienceAddModal:g,initialData:n,isAdd:!1}),document.getElementById("modal-root")):null,(0,Do.jsx)(Ro,{isOpen:h,onClose:()=>d(!1),onConfirm:async()=>{try{const e=u._id;await(async e=>wo.delete(`/experiences/delete/${e}`))(e),xi.success((0,Do.jsx)(ko,{res:"success",messages:["Experience deleted successfully."]})),t(!0),d(!1)}catch(Ey){console.error("Error deleting experience:",Ey),xi.error((0,Do.jsx)(ko,{res:"Error",messages:Ey.response.data.errors}))}},message:"Are you sure you want to delete this Experience?",buttonTitle:"Delete",rootid:"experience-view-modal"})]})},py=()=>{const[e,t]=(0,o.useState)([]),[i,s]=(0,o.useState)([]),[n,r]=(0,o.useState)(!1),[a,c]=(0,o.useState)(!1),[h,d]=(0,o.useState)({}),[u,p]=(0,o.useState)({}),[g,m]=(0,o.useState)([]),[f,v]=(0,o.useState)("All"),y=(0,o.useCallback)((async()=>{try{const e=await(async()=>wo.get("/experiences/view"))(),i=[];e.data.experiences.forEach((e=>{e.createdAt=(e=>{const t=e.toLocaleDateString("en-In",{year:"numeric",month:"short",day:"numeric"});return`${e.toLocaleTimeString("en-In",{hour:"numeric",minute:"numeric",hour12:!0})} (${t})`})(new Date(e.createdAt)),((e,t)=>{t.tags.forEach((t=>{const i=e.find((e=>e.tag===t));i?i.count++:e.push({tag:t,count:1})}))})(i,e)})),i.sort(((e,t)=>t.count-e.count)),m(i),s(e.data.experiences),t(e.data.experiences)}catch(Ey){console.error("Error fetching data:",Ey)}}),[]);(0,o.useEffect)((()=>{(async()=>{const e=await qo();p(e)})(),y()}),[y]);const C=(0,o.useCallback)((e=>{r(!1),e&&y()}),[y]),b=(0,o.useCallback)((e=>{c(!1),e&&y()}),[y]),w=t=>{if("All"===t)s(e);else{const i=e.filter((e=>e.tags.includes(t)));s(i)}v(t)};return(0,Do.jsx)(sy,{LeftComponent:(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsx)("button",{className:"btn btn-primary",onClick:()=>{r(!0)},children:"Add Experience"}),(0,Do.jsxs)("div",{className:"experience-filters",children:[(0,Do.jsx)("button",{className:`experience-tag-all ${"All"===f?"active":""} `,onClick:()=>w("All"),id:"All",children:"All Tags"},"All"),g.map((e=>(0,Do.jsxs)("button",{className:"experience-tag "+(f===e.tag?"active":""),onClick:()=>w(e.tag),id:e.tag,children:["#",e.tag," - (",e.count,")"]},e.tag)))]})]}),RightComponent:0===i.length?(0,Do.jsx)("div",{children:"No experiences to show."}):i.map((e=>(0,Do.jsxs)("div",{className:"experience-item",children:[(0,Do.jsxs)("div",{className:"experience-header",children:[(0,Do.jsxs)("h3",{className:"experience-student-details",children:[e.studentDetails.name," (",e.studentDetails.batch,")"]}),(0,Do.jsx)("div",{children:e.createdAt})]}),(0,Do.jsx)("button",{className:"experience-Title",onClick:()=>{c(!0),d(e)},children:e.companyName}),(0,Do.jsx)("div",{className:"experience-item-tags",children:e.tags.map((e=>(0,Do.jsxs)("div",{className:"experience-item-tag",children:["#",e]},e)))}),(0,Do.jsxs)("div",{className:"experience-comments-count",children:[e.Comments.length," ",(0,Do.jsx)(qi,{})]})]},e._id))),ContainerComponent:(0,Do.jsxs)(Do.Fragment,{children:[n?l.createPortal((0,Do.jsx)(dy,{closeExperienceAddModal:C,initialData:{},isAdd:!0}),document.getElementById("modal-root")):null,a?l.createPortal((0,Do.jsx)(uy,{closeExperienceViewModal:b,experienceViewModalData:h,user:u}),document.getElementById("modal-root")):null]})})},gy=()=>(0,Do.jsxs)("div",{className:"container page-container",children:[(0,Do.jsxs)("div",{className:"page-header animate-fadeInDown",children:[(0,Do.jsxs)("h1",{className:"page-title",children:[(0,Do.jsx)("span",{className:"title-icon animate-wiggle",children:"\ud83d\udcbc"}),"Experience",(0,Do.jsx)("div",{className:"title-underline"})]}),(0,Do.jsx)("p",{className:"page-subtitle animate-fadeInUp animate-delay-300",children:"Share and explore placement experiences, tips, and interview insights"})]}),(0,Do.jsx)("div",{className:"page-content animate-fadeInUp animate-delay-500",children:(0,Do.jsx)(py,{})})]}),my=()=>wo.get("/stats/ctc"),fy=()=>wo.get("/stats/company"),vy=()=>wo.get("/stats/student"),yy=()=>{const e=at(),[t,i]=(0,o.useState)({students:{total:0,placed:0,percentage:0},companies:{total:0,active:0},ctc:{highest:0,average:0,median:0}}),[s,n]=(0,o.useState)(new Date),[r,a]=(0,o.useState)(!0);(0,o.useEffect)((()=>{l();const e=setInterval((()=>{n(new Date)}),1e3);return()=>clearInterval(e)}),[]);const l=async()=>{try{a(!0);const[e,t,s]=await Promise.all([vy(),fy(),my()]);i({students:e.data||{total:0,placed:0,percentage:0},companies:t.data||{total:0,active:0},ctc:s.data||{highest:0,average:0,median:0}})}catch(Ey){console.error("Error fetching stats:",Ey),i({students:{total:150,placed:85,percentage:56.7},companies:{total:25,active:18},ctc:{highest:12,average:6.5,median:5.2}})}finally{a(!1)}};return(0,Do.jsxs)("div",{className:"container home-container",children:[(0,Do.jsxs)("div",{className:"home-hero",children:[(0,Do.jsxs)("div",{className:"live-clock",children:[(0,Do.jsx)("div",{className:"time-display",children:s.toLocaleTimeString()}),(0,Do.jsx)("div",{className:"date-display",children:s.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,Do.jsxs)("div",{className:"home-header",children:[(0,Do.jsxs)("h1",{className:"home-title",children:["Welcome to ",(0,Do.jsx)("span",{className:"highlight-text",children:"Placemento"})]}),(0,Do.jsx)("p",{className:"home-subtitle",children:"Your Ultimate Placement Management Platform"})]})]}),(0,Do.jsxs)("div",{className:"stats-dashboard",children:[(0,Do.jsx)("h2",{className:"dashboard-title",children:"\ud83d\udcca Live Statistics"}),(0,Do.jsxs)("div",{className:"stats-grid",children:[(0,Do.jsxs)("div",{className:"stat-card student-stats",children:[(0,Do.jsx)("div",{className:"stat-icon",children:"\ud83d\udc65"}),(0,Do.jsxs)("div",{className:"stat-content",children:[(0,Do.jsx)("h3",{children:r?"...":t.students.total}),(0,Do.jsx)("p",{children:"Total Students"}),(0,Do.jsx)("div",{className:"stat-progress",children:(0,Do.jsx)("div",{className:"progress-bar",style:{width:`${t.students.percentage}%`}})}),(0,Do.jsxs)("span",{className:"stat-percentage",children:[t.students.percentage,"% Placed"]})]})]}),(0,Do.jsxs)("div",{className:"stat-card company-stats",children:[(0,Do.jsx)("div",{className:"stat-icon",children:"\ud83c\udfe2"}),(0,Do.jsxs)("div",{className:"stat-content",children:[(0,Do.jsx)("h3",{children:r?"...":t.companies.total}),(0,Do.jsx)("p",{children:"Total Companies"}),(0,Do.jsxs)("div",{className:"active-count",children:[(0,Do.jsx)("span",{className:"active-indicator"}),t.companies.active," Active"]})]})]}),(0,Do.jsxs)("div",{className:"stat-card ctc-stats",children:[(0,Do.jsx)("div",{className:"stat-icon",children:"\ud83d\udcb0"}),(0,Do.jsxs)("div",{className:"stat-content",children:[(0,Do.jsxs)("h3",{children:["\u20b9",r?"...":t.ctc.highest,"L"]}),(0,Do.jsx)("p",{children:"Highest CTC"}),(0,Do.jsx)("div",{className:"ctc-details",children:(0,Do.jsxs)("small",{children:["Avg: \u20b9",t.ctc.average,"L | Med: \u20b9",t.ctc.median,"L"]})})]})]})]})]}),(0,Do.jsxs)("div",{className:"hero-banner",children:[(0,Do.jsxs)("div",{className:"floating-elements",children:[(0,Do.jsx)("div",{className:"float-element",children:"\ud83d\ude80"}),(0,Do.jsx)("div",{className:"float-element",children:"\ud83d\udca1"}),(0,Do.jsx)("div",{className:"float-element",children:"\u2b50"}),(0,Do.jsx)("div",{className:"float-element",children:"\ud83c\udfaf"})]}),(0,Do.jsxs)("div",{className:"hero-content",children:[(0,Do.jsx)("h2",{children:"\ud83c\udf89 Transform Your Career Journey"}),(0,Do.jsx)("p",{children:"Experience the future of placement management with cutting-edge technology"})]})]}),(0,Do.jsxs)("div",{className:"quick-actions",children:[(0,Do.jsx)("h2",{className:"section-title",children:"\u26a1 Quick Actions"}),(0,Do.jsx)("div",{className:"actions-grid",children:[{title:"View Students",path:"/students",icon:"\ud83d\udc65",color:"#4f46e5"},{title:"Browse Companies",path:"/companies",icon:"\ud83c\udfe2",color:"#059669"},{title:"Check Stats",path:"/stats",icon:"\ud83d\udcca",color:"#dc2626"},{title:"Share Experience",path:"/experience",icon:"\ud83d\udcbc",color:"#7c3aed"}].map(((t,i)=>(0,Do.jsxs)("button",{className:"action-btn",onClick:()=>e(t.path),style:{"--action-color":t.color},children:[(0,Do.jsx)("div",{className:"action-icon",children:t.icon}),(0,Do.jsx)("span",{children:t.title}),(0,Do.jsx)("div",{className:"action-badge",children:"NEW"})]},t.title)))})]}),(0,Do.jsxs)("div",{className:"home-features",children:[(0,Do.jsx)("h2",{className:"section-title",children:"\ud83c\udf1f Platform Features"}),(0,Do.jsxs)("div",{className:"features-grid",children:[(0,Do.jsxs)("div",{className:"feature-card card-3d",children:[(0,Do.jsx)("div",{className:"card-glow"}),(0,Do.jsx)("div",{className:"feature-icon floating",children:"\ud83d\udcca"}),(0,Do.jsx)("h3",{children:"Advanced Analytics"}),(0,Do.jsx)("p",{children:"AI-powered insights with real-time data visualization and predictive analytics"}),(0,Do.jsx)("div",{className:"feature-highlight pulse",children:"AI Powered"})]}),(0,Do.jsxs)("div",{className:"feature-card card-3d",children:[(0,Do.jsx)("div",{className:"card-glow"}),(0,Do.jsx)("div",{className:"feature-icon floating",children:"\ud83d\udc65"}),(0,Do.jsx)("h3",{children:"Smart Student Hub"}),(0,Do.jsx)("p",{children:"Intelligent profile management with automated matching and career recommendations"}),(0,Do.jsx)("div",{className:"feature-highlight pulse",children:"Smart Matching"})]}),(0,Do.jsxs)("div",{className:"feature-card card-3d",children:[(0,Do.jsx)("div",{className:"card-glow"}),(0,Do.jsx)("div",{className:"feature-icon floating",children:"\ud83c\udfe2"}),(0,Do.jsx)("h3",{children:"Company Connect"}),(0,Do.jsx)("p",{children:"Direct integration with 500+ companies and real-time job opportunity updates"}),(0,Do.jsx)("div",{className:"feature-highlight pulse",children:"500+ Partners"})]}),(0,Do.jsxs)("div",{className:"feature-card card-3d",children:[(0,Do.jsx)("div",{className:"card-glow"}),(0,Do.jsx)("div",{className:"feature-icon floating",children:"\ud83d\udcbc"}),(0,Do.jsx)("h3",{children:"Experience Hub"}),(0,Do.jsx)("p",{children:"Community-driven platform with verified reviews and interview preparation tools"}),(0,Do.jsx)("div",{className:"feature-highlight pulse",children:"Verified Reviews"})]}),(0,Do.jsxs)("div",{className:"feature-card card-3d",children:[(0,Do.jsx)("div",{className:"card-glow"}),(0,Do.jsx)("div",{className:"feature-icon floating",children:"\u26a1"}),(0,Do.jsx)("h3",{children:"Lightning Fast"}),(0,Do.jsx)("p",{children:"Optimized performance with instant updates and real-time notifications"}),(0,Do.jsx)("div",{className:"feature-highlight pulse",children:"Real-time"})]}),(0,Do.jsxs)("div",{className:"feature-card card-3d",children:[(0,Do.jsx)("div",{className:"card-glow"}),(0,Do.jsx)("div",{className:"feature-icon floating",children:"\ud83c\udfaf"}),(0,Do.jsx)("h3",{children:"Goal Tracker"}),(0,Do.jsx)("p",{children:"Personal achievement tracking with milestone celebrations and progress analytics"}),(0,Do.jsx)("div",{className:"feature-highlight pulse",children:"Achievement System"})]})]})]}),(0,Do.jsx)("div",{className:"success-ticker",children:(0,Do.jsx)("div",{className:"ticker-content",children:(0,Do.jsx)("span",{children:"\ud83c\udf89 Rahul got placed at Google \u2022 \ud83d\udcb0 Priya secured 15L CTC \u2022 \ud83d\ude80 Amit joined Microsoft \u2022 \ud83c\udf1f Sneha got dream job at Amazon \u2022 "})})}),(0,Do.jsxs)("div",{className:"home-cta",children:[(0,Do.jsxs)("div",{className:"particles",children:[(0,Do.jsx)("div",{className:"particle"}),(0,Do.jsx)("div",{className:"particle"}),(0,Do.jsx)("div",{className:"particle"}),(0,Do.jsx)("div",{className:"particle"}),(0,Do.jsx)("div",{className:"particle"})]}),(0,Do.jsxs)("div",{className:"cta-content",children:[(0,Do.jsx)("h3",{children:"\ud83d\ude80 Ready to Launch Your Career?"}),(0,Do.jsx)("p",{className:"cta-text",children:"Join 10,000+ students who transformed their careers with Placemento"}),(0,Do.jsxs)("div",{className:"cta-buttons",children:[(0,Do.jsx)("button",{className:"btn btn-primary cta-primary glow-btn",onClick:()=>e("/students"),children:"\ud83d\ude80 Get Started Now"}),(0,Do.jsx)("button",{className:"btn btn-secondary cta-secondary",onClick:()=>e("/stats"),children:"\ud83d\udcca View Live Stats"})]})]})]})]})};function Cy(e){return Vi({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:"currentColor"},child:[]}]})(e)}const by=()=>{const[e,t]=(0,o.useState)({}),[i,s]=(0,o.useState)(""),[n,r]=(0,o.useState)(!1),[a,l]=(0,o.useState)([]),[c,h]=(0,o.useState)({}),[d,u]=(0,o.useState)("");(0,o.useEffect)((()=>{(async()=>{try{const e=await qo();t(e),"student"===e.role?u("Student"):"admin"===e.role?u("Admin"):u("Placement Coordinator"),h(e)}catch(e){console.log(e)}})()}),[]),(0,o.useEffect)((()=>{e.placed&&(async e=>{try{const t=await jo(e);t.data.locations.unshift("N/A"),l(t.data)}catch(Ey){console.log(Ey)}})(e.placedAt.companyId)}),[e.placedAt,e.placed]);const p=(e,i)=>{t((t=>({...t,[e]:i}))),r(!0)},g=async t=>{t.preventDefault();try{await((e,t)=>wo.put(`/users/update/${e}`,t))(e.id,e),s(""),xi.success((0,Do.jsx)(ko,{res:"success",messages:["Profile updated successfully."]})),r(!1),h(e)}catch(Ey){console.log(Ey.response.data.message),xi.error((0,Do.jsx)(ko,{res:"error",messages:[Ey.response.data.message]}))}},m=(e,t)=>(0,Do.jsx)("input",{type:"text",name:e,value:t,id:e,onChange:t=>p(e,t.target.value),disabled:i!==e}),f=(t,s,n)=>(0,Do.jsx)("select",{value:s,onChange:i=>p("placedAt",{...e.placedAt,[t]:i.target.value}),disabled:i!==t,id:t,name:t,children:n.map((e=>(0,Do.jsx)("option",{value:e,children:e},e)))}),v=function(e,t,n,o){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(0,Do.jsxs)("div",{className:"item",children:[(0,Do.jsx)("label",{htmlFor:n,children:t}),a?f(n,o,r):m(n,o),e&&(0,Do.jsx)("button",{onClick:()=>i===n?(document.getElementById(i).disabled=!0,void s("")):s(n),children:i===n?(0,Do.jsx)(Cy,{}):(0,Do.jsx)(Go,{})})]})};return(0,Do.jsxs)("div",{className:"container",children:[(0,Do.jsx)("h1",{children:"My Profile"}),0!==Object.keys(e).length&&(0,Do.jsx)("div",{className:"profile",children:(0,Do.jsxs)("div",{className:"profile-items",children:[(0,Do.jsxs)("div",{className:"item-group",children:[(0,Do.jsx)("h2",{children:"Personal Information"}),v(!1,"Name","Name",e.name),v(!1,"Email","email",e.email),v(!1,"Roll No","rollNo",e.rollNo),v(!1,"Role","role",d)]}),e.placed&&(0,Do.jsxs)("div",{className:"item-group",children:[(0,Do.jsx)("h2",{children:"Company Information"}),v(!1,"Company","company",e.placedAt.companyName),(0,Do.jsxs)("div",{className:"item-subgroup",children:[v(!1,"CTC","ctc",e.placedAt.ctc),v(!1,"Base","base",e.placedAt.ctcBase)]}),v(!1,"Profile","profile",e.placedAt.profile),v(!1,"Offer","typeOfOffer",e.placedAt.offer),v(!0,"Location","location",e.placedAt.location,a.locations,!0)]}),(0,Do.jsxs)("div",{className:"item-group",children:[(0,Do.jsx)("h2",{children:"Academic Information"}),(0,Do.jsxs)("div",{className:"item-subgroup",children:[(0,Do.jsx)("h3",{children:"PG"}),v(!0,"CGPA","pg.cgpa",e.pg.cgpa),v(!0,"%","pg.percentage",e.pg.percentage)]}),(0,Do.jsxs)("div",{className:"item-subgroup",children:[(0,Do.jsx)("h3",{children:"UG"}),v(!0,"CGPA","ug.cgpa",e.ug.cgpa),v(!0,"%","ug.percentage",e.ug.percentage)]}),(0,Do.jsxs)("div",{className:"item-subgroup",children:[(0,Do.jsx)("h3",{children:"12th"}),v(!0,"CGPA","hsc.cgpa",e.hsc.cgpa),v(!0,"%","hsc.percentage",e.hsc.percentage)]}),(0,Do.jsxs)("div",{className:"item-subgroup",children:[(0,Do.jsx)("h3",{children:"10th"}),v(!0,"CGPA","ssc.cgpa",e.ssc.cgpa),v(!0,"%","ssc.percentage",e.ssc.percentage)]}),(0,Do.jsxs)("div",{className:"item-subgroup",children:[v(!0,"Backlogs","backlogs",e.backlogs),v(!0,"Gap","yearGap",e.totalGapInAcademics)]})]}),n&&(0,Do.jsxs)("div",{className:"profile-buttons",children:[(0,Do.jsx)("button",{onClick:g,className:"btn btn-primary",children:"Update Changes"}),(0,Do.jsx)("button",{onClick:()=>{r(!1),t(c)},className:"btn btn-primary",children:"Discard Changes"})]})]})})]})};var wy=Object.defineProperty,Sy=(e,t)=>{for(var i in t)wy(e,i,{get:t[i],enumerable:!0})},xy={};Sy(xy,{error:()=>Ey,errorOnce:()=>Ty,log:()=>Dy,logGroup:()=>Py,reset:()=>Ly,table:()=>Iy,warn:()=>Ry,warnOnce:()=>ky});var My=new Set;function Dy(){console.log(...arguments)}function Ry(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];console.warn(`AG Charts - ${e}`,...i)}function Ey(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];"object"===typeof e?console.error("AG Charts error",e,...i):console.error(`AG Charts - ${e}`,...i)}function Iy(){console.table(...arguments)}function Ay(e,t,i){let s;s=e instanceof Error?e.message:"string"===typeof e?e:"object"===typeof e?JSON.stringify(e):String(e);const n=`${t}: ${s}`;My.has(n)||(i(e),My.add(n))}function ky(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];Ay(e,"Logger.warn",(e=>Ry(e,...i)))}function Ty(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];Ay(e,"Logger.error",(e=>Ey(e,...i)))}function Ly(){My.clear()}function Py(e,t){console.groupCollapsed(e);try{return t()}finally{console.groupEnd()}}var Fy={};Sy(Fy,{detectChartDefinition:()=>Hy,getAxisModule:()=>Wy,getPresetModule:()=>_y,getSeriesModule:()=>Uy,hasModule:()=>jy,listModulesByType:()=>Vy,register:()=>By,registerMany:()=>Gy,reset:()=>zy});var Ny=(e=>(e.Axis="axis",e.Chart="chart",e.Preset="preset",e.Plugin="plugin",e.Series="series",e))(Ny||{}),Oy=new Map;function By(e,t){const{def:i,version:s}=Oy.get(e.name)??{};if(i)if(i.enterprise||!e.enterprise||t!==s){if(s!==t)throw new Error([`AG Charts - Module '${e.name}' already registered with different version:`,`${s} vs ${t}`,"","Check your package.json for conflicting dependencies - depending on your package manager","one of these commands may help:","- npm ls ag-charts-community","- yarn why ag-charts-community"].join("\n"));Ry([`AG Charts - Module '${e.name}' already registered,',\n                'ignoring (version: ${s}).`,"Check your code for duplicate loading of charts NPM modules."].join(" "))}else Oy.set(e.name,{def:e,version:t});else Oy.set(e.name,{def:e,version:t})}function Gy(e,t){for(const i of e)By(i,t)}function zy(){Oy.clear()}function jy(e){return Oy.has(e)}function*Vy(e){for(const t of Oy.values())$y(e,t.def)&&(yield t.def)}function Hy(e){for(const t of Oy.values())if($y("chart",t.def)&&t.def.detect(e))return t.def;throw new Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function Wy(e){const t=Oy.get(e);if($y("axis",t?.def))return t?.def}function _y(e){const t=Oy.get(e);if($y("preset",t?.def))return t?.def}function Uy(e){const t=Oy.get(e);if($y("series",t?.def))return t?.def}function $y(e,t){return t?.type===e}var Ky,Yy=class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)||this.events.set(e,new Set),this.events.get(e)?.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),0===i.size&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach((e=>e(t)))}clear(e){e?this.events.delete(e):this.events.clear()}},Zy={};function qy(e){return e?Zy.document?.[e]:Zy.document}function Qy(e){return e?Zy.window?.[e]:Zy.window}function Xy(e,t,i){const s=qy().createElement(e);if("object"===typeof t&&(i=t,t=void 0),t)for(const n of t.split(" "))s.classList.add(n);return i&&Object.assign(s.style,i),s}function Jy(e){return qy().createElementNS("http://www.w3.org/2000/svg",e)}function eC(e,t,i,s){return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)}function tC(e){return null!=e}function iC(e){return Array.isArray(e)}function sC(e){return e instanceof Date}function nC(e){return sC(e)&&!isNaN(Number(e))}function oC(e){return"function"===typeof e}function rC(e){return"object"===typeof e&&null!==e&&!iC(e)}function aC(e){return iC(e)||lC(e)}function lC(e){return"object"===typeof e&&null!==e&&"Object"===e.constructor?.name}function cC(e){if("object"!==typeof e||null===e)return!1;for(const t in e)return!1;return!0}function hC(e){return"string"===typeof e}function dC(e){return"number"===typeof e}function uC(e){return Number.isFinite(e)}function pC(e){return"symbol"===typeof e}function gC(e,t,i){const{leading:s=!0,trailing:n=!0}=i??{};let o,r,a=!1;function l(){n&&r?(o=setTimeout(l,t),e(...r)):a=!1,r=null}return Object.assign((function(){for(var i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];a?r=n:(a=!0,o=setTimeout(l,t),s?e(...n):r=n)}),{cancel(){clearTimeout(o),a=!1,r=null}})}function mC(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return e(...t)}catch(s){ky(`Uncaught exception in user callback${i?` \`${i}\``:""}`,s)}}function fC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;if(0===e.length)return"";if(1===e.length)return i(e[0]);const n=(e=e.map(i)).pop();if(e.length>=s){const i=e.length-(s-1);return`${e.slice(0,s-1).join(", ")}, and ${i} more ${t} ${n}`}return`${e.join(", ")} ${t} ${n}`}function vC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if("number"===typeof e){if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}const i=JSON.stringify(e)??typeof e;return i.length>t?`${i.slice(0,t)}... (+${i.length-t} characters)`:i}function yC(e,t){if(e===t)return 0;const[i,s]=e.length<t.length?[e,t]:[t,e],n=i.length,o=s.length;let r=new Array(n+1).fill(0).map(((e,t)=>t)),a=new Array(n+1);for(let l=1;l<=o;l++){a[0]=l;for(let e=1;e<=n;e++){const t=s[l-1]===i[e-1]?0:1;a[e]=Math.min(r[e]+1,a[e-1]+1,r[e-1]+t)}[r,a]=[a,r]}return r[n]}"undefined"!==typeof window?Zy.window=window:"undefined"!==typeof global&&(Zy.window=global.window),"undefined"!==typeof document?Zy.document=document:"undefined"!==typeof global&&(Zy.document=global.document);var CC=/[A-Z]+(?![a-z])|[A-Z]/g;function bC(e){return iC(e)?e.map((e=>e.text)).join(""):e??""}var wC=Symbol("description"),SC=Symbol("required"),xC=Symbol("marked"),MC=Symbol("undocumented"),DC=Symbol("union"),RC=[["placement","position"],["padding","spacing","gap"],["color","fill","stroke"],["whisker","wick"],["nodeClick","seriesNodeClick"],["nodeDoubleClick","seriesNodeDoubleClick"],["src","url"]].reduce(((e,t)=>{for(const i of t)e.set(i.toLowerCase(),new Set(t.filter((e=>e!==i))));return e}),new Map),EC=(e=>(e.Invalid="invalid",e.Required="required",e.Unknown="unknown",e))(EC||{});function IC(e,t){return uC(t)?`${e}[${t}]`:e?`${e}.${t}`:t}var AC=class{constructor(e,t,i,s,n){this.type=e,this.description=t,this.value=i,this.path=s,this.key=n}setUnionType(e,t){if(this.path.startsWith(t)){const i=this.path.slice(t.length);this.altPath=`${t}[type=${e}]${i}`}}getPrefix(){const{altPath:e=this.path,key:t}=this;return e||t?`Option \`${t?IC(e,t):e}\``:"Value"}toString(){const{description:e="unknown",type:t,value:i}=this;return"required"===t&&null==i?`${this.getPrefix()} is required and has not been provided; expecting ${e}, ignoring.`:`${this.getPrefix()} cannot be set to \`${vC(i,50)}\`; expecting ${e}, ignoring.`}},kC=class extends AC{constructor(e,t,i,s){super("unknown",void 0,t,i,s),this.suggestions=e,this.key=s}getPrefix(){return`Unknown option \`${IC(this.altPath??this.path,this.key)}\``}getPostfix(){const e=fC(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const s=[],n=e.toLowerCase(),o=RC.get(n);for(const r of t){const e=r.toLowerCase();(o?.has(r)||e.includes(n)||yC(n,e)<=i)&&s.push(r)}return s}(this.key,this.suggestions),"or",(e=>`\`${e}\``));return e?`; Did you mean ${e}? Ignoring.`:", ignoring."}toString(){return`${this.getPrefix()}${this.getPostfix()}`}};function TC(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!rC(e))return{cleared:null,invalid:[new AC("required","an object",e,i)]};const s={},n=[],o=new Set(Object.keys(e)),r=[];if(DC in t){const o=Object.keys(t),r=t[DC];if(null!=e.type&&o.includes(e.type)||null==e.type&&null!=r){const{type:o=r,...a}=e,l=TC(a,t[o],i);Object.assign(s,{type:o},l.cleared);for(const e of l.invalid)e.setUnionType(o,i);n.push(...l.invalid)}else{const t=fC(o,"or",(e=>`'${e}'`));n.push(new AC("required",`a keyword such as ${t}`,e.type,i,"type"))}return{cleared:s,invalid:n}}for(const a of Object.keys(t)){const l=t[a],c=l[SC],h=e[a];if(o.delete(a),"undefined"===typeof h&&(l[MC]||r.push(a),!c))continue;const d=IC(i,a);if(oC(l)){const t=l(h,{options:e,path:d});if("object"===typeof t){if(n.push(...t.invalid),t.valid){s[a]=t.cleared;continue}if(ub(t.invalid,d))continue}else if(t){s[a]=h;continue}n.push(new AC(c?"required":"invalid",l[wC],h,i,a))}else{const e=TC(h,l,d);null!=e.cleared&&(s[a]=e.cleared),n.push(...e.invalid)}}for(const a of o){const t=e[a];"undefined"!==typeof t&&n.push(new kC(r,t,i,a))}return{cleared:s,invalid:n}}function LC(e,t){if(oC(e)){let i=function(t,i){return e(t,i)};return i[wC]=t,i}return{...e,[wC]:t}}function PC(e){return Object.assign(oC(e)?(t,i)=>e(t,i):BC(e),{[SC]:!0,[wC]:e[wC]})}function FC(e){return Object.assign(oC(e)?(t,i)=>e(t,i):BC(e),{[MC]:!0,[wC]:e[wC]})}var NC,OC,BC=function(e){return LC(((t,i)=>{const s=TC(t,e,i.path);return{valid:!ub(s.invalid,i.path),cleared:s.cleared,invalid:s.invalid}}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:"an object")},GC=(e,t,i)=>({...e,[wC]:t,[DC]:i}),zC=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return LC(((e,i)=>{const s=[];for(const n of t){const t=n(e,i);if("object"===typeof t){if(s.push(...t.invalid),!t.valid)return{valid:!1,cleared:e,invalid:s};e=t.cleared}else if(!t)return!1}return{valid:!0,cleared:e,invalid:s}}),t.map((e=>e[wC])).filter(Boolean).join(" and "))},jC=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return LC(((e,i)=>{for(const s of t){const t=s(e,i);if("object"===typeof t?t.valid:t)return t}return!1}),t.map((e=>e[wC])).filter(Boolean).join(" or "))},VC=e=>uC(e)||nC(e),HC=LC(iC,"an array"),WC=LC((function(e){return"boolean"===typeof e}),"a boolean"),_C=LC(oC,"a function"),UC=LC((function(e){return hC(e)&&("none"===e||null!=function(e){if(null==Ky){const e=Qy("Option");Ky=(new e).style}return Ky.color=e,Ky.color||null}(e))}),"a color string"),$C=LC((e=>sC(e)||(uC(e)||hC(e))&&nC(new Date(e))),"a date"),KC=LC(tC,"a defined value"),YC=LC(uC,"a number"),ZC=LC(rC,"an object"),qC=LC(hC,"a string"),QC=LC((e=>"undefined"===typeof HTMLElement||e instanceof HTMLElement),"an html element"),XC=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return t=i===1/0?`an array of at least ${e} items`:e===i?`an array of exactly ${e} items`:0===e?`an array of no more than ${i} items`:`an array of at least ${e} and no more than ${i} items`,LC((t=>iC(t)&&t.length>=e&&t.length<=i),t)},JC=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return t=i===1/0?`a string of at least ${e} characters`:e===i?`an string of exactly ${e} characters`:0===e?`an string of no more than ${i} characters`:`an string of at least ${e} and no more than ${i} characters`,LC((t=>hC(t)&&t.length>=e&&t.length<=i),t)},eb=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return LC((i=>uC(i)&&(i>e||t&&i===e)),`a number greater than ${t?"or equal to ":""}${e}`)},tb=eb(0),ib=eb(0,!1),sb=LC((e=>uC(e)&&e>=NC&&e<=OC),`a number between ${NC=0} and ${OC=1} inclusive`),nb=e=>LC(((t,i)=>{let{options:s}=i;return!VC(t)||!VC(s[e])||t<s[e]}),`the value to be less than \`${e}\``),ob=e=>LC(((t,i)=>{let{options:s}=i;return!VC(t)||!VC(s[e])||t>s[e]}),`the value to be greater than \`${e}\``);function rb(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];rC(t[0])&&(t=Object.values(t[0]));return LC((e=>t.includes(e)),`a keyword such as ${fC(t,"or",(e=>`'${e}'`))}`)}var ab=e=>LC((t=>e===t),`the value ${JSON.stringify(e)}`),lb=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return LC(((t,s)=>{if(!iC(t))return!1;let n=i;const o=[],r=[],a=e=>n=i?n&&e:n||e;if(0===t.length)return{valid:!0,cleared:o,invalid:r};for(let i=0;i<t.length;i++){const l=t[i],c=e(l,{options:l,path:`${s.path}[${i}]`});"object"===typeof c?(n=a(c.valid),r.push(...c.invalid),null!=c.cleared&&o.push(c.cleared)):(n=a(c),c&&o.push(l))}return{valid:n,cleared:n||!i?o:null,invalid:r}}),t??`${e[wC]} array`)},cb=function(e){return LC(((t,i)=>{if(!iC(t))return!1;const s=[],n=[];for(let o=0;o<t.length;o++){const r=`${i.path}[${o}]`,a=TC(t[o],e,r);ub(a.invalid,r)||s.push(a.cleared),n.push(...a.invalid)}return{valid:!0,cleared:s,invalid:n}}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:"an object array")},hb=(e,t)=>LC(((i,s)=>{if(!oC(i))return!1;if(xC in i)return!0;return{valid:!0,cleared:Object.assign((function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];const a=mC(i,o);if(null==a)return;const l=e(a,{options:a,path:""});if("object"===typeof l){if(l.invalid.forEach(pb(s,t??e[wC])),l.valid)return l.cleared}else{if(l)return a;ky(`Callback \`${s.path}\` returned an invalid value \`${vC(a,50)}\`; expecting ${t??e[wC]}, ignoring.`)}}),{[xC]:!0}),invalid:[]}}),"a function"),db=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"an object";return LC(((i,s)=>{if(!oC(i))return!1;if(xC in i)return!0;const n=Object.assign((function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];const a=mC(i,o,s.path);if(null==a)return;const l=TC(a,e);return l.invalid.forEach(pb(s,t)),l.cleared}),{[xC]:!0});return{valid:!0,cleared:n,invalid:[]}}),"a function")};function ub(e,t){return e.some((e=>"required"===e.type&&e.path===t))}function pb(e,t){return i=>{if(i instanceof kC)return ky(`Callback \`${e.path}\` returned an unknown property \`${IC(i.path,i.key)}\`${i.getPostfix()}`);const s=vC(i.value,50);ky(i.key?`Callback \`${e.path}\` returned an invalid property \`${IC(i.path,i.key)}\`: \`${s}\`; expecting ${i.description}, ignoring.`:`Callback \`${e.path}\` returned an invalid value \`${s}\`; expecting ${t??i.description}, ignoring.`)}}var gb=e=>{if(!rC(e))return!1;const t=Object.keys(e);return 1===t.length&&t[0].startsWith("$")},mb=BC({color:UC,stop:sb},""),fb=LC((e=>{let t=-1/0;for(const i of e)if(null!=i?.stop){if(i.stop<t)return!1;t=i.stop}return!0}),"color stops to be defined in ascending order"),vb=zC(XC(2),lb(mb),fb),yb=rb("axis","item","series"),Cb=BC({type:PC(ab("gradient")),colorStops:PC(vb),rotation:YC,gradient:FC(rb("linear","radial","conic")),bounds:FC(yb),reverse:FC(WC)},"a gradient object with color stops"),bb={stroke:UC,strokeWidth:tb,strokeOpacity:sb},wb=BC({type:PC(ab("gradient")),gradient:PC(rb("linear","radial","conic")),bounds:PC(yb),colorStops:PC(jC(vb,zC(XC(2),lb(UC)))),rotation:PC(YC),reverse:PC(WC)}),Sb=BC({type:PC(ab("pattern")),pattern:PC(rb("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),path:JC(2),width:PC(tb),height:PC(tb),fill:PC(UC),fillOpacity:PC(sb),backgroundFill:PC(UC),backgroundFillOpacity:PC(sb),padding:PC(tb),rotation:PC(YC),scale:PC(tb),stroke:PC(UC),strokeWidth:PC(tb),strokeOpacity:PC(sb)}),xb=BC({type:PC(ab("image")),url:qC,width:tb,height:tb,rotation:PC(YC),backgroundFill:PC(UC),backgroundFillOpacity:sb,fit:PC(rb("stretch","contain","cover")),repeat:PC(rb("repeat","repeat-x","repeat-y","no-repeat"))}),Mb=GC({gradient:{colorStops:vb,rotation:YC,gradient:FC(rb("linear","radial","conic")),bounds:FC(yb),reverse:FC(WC)},pattern:{pattern:rb("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),path:JC(2),width:tb,height:tb,rotation:YC,scale:tb,fill:UC,fillOpacity:sb,backgroundFill:UC,backgroundFillOpacity:sb,...bb,padding:FC(tb)},image:{url:PC(qC),backgroundFill:UC,backgroundFillOpacity:sb,width:tb,height:tb,fit:rb("stretch","contain","cover","none"),repeat:rb("repeat","repeat-x","repeat-y","no-repeat"),rotation:YC}},"a color object"),Db=jC(UC,BC(Mb,"a color object")),Rb={fill:Db,fillOpacity:sb};Rb.fillGradientDefaults=FC(wb),Rb.fillPatternDefaults=FC(Sb),Rb.fillImageDefaults=FC(xb);var Eb={lineDash:lb(tb),lineDashOffset:YC},Ib={...Rb,...bb,...Eb,opacity:sb,cornerRadius:tb},Ab={...bb,...Eb,opacity:sb},kb={...Rb,...bb,...Eb,opacity:sb};function Tb(e){return{enabled:WC,range:rb("tooltip","node"),highlightedItem:e,unhighlightedItem:e}}function Lb(e,t){return{enabled:WC,range:rb("tooltip","node"),highlightedItem:e,unhighlightedItem:e,highlightedSeries:t,unhighlightedSeries:t,bringToFront:WC}}var Pb=BC({googleFont:qC},"google font"),Fb=jC(qC,gb,Pb,lb(jC(qC,Pb))),Nb={color:UC,fontFamily:Fb,fontSize:tb,fontStyle:rb("normal","italic","oblique"),fontWeight:jC(tb,rb("normal","bold","bolder","lighter"))},Ob=BC({top:YC,right:YC,bottom:YC,left:YC},"padding object"),Bb=jC(YC,Ob),Gb={enabled:WC,stroke:UC,strokeWidth:tb,strokeOpacity:sb},zb={border:{...Gb},cornerRadius:YC,padding:Bb,...Rb};function jb(e){return"undefined"===typeof e?[]:Array.isArray(e)?e:[e]}function Vb(e,t){return e.reduce(((e,i)=>{const s=t(i);return e[s]??(e[s]=[]),e[s].push(i),e}),{})}function Hb(e,t){if(null==e||null==t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!Hb(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function Wb(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return[];const s=[];for(let n=0;n<t;n++)s.push(e.at((n+i)%e.length));return s}function _b(e,t){let i=0;for(;i<e.length&&t(e[i]);)i+=1;const s=i;0!==s&&e.splice(0,s)}function Ub(e,t){let i=e.length-1;for(;i>=0&&t(e[i]);)i-=1;const s=e.length-1-i;0!==s&&e.splice(e.length-s,s)}var $b=class{constructor(){this.queue=[]}await(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return new Promise((t=>{const i=()=>{clearTimeout(s),t(!0)},s=setTimeout((()=>{const e=this.queue.indexOf(i);e<0||(this.queue.splice(e,1),t(!1))}),e);this.queue.push(i)}))}notify(){this.queue.splice(0).forEach((e=>e()))}};function Kb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>{setTimeout(t,e)}))}function*Yb(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t)yield*s}function Zb(e){for(const t of e)return t;throw new Error("AG Charts - no first() value found")}function*qb(e){const t=[void 0,void 0];for(const i of Object.keys(e))t[0]=i,t[1]=e[i],yield t}function Qb(e){return"true"===e}function Xb(e){return e}var Jb={role:Xb,"aria-checked":Qb,"aria-controls":Xb,"aria-describedby":Xb,"aria-disabled":Qb,"aria-expanded":Qb,"aria-haspopup":Xb,"aria-hidden":Qb,"aria-label":Xb,"aria-labelledby":Xb,"aria-live":Xb,"aria-orientation":Xb,"aria-selected":Qb,"data-focus-override":Qb,"data-focus-visible-override":Qb,"data-preventdefault":Qb,class:Xb,for:Xb,id:Xb,tabindex:function(e){return Number(e)},title:Xb,placeholder:Xb};function ew(e,t,i){null==i||""===i||""===i?e?.removeAttribute(t):e?.setAttribute(t,i.toString())}function tw(e,t){if(null!=t)for(const[i,s]of qb(t))"class"!==i&&ew(e,i,s)}function iw(e,t,i){if(!(e instanceof HTMLElement))return;const s=e.getAttribute(t);return null===s?i:Jb[t]?.(s)??void 0}function sw(e,t,i){null!=e&&(null==i?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}function nw(e,t,i,s,n){return t<e.x+e.width&&t+s>e.x&&i<e.y+e.height&&i+n>e.y}function ow(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return t>=e.x&&t+s<=e.x+e.width&&i>=e.y&&i+n<=e.y+e.height}function rw(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function aw(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2);i(n)?(s=n,e=n+1):t=n-1}return s}function lw(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2);i(n)?(s=n,t=n-1):e=n+1}return s}var cw=class{constructor(e){this.getter=e}get(){let e=this.result?.deref();return e||(e=this.getter(),this.result=new WeakRef(e),e)}clear(){this.result=void 0}},hw=class{constructor(){this.callbacks=new Set}flush(){for(const e of this.callbacks)e();this.callbacks.clear()}merge(e){for(const t of e.callbacks)this.callbacks.add(t)}register(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t)s&&this.callbacks.add(s)}};function dw(e,t,i){return Math.min(i,Math.max(e,t))}function uw(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return e===t||Math.abs(e-t)<i}function pw(e){return-1===Math.sign(e)||Object.is(e,-0)}function gw(e){const t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.round(e*t)/t}function mw(e){if(Math.floor(e)===e)return 0;let t=String(e),i=0;if(e<1e-6||e>=1e21){let e;[t,e]=t.split("e"),null!=e&&(i=Number(e))}const s=t.split(".")[1]?.length??0;return Math.max(s-i,0)}function fw(e){return Array.isArray(e)&&e.length>=2&&e.every(uC)}function vw(e){return Array.isArray(e)&&e.length>=2&&e.every(fw)}function yw(e){const t=e[0],i=e[e.length-1];return uw(t[0],i[0],.001)&&uw(t[1],i[1],.001)}function Cw(e){return Array.isArray(e)&&e.every(vw)&&e.every(yw)}function bw(e){if(null===e)return!0;if(!rC(e)||null==e.type)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(bw);case"MultiPolygon":return Array.isArray(i)&&i.every(Cw);case"Polygon":return Cw(i);case"MultiLineString":return Array.isArray(i)&&i.every(vw);case"LineString":case"MultiPoint":return vw(i);case"Point":return fw(i);default:return!1}}function ww(e){return rC(e)&&"Feature"===e.type&&bw(e.geometry)}var Sw=LC((function(e){return rC(e)&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.every(ww)}),"a GeoJSON object"),xw=class{constructor(e,t){this._vertexCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.cachedNeighboursEdge=e,this.processedEdge=t}clear(){this._vertexCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[]}addVertex(e){const t=new Mw(e);return this._vertexCount++,t}addEdge(e,t,i){i===this.cachedNeighboursEdge?e.updateCachedNeighbours().set(t.value,t):i===this.processedEdge&&(this.pendingProcessingEdgesFrom.push(e),this.pendingProcessingEdgesTo.push(t));const{edges:s}=e,n=s.get(i);n?-1===n.indexOf(t)&&n.push(t):s.set(i,[t])}removeVertex(e){this._vertexCount--;const t=e.edges;if(t){for(const[e,i]of t)this._vertexCount-=i.length;e.clear()}}removeEdge(e,t){for(const[i,s]of e.edges){const n=s.indexOf(t);s.splice(n,1),0===s.length&&e.edges.delete(i)}}removeEdges(e,t){e.edges.delete(t)}getVertexValue(e){return e.value}*neighbours(e){for(const[t,i]of e.edges)for(const e of i)yield e}*neighboursAndEdges(e){for(const[t,i]of e.edges)for(const e of i)yield[e,t]}neighboursWithEdgeValue(e,t){return e.edges.get(t)}findNeighbour(e,t){return e.edges.get(t)?.[0]}findNeighbourValue(e,t){const i=this.findNeighbour(e,t);if(i)return this.getVertexValue(i)}findNeighbourWithValue(e,t,i){const s=null==i?this.neighbours(e):this.neighboursWithEdgeValue(e,i);if(s)for(const n of s)if(this.getVertexValue(n)===t)return n}findVertexAlongEdge(e,t,i){if(i===this.cachedNeighboursEdge){let i;for(const s of t)if(i=(i??e).readCachedNeighbours()?.get(s),!i)return;return i}if(0===t.length)return;let s=e;for(const n of t){const e=s?this.neighboursWithEdgeValue(s,i):void 0;if(!e)return;s=e.find((e=>e.value===n))}return s}adjacent(e,t){for(const[i,s]of e.edges)if(s.includes(t))return!0;return!1}},Mw=class{constructor(e){this.value=e,this.edges=new Map}readCachedNeighbours(){return this._cachedNeighbours}updateCachedNeighbours(){return this._cachedNeighbours??(this._cachedNeighbours=new Map),this._cachedNeighbours}clear(){this.edges.clear(),this._cachedNeighbours?.clear()}},Dw=new Map,Rw=(Symbol("ElementID"),1);function Ew(e){const t=e.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const s=(Dw.get(i)??0)+1;return Dw.set(i,s),`${i}-${s}`}function Iw(){return"ag-charts-"+Rw++}function Aw(){return crypto.randomUUID?.()??function(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t="";for(let i=0;i<e.length;i++)4!==i&&6!==i&&8!==i&&10!==i||(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}()}var kw=(e,t,i)=>{let s=e,n=s;for(const o of t)if(null==s||i(s.value,o)>0)s={value:o,next:s},n=s;else{for(;null!=n.next&&i(n.next.value,o)<=0;)n=n.next;n.next={value:o,next:n.next}}return s},Tw=/^(?:(.)?([<>=^]))?([+\-( ])?([$\u20ac\xa3\xa5\u20a3\u20b9#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,Lw=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/;function Pw(e){let t,i;const s=Lw.exec(e);s&&([,t,e,i]=s);const n=Tw.exec(e);if(!n)return void xy.warnOnce(`The number formatter is invalid: ${e}`);const[,o,r,a,l,c,h,d,u,p,g]=n;return{fill:o,align:r,sign:a,symbol:l,zero:c,width:parseInt(h),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:t,suffix:i}}function Fw(e){const t="string"===typeof e?Pw(e):e;if(null==t)return;const{fill:i,align:s,sign:n="-",symbol:o,zero:r,width:a,comma:l,type:c,prefix:h="",suffix:d="",precision:u}=t;let{trim:p}=t;const g=null==u||isNaN(u);let m;if(c)if(c in Ow&&c in Nw)m=g?Nw[c]:Ow[c];else if(c in Ow)m=Ow[c];else{if(!(c in Nw))throw new Error(`The number formatter type is invalid: ${c}`);m=Nw[c]}else m=Ow.g,p=!0;const f=c?6:12;let v;return g||(v=u),(e,t)=>{let u=m(e,v??t??f);return p&&(u=function(e){if(!e.endsWith("0")||-1===e.indexOf("."))return e;let t=e.length-1;for(;t>0;){if("0"!=e[t]){if("."==e[t]){t-=1;break}break}t-=1}return e.substring(0,t+1)}(u)),l&&(u=function(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const s=e.substring(0,i).split(""),n=e.substring(i);for(let o=s.length-3;o>0;o-=3)s.splice(o,0,t);return`${s.join("")}${n}`}(u,l)),u=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return e>=0?t:`(${t})`;const s="+"===i?"+":"";return`${e>=0?s:jw}${t}`}(e,u,n),o&&"#"!==o&&(u=`${o}${u}`),"#"===o&&"x"===c&&(u=`0x${u}`),"s"===c&&(u=`${u}${function(e){return zw[Hw(e)]}(e)}`),"%"!==c&&"p"!==c||(u=`${u}%`),null==a||isNaN(a)||(u=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",n=e;if(">"!==s&&s){if("<"===s)n=n.padEnd(t,i);else if("^"===s){const e=Math.max(0,t-n.length),s=Math.ceil(e/2),o=Math.floor(e/2);n=n.padStart(s+n.length,i),n=n.padEnd(o+n.length,i)}}else n=n.padStart(t,i);return n}(u,a,i??r,s)),u=`${h}${u}${d}`,u}}var Nw={b:e=>Vw(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>Vw(e).toString(8),x:e=>Vw(e).toString(16),X:e=>Nw.x(e).toUpperCase(),n:e=>Nw.d(e),"%":e=>`${Vw(100*e).toFixed(0)}`},Ow={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>Ow.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>Ow.f(e,t).toUpperCase(),g:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i));return s>=-4&&s<t?i.toFixed(t-1-s):i.toExponential(t-1)},G:(e,t)=>Ow.g(e,t).toUpperCase(),n:(e,t)=>Ow.g(e,t),p:(e,t)=>Ow.r(100*e,t),r:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i))-(t-1);if(s<=0)return i.toFixed(-s);const n=10**s;return(Math.round(i/n)*n).toFixed()},s:(e,t)=>{const i=Hw(e);return Ow.r(e/10**i,t)},"%":(e,t)=>Ow.f(100*e,t)},Bw=-24,Gw=24,zw={[Bw]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Gw]:"Y"},jw="\u2212";function Vw(e){return Math.floor(Math.abs(e))}function Hw(e){return dw(Bw,e?3*Math.floor(Math.log10(Math.abs(e))/3):0,Gw)}var Ww=Object.defineProperty,_w=Object.getOwnPropertyDescriptor,Uw=(e,t)=>{for(var i in t)Ww(e,i,{get:t[i],enumerable:!0})},$w=(e,t,i,s)=>{for(var n,o=s>1?void 0:s?_w(t,i):t,r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s?n(t,i,o):n(o))||o);return s&&o&&Ww(t,i,o),o},Kw=class{constructor(){this.cleanup=new hw}destroy(){this.cleanup.flush()}},Yw=new class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t){this.registerDependencies(s);const e=this.modules.find((e=>s.type===e.type&&(!("optionsKey"in s)||!("optionsKey"in e)||s.optionsKey===e.optionsKey)&&s.identifier===e.identifier));if(e){if("enterprise"===s.packageType&&"community"===e.packageType){const t=this.modules.indexOf(e);this.modules.splice(t,1,s),"optionsKey"in s&&this.modulesByOptionKey.set(s.optionsKey,s)}}else this.modules.push(s),"optionsKey"in s&&this.modulesByOptionKey.set(s.optionsKey,s)}}hasEnterpriseModules(){return this.modules.some((e=>"enterprise"===e.packageType))}*byType(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=new Set,n=this.modules.filter((e=>t.includes(e.type))),o=e=>{const t=this.dependencies.get(e);return t?.flatMap(o).concat(t)??[]},r=[];for(const a of n){const e="optionsKey"in a?a.optionsKey:a.contextKey;if(!s.has(e)){for(const i of o(e)){if(s.has(i))continue;const e=this.modulesByOptionKey.get(i);e?t.includes(e.type)&&(yield e,s.add(i)):r.push(i)}yield a,s.add(e)}}if(r.length>0)throw new Error(`Could not resolve module dependencies: ${r}`)}registerDependencies(e){if(null==e.dependencies||0===e.dependencies.length)return;const t="optionsKey"in e?e.optionsKey:e.contextKey;this.dependencies.set(t,e.dependencies)}},Zw=Symbol("interpolate"),qw=e=>null!=e[Zw];function Qw(e,t,i){const s={nearest:void 0,distanceSquared:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0};for(const n of i){const i=n.distanceSquared(e,t);if(0===i)return{nearest:n,distanceSquared:0};i<s.distanceSquared&&(s.nearest=n,s.distanceSquared=i)}return s}function Xw(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const{x:n=e,y:o=t}=i.transformPoint?.(e,t)??{},r={nearest:void 0,distanceSquared:s};for(const a of i.children){const{nearest:e,distanceSquared:t}=a.nearestSquared(n,o,r.distanceSquared);if(0===t)return{nearest:e,distanceSquared:t};t<r.distanceSquared&&(r.nearest=e,r.distanceSquared=t)}return r}var Jw=class e{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}static fromDOMRect(t){let{x:i,y:s,width:n,height:o}=t;return new e(i,s,n,o)}static merge(t){let i=1/0,s=1/0,n=-1/0,o=-1/0;for(const e of t)e.x<i&&(i=e.x),e.y<s&&(s=e.y),e.x+e.width>n&&(n=e.x+e.width),e.y+e.height>o&&(o=e.y+e.height);return new e(i,s,n-i,o-s)}static nearestBox(e,t,i){return Qw(e,t,i)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON:()=>({})}}clone(){const{x:t,y:i,width:s,height:n}=this;return new e(t,i,s,n)}equals(e){return rw(this,e)}containsPoint(e,t){return ow(this,e,t)}intersection(t){if(!this.collidesBBox(t))return;const i=dw(t.x,this.x,t.x+t.width),s=dw(t.y,this.y,t.y+t.height),n=dw(t.x,this.x+this.width,t.x+t.width),o=dw(t.y,this.y+this.height,t.y+t.height);return new e(i,s,n-i,o-s)}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const i=e-dw(this.x,e,this.x+this.width),s=t-dw(this.y,t,this.y+this.height);return i*i+s*s}shrink(e,t){if("number"===typeof e)this.applyMargin(e,t);else for(const i of Object.keys(e)){const t=e[i];"number"===typeof t&&this.applyMargin(t,i)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(e,t){if("number"===typeof e)this.applyMargin(-e,t);else for(const i of Object.keys(e)){const t=e[i];"number"===typeof t&&this.applyMargin(-t,i)}return this}applyMargin(e,t){switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.y+=e,this.width-=2*e,this.height-=2*e}}translate(e,t){return this.x+=e,this.y+=t,this}[Zw](t,i){return new e(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};Jw.zero=Object.freeze(new Jw(0,0,0,0)),Jw.NaN=Object.freeze(new Jw(NaN,NaN,NaN,NaN));var eS=Jw,tS=Date.now(),iS={create(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Object.assign((function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];iS.check(...t)&&("function"===typeof i[0]&&(i=jb(i[0]())),(()=>{const e=Date.now()-tS;if(e>2e3){const t=(Math.floor(e/100)/10).toFixed(1);xy.log(`**** ${t}s since last log message ****`)}tS=Date.now()})(),xy.log(...i))}),{check:()=>iS.check(...t),group:(e,i)=>iS.check(...t)?xy.logGroup(e,i):i()})},check(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];0===t.length&&t.push(!0);return jb(Qy("agChartsDebug")).some((e=>t.includes(e)))},inDevelopmentMode(e){if(iS.check("dev"))return e()}};function sS(e){let{context:t,pixelRatio:i,width:s,height:n}=e;t.save();try{t.resetTransform(),t.clearRect(0,0,Math.ceil(s*i),Math.ceil(n*i))}finally{t.restore()}}function nS(e){if(iS.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let s=0;Object.assign(e,{save(){t(),s++},restore(){if(0===s)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(0!==s)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}function oS(e,t,i){return[Math.floor(e*i),Math.floor(t*i)]}var rS=class{constructor(e){const{width:t,height:i,pixelRatio:s,willReadFrequently:n=!1}=e;this.width=t,this.height=i,this.pixelRatio=s;const[o,r]=oS(t,i,s);this.canvas=new OffscreenCanvas(o,r),this.context=this.canvas.getContext("2d",{willReadFrequently:n}),this.context.setTransform(s,0,0,s,0,0),nS(this.context)}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.canvas,t,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(e,t,i){if(!(e>0&&t>0))return;const{canvas:s,context:n}=this;if(e!==this.width||t!==this.height||i!==this.pixelRatio){const[n,o]=oS(e,t,i);s.width=n,s.height=o}n.setTransform(i,0,0,i,0,0),this.width=e,this.height=t,this.pixelRatio=i}clear(){sS(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},aS=Symbol("BREAK"),lS="__decorator_config",cS="__decorator_accessors";function hS(e,t){if(null==Object.getOwnPropertyDescriptor(e,lS)&&Object.defineProperty(e,lS,{value:{}}),null==Object.getOwnPropertyDescriptor(e,cS)){const t=Object.getPrototypeOf(e)?.[cS],i=t?.slice()??[];Object.defineProperty(e,cS,{value:i})}const i=e[lS],s=t.toString();if(null!=i[s])return i[s];i[s]={setters:[],getters:[],observers:[]};const n=Object.getOwnPropertyDescriptor(e,t);let o=n?.get,r=n?.set;if(null==o||null==r){const i=e[cS];let s=i.indexOf(t);-1===s&&(s=i.push(t)-1),o??(o=function(){let e=this.__accessors;return null==e&&(e=i.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:e})),e[s]}),r??(r=function(e){let t=this.__accessors;null==t&&(t=i.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:t})),t[s]=e})}return Object.defineProperty(e,t,{set:function(e){const{setters:n,observers:a}=i[s];let l;n.some((e=>e.length>2))&&(l=o.call(this));for(const i of n)if((e=i(this,t,e,l))===aS)return;r.call(this,e);for(const t of a)t(this,e,l)},get:function(){let e=o.call(this);for(const n of i[s].getters)if(e=n(this,t,e),e===aS)return;return e},enumerable:!0,configurable:!1}),i[s]}function dS(e,t,i){return(s,n)=>{const o=hS(s,n);o.setters.push(e),t&&o.getters.unshift(t),i&&Object.assign(o,i)}}function uS(e){return(t,i)=>{hS(t,i).observers.push(e)}}function pS(e){return"undefined"!==typeof e&&lS in e}function gS(e){const t=new Set;for(;pS(e);)t.add(e?.[lS]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap((e=>Object.keys(e)))}function mS(e){return gS(e).reduce(((t,i)=>(t[String(i)]=e[i]??null,t)),{})}function fS(e,t){return Array.isArray(e)?!!Array.isArray(t)&&(e.length===t.length&&e.every(((e,i)=>fS(e,t[i])))):lC(e)?!!lC(t)&&vS(e,t,fS):e===t}function vS(e,t,i){if(Object.is(e,t))return!0;for(const s of Object.keys(t))if(!(s in e))return!1;for(const s of Object.keys(e)){if(!(s in t))return!1;if(!i(e[s],t[s]))return!1}return!0}function yS(){const e={};for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(const n of i){if(!rC(n))continue;const t=pS(n)?gS(n):Object.keys(n);for(const i of t)lC(e[i])&&lC(n[i])?e[i]=yS(e[i],n[i]):e[i]??(e[i]=n[i])}return e}function CS(){const e={};for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(const n of i){if(!rC(n))continue;const t=pS(n)?gS(n):Object.keys(n);for(const i of t)lC(e[i])&&lC(n[i])?e[i]=CS(e[i],n[i]):i in e||(e[i]??(e[i]=n[i]))}return e}function bS(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return i&&iC(e)?e.map((e=>yS(e,...i))):e}function wS(e,t){const i={};for(const[s,n]of qb(e))i[s]=t(n,s,e);return i}function SS(e,t){const i={...e};for(const s of t)delete i[s];return i}function xS(e,t){if(null==e)return;const i={};for(const s of t)Object.hasOwn(e,s)&&(i[s]=e[s]);return i}function MS(e,t){return(iC(t)?t:t.split(".")).reduce(((e,t)=>e[t]),e)}var DS=new Set(["__proto__","constructor","prototype"]);function RS(e,t,i){const s=iC(t)?t.slice():t.split("."),n=s.pop();if(s.some((e=>DS.has(e))))return;const o=s.reduce(((e,t)=>e[t]),e);return o[n]=i,o[n]}function ES(e,t,i){if(void 0===i)return t;for(const s of e){const e=i[s];void 0!==e&&(t[s]=e)}return t}function IS(e){return null!=e&&"object"===typeof e&&lC(e)?(Object.freeze(e),Object.getOwnPropertyNames(e).forEach((t=>{const i=e[t];null===i||"object"!==typeof i&&"function"!==typeof i||Object.isFrozen(i)||IS(i)})),e):e}function AS(e,t){return lC(e)&&t in e}function kS(e,t){return AS(e,t)&&"string"===typeof e[t]}var TS=(e,t)=>e===t;function LS(e){return function(t,i){const s=`__${i}`;t[i]||function(e,t,i,s){const{changeCb:n,convertor:o,checkDirtyOnAssignment:r=!1}=s??{},a={changeCb:n,checkDirtyOnAssignment:r,convertor:o},l=function(e,t,i){const{checkDirtyOnAssignment:s}=i;if(s)return function(i){const s=t.call(this,i);return!0===i?._dirty&&this.markDirty(e),s};return t}(i,function(e,t){const{changeCb:i}=t;if(i)return function(t){const s=e.call(this,t);return s!==OS&&i.call(this,this),s};return e}(function(e,t){const{convertor:i}=t;if(i)return function(t){e.call(this,i(t))};return e}(function(e,t){const{equals:i=TS}=t;return function(t){const s=this[e];return i(t,s)?OS:(this[e]=t,this.onChangeDetection(e),t)}}(i,a),a),a),a),c=function(){return this[i]};Object.defineProperty(e,t,{set:l,get:c,enumerable:!0,configurable:!0})}(t,i,s,e)}}function PS(e){return LS(e)}function FS(e){return LS(e)}function NS(e){return(e??{}).equals=Hb,LS(e)}var OS=Symbol("no-change");var BS=(e,t)=>Math.sign(e-t);function GS(e,t){if("number"===typeof e&&"number"===typeof t)return BS(e,t);const i="number"===typeof e?[e]:e,s="number"===typeof t?[t]:t,n=Math.min(i.length,s.length);for(let o=0;o<n;o+=1){const e=BS(i[o],s[o]);if(0!==e)return e}return BS(i.length,s.length)}var zS=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(zS||{}),jS=class e{constructor(t){this.serialNumber=e._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=Ew(this),this.name=void 0,this.transitionOut=void 0,this.pointerEvents=0,this._datum=void 0,this._previousDatum=void 0,this.scene=void 0,this._debugDirtyProperties=void 0,this.parentNode=void 0,this.cachedBBox=void 0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.batchLevel=0,this.batchDirty=!1,this.name=t?.name,this.tag=t?.tag??NaN,this.zIndex=t?.zIndex??0,this.scene=t?.scene,(t?.debugDirty??e._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(e,t,i){const s=e?.toSVG();if(null==s||!s.elements.length&&!s.defs?.length)return;const n=Jy("svg");if(n.setAttribute("width",String(t)),n.setAttribute("height",String(i)),n.setAttribute("viewBox",`0 0 ${t} ${i}`),n.setAttribute("overflow","visible"),s.defs?.length){const e=Jy("defs");e.append(...s.defs),n.append(e)}return n.append(...s.elements),n.outerHTML}static*extractBBoxes(e,t){for(const i of e)if(!t||i.visible&&!i.transitionOut){const e=i.getBBox();e&&(yield e)}}get datum(){return this._datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){return this.scene?.layersManager}get imageLoader(){return this.scene?.imageLoader}closestDatum(){for(const{datum:e}of this.traverseUp(!0))if(null!=e)return e}preRender(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=t,this.childNodeCounts.thisComplexity=t,this.batchLevel>0||this.batchDirty)throw new Error("AG Charts - illegal rendering state; batched update in progress");return this.childNodeCounts}isolatedRender(e){e.ctx.save();try{this.render(e)}catch(mK){const t=mK.errorCount??1;if(t>=5)throw mK.errorCount=t,mK;xy.warnOnce("Error during rendering",mK,mK.stack)}finally{e.ctx.restore()}}render(e){const{stats:t}=e;if(this.debugDirtyProperties(),e.debugNodeSearch){const t=this.name??this.id;e.debugNodeSearch.some((e=>"string"===typeof e?e===t:e.test(t)))&&(e.debugNodes[this.name??this.id]=this)}t&&(t.nodesRendered++,t.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(e){this.scene=e}*traverseUp(e){let t=this;for(e&&(yield t);t=t.parentNode;)yield t}isRoot(){return!this.parentNode}removeChild(e){throw new Error(`AG Charts - internal error, unknown child node ${e.name??e.id} in $${this.name??this.id}`)}remove(){this.parentNode?.removeChild(this)}destroy(){this.parentNode?.removeChild(this)}batchedUpdate(e){this.batchLevel++,e(),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1)}setProperties(e){return this.batchLevel++,Object.assign(this,e),this.batchLevel--,0===this.batchLevel&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1),this}containsPoint(e,t){return!1}pickNode(e,t){if(this.containsPoint(e,t))return this}pickNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.containsPoint(e,t)&&i.push(this),i}getBBox(){return this.cachedBBox??(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(e){this.markDirty(e)}markDirtyChildrenOrder(){this.cachedBBox=void 0}markDirty(e){this.batchLevel>0?this.batchDirty=!0:(null!=e&&this._debugDirtyProperties&&this.markDebugProperties(e),this.cachedBBox=void 0,this.parentNode?.markDirty())}markDebugProperties(e){const t=this._debugDirtyProperties?.get(e)??[],i=(new Error).stack?.split("\n").filter((e=>"Error"!==e&&!e.includes(".markDebugProperties")&&!e.includes(".markDirty")&&!e.includes("Object.assign ")&&!e.includes(`${this.constructor.name}.`)))??"unknown";t.push(i[0].replace(" at ","").trim()),this._debugDirtyProperties?.set(e,t)}debugDirtyProperties(){null!=this._debugDirtyProperties&&(this._debugDirtyProperties.has("__first__")||this._debugDirtyProperties.forEach(((e,t)=>{e.length>1&&(console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${t} (${e.length}x)`),e.forEach((e=>console.log(e))),console.groupEnd())})),this._debugDirtyProperties.clear())}onZIndexChange(){this.parentNode?.markDirtyChildrenOrder()}toSVG(){}};jS._nextSerialNumber=0,jS._debugEnabled=!1,$w([LS()],jS.prototype,"visible",2),$w([FS({equals:fS,changeCb:e=>e.onZIndexChange()})],jS.prototype,"zIndex",2);var VS=jS,HS=2*Math.PI,WS=Math.PI/2;function _S(e){return e%=HS,e+=HS,e%=HS}function US(e){return e%=HS,(e+=HS)!==HS&&(e%=HS),e}function $S(e){return(e%=HS)<-Math.PI?e+=HS:e>=Math.PI&&(e-=HS),e}function KS(e,t,i){const s=_S(e),n=_S(t),o=_S(i);return n<o?n<=s&&s<=o:n>o?n<=s||s<=o:t!==i}function YS(e){return e/180*Math.PI}function ZS(e){return e/Math.PI*180}function qS(e,t){return e=_S(e),(t=_S(t))-e+(e>t?HS:0)}function QS(e){const t=_S(e);return t<=WS?t/WS:t<=Math.PI?(Math.PI-t)/WS:t<=1.5*Math.PI?(t-Math.PI)/WS:(HS-t)/WS}function XS(e,t,i){const s=QS(i);return e*s+t*Math.abs(1-s)}function JS(e){return e?_S(YS(e)):0}var ex=(e,t,i)=>e*(1-i)+t*i,tx=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},ix=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},sx=class e{constructor(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=dw(0,e||0,1),this.g=dw(0,t||0,1),this.b=dw(0,i||0,1),this.a=dw(0,s||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!e.parseHex(t):t.indexOf("rgb")>=0?!!e.stringToRgba(t):e.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.indexOf("#")>=0)return e.fromHexString(t);const i=e.nameToHex.get(t.toLowerCase());if(i)return e.fromHexString(i);if(t.indexOf("rgb")>=0)return e.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static parseHex(e){let t;switch((e=e.replace(/ /g,"").slice(1)).length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map((e=>parseInt(e,16))).map((e=>e+16*e))}if(t?.length>=3&&t.every((e=>e>=0)))return 3===t.length&&t.push(255),t}static fromHexString(t){const i=e.parseHex(t);if(i){const[t,s,n,o]=i;return new e(t/255,s/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(e){let t=-1,i=-1;for(let o=0;o<e.length;o++){const s=e[o];if(-1===t&&"("===s)t=o;else if(")"===s){i=o;break}}if(-1===t||-1===i)return;const s=e.substring(t+1,i).split(","),n=[];for(let o=0;o<s.length;o++){const e=s[o];let t=parseFloat(e);if(!Number.isFinite(t))return;e.indexOf("%")>=0?(t=dw(0,t,100),t/=100):3===o?t=dw(0,t,1):(t=dw(0,t,255),t/=255),n.push(t)}return n}static fromRgbaString(t){const i=e.stringToRgba(t);if(i){if(3===i.length)return new e(i[0],i[1],i[2]);if(4===i.length)return new e(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new e(t[0],t[1],t[2],t[3]);if(3===t.length)return new e(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.HSBtoRGB(t,i,s);return new e(o[0],o[1],o[2],n)}static fromHSL(t,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.HSLtoRGB(t,i,s);return new e(o[0],o[1],o[2],n)}static fromOKLCH(t,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.OKLCHtoRGB(t,i,s);return new e(o[0],o[1],o[2],n)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let t="#"+e.padHex(Math.round(255*this.r).toString(16))+e.padHex(Math.round(255*this.g).toString(16))+e.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=e.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return e.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){const s=tx(e),n=tx(t),o=tx(i),r=Math.cbrt(.4122214708*s+.5363325363*n+.0514459929*o),a=Math.cbrt(.2119034982*s+.6806995451*n+.1073969566*o),l=Math.cbrt(.0883024619*s+.2817188376*n+.6299787005*o),c=.2104542553*r+.793617785*a-.0040720468*l,h=1.9779984951*r-2.428592205*a+.4505937099*l,d=.0259040371*r+.7827717662*a-.808675766*l,u=180*Math.atan2(d,h)/Math.PI;return[c,Math.hypot(h,d),u>=0?u:u+360]}static OKLCHtoRGB(e,t,i){const s=e,n=t*Math.cos(i*Math.PI/180),o=t*Math.sin(i*Math.PI/180),r=(s+.3963377774*n+.2158037573*o)**3,a=(s-.1055613458*n-.0638541728*o)**3,l=(s-.0894841775*n-1.291485548*o)**3,c=-1.2684380046*r+2.6097574011*a-.3413193965*l,h=-.0041960863*r-.7034186147*a+1.707614701*l;return[ix(4.0767416621*r-3.3077115913*a+.2309699292*l),ix(c),ix(h)]}static RGBtoHSL(e,t,i){const s=Math.min(e,t,i),n=Math.max(e,t,i),o=(n+s)/2;let r,a;if(n===s)r=0,a=0;else{const l=n-s;a=o>.5?l/(2-n-s):l/(n+s),r=n===e?(t-i)/l+(t<i?6:0):n===t?(i-e)/l+2:(e-t)/l+4,r*=60}return[r,a,o]}static HSLtoRGB(e,t,i){if(0===t)return[i,i,i];const s=i<.5?i*(1+t):i+t-i*t,n=2*i-s;function o(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(s-n)*e:e<.5?s:e<2/3?n+(s-n)*(2/3-e)*6:n}return[o((e=(e%360+360)%360)/360+1/3),o(e/360),o(e/360-1/3)]}static RGBtoHSB(e,t,i){const s=Math.min(e,t,i),n=Math.max(e,t,i);let o=0;if(s!==n){const r=n-s,a=(n-e)/r,l=(n-t)/r,c=(n-i)/r;o=e===n?c-l:t===n?2+a-c:4+l-a,o/=6,o<0&&(o+=1)}return[360*o,0===n?0:(n-s)/n,n]}static HSBtoRGB(e,t,i){e=(e%360+360)%360/360;let s=0,n=0,o=0;if(0===t)s=n=o=i;else{const r=6*(e-Math.floor(e)),a=r-Math.floor(r),l=i*(1-t),c=i*(1-t*a),h=i*(1-t*(1-a));switch(r>>0){case 0:s=i,n=h,o=l;break;case 1:s=c,n=i,o=l;break;case 2:s=l,n=i,o=h;break;case 3:s=l,n=c,o=i;break;case 4:s=h,n=l,o=i;break;case 5:s=i,n=l,o=c}}return[s,n,o]}static mix(t,i,s){return new e(ex(t.r,i.r,s),ex(t.g,i.g,s),ex(t.b,i.b,s),ex(t.a,i.a,s))}static lighten(t,i){const s=e.RGBtoOKLCH(t.r,t.g,t.b);return e.fromOKLCH(dw(0,s[0]+i,1),s[1],s[2])}static darken(t,i){const s=e.RGBtoOKLCH(t.r,t.g,t.b);return e.fromOKLCH(dw(0,s[0]-i,1),s[1],s[2])}static interpolate(t,i){const s=1/(t.length-1),n=t.map((t=>e.RGBtoOKLCH(t.r,t.g,t.b)));return Array.from({length:i},((o,r)=>{const a=r/(i-1),l=t.length<=2?0:Math.min(Math.floor(a*(t.length-1)),t.length-2),c=(a-l*s)/s,h=n[l],d=n[l+1];return e.fromOKLCH(ex(h[0],d[0],c),ex(h[1],d[1],c),ex(h[2],d[2],c))}))}};sx.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var nx=sx,ox=(e=>(e[e.Leading=0]="Leading",e[e.Trailing=1]="Trailing",e[e.Interpolate=2]="Interpolate",e))(ox||{}),rx=class{ticks(e,t,i){}niceDomain(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain}get bandwidth(){}get step(){}get inset(){}},ax=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(e){this[i]!==e&&(this[i]=e,this.invalid=!0)},enumerable:!0,configurable:!1})},lx=e=>{const t=nx.fromString(e),[i,s,n]=nx.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:s,h:n,a:t.a}},cx=1e-6,hx=e=>e.c<cx||e.l<cx||e.l>1-cx,dx=class extends rx{constructor(){super(...arguments),this.type="color",this.defaultTickCount=0,this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(lx)}update(){const{domain:e,range:t}=this;e.length<2&&(xy.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(let i=1;i<e.length;i++){if(e[i-1]>=e[i]){xy.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort(((e,t)=>e-t));break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(lx)}normalizeDomains(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return{domain:t.flat(),animatable:!0}}toDomain(){}convert(e){this.refresh();const{domain:t,range:i,parsedRange:s}=this,n=t[0],o=t.at(-1),r=i[0],a=i[i.length-1];if(e<=n)return r;if(e>=o)return a;let l,c;if(2===t.length){const t=(e-n)/(o-n),s=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(t*(i.length-1)),i.length-2),c=(t-l*s)/s}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const i=t[l];c=(e-i)/(t[l+1]-i)}return((e,t,i)=>{let s;if(i=dw(0,i,1),hx(e))s=t.h;else if(hx(t))s=e.h;else{const n=e.h;let o=t.h;const r=t.h-e.h;r>180?o-=360:r<-180&&(o+=360),s=n*(1-i)+o*i}const n=e.c*(1-i)+t.c*i,o=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return nx.fromOKLCH(o,n,s,r)})(s[l],s[l+1],c).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&xy.warnOnce("Expected update to not invalidate scale"))}};$w([ax],dx.prototype,"domain",2),$w([ax],dx.prototype,"range",2);var ux=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t,i){const s=this.bbox??t;if(!s.isFinite())return;if(null!=this._cache&&this._cache.ctx===e&&this._cache.bbox.equals(s))return this._cache.gradient;const{stops:n,colorSpace:o}=this;if(0===n.length)return;if(1===n.length)return n[0].color;let r=this.createCanvasGradient(e,s,i);if(null==r)return;const a="oklch"===o;let l=n[0];r.addColorStop(l.stop,l.color);for(let c=1;c<n.length;c+=1){const e=n[c];if(a){const t=new dx;t.domain=[l.stop,e.stop],t.range=[l.color,e.color];for(let i=l.stop+.05;i<e.stop;i+=.05)r.addColorStop(i,t.convert(i))}r.addColorStop(e.stop,e.color),l=e}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:s,gradient:r},r}toSvg(e){const t=this.bbox??e,i=this.createSvgGradient(t);return this.stops.forEach((e=>{let{stop:t,color:s}=e;const n=Jy("stop");n.setAttribute("offset",`${t}`),n.setAttribute("stop-color",`${s}`),i.appendChild(n)})),i}},px=class extends ux{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}createCanvasGradient(e,t,i){const{angle:s}=this,n=JS(s+-90),o=i?.centerX??t.x+.5*t.width,r=i?.centerY??t.y+.5*t.height;return e.createConicGradient(n,o,r)}createSvgGradient(e){return Jy("linearGradient")}},gx=class extends ux{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}getGradientPoints(e){const{angle:t}=this,i=JS(t+90),s=Math.cos(i),n=Math.sin(i),o=e.width,r=e.height,a=e.x+.5*o,l=e.y+.5*r,c=Math.sqrt(r*r+o*o)/2,h=Math.atan2(r,o);let d;d=i<Math.PI/2?i:i<Math.PI?Math.PI-i:i<1.5*Math.PI?i-Math.PI:2*Math.PI-i;const u=c*Math.abs(Math.cos(d-h));return{x0:a+s*u,y0:l+n*u,x1:a-s*u,y1:l-n*u}}createCanvasGradient(e,t){const{x0:i,y0:s,x1:n,y1:o}=this.getGradientPoints(t);if(!(isNaN(i)||isNaN(s)||isNaN(n)||isNaN(o)))return e.createLinearGradient(i,s,n,o)}createSvgGradient(e){const{x0:t,y0:i,x1:s,y1:n}=this.getGradientPoints(e),o=Jy("linearGradient");return o.setAttribute("x1",String(t)),o.setAttribute("y1",String(i)),o.setAttribute("x2",String(s)),o.setAttribute("y2",String(n)),o.setAttribute("gradientUnits","userSpaceOnUse"),o}},mx=class extends ux{constructor(e,t,i){super(e,t,i)}createCanvasGradient(e,t,i){const s=i?.centerX??t.x+.5*t.width,n=i?.centerY??t.y+.5*t.height,o=i?.innerRadius??0,r=i?.outerRadius??Math.hypot(.5*t.width,.5*t.height)/Math.SQRT2;return e.createRadialGradient(s,n,o,s,n,r)}createSvgGradient(e){const t=e.x+.5*e.width,i=e.y+.5*e.height,s=Jy("radialGradient");return s.setAttribute("cx",String(t)),s.setAttribute("cy",String(i)),s.setAttribute("r",String(Math.hypot(.5*e.width,.5*e.height)/Math.SQRT2)),s.setAttribute("gradientUnits","userSpaceOnUse"),s}},fx=function(e,t){hS(e,t).optional=!0},vx=class{handleUnknownProperties(e,t){}set(e){const{className:t=this.constructor.name}=this.constructor;if(null==e)return this.clear(),this;if("object"!==typeof e)return xy.warn(`unable to set ${t} - expecting a properties object`),this;const i=new Set(Object.keys(e));for(const s of gS(this))if(i.has(s)){const t=e[s],n=this;if(Cx(n[s]))if(n[s]instanceof yx){const e=n[s].reset(t);null==e?xy.warn(`unable to set [${String(s)}] - expecting a properties array`):n[s]=e}else n[s].set(t);else lC(t)?n[s]=CS(t,n[s]??{}):n[s]=t;i.delete(s)}this.handleUnknownProperties(i,e);for(const s of i)xy.warn(`unable to set [${String(s)}] in ${t} - property is unknown`);return this}clear(){for(const e of gS(this)){const t=this[e];Cx(t)?t.clear():this[e]=void 0}return this}toJson(){return gS(this).reduce(((e,t)=>{const i=this[t];return e[String(t)]=Cx(i)?i.toJson():i,e}),{})}},yx=class e extends Array{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];super(i.length);const n=(o=e,Boolean(o?.prototype?.constructor?.name)?t=>(new e).set(t):e);var o;Object.defineProperty(this,"itemFactory",{value:n,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(iC(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=this.itemFactory(e[t])}return this}reset(t){if(Array.isArray(t))return new e(this.itemFactory,...t)}toJson(){return this.map((e=>e?.toJson?.()??e))}};function Cx(e){return e instanceof vx||e instanceof yx}var bx=class extends vx{constructor(){super(...arguments),this.color="black"}};function wx(e){return e.flatMap(((t,i)=>{const{stop:s}=t,n=e.at(i+1)?.color;return null!=n?[t,{stop:s,color:n}]:[t]}))}function Sx(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"continuous";const n=e.map((e=>"string"===typeof e?{color:e}:e));if(0===n.length)return function(e,t){const i="discrete"===t?1:0,s=e.map(((e,t,s)=>{let{length:n}=s;return{stop:(t+i)/(n-1+i),color:e}}));return"discrete"===t?wx(s):s}(t,s);if(!function(e){let t;for(const i of e)if(null!=i?.stop){if(null!=t&&i.stop<t)return!1;t=i.stop}return!0}(n))return xy.warnOnce("[fills] must have the stops defined in ascending order"),[];const o=Math.min(...i),r=Math.max(...i),a="discrete"===s,l=new Float64Array(n.length);let c=0,h=-1;for(let g=0;g<n.length;g+=1){const e=n[g];if(g>=h){h=n.length-1;for(let e=g+1;e<n.length;e+=1)if(null!=n[e]?.stop){h=e;break}}let t=e?.stop;if(null==t){const e=n[c]?.stop,i=n[h]?.stop,s=e??o,l=a&&null==e?1:0;t=s+((i??r)-s)*(g-c+l)/(h-c+l)}else c=g;l[g]=Math.max(0,Math.min(1,(t-o)/(r-o)))}let d,u=n.find((e=>null!=e.color))?.color;const p=n.map(((e,i)=>{let s=e?.color;const n=l[i];return null!=s?u=s:null!=u?s=u:(null==d&&(d=new dx,d.domain=[0,1],d.range=t),s=d.convert(n)),{stop:n,color:s}}));return"discrete"===s?wx(p):p}$w([fx],bx.prototype,"stop",2),$w([fx],bx.prototype,"color",2);var xx=class{constructor(e,t){this.imageLoader=e,this._cache=void 0,this.url=t.url,this.backgroundFill=t.backgroundFill??"black",this.backgroundFillOpacity=t.backgroundFillOpacity??1,this.repeat=t.repeat??"no-repeat",this.width=t.width,this.height=t.height,this.fit=t.fit??"stretch",this.rotation=t.rotation??0}createCanvasImage(e,t,i,s){if(!t)return null;const[n,o]=this.getSize(t.width,t.height,i,s);return n<1||o<1?(xy.warnOnce("Image fill is too small to render, ignoring."),null):e.createPattern(t,this.repeat)}getSize(e,t,i,s){const{fit:n}=this;let o=e,r=t,a=1;const l=i/s,c=e/t;return"stretch"===n||0===e||0===t?(o=i,r=s):"contain"===n?a=c>l?i/e:s/t:"cover"===n&&(a=c>l?s/t:i/e),[Math.max(1,o*a),Math.max(1,r*a)]}setImageTransform(e,t){if("string"===typeof e)return;const{url:i,rotation:s,width:n,height:o}=this,r=this.imageLoader?.loadImage(i);if(!r)return;const a=JS(s),l=Math.cos(a),c=Math.sin(a),[h,d]=this.getSize(r.width,r.height,n??t.width,o??t.height),u=h/r.width,p=d/r.height,g=t.x+t.width/2,m=t.y+t.height/2,f=(l*h-c*d)/2,v=(c*h+l*d)/2;e?.setTransform(new DOMMatrix([l*u,c*p,-c*u,l*p,g-f,m-v]))}createPattern(e,t,i,s){const n=this.width??t,o=this.height??i,r=this._cache;if(null!=r&&r.ctx===e&&r.width===n&&r.height===o)return r.pattern;const a=this.imageLoader?.loadImage(this.url,s),l=this.createCanvasImage(e,a,n,o);return null!=l?(this._cache={ctx:e,pattern:l,width:n,height:o},l):void 0}toSvg(e,t){const{url:i,rotation:s,backgroundFill:n,backgroundFillOpacity:o}=this,{x:r,y:a,width:l,height:c}=e,h=Jy("pattern");h.setAttribute("viewBox",`0 0 ${l} ${c}`),h.setAttribute("x",String(r)),h.setAttribute("y",String(a)),h.setAttribute("width",String(l)),h.setAttribute("height",String(c)),h.setAttribute("patternUnits","userSpaceOnUse");const d=Jy("rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width",String(l)),d.setAttribute("height",String(c)),d.setAttribute("fill",n),d.setAttribute("fill-opacity",String(o)),h.appendChild(d);const u=Jy("image");return u.setAttribute("href",i),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("width",String(l)),u.setAttribute("height",String(c)),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("transform",`scale(${1/t}) rotate(${s}, ${l/2}, ${c/2})`),h.appendChild(u),h}};function Mx(e,t,i,s){const n=e-i,o=t-s;return n*n+o*o}function Dx(e,t,i,s,n,o,r){if(i===n&&s===o)return Math.min(r,Mx(e,t,i,s));const a=n-i,l=o-s,c=Math.max(0,Math.min(1,((e-i)*a+(t-s)*l)/(a*a+l*l))),h=i+c*a,d=s+c*l;return Math.min(r,Mx(e,t,h,d))}var Rx=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,Ex=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,Ix=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,Ax=/^[01]/,kx={z:[],h:[Ex],v:[Ex],m:[Ex,Ex],l:[Ex,Ex],t:[Ex,Ex],s:[Ex,Ex,Ex,Ex],q:[Ex,Ex,Ex,Ex],c:[Ex,Ex,Ex,Ex,Ex,Ex],a:[Ex,Ex,Ex,Ax,Ax,Ex,Ex]};function Tx(e,t,i){const s=kx[e.toLocaleLowerCase()],n={command:e,params:[]};for(const o of s){const s=t.slice(i),r=o.exec(s);if(null==r)return 1===n.params.length?[i,n]:void xy.warnOnce(`Invalid SVG path, error at index ${i}: No path segment parameters for command [${e}]`);{n.params.push(parseFloat(r[0])),i+=r[0].length;const e=Ix.exec(s.slice(r[0].length));null!=e&&(i+=e[0].length)}}return[i,n]}function Lx(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6;if(Math.abs(e)<n)return function(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;if(Math.abs(e)<s)return function(e,t){const i=-t/e;return 0!==e&&i>=0&&i<=1?[i]:[]}(t,i);const n=t*t-4*e*i,o=[];if(Math.abs(n)<s){const i=-t/(2*e);i>=0&&i<=1&&o.push(i)}else if(n>0){const i=Math.sqrt(n),s=(-t-i)/(2*e),r=(-t+i)/(2*e);s>=0&&s<=1&&o.push(s),r>=0&&r<=1&&o.push(r)}return o}(t,i,s,n);const o=t/e,r=i/e,a=(3*r-o*o)/9,l=(9*o*r-27*(s/e)-2*o*o*o)/54,c=a*a*a+l*l,h=1/3,d=[];if(c>=0){const e=Math.sqrt(c),t=Math.sign(l+e)*Math.pow(Math.abs(l+e),h),i=Math.sign(l-e)*Math.pow(Math.abs(l-e),h),s=Math.abs(Math.sqrt(3)*(t-i)/2),r=-h*o+(t+i);if(r>=0&&r<=1&&d.push(r),Math.abs(s)<n){const e=-h*o-(t+i)/2;e>=0&&e<=1&&d.push(e)}}else{const e=Math.acos(l/Math.sqrt(-a*a*a)),t=h*o,i=2*Math.sqrt(-a),s=i*Math.cos(h*e)-t,n=i*Math.cos(h*(e+2*Math.PI))-t,r=i*Math.cos(h*(e+4*Math.PI))-t;s>=0&&s<=1&&d.push(s),n>=0&&n<=1&&d.push(n),r>=0&&r<=1&&d.push(r)}return d}function Px(e,t,i,s,n,o,r,a){const l=(i-e)*(a-o)-(s-t)*(r-n);if(0===l)return 0;const c=((r-n)*(t-o)-(e-n)*(a-o))/l,h=((i-e)*(t-o)-(s-t)*(e-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?1:0}function Fx(e,t,i,s,n,o,r,a,l,c,h,d){let u=0;const p=c-d,g=h-l,m=l*(d-c)-c*(h-l),f=Nx(e,i,n,r),v=Nx(t,s,o,a),y=Lx(p*f[0]+g*v[0],p*f[1]+g*v[1],p*f[2]+g*v[2],p*f[3]+g*v[3]+m);for(const C of y){const e=C*C,t=C*e,i=f[0]*t+f[1]*e+f[2]*C+f[3],s=v[0]*t+v[1]*e+v[2]*C+v[3];let n;n=l===h?(s-c)/(d-c):(i-l)/(h-l),n>=0&&n<=1&&u++}return u}function Nx(e,t,i,s){return[3*t-e-3*i+s,3*e-6*t+3*i,-3*e+3*t,e]}function Ox(e,t,i,s,n){return(1-n)**3*e+3*(1-n)**2*n*t+3*(1-n)*n**2*i+n**3*s}function Bx(e,t,i,s,n){if(n<=Math.min(e,s))return e<s?0:1;if(n>=Math.max(e,s))return e<s?1:0;let o=0,r=1,a=NaN;for(let l=0;l<12;l+=1){a=(o+r)/2;Ox(e,t,i,s,a)<n?o=a:r=a}return a}function Gx(e,t,i,s,n,o,r,a,l){const c=(1-l)*e+l*i,h=(1-l)*t+l*s,d=(1-l)*i+l*n,u=(1-l)*s+l*o,p=(1-l)*n+l*r,g=(1-l)*o+l*a,m=(1-l)*c+l*d,f=(1-l)*h+l*u,v=(1-l)*d+l*p,y=(1-l)*u+l*g,C=(1-l)*m+l*v,b=(1-l)*f+l*y;return[[{x:e,y:t},{x:c,y:h},{x:m,y:f},{x:C,y:b}],[{x:C,y:b},{x:v,y:y},{x:p,y:g},{x:r,y:a}]]}function zx(e,t,i,s){const n=3*t-e-3*i+s,o=2*(e-2*t+i),r=-e+t;if(0===n){if(0!==o){const e=-r/o;if(e>0&&e<1)return[e]}return[]}const a=o*o-4*n*r;if(a>=0){const e=Math.sqrt(a);return[(-o+e)/(2*n),(-o-e)/(2*n)].filter((e=>e>0&&e<1))}return[]}function jx(e,t,i,s,n,o,r,a){return[...zx(e,i,n,r),...zx(t,s,o,a)]}function Vx(e,t,i){const s=Ox(e[0].x,e[1].x,e[2].x,e[3].x,.5),n=Ox(e[0].y,e[1].y,e[2].y,e[3].y,.5);return{points:e,distance:Math.hypot(s-t,n-i),minDistance:Math.min(Math.hypot(e[0].x-t,e[0].y-i),Math.hypot(e[1].x-t,e[1].y-i),Math.hypot(e[2].x-t,e[2].y-i),Math.hypot(e[3].x-t,e[3].y-i))}}function Hx(e,t,i,s,n,o,r,a,l,c){let h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1;let d,u={value:Vx([{x:e,y:t},{x:i,y:s},{x:n,y:o},{x:r,y:a}],l,c),next:null};for(;null!=u;){const{points:e,distance:t,minDistance:i}=u.value;if(u=u.next,(null==d||t<d.distance)&&(d={distance:t,minDistance:i}),null!=d&&d.distance-i<=h)continue;const[s,n]=Gx(e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y,.5),o=[Vx(s,l,c),Vx(n,l,c)].sort(Wx);u=kw(u,o,Wx)}return d?.distance??1/0}var Wx=(e,t)=>t.minDistance-e.minDistance,_x=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.cx=NaN,this.cy=NaN,this.sx=NaN,this.sy=NaN,this.openedPath=!1,this.closedPath=!1}isEmpty(){return 0===this.commands.length}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.sx=e,this.sy=t,this.cx=e,this.cy=t,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.cx=e,this.cy=t,this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}cubicCurveTo(e,t,i,s,n,o){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,s,n,o),this.commands.push(2),this.params.push(e,t,i,s,n,o)}closePath(){this.openedPath&&(this.cx=this.sx,this.cy=this.sy,this.sx=NaN,this.sy=NaN,this.path2d.closePath(),this.commands.push(3),this.openedPath=!1,this.closedPath=!0)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}roundRect(e,t,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(e,t+n),this.arc(e+n,t+n,n,Math.PI,1.5*Math.PI),this.lineTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+n),this.lineTo(e+i,t+s-n),this.arc(e+i-n,t+s-n,n,0,Math.PI/2),this.lineTo(e+i-n,t+s),this.lineTo(e+n,t+s),this.arc(e+ +n,t+s-n,n,Math.PI/2,Math.PI),this.lineTo(e,t+s-n),this.closePath()}ellipse(e,t,i,s,n,o,r){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=i,c=s/i,h=Math.cos(n),d=Math.sin(n),u=-c*d,p=c*h,g=l*Math.cos(o),m=l*Math.sin(o),f=e+h*g+u*m,v=t+d*g+p*m,y=(f-this.cx)**2+(v-this.cy)**2;this.openedPath?y>1e-6&&this.lineTo(f,v):this.moveTo(f,v);let C=a?-_S(o-r):_S(r-o);Math.abs(Math.abs(r-o)-2*Math.PI)<1e-6&&C<2*Math.PI&&(C+=2*Math.PI*(a?-1:1));const b=Math.max(Math.ceil(Math.abs(C)/(Math.PI/2)),1),w=C/b,S=4/3*Math.tan(w/4);for(let x=0;x<b;x+=1){const i=o+w*(x+0),s=o+w*(x+1),n=l*Math.sin(i),r=l*Math.cos(i),a=l*Math.sin(s),c=l*Math.cos(s),g=r-S*n,m=n+S*r,f=c+S*a,v=a-S*c,y=c,C=a;this.cubicCurveTo(e+h*g+u*m,t+d*g+p*m,e+h*f+u*v,t+d*f+p*v,e+h*y+u*C,t+d*y+p*C)}}arc(e,t,i,s,n,o){this.ellipse(e,t,i,i,0,s,n,o)}appendSvg(e){const t=function(e){if(!e)return;const t=[];let i,s=0;for(;s<e.length;){const n=Rx.exec(e.slice(s));let o;if(null==n){if(!i)return void xy.warnOnce(`Invalid SVG path, error at index ${s}: Missing command.`);o=i}else o=n[1],s+=n[0].length;const r=Tx(o,e,s);if(!r)return;s=r[0],i=o,t.push(r[1])}return t}(e);if(null==t)return!1;let i,s,n=0,o=0,r=0,a=0;for(const{command:l,params:c}of t){i??(i=c[0]),s??(s=c[1]);const e=l===l.toLowerCase(),t=e?i:0,h=e?s:0;switch(l.toLowerCase()){case"m":this.moveTo(t+c[0],h+c[1]),i=t+c[0],s=h+c[1],n=i,o=s;break;case"c":this.cubicCurveTo(t+c[0],h+c[1],t+c[2],h+c[3],t+c[4],h+c[5]),r=t+c[2],a=h+c[3],i=t+c[4],s=h+c[5];break;case"s":this.cubicCurveTo(i+i-r,s+s-a,t+c[0],h+c[1],t+c[2],h+c[3]),r=t+c[0],a=h+c[1],i=t+c[2],s=h+c[3];break;case"q":this.cubicCurveTo((t+2*c[0])/3,(h+2*c[1])/3,(2*c[0]+c[2])/3,(2*c[1]+c[3])/3,c[2],c[3]),r=c[0],a=c[1],i=c[2],s=c[3];break;case"t":this.cubicCurveTo((i+2*(i+i-r))/3,(s+2*(s+s-a))/3,(2*(i+i-r)+c[0])/3,(2*(s+s-a)+c[1])/3,c[0],c[1]),r=i+i-r,a=s+s-a,i=c[0],s=c[1];break;case"a":this.svgEllipse(i,s,c[0],c[1],c[2]*Math.PI/180,c[3],c[4],t+c[5],h+c[6]),i=t+c[5],s=h+c[6];break;case"h":this.lineTo(t+c[0],s),i=t+c[0];break;case"l":this.lineTo(t+c[0],h+c[1]),i=t+c[0],s=h+c[1];break;case"v":this.lineTo(i,h+c[0]),s=h+c[0];break;case"z":this.closePath(),i=n,s=o;break;default:throw new Error(`Could not translate command '${l}' with '${c.join(" ")}'`)}}return!0}svgEllipse(e,t,i,s,n,o,r,a,l){i=Math.abs(i),s=Math.abs(s);const c=(e-a)/2,h=(t-l)/2,d=Math.sin(n),u=Math.cos(n),p=u*c+d*h,g=-d*c+u*h,m=p/i,f=g/s;let v=m*m+f*f,y=(e+a)/2,C=(t+l)/2,b=0,w=0;v>=1?(v=Math.sqrt(v),i*=v,s*=v):(v=Math.sqrt(1/v-1),o===r&&(v=-v),b=v*i*f,w=-v*s*m,y+=u*b-d*w,C+=d*b+u*w);const S=Math.atan2((g-w)/s,(p-b)/i),x=S+(Math.atan2((-g-w)/s,(-p-b)/i)-S),M=!!(1-r);this.ellipse(y,C,i,s,n,S,x,M)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){const i=this.commands,s=this.params,n=i.length,o=-1e4,r=-1e4;let a=NaN,l=NaN,c=0,h=0,d=0;for(let u=0,p=0;u<n;u++)switch(i[u]){case 0:d+=Px(a,l,c,h,o,r,e,t),c=s[p++],a=c,h=s[p++],l=h;break;case 1:d+=Px(c,h,s[p++],s[p++],o,r,e,t),c=s[p-2],h=s[p-1];break;case 2:d+=Fx(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],o,r,e,t),c=s[p-2],h=s[p-1];break;case 3:d+=Px(a,l,c,h,o,r,e,t)}return d%2===1}distanceSquared(e,t){let i=1/0;const s=this.commands,n=this.params,o=s.length;let r=NaN,a=NaN,l=0,c=0;for(let h=0,d=0;h<o;h++)switch(s[h]){case 0:l=r=n[d++],c=a=n[d++];break;case 1:{const s=l,o=c;l=n[d++],c=n[d++],i=Dx(e,t,s,o,l,c,i);break}case 2:const s=l,o=c,h=n[d++],u=n[d++],p=n[d++],g=n[d++];l=n[d++],c=n[d++],i=Hx(s,o,h,u,p,g,l,c,e,t)**2;break;case 3:i=Dx(e,t,l,c,r,a,i)}return i}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>({x:e,y:t});const t=[],{commands:i,params:s}=this,n=(i,n)=>{t.push(i);for(let r=0;r<n;r+=2){const{x:i,y:n}=e(s[o++],s[o++]);t.push(i,n)}};let o=0;for(const r of i)switch(r){case 0:n("M",2);break;case 1:n("L",2);break;case 2:n("C",6);break;case 3:n("Z",0)}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,s,n,o]=[1/0,1/0,-1/0,-1/0],[r,a]=[NaN,NaN],[l,c]=[NaN,NaN];const h=(e,t)=>{i=Math.min(t,i),s=Math.min(e,s),n=Math.max(e,n),o=Math.max(t,o),r=e,a=t};let d=0;for(const u of e)switch(u){case 0:h(t[d++],t[d++]),l=r,c=a;break;case 1:h(t[d++],t[d++]);break;case 2:{const e=r,i=a,s=t[d++],n=t[d++],o=t[d++],l=t[d++],c=t[d++],u=t[d++];jx(e,i,s,n,o,l,c,u).forEach((t=>{const r=Ox(e,s,o,c,t),a=Ox(i,n,l,u,t);h(r,a)})),h(c,u);break}case 3:h(l,c),l=NaN,c=NaN}return new eS(s,i,n-s,o-i)}};function Ux(e,t,i){const s=Math.round(t*e)/e;return null==i?s:0===i?0:i<1?Math.ceil(i*e)/e:Math.round((i+t)*e)/e-s}function $x(e,t){return Math.floor(t*e)/e}function Kx(e,t,i){const{width:s,height:n,padding:o,strokeWidth:r}=t,a=s/2,l=n/2,c=Math.max(1,s-o-r/2),h=Math.max(1,n-o-r/2);let d=!1;for(const[u,p]of i){const t=a+(u-.5)*c,i=l+(p-.5)*h;d?e.lineTo(t,i):e.moveTo(t,i),d=!0}e.closePath()}var Yx={circles(e,t){let{width:i,strokeWidth:s,padding:n}=t;const o=i/2,r=Math.max(1,o-n-s/2);e.arc(o,o,r,0,2*Math.PI)},squares(e,t){let{width:i,height:s,pixelRatio:n,padding:o,strokeWidth:r}=t;const a=o+r/2;e.moveTo(Ux(n,a),Ux(n,a)),e.lineTo(Ux(n,i-a),Ux(n,a)),e.lineTo(Ux(n,i-a),Ux(n,s-a)),e.lineTo(Ux(n,a),Ux(n,s-a)),e.closePath()},triangles(e,t){Kx(e,t,[[.5,0],[1,1],[0,1]])},diamonds(e,t){Kx(e,t,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(e,t){let{width:i,height:s,padding:n}=t;const o=Math.max(1,(i-n)/2),r=o/2,a=Math.PI/2;for(let l=0;l<10;l++){const t=l%2===0?o:r,n=l*Math.PI/5-a,c=i/2+Math.cos(n)*t,h=s/2+Math.sin(n)*t;e.lineTo(c,h)}e.closePath()},hearts(e,t){let{width:i,height:s,padding:n}=t;const o=Math.max(1,i/4-n/2),r=i/2,a=s/2+o/2;e.arc(r-o,a-o,o,YS(130),YS(330)),e.arc(r+o,a-o,o,YS(220),YS(50)),e.lineTo(r,a+o),e.closePath()},crosses(e,t){Kx(e,t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(e,t){let{width:i,height:s,pixelRatio:n,strokeWidth:o}=t;const r=Ux(n,i/2)-o%2/2;e.moveTo(r,0),e.lineTo(r,s)},"horizontal-lines"(e,t){let{width:i,height:s,pixelRatio:n,strokeWidth:o}=t;const r=Ux(n,s/2)-o%2/2;e.moveTo(0,r),e.lineTo(i,r)},"forward-slanted-lines"(e,t){let{width:i,height:s,strokeWidth:n}=t;const o=Math.atan2(s,i),r=n*Math.cos(o),a=n*Math.sin(o);e.moveTo(-r,a),e.lineTo(r,-a),e.moveTo(-r,s+a),e.lineTo(i+r,-a),e.moveTo(i-r,s+a),e.lineTo(i+r,s-a)},"backward-slanted-lines"(e,t){let{width:i,height:s,strokeWidth:n}=t;const o=Math.atan2(s,i),r=n*Math.cos(o),a=n*Math.sin(o);e.moveTo(i-r,-a),e.lineTo(i+r,a),e.moveTo(-r,-a),e.lineTo(i+r,s+a),e.moveTo(-r,s-a),e.lineTo(r,s+a)}},Zx=class{constructor(e){this._cache=void 0,this.width=Math.max(e?.width??10,1),this.height=Math.max(e?.height??10,1),this.fill=e.fill??"none",this.fillOpacity=e.fillOpacity??1,this.backgroundFill=e.backgroundFill??"none",this.backgroundFillOpacity=e.backgroundFillOpacity??1,this.stroke=e.stroke??"black",this.strokeOpacity=e.strokeOpacity??1,this.strokeWidth=e.strokeWidth??1,this.padding=e.padding??1,this.pattern=e.pattern??"forward-slanted-lines",this.rotation=e.rotation??0,this.scale=e.scale??1,this.path=e.path}getPath(e){const{pattern:t,width:i,height:s,padding:n,strokeWidth:o,path:r}=this,a=new _x;let l=null!=Yx[t];return r&&l&&(l=!a.appendSvg(r)),l&&Yx[t](a,{width:i,height:s,pixelRatio:e,strokeWidth:o,padding:n}),a}renderStroke(e,t){const{stroke:i,strokeWidth:s,strokeOpacity:n}=this;s&&(t.strokeStyle=i,t.lineWidth=s,t.globalAlpha=n,t.stroke(e))}renderFill(e,t){const{fill:i,fillOpacity:s}=this;"none"!==i&&(t.fillStyle=i,t.globalAlpha=s,t.fill(e))}createCanvasPattern(e,t){const{width:i,height:s,scale:n,backgroundFill:o,backgroundFillOpacity:r}=this;if(i*n<1||s*n<1)return xy.warnOnce("Pattern fill is too small to render, ignoring."),null;const a=new rS({width:i,height:s,pixelRatio:t*n}),l=a.context;"none"!==o&&(l.fillStyle=o,l.globalAlpha=r,l.fillRect(0,0,i,s));const c=this.getPath(t).getPath2D();this.renderFill(c,l),this.renderStroke(c,l);const h=e.createPattern(a.canvas,"repeat");return this.setPatternTransform(h,t),a.destroy(),h}setPatternTransform(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(null==e)return;const n=JS(this.rotation),o=1/t,r=Math.cos(n)*o,a=Math.sin(n)*o;e.setTransform(new DOMMatrix([r,a,-a,r,i,s]))}createPattern(e,t){if(null!=this._cache&&this._cache.ctx===e&&this._cache.pixelRatio===t)return this._cache.pattern;const i=this.createCanvasPattern(e,t);return null!=i?(this._cache={ctx:e,pattern:i,pixelRatio:t},i):void 0}toSvg(){const{width:e,height:t,fill:i,fillOpacity:s,backgroundFill:n,backgroundFillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,rotation:c,scale:h}=this,d=Jy("pattern");d.setAttribute("viewBox",`0 0 ${e} ${t}`),d.setAttribute("width",String(e)),d.setAttribute("height",String(t)),d.setAttribute("patternUnits","userSpaceOnUse");const u=Jy("rect");u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("width",String(e)),u.setAttribute("height",String(t)),u.setAttribute("fill",n),u.setAttribute("fill-opacity",String(o)),d.appendChild(u);const p=Jy("path");return p.setAttribute("fill",i),p.setAttribute("fill-opacity",String(s)),p.setAttribute("stroke-opacity",String(l)),p.setAttribute("stroke",r),p.setAttribute("stroke-width",String(a)),p.setAttribute("transform",`rotate(${c}) scale(${h})`),p.setAttribute("d",this.getPath(1).toSVG()),d.appendChild(p),d}};function qx(e){return rC(e)&&"gradient"==e.type}function Qx(e){return null!==e&&rC(e)&&"pattern"==e.type}function Xx(e){return null!==e&&rC(e)&&"image"==e.type}function Jx(e){return qx(e)||Qx(e)}function eM(e,t){const{fontStyle:i,fontWeight:s,fontSize:n,fontFamily:o}=t;i&&e.setAttribute("font-style",i),s&&e.setAttribute("font-weight",String(s)),null!=n&&e.setAttribute("font-size",String(n)),o&&e.setAttribute("font-family",o)}var tM=class extends VS{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill="black",this.strokeWidth=0,this.lineDashOffset=0,this.opacity=1}getGradient(e){if(qx(e))return this.createGradient(e)}createGradient(e){const{colorSpace:t="rgb",gradient:i="linear",colorStops:s,rotation:n=0,reverse:o=!1}=e;if(null==s)return;let r=Sx(s,["black"],[0,1]);switch(o&&(r=r.map((e=>({color:e.color,stop:1-e.stop}))).reverse()),i){case"linear":return new gx(t,r,n);case"radial":return new mx(t,r);case"conic":return new px(t,r,n)}}getPattern(e){if(Qx(e))return this.createPattern(e)}createPattern(e){return new Zx(e)}getImage(e){if(Xx(e))return this.createImage(e)}createImage(e){return new xx(this.imageLoader,e)}onFillChange(){"object"===typeof this.fill&&fS(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,t){return Ux(this.layerManager?.canvas?.pixelRatio??1,e,t)}markDirty(e){super.markDirty(e),this.cachedDefaultGradientFillBBox=void 0}fillStroke(e,t){this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){const{fill:i,fillOpacity:s,fillImage:n}=this;if(null!=i&&"none"!==i&&s>0){const{globalAlpha:i}=e;n&&(e.globalAlpha=n.backgroundFillOpacity,e.fillStyle=n.backgroundFill,this.executeFill(e,t),e.globalAlpha=i),this.applyFillAndAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=i,e.shadowColor="rgba(0, 0, 0, 0)"}}executeFill(e,t){t?e.fill(t):e.fill()}applyFillAndAlpha(e){const{fill:t,fillGradient:i,fillPattern:s,fillImage:n,fillOpacity:o=1,opacity:r=1}=this;if(e.globalAlpha*=r*o,i){const{fillBBox:t=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:s}=this;e.fillStyle=i.createGradient(e,t,s)??"black"}else if(s){const{x:t,y:i}=this.getBBox(),n=this.layerManager?.canvas?.pixelRatio??1,o=s.createPattern(e,n);s.setPatternTransform(o,n,t,i),o?e.fillStyle=o:(e.fillStyle=s.fill,e.globalAlpha*=s.fillOpacity)}else if(n){const t=this.getBBox(),i=n.createPattern(e,t.width,t.height,this);n.setImageTransform(i,t),e.fillStyle=i??"transparent"}else e.fillStyle="string"===typeof t?t:"black"}applyStrokeAndAlpha(e){const{stroke:t,strokeOpacity:i=1,strokeGradient:s,opacity:n=1}=this;e.strokeStyle=s?.createGradient(e,this.getBBox())??("string"===typeof t?t:void 0)??"black",e.globalAlpha*=n*i}applyShadow(e){const t=this.layerManager?.canvas.pixelRatio??1,i=this.fillShadow;i?.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*t,e.shadowOffsetY=i.yOffset*t,e.shadowBlur=i.blur*t)}renderStroke(e,t){const{stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,lineCap:a,lineJoin:l,miterLimit:c}=this;if(null!=i&&"none"!==i&&s>0&&n>0){const{globalAlpha:i}=e;this.applyStrokeAndAlpha(e),e.lineWidth=s,o&&e.setLineDash(o),r&&(e.lineDashOffset=r),a&&(e.lineCap=a),l&&(e.lineJoin=l),null!=c&&(e.miterLimit=c),this.executeStroke(e,t),e.globalAlpha=i}}executeStroke(e,t){t?e.stroke(t):e.stroke()}getDefaultGradientFillBBox(){return this.cachedDefaultGradientFillBBox??(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(e,t){return this.isPointInPath(e,t)}applySvgFillAttributes(e,t){const{fill:i,fillOpacity:s}=this;if("string"===typeof i)e.setAttribute("fill",i);else if(qx(i)&&this.fillGradient){t??(t=[]);const i=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),s=Aw();i.setAttribute("id",s),t.push(i),e.setAttribute("fill",`url(#${s})`)}else if(Qx(i)&&this.fillPattern){t??(t=[]);const i=this.fillPattern.toSvg(),s=Aw();i.setAttribute("id",s),t.push(i),e.setAttribute("fill",`url(#${s})`)}else if(Xx(i)&&this.fillImage){t??(t=[]);const i=this.layerManager?.canvas?.pixelRatio??1,s=this.fillImage.toSvg(this.getBBox(),i),n=Aw();s.setAttribute("id",n),t.push(s),e.setAttribute("fill",`url(#${n})`)}else e.setAttribute("fill","none");return e.setAttribute("fill-opacity",String(s)),t}applySvgStrokeAttributes(e){const{stroke:t,strokeOpacity:i,strokeWidth:s,lineDash:n,lineDashOffset:o}=this;!function(e,t){const{stroke:i,strokeWidth:s,strokeOpacity:n}=t;i&&e.setAttribute("stroke",i),null!=s&&e.setAttribute("stroke-width",String(s)),null!=n&&e.setAttribute("stroke-opacity",String(n))}(e,{stroke:hC(t)?t:void 0,strokeOpacity:i,strokeWidth:s}),function(e,t){const{lineDash:i,lineDashOffset:s}=t;if(i?.some((e=>0!==e))){const t=i.length%2===1?[...i,...i]:i;e.setAttribute("stroke-dasharray",t.join(" ")),null!=s&&e.setAttribute("stroke-dashoffset",String(s))}}(e,{lineDash:n,lineDashOffset:o})}};$w([LS()],tM.prototype,"fillOpacity",2),$w([LS()],tM.prototype,"strokeOpacity",2),$w([FS({equals:fS,changeCb:e=>e.onFillChange()})],tM.prototype,"fill",2),$w([FS({equals:fS,changeCb:e=>e.onStrokeChange()})],tM.prototype,"stroke",2),$w([LS()],tM.prototype,"strokeWidth",2),$w([NS()],tM.prototype,"lineDash",2),$w([LS()],tM.prototype,"lineDashOffset",2),$w([LS()],tM.prototype,"lineCap",2),$w([LS()],tM.prototype,"lineJoin",2),$w([LS()],tM.prototype,"miterLimit",2),$w([LS({convertor:e=>dw(0,e??1,1)})],tM.prototype,"opacity",2),$w([FS({equals:TS,checkDirtyOnAssignment:!0})],tM.prototype,"fillShadow",2),$w([FS({equals:rw,changeCb:e=>e.onFillChange()})],tM.prototype,"fillBBox",2),$w([FS({equals:fS,changeCb:e=>e.onFillChange()})],tM.prototype,"fillParams",2);var iM=[1,0,0,1,0,0],sM=class e{get e(){return[...this.elements]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iM;this.elements=[...e]}setElements(e){const t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){const e=this.elements;return uw(e[0],1)&&uw(e[1],0)&&uw(e[2],0)&&uw(e[3],1)&&uw(e[4],0)&&uw(e[5],0)}AxB(e,t,i){const s=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],r=e[1]*t[2]+e[3]*t[3],a=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];(i=i??e)[0]=s,i[1]=n,i[2]=o,i[3]=r,i[4]=a,i[5]=l}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(t){const i=new Array(6);return t instanceof e?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new e(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],s=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-s*n);return i*=l,s*=l,n*=l,o*=l,new e([o,-s,-n,i,n*a-o*r,s*r-i*a])}invertSelf(){const e=this.elements;let t=e[0],i=e[1],s=e[2],n=e[3];const o=e[4],r=e[5],a=1/(t*n-i*s);return t*=a,i*=a,s*=a,n*=a,e[0]=n,e[1]=-i,e[2]=-s,e[3]=t,e[4]=s*r-n*o,e[5]=i*o-t*r,this}transformPoint(e,t){const i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){const i=this.elements,s=i[0],n=i[1],o=i[2],r=i[3],a=.5*e.width,l=.5*e.height,c=e.x+a,h=e.y+l,d=Math.abs(a*s)+Math.abs(l*o),u=Math.abs(a*n)+Math.abs(l*r);return t??(t=new eS(0,0,0,0)),t.x=c*s+h*o+i[4]-d,t.y=c*n+h*r+i[5]-u,t.width=d+d,t.height=u+u,t}toContext(e){if(this.identity)return;const t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static updateTransformMatrix(e,t,i,s,n,o,r){const a=t,l=i;let c,h;1===a&&1===l?(c=0,h=0):(c=r?.scalingCenterX??0,h=r?.scalingCenterY??0);const d=s,u=Math.cos(d),p=Math.sin(d);let g,m;0===d?(g=0,m=0):(g=r?.rotationCenterX??0,m=r?.rotationCenterY??0);const f=n,v=o,y=c*(1-a)-g,C=h*(1-l)-m;return e.setElements([u*a,p*a,-p*l,u*l,u*y-p*C+g+f,p*y+u*C+m+v]),e}};function nM(e){return rM(e.constructor)}var oM=Symbol("isMatrixTransform");function rM(e){return!0===e[oM]}function aM(e){var t;const i=e;if(rM(e))return e;const s=Symbol("matrix_combined_transform");class n extends i{constructor(){super(...arguments),this[t]=new sM,this._dirtyTransform=!0}onChangeDetection(e){super.onChangeDetection(e),this._dirtyTransform=!0,this.batchLevel>0||this.markDirty("transform")}updateMatrix(e){}computeTransformMatrix(){this._dirtyTransform&&(this[s].setElements(iM),this.updateMatrix(this[s]),this._dirtyTransform=!1)}toParent(e){return this.computeTransformMatrix(),this[s].identity?e.clone():this[s].transformBBox(e)}toParentPoint(e,t){return this.computeTransformMatrix(),this[s].identity?{x:e,y:t}:this[s].transformPoint(e,t)}fromParent(e){return this.computeTransformMatrix(),this[s].identity?e.clone():this[s].inverse().transformBBox(e)}fromParentPoint(e,t){return this.computeTransformMatrix(),this[s].identity?{x:e,y:t}:this[s].inverse().transformPoint(e,t)}computeBBox(){const e=super.computeBBox();return e?this.toParent(e):e}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(e,t){return({x:e,y:t}=this.fromParentPoint(e,t)),super.pickNode(e,t)}pickNodes(e,t,i){return({x:e,y:t}=this.fromParentPoint(e,t)),super.pickNodes(e,t,i)}render(e){this.computeTransformMatrix();const{ctx:t}=e,i=this[s];let n=!1;try{i.identity||(t.save(),n=!0,i.toContext(t)),super.render(e)}finally{n&&t.restore()}}toSVG(){this.computeTransformMatrix();const e=super.toSVG(),t=this[s];if(t.identity||null==e)return e;const i=Jy("g");i.append(...e.elements);const[n,o,r,a,l,c]=t.e;return i.setAttribute("transform",`matrix(${n} ${o} ${r} ${a} ${l} ${c})`),{elements:[i],defs:e.defs}}}return t=s,n[oM]=!0,n}function lM(e){var t;const i=e,s=Symbol("matrix_rotation");class n extends(aM(i)){constructor(){super(...arguments),this[t]=new sM,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(e){super.updateMatrix(e);const{rotation:t,rotationCenterX:i,rotationCenterY:n}=this;0!==t&&(sM.updateTransformMatrix(this[s],1,1,t,0,0,{rotationCenterX:i,rotationCenterY:n}),e.multiplySelf(this[s]))}}return t=s,$w([LS()],n.prototype,"rotationCenterX",2),$w([LS()],n.prototype,"rotationCenterY",2),$w([LS()],n.prototype,"rotation",2),n}function cM(e){var t;const i=e,s=Symbol("matrix_scale");class n extends(aM(i)){constructor(){super(...arguments),this[t]=new sM,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(e){super.updateMatrix(e);const{scalingX:t,scalingY:i,scalingCenterX:n,scalingCenterY:o}=this;1===t&&1===i||(sM.updateTransformMatrix(this[s],t,i,0,0,0,{scalingCenterX:n,scalingCenterY:o}),e.multiplySelf(this[s]))}}return t=s,$w([LS()],n.prototype,"scalingX",2),$w([LS()],n.prototype,"scalingY",2),$w([LS()],n.prototype,"scalingCenterX",2),$w([LS()],n.prototype,"scalingCenterY",2),n}function hM(e){var t;const i=e,s=Symbol("matrix_translation");class n extends(aM(i)){constructor(){super(...arguments),this[t]=new sM,this.translationX=0,this.translationY=0}updateMatrix(e){super.updateMatrix(e);const{translationX:t,translationY:i}=this;0===t&&0===i||(sM.updateTransformMatrix(this[s],1,1,0,t,i),e.multiplySelf(this[s]))}}return t=s,$w([LS()],n.prototype,"translationX",2),$w([LS()],n.prototype,"translationY",2),n}var dM,uM=class{static fromCanvas(e,t){const i=[];for(const s of e.traverseUp())nM(s)&&i.unshift(s);for(const s of i)t=s.fromParent(t);return nM(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){null==t?t=e.getBBox():nM(e)&&(t=e.toParent(t));for(const i of e.traverseUp())nM(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const s=[];for(const n of e.traverseUp())nM(n)&&s.unshift(n);for(const n of s)({x:t,y:i}=n.fromParentPoint(t,i));return nM(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){nM(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const s of e.traverseUp())nM(s)&&({x:t,y:i}=s.toParentPoint(t,i));return{x:t,y:i}}},pM=class e extends VS{constructor(e){super(e),this.childNodes=new Set,this.dirty=!1,this.dirtyZIndex=!1,this.clipRect=void 0,this.opacity=1,this.renderToOffscreenCanvas=!1,this.optimizeForInfrequentRedraws=!1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=!0===e?.renderToOffscreenCanvas}static is(t){return t instanceof e}static computeChildrenBBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return eS.merge(VS.extractBBoxes(e,t))}static compareChildren(e,t){return GS(e.zIndex,t.zIndex)||e.serialNumber-t.serialNumber}containsPoint(e,t){return!0}computeBBox(){return e.computeChildrenBBox(this.children())}computeSafeClippingBBox(e){const t=this.computeBBox();if(!0!==t?.isFinite())return;let i=0;for(const h of this.descendants())h instanceof tM&&(i=Math.max(i,h.strokeWidth));const s=Math.max(1,i/2*4),{x:n,y:o}=uM.toCanvasPoint(this,0,0),r=$x(e,n+t.x-s)-n,a=$x(e,o+t.y-s)-o,l=Math.ceil(t.x+t.width-r+s),c=Math.ceil(t.y+t.height-a+s);return new eS(r,a,l,c)}prepareSharedCanvas(e,t,i){return null==dM||dM.pixelRatio!==i?dM=new rS({width:e,height:t,pixelRatio:i}):dM.resize(e,t,i),dM}setScene(e){super.setScene(e),this.layer&&(this.scene?.layersManager.removeLayer(this.layer),this.layer=void 0);for(const t of this.children())t.setScene(e)}markDirty(e){this.dirty=!0,super.markDirty(e)}markDirtyChildrenOrder(){super.markDirtyChildrenOrder(),this.dirtyZIndex=!0,this.markDirty()}append(e){for(const i of null!=(t=e)&&"object"===typeof t&&Symbol.iterator in t?t:[t])i.parentNode?.removeChild(i),this.childNodes.add(i),i.parentNode=this,i.setScene(this.scene);var t;this.markDirtyChildrenOrder(),this.markDirty()}appendChild(e){return this.append(e),e}removeChild(e){if(!this.childNodes?.delete(e))throw new Error(`AG Charts - internal error, unknown child node ${e.name??e.id} in $${this.name??this.id}`);e.parentNode=void 0,e.setScene(),this.markDirtyChildrenOrder(),this.markDirty()}clear(){for(const e of this.children())delete e.parentNode,e.setScene();this.childNodes?.clear(),this.markDirty()}pickNode(e,t){if(this.visible&&1!==this.pointerEvents&&this.containsPoint(e,t))if(null!=this.childNodes&&0!==this.childNodes.size){const i=[...this.children()];for(let s=i.length-1;s>=0;s--){const n=i[s].pickNode(e,t);if(null!=n)return n}}else if(!this.isContainerNode)return this}pickNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!this.visible||1===this.pointerEvents||!this.containsPoint(e,t))return i;this.isContainerNode||i.push(this);for(const s of this.children())s.pickNodes(e,t,i);return i}isDirty(e){const{width:t,height:i,devicePixelRatio:s}=e,{dirty:n,layer:o}=this,r=null!=o&&(this._lastWidth!==t||this._lastHeight!==i),a=this._lastDevicePixelRatio!==s;return this._lastWidth=t,this._lastHeight=i,this._lastDevicePixelRatio=s,n||r||a}preRender(e){let t;if(this.dirty){t=super.preRender(e,0);for(const i of this.children()){const s=i.preRender(e);t.groups+=s.groups,t.nonGroups+=s.nonGroups,t.complexity+=s.complexity}t.groups+=1,t.nonGroups-=1}else t=this.childNodeCounts;return this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&t.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this.layerManager?.addLayer({name:this.name})):null!=this.layer&&(this.layerManager?.removeLayer(this.layer),this.layer=void 0),t}render(e){var t=this;const{layer:i,renderToOffscreenCanvas:s}=this,n={...e},o=this.isDirty(e);if(this.dirty=!1,!s)return this.renderInContext(n),void super.render(n);const{ctx:r,stats:a,devicePixelRatio:l}=e;let{image:c}=this;if(o){c?.bitmap.close(),c=void 0;const e=i?void 0:this.computeSafeClippingBBox(l),s=function(e){const i=e.context;n.ctx=i,e.clear(),i.save();try{for(var s=arguments.length,o=new Array(s>1?s-1:0),r=1;r<s;r++)o[r-1]=arguments[r];i.setTransform(...o),i.globalAlpha=1,t.renderInContext(n)}finally{i.restore(),i.verifyDepthZero?.()}};if(i)s(i,r.getTransform());else if(e){const{x:t,y:i,width:n,height:o}=e,r=this.prepareSharedCanvas(n,o,l);s(r,l,0,0,l,-t*l,-i*l),c={bitmap:r.transferToImageBitmap(),x:t,y:i,width:n,height:o}}this.image=c,a&&a.layersRendered++}else a&&a.layersSkipped++;const{globalAlpha:h}=r;if(r.globalAlpha=h*this.opacity,i){r.save();try{r.resetTransform(),i.drawImage(r)}finally{r.restore()}}else if(c){const{bitmap:e,x:t,y:i,width:s,height:n}=c;r.drawImage(e,0,0,s*l,n*l,t,i,s,n)}r.globalAlpha=h,super.render(n)}applyClip(e,t){const{x:i,y:s,width:n,height:o}=t;e.beginPath(),e.rect(i,s,n,o),e.clip()}renderInContext(t){const{ctx:i,stats:s}=t;this.dirtyZIndex&&(this.sortChildren(e.compareChildren),this.dirtyZIndex=!1),i.save();try{i.globalAlpha*=this.opacity,null!=this.clipRect&&(this.applyClip(i,this.clipRect),t.clipBBox=uM.toCanvas(this,this.clipRect));for(const e of this.children())e.visible?e.isolatedRender(t):s&&(s.nodesSkipped+=e.childNodeCounts.nonGroups+e.childNodeCounts.groups,s.opsSkipped+=e.childNodeCounts.complexity)}finally{i.restore()}}sortChildren(e){if(!this.childNodes)return;const t=[...this.childNodes].sort(e);this.childNodes.clear();for(const i of t)this.childNodes.add(i)}*children(){yield*this.childNodes}*excludeChildren(e){for(const t of this.children())(e.instance&&!(t instanceof e.instance)||e.name&&t.name!==e.name)&&(yield t)}*descendants(){for(const t of this.children())yield t,t instanceof e&&(yield*t.descendants())}setClipRect(e){this.clipRect=e?uM.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}getVisibility(){for(const e of this.traverseUp(!0))if(!e.visible)return!1;return!0}toSVG(){if(!this.visible)return;const e=[],t=[];for(const i of this.children()){const s=i.toSVG();null!=s&&(t.push(...s.elements),null!=s.defs&&e.push(...s.defs))}return{elements:t,defs:e}}};pM.className="Group",$w([LS({convertor:e=>dw(0,e,1)})],pM.prototype,"opacity",2);var gM=pM,mM=class extends(cM(gM)){},fM=class extends(lM(gM)){},vM=class extends(hM(gM)){},yM=class extends(lM(hM(gM))){};function CM(e,t){return!(null==e||!function(e,t){return"context"in e}(e)||null==t[0]||"object"!==typeof t[0]||void 0!==t[0].context)&&(t[0].context=e.context,!0)}function bM(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];if(Array.isArray(e)){for(const o of e)if(CM(o,s))break}else CM(e,s);return t(...s)}var wM=class{constructor(){this.cache=new WeakMap}call(e,t){let i,s=this.cache.get(t);for(var n=arguments.length,o=new Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];try{i=JSON.stringify(o)}catch{return this.invoke(e,t,s,void 0,...o)}return null==s&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):this.invoke(e,t,s,i,...o)}invoke(e,t,i,s){try{for(var n=arguments.length,o=new Array(n>4?n-4:0),r=4;r<n;r++)o[r-4]=arguments[r];const a=bM(e,t,...o);return i&&null!=s&&i.set(s,a),a}catch(mK){return void xy.warnOnce("User callback errored, ignoring",mK)}}invalidateCache(){this.cache=new WeakMap}};function SM(e,t){if(!e)return;const{x:i,y:s,width:n,height:o}=function(e){let{x:t,y:i,width:s,height:n}=e;if((null==s||s>0)&&(null==n||n>0))return e;null!=t&&null!=s&&s<0&&(s=-s,t-=s);null!=i&&null!=n&&n<0&&(n=-n,i-=n);return{x:t,y:i,width:s,height:n}}(t);EM(e.style,"width",n),EM(e.style,"height",o),EM(e.style,"left",i),EM(e.style,"top",s)}function xM(e){const t=parseFloat(e.style.width)||e.offsetWidth,i=parseFloat(e.style.height)||e.offsetHeight;return{x:parseFloat(e.style.left)||e.offsetLeft,y:parseFloat(e.style.top)||e.offsetTop,width:t,height:i}}function MM(e){if(e.focus({preventScroll:!0}),null==e.lastChild?.textContent)return;const t=qy().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);const i=Qy().getSelection();i?.removeAllRanges(),i?.addRange(t)}function DM(){const e=Qy("navigator");if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function RM(e){return`ag-charts-icon ag-charts-icon-${e}`}function EM(e,t,i){null==i?e.removeProperty(t):e.setProperty(t,`${i}px`)}var IM="class-instance";function AM(e,t,i){if(iC(t)){if(!iC(e)||e.length!==t.length||t.some(((t,s)=>null!=AM(e[s],t,i))))return t}else{if(lC(t)){if(!lC(e))return t;const s={},n=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of n)if(e[o]!==t[o])if(i?.has(o))s[o]=t[o];else if(typeof e[o]===typeof t[o]){const n=AM(e[o],t[o],i);null!==n&&(s[o]=n)}else s[o]=t[o];return Object.keys(s).length?s:null}if(e!==t)return t}return null}function kM(e,t){for(const i of Object.keys(e))if(e[i]!==t?.[i])return!1;return!0}function TM(e,t){return iC(e)?function(e,t){const i=[],s=t?.seen;for(const n of e)"object"===typeof n&&s?.includes(n)?xy.warn("cycle detected in array",n):(s?.push(n),i.push(TM(n,t)),s?.pop());return i}(e,t):lC(e)?function(e,t){const i={};for(const s of Object.keys(e))t?.assign?.has(s)?i[s]=e[s]:t?.shallow?.has(s)?i[s]=LM(e[s]):i[s]=TM(e[s],t);return i}(e,t):e instanceof Map?new Map(TM(Array.from(e))):LM(e)}function LM(e){return iC(e)?e.slice(0):lC(e)?{...e}:sC(e)?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e}function PM(e,t,i,s,n,o){if(iC(e)){o=t(e,s,n,o);let r=0;for(const a of e)o=PM(a,t,i,s?.[r],n,o),r++}else if(lC(e)){o=t(e,s,n,o);for(const r of Object.keys(e)){if(i?.has(r))continue;o=PM(e[r],t,i,s?.[r],n,o)}}return o}function FM(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:s,matcherPath:n=s?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(null==e)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(null==t)return e;if(Cx(e))return e.set(t);const r=e,a=NM(e);for(const l of Object.keys(t)){if(DS.has(l))continue;const c=`${n?n+".":""}${l}`;if(o.includes(c))continue;const h=t[l],d=`${s?s+".":""}${l}`,u=r.constructor,p=r[l];try{const t=NM(p),s=NM(h);if(a===IM&&!(l in e)&&"context"!==l){if(void 0===h)continue;xy.warn(`unable to set [${d}] in ${u?.name} - property is unknown`);continue}if(null!=t&&null!=s&&s!==t&&(t!==IM||"object"!==s)){xy.warn(`unable to set [${d}] in ${u?.name} - can't apply type of [${s}], allowed types are: [${t}]`);continue}if(Cx(p))void 0===h?p.clear():p.set(h);else if("object"===s&&"context"!==l){if(!(l in r)){xy.warn(`unable to set [${d}] in ${u?.name} - property is unknown`);continue}null==p?r[l]=h:FM(p,h,{...i,path:d,matcherPath:c})}else r[l]=h}catch(Ey){xy.warn(`unable to set [${d}] in [${u?.name}]; nested error is: ${Ey.message}`)}}return e}function NM(e){return null==e?null:function(e){return"undefined"!==typeof window&&e instanceof HTMLElement}(e)||sC(e)?"primitive":iC(e)?"array":rC(e)?lC(e)?"object":IM:oC(e)?"function":"primitive"}var OM=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise((t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch((e=>xy.errorOnce(e)))}))}async acquireImmediately(e){return!!this.available&&(await this.acquire(e),!0)}async waitForClearAcquireQueue(){return this.acquire((()=>Promise.resolve(void 0)))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t?.()}catch(Ey){xy.error("mutex callback error",Ey),t?.()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},BM=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if("function"!==typeof t)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){const i=this.eventListeners.get(e);null!=i&&(i.delete(t),0===i.size&&this.eventListeners.delete(e))}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){this.eventListeners.get(e.type)?.forEach((t=>t(e)))}},GM=class extends vx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;super(),this.top=e,this.right=t,this.bottom=i,this.left=s}};function zM(e,t){const i=iC(e)?e:e.split(".");if(1===i.length){const[e]=i;return dS(((t,i,s)=>t[e]=s),(t=>t[e]),t)}return dS(((e,t,s)=>RS(e,i,s)),(e=>MS(e,i)),t)}function jM(e){return dS(((t,i,s)=>t[e]=s))}function VM(e,t){return dS(((i,s,n)=>i[e][t??s]=n))}function HM(e){const{newValue:t,oldValue:i,changeValue:s}=e;return dS(((e,n,o,r)=>(o!==r&&(void 0!==r&&i?.call(e,r),void 0!==o&&t?.call(e,o),s?.call(e,o,r)),o)))}function WM(e){return uS(e)}function _M(e,t){let i,s,n=0,o=!1;const r=()=>o,a=()=>{o=!1,s?.(),s=void 0,i=void 0,n>0&&e(l)},l=()=>{const e=n;n=0,o=!0;const i=t({count:e});i?i.then(a,a):a()};return{schedule(t){0!==n||r()||e(l,t),n++},async await(){if(r())for(i??(i=new Promise((e=>{s=e})));r();)await i}}}$w([fx],GM.prototype,"top",2),$w([fx],GM.prototype,"right",2),$w([fx],GM.prototype,"bottom",2),$w([fx],GM.prototype,"left",2);var UM=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function $M(e,t,i){const{offsetX:s,offsetY:n,clientX:o,clientY:r}=t,{currentX:a,currentY:l}=ZM.calcCurrentXY(i,t);return{type:e,device:"mouse",offsetX:s,offsetY:n,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:t}}function KM(e,t,i){return{type:e,sourceEvent:t}}var YM={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>$M("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>$M("click",e,t),dblclick:(e,t)=>$M("dblclick",e,t),mouseenter:(e,t)=>$M("mouseenter",e,t),mousemove:(e,t)=>$M("mousemove",e,t),mouseleave:(e,t)=>$M("mouseleave",e,t),wheel:e=>{const{offsetX:t,offsetY:i,clientX:s,clientY:n}=e,o=0===e.deltaMode?.01:1;return{type:"wheel",offsetX:t,offsetY:i,clientX:s,clientY:n,deltaX:e.deltaX*o,deltaY:e.deltaY*o,sourceEvent:e}},touchstart:(e,t)=>KM("touchstart",e),touchmove:(e,t)=>KM("touchmove",e),touchend:(e,t)=>KM("touchend",e),touchcancel:(e,t)=>KM("touchcancel",e)},ZM=class{static alloc(e,t,i){return YM[e](t,i)}static isHTMLEvent(e){return UM.includes(e)}static calcCurrentXY(e,t){const i=e.getBoundingClientRect();return{currentX:t.clientX-i.x,currentY:t.clientY-i.y}}},qM=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var i;if(!(e in(this.sourceListeners??{}))){const i=i=>{const s=ZM.alloc(e,i,t.getElement());this.dispatch(e,t,s)},s={};e.startsWith("touch")&&(s.passive=!1),this.initSourceHandler(e,i),t.getElement().addEventListener(e,i,s)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[e]??(i[e]=[]),this.widgetListeners[e]}add(e,t,i){this.lazyGetWidgetListeners(e,t).push(i)}remove(e,t,i){const s=this.lazyGetWidgetListeners(e,t),n=s.indexOf(i);n>-1&&s.splice(n,1)}destroy(e){if(this.widgetListeners=void 0,this.sourceListeners){for(const[t,i]of qb(this.sourceListeners))e.getElement().removeEventListener(t,i);this.sourceListeners=void 0}}dispatch(e,t,i){for(const s of this.widgetListeners?.[e]??[])s(i,t)}},QM=class{constructor(e,t,i,s){this.glob=e,this.self=t,this.window=Qy(),this.cleanup=new hw,this.mousegeneral=e=>{e.stopPropagation(),e.stopImmediatePropagation()},this.mousemove=e=>{e.stopPropagation(),e.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(e)},this.mouseup=e=>{0===e.button&&(e.stopPropagation(),e.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(e),this.destroy())};const{window:n,mousegeneral:o,mousemove:r,mouseup:a}=this;this.cleanup.register(eC(n,"mousedown",o,{capture:!0}),eC(n,"mouseenter",o,{capture:!0}),eC(n,"mouseleave",o,{capture:!0}),eC(n,"mouseout",o,{capture:!0}),eC(n,"mouseover",o,{capture:!0}),eC(n,"mousemove",r,{capture:!0}),eC(n,"mouseup",a,{capture:!0})),t.mouseDragger=this,e.globalMouseDragCallbacks=i,e.globalMouseDragCallbacks.mousedown(s),s.stopPropagation(),s.stopImmediatePropagation()}destroy(){this.cleanup.flush(),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};var XM=!1,JM=class{constructor(e,t,i,s,n){this.glob=e,this.self=t,this.initialTouch=s,this.target=n,this.cleanup=new hw,this.longTapInterrupted=!1,this.longtap=()=>{const{target:e,initialTouch:t}=this;if(!this.longTapInterrupted){const i=new hw;e.dispatchEvent(new TouchEvent("touchcancel",{touches:[t],bubbles:!0})),XM=!0;const s=e=>e.preventDefault(),n=e=>{XM=!1,e.preventDefault(),i.flush()};i.register(eC(e,"touchmove",s,{passive:!1}),eC(e,"touchend",n,{passive:!1}),eC(e,"touchcancel",n,{passive:!1}));const{clientX:o,clientY:r}=t,a=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:Qy(),clientX:o,clientY:r,pointerType:"touch"});e.dispatchEvent(a)}},this.touchmove=e=>{const{glob:t,self:i,initialTouch:s}=this,n=this.findInitialFinger(e.targetTouches);null!=n&&(this.longTapInterrupted=this.longTapInterrupted||function(e,t){const i=e.clientX-t.clientX,s=e.clientY-t.clientY;return i*i+s*s}(s,n)>100,i.dragTouchEnabled&&t.globalTouchDragCallbacks?.touchmove(e,n))},this.touchend=e=>{this.longTapInterrupted=!0;const t=this.findInitialFinger(e.changedTouches,e.touches);null!=t&&this.glob.globalTouchDragCallbacks?.touchend(e,t),this.destroy()},this.longtapTimer=setTimeout(this.longtap,500);const{touchmove:o,touchend:r}=this;this.cleanup.register(eC(n,"touchmove",o,{passive:!1}),eC(n,"touchstart",r,{passive:!1}),eC(n,"touchend",r,{passive:!1}),eC(n,"touchcancel",r,{passive:!1})),t.touchDragger=this,e.globalTouchDragCallbacks=i}destroy(){clearTimeout(this.longtapTimer),this.cleanup.flush(),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=t.map((e=>Array.from(e))).flat();return Array.from(s).find((e=>e.identifier===this.initialTouch.identifier))}};function eD(e,t,i,s){const{currentX:n,currentY:o}=ZM.calcCurrentXY(e.getElement(),s),r=s.pageX-i.pageX,a=s.pageY-i.pageY;return{type:t,device:"mouse",offsetX:i.offsetX+r,offsetY:i.offsetY+a,clientX:s.clientX,clientY:s.clientY,currentX:n,currentY:o,originDeltaX:r,originDeltaY:a,sourceEvent:s}}function tD(e,t){let{pageX:i,pageY:s}=t;const{x:n,y:o}=e.getElement().getBoundingClientRect();return{offsetX:i-n,offsetY:s-o}}function iD(e,t,i,s,n){const{currentX:o,currentY:r}=ZM.calcCurrentXY(e.getElement(),n),a=n.pageX-i.pageX,l=n.pageY-i.pageY;return{type:t,device:"touch",offsetX:i.offsetX+a,offsetY:i.offsetY+l,clientX:n.clientX,clientY:n.clientY,currentX:o,currentY:r,originDeltaX:a,originDeltaY:l,sourceEvent:s}}var sD={},nD=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.listeners?.clear(),this.mouseDragger?.destroy(),this.touchDragger?.destroy()}getListenerSet(e){this.listeners??(this.listeners=new Map);let t=this.listeners.get(e);return void 0===t&&(t=new Set,this.listeners.set(e,t)),t}add(e,t,i){switch(this.getListenerSet(e).add(i),e){case"drag-start":case"drag-move":case"drag-end":this.registerDragTrigger(t)}}remove(e,t,i){this.getListenerSet(e).delete(i)}registerDragTrigger(e){if(null==this.dragTriggerRemover){const t=e.getElement(),i=new hw;i.register(eC(t,"mousedown",(t=>this.triggerMouseDrag(e,t))),eC(t,"touchstart",(t=>this.triggerTouchDrag(e,t)),{passive:!1})),this.dragTriggerRemover=()=>i.flush()}}triggerMouseDrag(e,t){0===t.button&&this.startMouseDrag(e,t)}startMouseDrag(e,t){const i={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};ES(["pageX","pageY","offsetX","offsetY"],i,t);const s={mousedown:t=>{const s=eD(e,"drag-start",i,t);this.dispatch("drag-start",e,s)},mousemove:t=>{const s=eD(e,"drag-move",i,t);this.dispatch("drag-move",e,s)},mouseup:t=>{const s=eD(e,"drag-end",i,t);this.dispatch("drag-end",e,s),this.endDrag(e,s)}};this.mouseDragger=function(e,t,i,s){if(null==e.globalMouseDragCallbacks)return new QM(e,t,i,s)}(sD,this,s,t)}endDrag(e,t){let{sourceEvent:i,clientX:s,clientY:n}=t;const o=e.getElement();ow(o.getBoundingClientRect(),s,n)||(o.dispatchEvent(new MouseEvent("mouseleave",i)),i.target?.dispatchEvent(new MouseEvent("mouseenter",i)))}triggerTouchDrag(e,t){const i=t.targetTouches[0];1===t.targetTouches.length&&null!=i&&this.startOneFingerTouch(e,t,i)}startOneFingerTouch(e,t,i){const s={pageX:NaN,pageY:NaN,...tD(e,i)};ES(["pageX","pageY"],s,i);const n={touchmove:(t,i)=>{const n=iD(e,"drag-move",s,t,i);this.dispatch("drag-move",e,n)},touchend:(t,i)=>{const n=iD(e,"drag-end",s,t,i);this.dispatch("drag-end",e,n)}},o=e.getElement();this.touchDragger=function(e,t,i,s,n){if(null==e.globalTouchDragCallbacks&&!XM)return new JM(e,t,i,s,n)}(sD,this,n,i,o);const r=iD(e,"drag-start",s,t,i);this.dispatch("drag-start",e,r)}dispatch(e,t,i){for(const s of this.getListenerSet(e))s(i,t);this.dispatchCallback(e,i)}},oD=class{constructor(e){this.elem=e}setBounds(e){SM(this.elemContainer??this.elem,e)}getBounds(){return xM(this.elemContainer??this.elem)}static setElementContainer(e,t){SM(t,e.getBounds()),function(e,t){for(const[i,s]of qb(t))sw(e,i,s)}(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},rD=class extends oD{constructor(){super(...arguments),this.index=NaN,this.children=[]}set id(e){ew(this.elem,"id",e)}get id(){return iw(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.destroyListener?.(),this.destroyListener=void 0,this.parent?.removeChild(this),this.children.forEach((e=>{e.parent=void 0,e.destroy()})),this.children.length=0,this.destructor(),this.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}remove(){this.elem.remove(),this.elemContainer?.remove()}setHidden(e){sw(this.elem,"display",e?"none":void 0)}isHidden(){return"none"===Qy()?.getComputedStyle?.(this.elem).display}setCursor(e){sw(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){ew(this.elem,"aria-describedby",e)}setAriaHidden(e){ew(this.elem,"aria-hidden",e)}setAriaLabel(e){ew(this.elem,"aria-label",e)}setAriaExpanded(e){ew(this.elem,"aria-expanded",e)}setAriaControls(e){ew(this.elem,"aria-controls",e)}setAriaHasPopup(e){ew(this.elem,"aria-haspopup",e)}setInnerHTML(e){this.elem.innerHTML=e}setPointerEvents(e){sw(this.elem,"pointer-events",e)}isDisabled(){return iw(this.elem,"aria-disabled",!1)}hasPopup(){const e=iw(this.elem,"aria-haspopup");return void 0!==e&&"false"!==e}parseFloat(e){return""===e?0:parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(e){this.elem.focus(e)}setFocusOverride(e){ew(this.elem,"data-focus-override",e)}setPreventsDefault(e){ew(this.elem,"data-preventdefault",e)}setTabIndex(e){ew(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.findIndex((t=>t===e));this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(){this.elem.classList.add(...arguments)}removeClass(){this.elem.classList.remove(...arguments)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){this.elem.removeChild(e.getElement())}onChildAdded(e){}onChildRemoved(e){}getBefore(e){let{domIndex:t}=e;if(void 0!==t)return this.children.filter((e=>void 0!==e.domIndex&&e.domIndex>t)).reduce(((e,t)=>!e||t.domIndex<e.domIndex?t:e),void 0)}addListener(e,t){return ZM.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new qM),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new nD(this.onDispatch.bind(this))),this.internalListener.add(e,this,t)),()=>this.removeListener(e,t)}removeListener(e,t){ZM.isHTMLEvent(e)?this.htmlListener?.remove(e,this,t):null!=this.htmlListener&&this.internalListener?.remove(e,this,t)}setDragTouchEnabled(e){this.internalListener??(this.internalListener=new nD(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){if(!t.sourceEvent?.bubbles)return;let{parent:i}=this;for(;null!=i;){const{internalListener:s}=i;if(null!=s){const n={...t,...ZM.calcCurrentXY(i.getElement(),t)};s.dispatch(e,i,n)}i=i.parent}}static addWindowEvent(e,t){return eC(Qy(),"pagehide",(e=>{e.persisted||t()}))}};var aD=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){const e=this.store.keys();let t=this.store.size-this.maxCacheSize;for(;t>0;){const i=e.next();i.done||this.store.delete(i.value),t--}}return t}clear(){this.store.clear()}},lD=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){const t=hD.toFontString(e.font),i=`${t}-${e.textAlign??"start"}-${e.textBaseline??"top"}`;return this.instanceMap.get(i)??this.createFontMeasurer(t,e,i)}static clear(){this.instanceMap.clear()}static createFontMeasurer(e,t,i){const s=function(){return new OffscreenCanvas(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0).getContext("2d")}();s.font=e,s.textAlign=t.textAlign??"start",s.textBaseline=t.textBaseline??"top";const n=new cD(s,t);return this.instanceMap.set(i,n),n}};lD.instanceMap=new aD(10);var cD=class{constructor(e,t){this.ctx=e,this.measureMap=new aD(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font=hD.toFontString(t.font),this.textMeasurer=new dD((e=>this.cachedCtxMeasureText(e)),t.textBaseline??"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){const t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},hD=class{static toFontString(e){let{fontSize:t=10,fontStyle:i,fontWeight:s,fontFamily:n}=e,o="";return i&&"normal"!==i&&(o+=`${i} `),s&&"normal"!==s&&400!==s&&(o+=`${s} `),o+=`${t}px`,o+=` ${n}`,o.trim()}static getLineHeight(e){return Math.ceil(e*this.defaultLineHeight)}static getHorizontalModifier(e){switch(e){case"left":case"start":default:return 0;case"center":return.5;case"right":case"end":return 1}}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return.5;default:return 1}}};hD.EllipsisChar="\u2026",hD.defaultLineHeight=1.15,hD.lineSplitter=/\r?\n/g;var dD=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alphabetic";this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){const t=this.measureTextFn(e);return t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),{width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent}}getMultilineMetrics(e){let t=0,i=0,s=0,n=0,o=0,r=0;const a=hD.getVerticalModifier(this.textBaseline),l=[];let c=0;const h=e.length;for(const d of e){const e=this.measureTextFn(d);e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),t<e.width&&(t=e.width),n<e.actualBoundingBoxLeft&&(n=e.actualBoundingBoxLeft),0===c?(i+=e.actualBoundingBoxAscent,s+=e.actualBoundingBoxAscent,r=e.alphabeticBaseline):o+=e.fontBoundingBoxAscent,c===h-1?i+=e.actualBoundingBoxDescent:o+=e.fontBoundingBoxDescent,l.push({text:d,width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}),c++}return i+=o,s+=o*a,{width:t,height:i,offsetTop:s,offsetLeft:n,alphabeticBaseline:r,lineMetrics:l}}textWidth(e,t){if(t){let t=0;for(let i=0;i<e.length;i++)t+=this.textWidth(e.charAt(i));return t}return e.length>1?this.measureTextFn(e).width:this.charMap.get(e)??this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){const t="string"===typeof e?e.split(hD.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){const{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}};function uD(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}function pD(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:eS.zero;if(!iS.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:r=0,layersSkipped:a=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:h=0,opsSkipped:d=0}=s??{},u=performance.now(),{start:p,...g}=t,m=Object.entries(g).map((e=>{let[t,i]=e;return bD(t,i)})).filter((e=>null!=e)).join(" + "),f=Object.entries(n).map((e=>{let[t,i]=e;return`${t}: ${JSON.stringify(i)}`})).join(" ; "),v=iS.check("scene:stats:verbose"),y=function(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,s=[];for(const n of[t,e,i])"number"===typeof n&&s.push(uD(n));return`Heap ${s.join(" / ")}`}(),C=[`${bD("\u23f1\ufe0f",p,u)} (${m})`,`${f}`,`Layers: ${v?CD(r,a):e.size}`,v?`Nodes: ${CD(l,c)}`:null,v?`Ops: ${CD(h,d)}`:null,v&&y?y:null].filter(hC),b=new dD((e=>i.measureText(e))),w=new Map(C.map((e=>[e,b.measureLines(e)]))),S=Math.max(...Array.from(w.values(),(e=>e.width))),x=function(e,t){let i=0;for(const s of e)i+=t(s);return i}(w.values(),(e=>e.height)),M=2+o.x;i.save();try{i.fillStyle="white",i.fillRect(M,0,S,x),i.fillStyle="black";let e=0;for(const[t,s]of w.entries())e+=s.height,i.fillText(t,M,e)}catch(mK){xy.warnOnce("Error during debug stats rendering",mK)}finally{i.restore()}}var gD=new Set,mD=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function fD(e){const{...t}=e;for(const i of Object.keys(t))mD.has(i)||"number"!==typeof t[i]&&"string"!==typeof t[i]&&"boolean"!==typeof t[i]&&(gD.add(i),delete t[i]);return t}function vD(e,t){if(!iS.check(!0,"scene"))return{};let i=0;return{node:"json"===t?fD(e):e,name:e.name??e.id,dirty:e instanceof gM?e.dirty:void 0,...Array.from(e instanceof gM?e.children():[],(e=>vD(e,t))).reduce(((e,t)=>{let{name:s}=t;const{node:{visible:n,opacity:o,zIndex:r,translationX:a,translationY:l,rotation:c,scalingX:h,scalingY:d},node:u}=t;(!n||o<=0)&&(s=`(${s})`),gM.is(u)&&u.renderToOffscreenCanvas&&(s=`*${s}*`);const p=Array.isArray(r)?`(${r.join(", ")})`:r,g=[`${(i++).toString().padStart(3,"0")}|`,`${s??"<unknown>"}`,`z: ${p}`,a&&`x: ${a}`,l&&`y: ${l}`,c&&`r: ${c}`,null!=h&&1!==h&&`sx: ${h}`,null!=d&&1!==d&&`sy: ${d}`].filter((e=>!!e)).join(" ");let m=g,f=1;for(;null!=e[m]&&f<100;)m=`${g} (${f++})`;return e[m]=t,e}),{})}}function yD(e){const t=e instanceof gM?e.dirty:void 0;if(!t)return{dirtyTree:{},paths:[]};const i=Array.from(e instanceof gM?e.children():[],(e=>yD(e))).filter((e=>e.paths.length>0)),s=gM.is(e)?e.name??e.id:e.id,n=i.length?i.flatMap((e=>e.paths)).map((e=>`${s}.${e}`)):[s];return{dirtyTree:{name:s,node:e,dirty:t,...i.map((e=>e.dirtyTree)).filter((e=>null!=e.dirty)).reduce(((e,t)=>(e[t.name??"<unknown>"]=t,e)),{})},paths:n}}function CD(e,t){const i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function bD(e,t,i){const s=null!=i?i-t:t;return`${e}: ${Math.round(100*s)/100}ms`}var wD=(e,t,i,s)=>{let{x0:n,y0:o,x1:r,y1:a,cx:l,cy:c}=t;if(s&&e.moveTo(n,o),n!==r||o!==a){const t=Math.atan2(o-c,n-l),s=Math.atan2(a-c,r-l);e.arc(l,c,i,t,s)}else e.lineTo(n,o)},SD=class extends tM{constructor(){super(...arguments),this.path=new _x,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}resetPathDirty(){this.path.clear(!0),this._dirtyPath=!1}isPathDirty(){return this.path.isDirty()}onChangeDetection(e){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(e))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(e){return e.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=e.devicePixelRatio,this.updatePathIfDirty(),super.preRender(e,this.path.commands.length)}render(e){const{ctx:t}=e;if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(t);else{t.save();try{const e=this.strokeWidth/2;this._clipPath??(this._clipPath=new _x),this._clipPath.clear(),this._clipPath.rect(-e,-e,this._clipX+e,this._clipY+e+e),t.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(t)}finally{t.restore()}}this.fillShadow?.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=Jy("path");e.setAttribute("d",this.svgPathData());const t=this.applySvgFillAttributes(e,[]);return this.applySvgStrokeAttributes(e),{elements:[e],defs:t}}};SD.className="Path",$w([LS()],SD.prototype,"clip",2),$w([LS()],SD.prototype,"clipX",1),$w([LS()],SD.prototype,"clipY",1);var xD=1e-6,MD=(e,t,i,s,n)=>{let o=!1,r=!1,a=s-Math.sqrt(Math.max(n**2-i**2,0)),l=0,c=0,h=i-Math.sqrt(Math.max(n**2-s**2,0));return a>e?(o=!0,a=e,l=i-Math.sqrt(Math.max(n**2-(s-e)**2))):a<xD&&(a=0),h>t?(r=!0,c=s-Math.sqrt(Math.max(n**2-(i-t)**2)),h=t):h<xD&&(h=0),{leading0:a,leading1:l,trailing0:c,trailing1:h,leadingClipped:o,trailingClipped:r}},DD=(e,t,i,s,n,o,r)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:h}=o;const d=Math.max(a+h,l+c),u=Math.max(a+l,h+c);if(d<=0&&u<=0)return void(null==r?e.rect(t,i,s,n):e.rect(r.x,r.y,r.width,r.height));if(null==r&&a===l&&a===c&&a===h)return void e.roundRect(t,i,s,n,a);if(s<0&&(t+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(null==r)r=new eS(t,i,s,n);else{const e=Math.max(t,r.x),o=Math.min(t+s,r.x+r.width),a=Math.max(i,r.y),l=Math.min(i+n,r.y+r.height);r=new eS(e,a,o-e,l-a)}const p=Math.max(d/n,u/s,1);p>1&&(a/=p,l/=p,c/=p,h/=p);let g,m,f,v,y=!0,C=!0,b=!0,w=!0;if(y){const e=MD(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);e.leadingClipped&&(w=!1),e.trailingClipped&&(C=!1);g={x0:Math.max(r.x+e.leading1,r.x),y0:Math.max(r.y+e.leading0,r.y),x1:Math.max(r.x+e.trailing1,r.x),y1:Math.max(r.y+e.trailing0,r.y),cx:t+a,cy:i+a}}if(C){const e=MD(r.width,r.height,Math.max(i+l-r.y,0),Math.max(r.x+r.width-(t+s-l),0),l);e.leadingClipped&&(y=!1),e.trailingClipped&&(b=!1);m={x0:Math.min(r.x+r.width-e.leading0,r.x+r.width),y0:Math.max(r.y+e.leading1,r.y),x1:Math.min(r.x+r.width-e.trailing0,r.x+r.width),y1:Math.max(r.y+e.trailing1,r.y),cx:t+s-l,cy:i+l}}if(b){const e=MD(r.height,r.width,Math.max(r.x+r.width-(t+s-c),0),Math.max(r.y+r.height-(i+n-c),0),c);e.leadingClipped&&(C=!1),e.trailingClipped&&(w=!1);f={x0:Math.min(r.x+r.width-e.leading1,r.x+r.width),y0:Math.min(r.y+r.height-e.leading0,r.y+r.height),x1:Math.min(r.x+r.width-e.trailing1,r.x+r.width),y1:Math.min(r.y+r.height-e.trailing0,r.y+r.height),cx:t+s-c,cy:i+n-c}}if(w){const e=MD(r.width,r.height,Math.max(r.y+r.height-(i+n-h),0),Math.max(t+h-r.x,0),h);e.leadingClipped&&(b=!1),e.trailingClipped&&(y=!1);v={x0:Math.max(r.x+e.leading0,r.x),y0:Math.min(r.y+r.height-e.leading1,r.y+r.height),x1:Math.max(r.x+e.trailing0,r.x),y1:Math.min(r.y+r.height-e.trailing1,r.y+r.height),cx:t+h,cy:i+n-h}}let S=!1;y&&null!=g&&(wD(e,g,a,!S),S||(S=!0)),C&&null!=m&&(wD(e,m,l,!S),S||(S=!0)),b&&null!=f&&(wD(e,f,c,!S),S||(S=!0)),w&&null!=v&&wD(e,v,h,!S),e.closePath()},RD=class extends SD{constructor(){super(...arguments),this.borderPath=new _x,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=this.strokeWidth,this.effectiveStrokeWidth=this.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||Boolean(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){const{path:e,borderPath:t,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:n,bottomRightCornerRadius:o,bottomLeftCornerRadius:r}=this;let{x:a,y:l,width:c,height:h,strokeWidth:d,clipBBox:u}=this;const p=1/(this.layerManager?.canvas.pixelRatio??1);let g=1;if(e.clear(!0),t.clear(!0),0===c||0===h)return this.effectiveStrokeWidth=0,this.lastUpdatePathStrokeWidth=0,void(this.microPixelEffectOpacity=0);if(i&&(c<=p&&(g*=c/p),h<=p&&(g*=h/p),c=this.align(a,c),h=this.align(l,h),a=this.align(a),l=this.align(l),u=null!=u?new eS(this.align(u.x),this.align(u.y),this.align(u.x,u.width),this.align(u.y,u.height)):void 0),d)if(c<p){const e=a+p/2;t.moveTo(e,l),t.lineTo(e,l+h),d=p,this.borderClipPath=void 0}else if(h<p){const e=l+p/2;t.moveTo(a,e),t.lineTo(a+c,e),d=p,this.borderClipPath=void 0}else if(d<c&&d<h){const i=d/2;a+=i,l+=i,c-=d,h-=d;const p=u?.clone().shrink(i),g={topLeft:s>0?s-d:0,topRight:n>0?n-d:0,bottomRight:o>0?o-d:0,bottomLeft:r>0?r-d:0};this.borderClipPath=void 0,c>0&&h>0&&(null==p||p?.width>0&&p?.height>0)&&(DD(e,a,l,c,h,g,p),DD(t,a,l,c,h,g,p))}else this.borderClipPath=this.borderClipPath??new _x,this.borderClipPath.clear(!0),this.borderClipPath.rect(a,l,c,h),t.rect(a,l,c,h);else{const t={topLeft:s,topRight:n,bottomRight:o,bottomLeft:r};this.borderClipPath=void 0,DD(e,a,l,c,h,t,u)}if([s,n,o,r].every((e=>0===e))){const e=this.getBBox();this.hittester=e.containsPoint.bind(e),this.distanceSquared=(e,t)=>this.getBBox().distanceSquared(e,t)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=g}computeBBox(){const{x:e,y:t,width:i,height:s,clipBBox:n}=this;return n?.clone()??new eS(e,t,i,s)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAndAlpha(e){super.applyFillAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(e){super.applyStrokeAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:t}=e,{lineDash:s,lineDashOffset:n,lineCap:o,lineJoin:r,borderPath:a,borderClipPath:l}=this;l&&e.clip(l.getPath2D()),this.applyStrokeAndAlpha(e),e.lineWidth=i,s&&e.setLineDash(s),n&&(e.lineDashOffset=n),o&&(e.lineCap=o),r&&(e.lineJoin=r),e.stroke(a.getPath2D()),e.globalAlpha=t}}};RD.className="Rect",$w([LS()],RD.prototype,"x",2),$w([LS()],RD.prototype,"y",2),$w([LS()],RD.prototype,"width",2),$w([LS()],RD.prototype,"height",2),$w([LS()],RD.prototype,"topLeftCornerRadius",2),$w([LS()],RD.prototype,"topRightCornerRadius",2),$w([LS()],RD.prototype,"bottomRightCornerRadius",2),$w([LS()],RD.prototype,"bottomLeftCornerRadius",2),$w([FS({equals:rw})],RD.prototype,"clipBBox",2),$w([LS()],RD.prototype,"crisp",2);var ED=!1,ID=class e extends tM{constructor(t){super(t),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=e.defaultFontSize,this.fontFamily="sans-serif",this.textAlign="start",this.textBaseline="alphabetic",this.boxPadding=0,this.trimText=t?.trimText??!0}onTextChange(){if(this.richText?.clear(),this.textMap?.clear(),iC(this.text))this.lines=[],this.richText??(this.richText=new gM),this.richText.setScene(this.scene),this.richText.append(this.text.map((()=>new e({trimText:!1}))));else{const e=this.text?.split("\n")??[];this.lines=this.trimText?e.map((e=>e.trim())):e}}static computeBBox(e,t,i,s){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const{font:o,font:{fontSize:r},textAlign:a,textBaseline:l,lineHeight:c=(n?hD.getLineHeight(r):void 0)}=s,{width:h,alphabeticBaseline:d,offsetLeft:u,offsetTop:p,height:g}=lD.measureLines(e,n?{font:o,lineHeight:c,textAlign:"start",textBaseline:"top"}:s),m=null==c?g:c*e.length;let f;if(null==c)f=p;else if("alphabetic"===l){f=(c-r)/2-d}else f=hD.getVerticalModifier(l)*m;const v=n?h*hD.getHorizontalModifier(a):u;return new eS(t-v,i-f,h,m)}computeBBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ED;if(this.generateTextMap(),this.textMap?.size){const e=eS.merge(this.textMap.values());return e.x=this.x,e.y=this.y,e}const{x:i,y:s,lines:n,textBaseline:o,textAlign:r,lineHeight:a}=this,l=e.computeBBox(n,i,s,{font:this,textBaseline:o,textAlign:r,lineHeight:a},t);return null!=this.boxing&&l.grow(this.boxPadding),l}getBBox(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){ED=!0;const e=this.computeBBox(!0);return ED=!1,e}return super.getBBox()}getPlainText(){return bC(this.text)}getTextMeasureBBox(){return this.computeBBox()}isPointInPath(e,t){return this.getBBox()?.containsPoint(e,t)??!1}setScene(e){this.richText?.setScene(e),super.setScene(e)}generateTextMap(){if(!iC(this.text)||this.textMap?.size)return;this.textMap??(this.textMap=new Map);let e=0,t=0,i=0;const s={fill:this.fill,fontSize:this.fontSize,fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight};for(const o of this.richText.children()){const{color:n,...r}=this.text[e++];o.x=0,o.y=0,o.setProperties(yS({fill:n},r,s));const a=o.getBBox();this.textMap.set(o,a),i=Math.max(i,a.y+a.height/2+(o.lineHeight??hD.getLineHeight(o.fontSize))),t+=a.x+a.width}let n=this.x-t/2;for(const[o,r]of this.textMap)o.x+=n,o.y+=i,n+=r.width}render(t){const{ctx:i,stats:s}=t;if(!this.text||!this.layerManager)return s&&(s.nodesSkipped+=1),super.render(t);if(iC(this.text)){this.generateTextMap();const{width:e}=this.richText.getBBox();let s=0;switch(this.textAlign){case"left":case"start":s=e/2;break;case"right":case"end":s=e/-2}i.save(),i.translate(s,this.y),this.richText.render(t),i.restore()}else this.renderText(t);if(e.debug.check()&&!this.textMap?.size){const e=this.getBBox(!0);i.strokeStyle="red",i.lineWidth=1,i.strokeRect(e.x,e.y,e.width,e.height)}super.render(t)}markDirty(e){return this.textMap?.clear(),super.markDirty(e)}renderText(t){const{fill:i,stroke:s,strokeWidth:n}=this;if(!i&&(!s||!n)||!this.layerManager)return super.render(t);const{ctx:o}=t,r=hD.toFontString(this);o.font!==r&&(o.font=r);const{fontSize:a,lineHeight:l=hD.getLineHeight(a),textAlign:c,textBaseline:h}=this;if(o.textAlign=c,o.textBaseline=h,this.boxing){const i={font:this,textBaseline:h,textAlign:c,lineHeight:l},s=e.computeBBox(this.lines,this.x,this.y,i);if(0!==s.width&&0!==s.height){const{x:e,y:i,width:n,height:o}=s.grow(this.boxPadding);this.boxing.opacity=this.opacity,this.boxing.x=e,this.boxing.y=i,this.boxing.width=n,this.boxing.height=o,this.boxing.preRender(t),this.boxing.render(t)}}this.fillStroke(o)}executeFill(e){const{fontSize:t,lineHeight:i=hD.getLineHeight(t),textBaseline:s,lines:n}=this,o="alphabetic"===s?0:hD.getVerticalModifier(s)*i*(1-n.length);this.renderLines(o,i,((t,i,s)=>e.fillText(t,i,s)))}executeStroke(e){const{fontSize:t,lineHeight:i=hD.getLineHeight(t),textBaseline:s,lines:n}=this,o="alphabetic"===s?0:hD.getVerticalModifier(s)*i*(1-n.length);this.renderLines(o,i,((t,i,s)=>e.strokeText(t,i,s)))}renderLines(e,t,i){const{lines:s,x:n,y:o}=this;if(Number.isFinite(n)&&Number.isFinite(o)&&Number.isFinite(e)&&Number.isFinite(t))for(const r of s)i(r,n,o+e),e+=t}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}setBoxing(e){const t=e.border?.enabled?e.border?.stroke:void 0;null!=e.fill||null!=t?(this.boxing??(this.boxing=new RD({scene:this.scene})),this.boxing.fill=e.fill,this.boxing.fillOpacity=e.fillOpacity??1,this.boxing.cornerRadius=e.cornerRadius??0,this.boxing.stroke=t,this.boxing.strokeWidth=e.border?.strokeWidth??0,this.boxing.strokeOpacity=e.border?.strokeOpacity??1,this.boxPadding=e.padding??0):this.boxing&&(this.boxing.destroy(),this.boxing=void 0)}getBoxingProperties(){const{fill:e,fillOpacity:t,cornerRadius:i,stroke:s,strokeWidth:n,strokeOpacity:o}=this.boxing??{};return{border:{enabled:null!=s,stroke:s,strokeWidth:n,strokeOpacity:o},cornerRadius:i,fill:e,fillOpacity:t,padding:this.boxPadding}}toSVG(){if(!this.visible||!this.text)return;const e=Jy("text");if(hC(this.text))this.applySvgFillAttributes(e),eM(e,this),e.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),e.setAttribute("alignment-baseline",this.textBaseline),e.setAttribute("x",String(this.x)),e.setAttribute("y",String(this.y)),e.textContent=this.text;else for(const t of this.text){const i=Jy("tspan");eM(i,{fontSize:t.fontSize??this.fontSize,fontFamily:t.fontFamily??this.fontFamily,fontWeight:t.fontWeight??this.fontWeight,fontStyle:t.fontStyle??this.fontStyle}),this.applySvgFillAttributes(i),i.textContent=t.text,e.append(i)}return{elements:[e]}}};ID.className="Text",ID.debug=iS.create(!0,"scene:text"),ID.defaultFontSize=10,$w([LS()],ID.prototype,"x",2),$w([LS()],ID.prototype,"y",2),$w([PS({changeCb:e=>e.onTextChange()})],ID.prototype,"text",2),$w([LS()],ID.prototype,"fontStyle",2),$w([LS()],ID.prototype,"fontWeight",2),$w([LS()],ID.prototype,"fontSize",2),$w([LS()],ID.prototype,"fontFamily",2),$w([LS()],ID.prototype,"textAlign",2),$w([LS()],ID.prototype,"textBaseline",2),$w([LS()],ID.prototype,"lineHeight",2);var AD=ID,kD=class extends(lM(AD)){},TD=class extends(lM(hM(AD))){},LD=class{static wrapText(e,t){return this.wrapLines(e,t).join("\n")}static wrapLines(e,t){const i=this.textWrap(e,t);return"hide"===t.overflow&&i.some((e=>e.endsWith(hD.EllipsisChar)))?[]:i}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+hD.EllipsisChar}static truncateLine(e,t,i,s){const n=t.textWidth(hD.EllipsisChar);let o=0,r=0;for(;r<e.length;r++){const s=t.textWidth(e.charAt(r));if(o+s>i)break;o+=s}if(e.length===r&&(!s||o+n<=i))return s?e+hD.EllipsisChar:e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+n>i;)e=e.slice(0,-1).trimEnd();return e+hD.EllipsisChar}static textWrap(e,t){const i=e.split(hD.lineSplitter),s=lD.getMeasurer(t);if("never"===t.textWrap)return i.map((e=>this.truncateLine(e.trimEnd(),s,t.maxWidth)));const n=[],o="hyphenate"===t.textWrap,r=null==t.textWrap||"on-space"===t.textWrap;for(const a of i){let e=a.trimEnd();if(""===e){n.push(e);continue}let i=0,l=0,c=0;for(;i<e.length;){const a=e.charAt(i);if(l+=s.textWidth(a)," "===a&&(c=i),l>t.maxWidth){if(0===i)break;const a=s.textWidth(e.slice(0,i+1));if(a<=t.maxWidth){l=a,i++;continue}if(c){const o=this.getWordAt(e,c+1),a=s.textWidth(o);if(a<=t.maxWidth){n.push(e.slice(0,c).trimEnd()),e=e.slice(c).trimStart(),i=0,l=0,c=0;continue}r&&a>t.maxWidth&&n.push(e.slice(0,c).trimEnd(),this.truncateLine(e.slice(c).trimStart(),s,t.maxWidth,!0))}else r&&n.push(this.truncateLine(e,s,t.maxWidth,!0));if(r){e="";break}const h=o?"-":"";let d=e.slice(0,i).trim();for(;d.length&&s.textWidth(d+h)>t.maxWidth;)d=d.slice(0,-1).trimEnd();if(n.push(d+h),!d.length){e="";break}e=e.slice(d.length).trimStart(),i=-1,l=0,c=0}i++}e&&n.push(e)}return this.avoidOrphans(n,s,t),this.clipLines(n,s,t)}static getWordAt(e,t){const i=e.indexOf(" ",t);return-1===i?e.slice(t):e.slice(t,i)}static clipLines(e,t,i){if(!i.maxHeight)return e;const{height:s,lineMetrics:n}=t.measureLines(e);if(s<=i.maxHeight)return e;for(let o=0,r=0;o<n.length;o++){const{lineHeight:s}=n[o];if(r+=s,r>i.maxHeight){if("hide"===i.overflow)return[];const s=e.slice(0,o||1),n=s.pop();return s.concat(this.truncateLine(n,t,i.maxWidth,!0))}}return e}static avoidOrphans(e,t,i){if(!1===i.avoidOrphans||e.length<2)return;const{length:s}=e,n=e[s-1],o=e[s-2];if(o.length<n.length)return;const r=o.lastIndexOf(" ");if(-1===r||r===o.indexOf(" ")||n.includes(" "))return;const a=o.slice(r+1);t.textWidth(n+a)<=i.maxWidth&&(e[s-2]=o.slice(0,r),e[s-1]=a+" "+n)}},PD={};Uw(PD,{BASE_FONT_SIZE:()=>OD,CARTESIAN_AXIS_TYPE:()=>zD,CARTESIAN_POSITION:()=>GD,FONT_SIZE:()=>ND,FONT_SIZE_RATIO:()=>BD,POLAR_AXIS_SHAPE:()=>VD,POLAR_AXIS_TYPE:()=>jD});var FD,ND=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(ND||{}),OD=12,BD=((FD=BD||{})[FD.SMALLEST=8/OD]="SMALLEST",FD[FD.SMALLER=10/OD]="SMALLER",FD[FD.SMALL=12/OD]="SMALL",FD[FD.MEDIUM=13/OD]="MEDIUM",FD[FD.LARGE=14/OD]="LARGE",FD[FD.LARGEST=17/OD]="LARGEST",FD),GD=(e=>(e.TOP="top",e.TOP_RIGHT="top-right",e.TOP_LEFT="top-left",e.RIGHT="right",e.RIGHT_TOP="right-top",e.RIGHT_BOTTOM="right-bottom",e.BOTTOM="bottom",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.LEFT="left",e.LEFT_TOP="left-top",e.LEFT_BOTTOM="left-bottom",e))(GD||{}),zD=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.UNIT_TIME="unit-time",e.TIME="time",e.NUMBER="number",e.LOG="log",e))(zD||{}),jD=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(jD||{}),VD=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(VD||{}),HD=class extends vx{constructor(){super(...arguments),this.id=Ew(this),this.node=new kD({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.eventsHub.on("layout:complete",(()=>this.updateA11yText(e,t)))}computeTextWrap(e,t){const{text:i,padding:s,wrapping:n}=this;if(iC(i))return;const o=Math.min(this.maxWidth??1/0,e)-2*s,r=this.maxHeight??t-2*s;if(!isFinite(o)&&!isFinite(r))return void(this.node.text=i);const a=LD.wrapText(i??"",{maxWidth:o,maxHeight:r,font:this,textWrap:n});this.node.text=a,this.truncated=a.includes(hD.EllipsisChar)}updateA11yText(e,t){const{proxyInteractionService:i}=e;if(this.enabled&&this.text){const s=uM.toCanvas(this.node);if(s){const{id:n}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:n,where:t})),this.proxyText.textContent=bC(this.text),this.proxyText.setBounds(s),this.proxyText.addListener("mousemove",(t=>this.handleMouseMove(e,t))),this.proxyText.addListener("mouseleave",(t=>this.handleMouseLeave(e,t)))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(e,t){if(null!=t&&this.enabled&&this.truncated){const{x:i,y:s}=uM.toCanvas(this.node),n=t.sourceEvent.offsetX+i,o=t.sourceEvent.offsetY+s;e.tooltipManager.updateTooltip(this.id,{canvasX:n,canvasY:o,showArrow:!1},[{type:"structured",title:bC(this.text)}])}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};HD.SMALL_PADDING=10,$w([fx,VM("node","visible")],HD.prototype,"enabled",2),$w([fx,VM("node")],HD.prototype,"text",2),$w([fx,VM("node")],HD.prototype,"textAlign",2),$w([fx,VM("node")],HD.prototype,"fontStyle",2),$w([fx,VM("node")],HD.prototype,"fontWeight",2),$w([fx,VM("node")],HD.prototype,"fontSize",2),$w([fx,VM("node")],HD.prototype,"fontFamily",2),$w([fx,VM("node","fill")],HD.prototype,"color",2),$w([fx],HD.prototype,"spacing",2),$w([fx],HD.prototype,"maxWidth",2),$w([fx],HD.prototype,"maxHeight",2),$w([fx],HD.prototype,"wrapping",2),$w([fx],HD.prototype,"padding",2),$w([fx],HD.prototype,"layoutStyle",2);var WD=(e=>(e.X="x",e.Y="y",e.Angle="angle",e.Radius="radius",e))(WD||{});function _D(e){switch(e){case"x":case"y":case"angle":case"radius":return!0;default:return!1}}var UD=class{constructor(){this.title=new HD,this.subtitle=new HD,this.footnote=new HD}positionCaptions(e){const{title:t,subtitle:i,footnote:s}=this,n=e.layoutBox.height/10;t.enabled&&(this.positionCaption("top",t,e.layoutBox,n),this.shrinkLayoutByCaption("top",t,e.layoutBox)),i.enabled&&(this.positionCaption("top",i,e.layoutBox,n),this.shrinkLayoutByCaption("top",i,e.layoutBox)),s.enabled&&(this.positionCaption("bottom",s,e.layoutBox,n),this.shrinkLayoutByCaption("bottom",s,e.layoutBox))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:s}=this,{rect:n}=e.series;for(const o of[t,i,s])if("overlay"===o.layoutStyle)if("left"===o.textAlign)o.node.x=n.x+o.padding;else if("right"===o.textAlign){const e=o.node.getBBox();o.node.x=n.x+n.width-e.width-o.padding}}computeX(e,t){return"left"===e?t.x:"right"===e?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,s){const n=Math.max(hD.getLineHeight(t.fontSize),s);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+("top"===e?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,n)}shrinkLayoutByCaption(e,t,i){if("block"===t.layoutStyle){const s=t.node.getBBox(),{spacing:n=0}=t;"bottom"===e&&iC(t.text)&&(t.node.y-=s.height,s.y-=s.height),i.shrink("top"===e?Math.ceil(s.y-i.y+s.height+n):Math.ceil(i.y+i.height-s.y+n),e)}}};$w([fx],UD.prototype,"title",2),$w([fx],UD.prototype,"subtitle",2),$w([fx],UD.prototype,"footnote",2);var $D=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],KD=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){let e=this.chartService.publicApi?.getOptions()?.chartType;return e??(e="candlestick"),e}guardMemento(e){return null==e||$D.includes(e)}restoreMemento(e,t,i){if(null==i)return;const s={chartType:i};this.chartService.publicApi?.updateDelta(s).catch((e=>xy.error("error restoring state",e)))}},YD="12.1.0",ZD=Symbol("previous-memento-not-found"),qD=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=iS.create(!0,"history"),this.cleanup=new hw,this.cleanup.register(e.on("series:undo",this.undo.bind(this)),e.on("series:redo",this.redo.bind(this)))}destroy(){this.cleanup.flush()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const t=new Map;for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];for(const o of s){if(!this.originators.has(o.mementoOriginatorKey))throw new Error(`Originator [${o.mementoOriginatorKey}] has not been added to the HistoryManager.`);t.set(o.mementoOriginatorKey,o.createMemento())}this.history.push({label:e,mementos:t}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const e=this.findPreviousMemento(t);if(e===ZD)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,e)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):ZD}restoreMemento(e,t){this.originators.get(e)?.restoreMemento(YD,YD,t)}debugEvent(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.debug(...t,this.history.map(((e,t)=>t===this.historyIndex?`** ${e.label} **`:e.label)))}},QD=class e{constructor(e){this.version=e.split("-")[0]}save(){const e={version:this.version};for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(const n of Object.values(i))e[n.mementoOriginatorKey]=this.encode(n,n.createMemento());return e}restore(e){if("object"===typeof e)if(null!=e)if("version"in e&&"string"===typeof e.version){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];for(const t of i){const i=this.decode(t,e[t.mementoOriginatorKey]),s=[];if(!t.guardMemento(i,s)){const e=s.length>0?`\n\n${s.join("\n\n")}\n\n`:"";return void xy.warnOnce(`Could not restore [${t.mementoOriginatorKey}] data, value was invalid, ignoring.${e}`,i)}t.restoreMemento(this.version,e.version,i)}}else xy.warnOnce("Could not restore data, missing [version] string in object, ignoring.");else xy.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");else xy.warnOnce(`Could not restore data of type [${typeof e}], expecting an object, ignoring.`)}encode(t,i){try{return JSON.parse(JSON.stringify(i,e.encodeTypes))}catch(Ey){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${Ey}].`,{cause:Ey})}}decode(t,i){if(null==i)return i;try{return JSON.parse(JSON.stringify(i),e.decodeTypes)}catch(Ey){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${Ey}].`,{cause:Ey})}}static encodeTypes(e,t){return sC(this[e])?{__type:"date",value:this[e].toISOString()}:t}static decodeTypes(e,t){return rC(this[e])&&"__type"in this[e]&&"date"===this[e].__type?new Date(this[e].value):t}},XD=class{constructor(){this.caretaker=new QD(YD),this.state=new Map}setState(e,t){fS(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const s=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:s},e)}},JD=class{constructor(){this.cleanup=new hw,this.destroyed=!1}destroy(){this.cleanup.flush(),this.destroyed=!0}},eR=class e{constructor(e,t,i){this.element=e,this.topTabGuard=t,this.bottomTabGuard=i,this.cleanup=new hw,this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,!1),this.initTabGuard(this.bottomTabGuard,!0),this.element.addEventListener("focus",(()=>this.onFocus()),{capture:!0}),this.element.addEventListener("blur",(e=>this.onBlur(e)),{capture:!0})}set tabIndex(e){this.guardTabIndex=e,0===this.guardTabIndex?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){this.cleanup.flush()}initTabGuard(e,t){this.cleanup.register(eC(e,"focus",(()=>this.onTab(e,t))))}setGuardIndices(e){const t=e;ew(this.topTabGuard,"tabindex",t),ew(this.bottomTabGuard,"tabindex",t)}onFocus(){this.hasFocus=!0,0!==this.guardTabIndex&&this.setGuardIndices(0)}onBlur(e){let{relatedTarget:t}=e;const{topTabGuard:i,bottomTabGuard:s}=this;this.hasFocus=!1,0!==this.guardTabIndex&&t!==i&&t!==s&&this.setGuardIndices(this.guardTabIndex)}onTab(e,t){if(0!==this.guardTabIndex){let i;0===e.tabIndex?(i=this.findExitTarget(!t),this.setGuardIndices(this.guardTabIndex)):i=this.findEnterTarget(t),i?.focus()}}static queryFocusable(e,t){const i=Qy();return Array.from(e.querySelectorAll(t)).filter((e=>{if(e instanceof HTMLElement){const t=i.getComputedStyle(e);return"none"!==t.display&&"none"!==t.visibility}return!1}))}findEnterTarget(t){const i=e.queryFocusable(this.element,'[tabindex="0"]');return i[t?i.length-1:0]}findExitTarget(t){const i=e.queryFocusable(qy(),"[tabindex]").filter((e=>e.tabIndex>0)).sort(((e,t)=>e.tabIndex-t.tabIndex)),{before:s,after:n}=e.findBeforeAndAfter(i,this.guardTabIndex);return t?s:n}static findBeforeAndAfter(e,t){let i,s,n=0,o=e.length-1;for(;n<=o;){const r=Math.floor((n+o)/2),a=e[r].tabIndex;if(a===t){i=e[r-1]||void 0,s=e[r+1]||void 0;break}a<t?(i=e[r],n=r+1):(s=e[r],o=r-1)}return{before:i,after:s}}};function tR(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["Escape"];return eC(e,"keydown",(e=>{aR(e,...i)&&t(e)}))}function iR(e,t){const i=eC(Qy(),"mousedown",(s=>{[0,2].includes(s.button)&&!nR(e,s)&&(t(),i())}));return i}function sR(e,t){const i=eC(Qy(),"touchstart",(s=>{Array.from(s.targetTouches).some((t=>!nR(e,t)))&&(t(),i())}));return i}function nR(e,t){return t.target instanceof Element&&null!=t.target.shadowRoot||t.target instanceof Node&&e.contains(t.target)}function oR(e,t,i){const s=e=>{for(const i of t)ew(i,"data-focus-visible-override",e)};return s(i),eC(e,"keydown",(()=>s(!0)),{once:!0})}function rR(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function aR(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return rR(e)&&i.some((t=>e.key===t))}function lR(e,t,i){return eC(e,"keydown",(e=>{aR(e,i)&&t.focus()}))}var cR={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function hR(e){const{orientation:t,buttons:i,wrapAround:s=!1,onEscape:n,onFocus:o,onBlur:r}=e,{nextKey:a,prevKey:l}=cR[t],c=e=>{e.target&&"tabIndex"in e.target&&(i.forEach((e=>e.tabIndex=-1)),e.target.tabIndex=0)},[h,d]=s?[i.length,i.length]:[0,1/0],u=new hw;for(let p=0;p<i.length;p++){const e=i[(h+p-1)%d],t=i[p],s=i[(h+p+1)%d];u.register(eC(t,"focus",c),o&&eC(t,"focus",o),r&&eC(t,"blur",r),n&&tR(t,n),e&&lR(t,e,l),s&&lR(t,s,a),eC(t,"keydown",(e=>{aR(e,a,l)&&e.preventDefault()}))),t.tabIndex=0===p?0:-1}return u}var dR=class{constructor(e,t,i){this.lastFocus=t,this.closeCallback=i,this.cleanup=new hw,this.cleanup.register(iR(e,(()=>this.close(!0))),sR(e,(()=>this.close(!0))))}close(e){this.cleanup.flush(),this.closeCallback(),this.finishClosing(e)}finishClosing(e){this.cleanup.flush(),ew(this.lastFocus,"aria-expanded",!1),e||this.lastFocus?.focus({preventScroll:!0}),this.lastFocus=void 0}};function uR(e){const{sourceEvent:t,orientation:i,menu:s,buttons:n,closeCallback:o,overrideFocusVisible:r}=e,{nextKey:a,prevKey:l}=cR[i],c=mR(t);ew(c,"aria-expanded",!0);const h=new dR(s,c,o),d=()=>h.close(),{cleanup:u}=h;return s.role="menu",s.ariaOrientation=i,u.merge(hR({orientation:i,buttons:n,onEscape:d,wrapAround:!0})),s.tabIndex=-1,u.register(tR(s,d),eC(s,"keydown",(e=>{e.target!==s||e.key!==a&&e.key!==l||(e.preventDefault(),n[0]?.focus())}))),n[0]?.focus({preventScroll:!0}),void 0!==r&&u.register(oR(s,n,r)),h}function pR(e,t){return i=>{if("true"===e.ariaDisabled)return i.preventDefault();t(i)}}function gR(e){return"button"in e?0===e.button:rR(e)&&("Space"===e.code||"Enter"===e.key)}function mR(e){if(e?.target instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function fR(e){return eC(e,"keydown",(e=>{if(e.defaultPrevented)return;iw(e.target,"data-preventdefault",!0)&&aR(e,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&e.preventDefault()}))}var vR=class{constructor(e){this.callback=e,this.devicePixelRatio=Qy("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=e=>{e.matches||(this.devicePixelRatio=Qy("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){const e=Qy("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);e?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},yR=class{constructor(){let e;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach((e=>{let[t,i]=e;return this.observe(t,i)})),this.queuedObserveRequests=[],this.observeWindow()},"undefined"!==typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((e=>{for(const{target:t,contentRect:{width:i,height:s}}of e){const e=this.elements.get(t);this.checkSize(e,t,i,s)}}))),this.pixelRatioObserver=new vR((()=>{clearTimeout(e),e=setTimeout((()=>this.checkPixelRatio()),0)})),this.documentReady="complete"===qy("readyState"),this.documentReady?this.observeWindow():Qy()?.addEventListener("load",this.onLoad)}destroy(){Qy()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){const e=this.pixelRatioObserver?.pixelRatio??1;for(const[t,i]of this.elements)if(null!=i.size&&i.size.pixelRatio!==e){const{width:s,height:n}=i.size;i.size={width:s,height:n,pixelRatio:e},i.cb(i.size,t)}}checkSize(e,t,i,s){if(e&&(i!==e.size?.width||s!==e.size?.height)){const n=this.pixelRatioObserver?.pixelRatio??1;e.size={width:i,height:s,pixelRatio:n},e.cb(e.size,t)}}observe(e,t){if(!this.documentReady)return void this.queuedObserveRequests.push([e,t]);this.elements.has(e)?this.removeFromQueue(e):this.resizeObserver?.observe(e);const i={cb:t};this.elements.set(e,i)}unobserve(e){this.resizeObserver?.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter((t=>{let[i]=t;return i!==e}))}},CR=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),"undefined"!==typeof t&&super.set(e,t),delete this.cachedState,delete this.cachedValue,this}stateId(){return this.cachedState??(this.cachedState=Array.from(this.keys()).pop()??this.defaultState),this.cachedState}stateValue(){return this.cachedValue??(this.cachedValue=Array.from(this.values()).pop()??this.defaultValue),this.cachedValue}},bR=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],wR=new Set(["styles","canvas-container","canvas","tooltip-container"]),SR="ag-charts-wrapper--safe-horizontal",xR="ag-charts-wrapper--safe-vertical",MR=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]);var DR={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>DR};function RR(e,t){const i=Xy("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var ER=class e extends JD{constructor(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"normal";super(),this.eventsHub=e,this.chart=t,this.styleContainer=s,this.mode=n,this.anchorName=`--${Ew(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new yR,this.cursorState=new CR("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let o=!1;if(this.observer=function(e,t){if("undefined"===typeof IntersectionObserver)return;const i=new IntersectionObserver((i=>{for(const s of i)s.target===e&&t(s.intersectionRatio)}),{root:e});return i.observe(e),i}(this.element,(e=>{0!==e||o||this.eventsHub.emit("dom:hidden",null),o=0===e})),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-border-radius: 4px;--ag-charts-chart-background-color: #fff;--ag-charts-chart-padding: 20px;--ag-charts-focus-shadow: 0 0 0 3px #2196f3;--ag-charts-foreground-color: #181d1f;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-popup-shadow: 0 0 16px rgba(0, 0, 0, .15);--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #181d1f;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-button-background-color: #fff;--ag-charts-button-border: 1px solid #dddddd;--ag-charts-button-font-weight: normal;--ag-charts-button-text-color: inherit;--ag-charts-input-background-color: #fff;--ag-charts-input-border: 1px solid #dddddd;--ag-charts-input-text-color: #181d1f;--ag-charts-menu-background-color: #fafafa;--ag-charts-menu-border: 1px solid #dddddd;--ag-charts-menu-text-color: #181d1f;--ag-charts-panel-background-color: #fafafa;--ag-charts-panel-text-color: #181d1f;--ag-charts-tooltip-background-color: #fafafa;--ag-charts-tooltip-border: 1px solid #dddddd;--ag-charts-tooltip-text-color: #181d1f;--ag-charts-tooltip-subtle-text-color: #8c8c8c;--ag-charts-crosshair-label-background-color: #fafafa;--ag-charts-crosshair-label-text-color: #181d1f;--ag-charts-spacing: 4px;--ag-charts-icon-size: 16px;--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-tooltip-border-radius: var(--ag-charts-border-radius);--ag-charts-menu-border-radius: var(--ag-charts-border-radius);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: 1px solid var(--ag-charts-border-color);--ag-charts-focus-border: 1px solid var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-chevron-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjQ3IDUuNDdhLjc1Ljc1IDAgMCAxIDEuMDYgMGw0IDRhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNCA0YS43NS43NSAwIDAgMS0xLjA2LTEuMDZMMTAuOTQgMTAgNy40NyA2LjUzYS43NS43NSAwIDAgMSAwLTEuMDYiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:var(--ag-charts-button-border);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-legend-toolbar{pointer-events:auto}.ag-charts-proxy-legend-toolbar>div[role=listitem]{pointer-events:none}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:var(--ag-charts-popup-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-tooltip-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-panel-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-popup-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-menu-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-button-border);color:var(--ag-charts-button-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}\n'),this.setContainer(i),this.cleanup.register(fR(this.element)),"normal"===this.mode){const e=this.rootElements["canvas-center"].element;if(null==e)throw new Error("Error initializing tab guards");const t=RR(e,"beforebegin"),i=RR(e,"afterend");this.tabGuards=new eR(e,t,i)}}initDOM(){if("normal"===this.mode){const e=Xy("div");return e.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',e.firstChild}const e=Xy("div");e.role="presentation",e.dataset.agCharts="",e.classList.add("ag-charts-wrapper");const t=Xy("div");return e.appendChild(t),t.role="presentation",t.classList.add("ag-charts-series-area"),e}initRootElements(){const{mode:e,element:t}=this,i={};for(const s of bR){const n=`ag-charts-${s}`;let o;if(o="normal"===e?t.classList.contains(n)?t:t.getElementsByClassName(n)[0]:wR.has(s)?t:t.getElementsByClassName(n)[0]??Xy("div"),null==o)throw new Error(`AG Charts - unable to find DOM element ${n}`);i[s]={element:o,children:new Map,listeners:[]}}return i}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0,Object.values(this.rootElements).forEach((e=>{e.children.forEach((e=>e.remove())),e.element.remove()})),this.element.remove()}postRenderUpdate(){"minimal"!==this.mode&&null!=this.pendingContainer&&this.pendingContainer!==this.container&&(0===e.batchedUpdateContainer.length&&Qy().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),e.batchedUpdateContainer.push(this))}applyBatchedUpdateContainer(){for(const t of e.batchedUpdateContainer)t.destroyed||t.updateContainer();e.batchedUpdateContainer.splice(0)}setSizeOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const{style:n}=this.element;n.width=`${i??e}px`,n.height=`${s??t}px`,this.minWidth=i??e,this.minHeight=s??t,this.updateContainerClassName()}updateContainerSize(){const{style:e}=this.rootElements["canvas-center"].element;e.visibility=null==this.containerSize?"hidden":"",this.containerSize?(e.width=`${this.containerSize.width??0}px`,e.height=`${this.containerSize.height??0}px`):(e.width="",e.height=""),this.updateContainerClassName()}setTabGuardIndex(e){this.tabGuards&&(this.tabGuards.tabIndex=e)}setContainer(e){e!==this.container&&(this.pendingContainer=e,"minimal"!==this.mode&&null!=this.container||this.updateContainer())}updateContainer(){const{pendingContainer:e}=this;if(null!=e&&e!==this.container){if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),null!=this.documentRoot)for(const e of this.rootElements.styles.children.keys())this.removeChild("styles",e);this.container=e,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(e),this.initiallyConnected=e.isConnected;for(const[e,t]of this.styles)this.addStyles(e,t);e.appendChild(this.element),this.sizeMonitor.observe(e,(e=>{this.containerSize=e,this.updateContainerSize(),this.eventsHub.emit("dom:resize",null)})),this.eventsHub.emit("dom:container-change",null)}}setThemeClass(e){this.element.classList.forEach((t=>{t.startsWith("ag-charts-theme-")&&t!==e&&this.element.classList.remove(t)})),this.element.classList.add(e)}setThemeParameters(e){for(const[i,s]of qb(e)){let e=`${s}`;i.endsWith("Size")||i.endsWith("Radius")?e=`${s}px`:i.endsWith("Border")&&"boolean"===typeof s&&(e=s?"var(--ag-charts-border)":"none"),this.element.style.setProperty(`--ag-charts-${t=i,t.replace(CC,((e,t)=>(t>0?"-":"")+e.toLowerCase()))}`,e)}var t}updateCanvasLabel(e){ew(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,i){return eC(this.getEventElement(this.element,e),e,t,i)}removeEventListener(e,t,i){this.getEventElement(this.element,e).removeEventListener(e,t,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){const e=Qy(),t=new eS(0,0,e.innerWidth,e.innerHeight),i=this.getRawOverlayClientRect();return t.intersection(i)?.toDOMRect()??DR}getRawOverlayClientRect(){let e=this.element;const t=this.element.getRootNode()?.fullscreenElement;for(;null!=e;){let i;if(null!=t&&e===t)i=!0;else{const t=e.computedStyleMap?.(),s=t?.get("overflow-y")?.toString();i="auto"===s||"scroll"===s}if(i)return eS.fromDOMRect(e.getBoundingClientRect());e=e.parentElement}if(null!=this.documentRoot)return eS.fromDOMRect(this.documentRoot.getBoundingClientRect());const{innerWidth:i,innerHeight:s}=Qy();return new eS(0,0,i,s)}getShadowDocumentRoot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;const t=e?.ownerDocument?.body??qy("body");for(;null!=e;){if(e===t)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){const{children:t}=this.rootElements[e],i=[];for(const s of t.values())i.push(eS.fromDOMRect(s.getBoundingClientRect()));return eS.merge(i)}isManagedChildDOMElement(e,t,i){const{children:s}=this.rootElements[t],n=s?.get(i);return null!=n&&e.contains(n)}contains(e,t){return null==t?this.element.contains(e):this.rootElements[t].element.contains(e)}addStyles(t,i){const s="data-ag-charts";if(this.styles.set(t,i),null==this.container)return;const n=e=>e.getAttribute(s)===t,o=e=>{const t=new Set(["TITLE","META"]);let i,o=!0;for(const a of e.children)if(o&&t.has(a.tagName))i=a;else{if(o=!1,n(a))return;a.hasAttribute(s)&&(i=a)}const r=Xy("style");return null!=this.chart.styleNonce&&(r.nonce=this.chart.styleNonce),null==i?e.prepend(r):e.insertBefore(r,i.nextSibling),r};let r;this.styleContainer?r=o(this.styleContainer):!1===this.initiallyConnected?r=this.addChild("styles",t):null!=this.documentRoot||e.headStyles.has(t)?null!=this.documentRoot&&(r=this.addChild("styles",t)):(r=o(qy("head")),e.headStyles.add(t)),null==r||n(r)||(r.setAttribute(s,t),r.innerHTML=i)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e,t){this.cursorState.set(e,t),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(e,t,i,s){const{element:n,children:o,listeners:r}=this.rootElements[e];if(!o)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(o.has(t))return o.get(t);const{childElementType:a="div"}=MR.get(e)??{};if(i&&i.tagName.toLowerCase()!==a.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const l=i??Xy(a);for(const[c,h,d]of r)l.addEventListener(c,h,d);if(o.set(t,l),"style"===a&&null!=this.chart.styleNonce&&(l.nonce=this.chart.styleNonce),s){const e=n.querySelector(s.query);if(null==e)throw new Error(`AG Charts - addChild query failed ${s.query}`);e.insertAdjacentElement(s.where,l)}else n?.appendChild(l);return l}removeChild(e,t){const{children:i}=this.rootElements[e];i&&(i.get(t)?.remove(),i.delete(t))}incrementDataCounter(e){const{dataset:t}=this.element;t[e]??(t[e]="0"),t[e]=String(Number(t[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}updateContainerClassName(){const{element:e,containerSize:t,minWidth:i,minHeight:s}=this;e.classList.toggle(SR,i>=(t?.width??1/0)),e.classList.toggle(xR,s>=(t?.height??1/0))}};ER.batchedUpdateContainer=[],ER.headStyles=new Set;var IR=ER,AR=class extends rD{constructor(){super(Xy("div")),this.textElement=Jy("text"),this.textElement.role="presentation",this.svgElement=Jy("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){this.textElement.textContent=e;const t=this.textElement,i=t.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},kR=class extends rD{constructor(e,t){super(e),ew(this.elem,"role",t),this.setEnabled(!0),this.addListener("keydown",(e=>{let{sourceEvent:t}=e;gR(t)&&(t.preventDefault(),this.htmlListener?.dispatch("click",this,{type:"click",device:"keyboard",sourceEvent:t}))}))}destructor(){}setEnabled(e){ew(this.elem,"aria-disabled",!e)}addListener(e,t){return super.addListener(e,((i,s)=>{("click"!==e&&"dblclick"!==e||!this.isDisabled())&&t(i,s)}))}},TR=class extends kR{constructor(){super(Xy("button"))}},LR=class extends rD{constructor(){super(Xy("div")),ew(this.elem,"role","group")}destructor(){}},PR=class extends rD{constructor(e,t){super(Xy("div")),this.focusedChildIndex=0,this.onChildFocus=(e,t)=>{const i=this.children[this.focusedChildIndex];this.focusedChildIndex=t.index,i?.setTabIndex(-1),t.setTabIndex(0)},this.onChildKeyDown=(e,t)=>{const i=this.orientation,[s,n]="both"===i?[cR.horizontal,cR.vertical]:[cR[i],void 0];let o=-1;if(rR(e.sourceEvent)){const i=e.sourceEvent.key;i===s.nextKey||i===n?.nextKey?o=t.index+1:i!==s.prevKey&&i!==n?.prevKey||(o=t.index-1)}this.children[o]?.focus()},ew(this.elem,"role",t),this.orientation=e}get orientation(){return iw(this.elem,"aria-orientation")??"both"}set orientation(e){ew(this.elem,"aria-orientation","both"!==e?e:void 0)}focus(){this.children[this.focusedChildIndex]?.focus()}clear(){this.focusedChildIndex=0;for(const e of this.children)this.removeChildListeners(e),e.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown)}removeChildListeners(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}onChildAdded(e){this.addChildListeners(e),e.setTabIndex(1===this.children.length?0:-1)}onChildRemoved(e){this.removeChildListeners(e);const{focusedChildIndex:t,children:i}=this,s=t===e.index;for(let n=0;n<i.length;n++){const e=i[n];e.index===t&&(this.focusedChildIndex=n),e.index=n}if(s){const e=i[t]??i[t-1];e?(this.focusedChildIndex=e.index,e.setTabIndex(0)):this.focusedChildIndex=0}}},FR=class extends PR{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach((e=>e.getElement().parentElement.remove()))}addChildToDOM(e,t){const i=Xy("div");ew(i,"role","listitem"),sw(i,"position","absolute"),rD.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(0===this.children.length)}setHidden(e){0===this.children.length&&(e=!0),super.setHidden(e)}},NR=class extends rD{constructor(e){super(e)}destructor(){}},OR=new Intl.NumberFormat("en-US",{style:"percent"});function BR(e){return"number"===typeof e?jR(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:2):"string"===typeof e?e:String(e??"")}function GR(e){return OR.format(e)}var zR=(new Map).set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function jR(e,t){let i=zR.get(t);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}),zR.set(t,i)),i.format(e)}var VR=class e extends rD{constructor(){super(Xy("input")),this._step=e.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(e){this._step=e,this.getElement().step=e.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(e){if(e!==this._keyboardStep?.step&&(void 0!==this._keyboardStep&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),void 0!==e)){const t=()=>this.getElement().step=e.attributeValue,i=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:e,onKeyDown:t,onKeyUp:i,onBlur:i},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return iw(this.elem,"aria-orientation")??"both"}set orientation(t){ew(this.elem,"aria-orientation","both"!==t?t:void 0),e.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(e,t){const i=this.getValueRatio(),s=dw(e,i,t);return s!==i&&this.setValueRatio(s),s}setValueRatio(e,t){const{divider:i}=this.step,s=Math.round(1e4*e)/i,{ariaValueText:n=GR(s/i)}=t??{},o=this.getElement();o.value=`${s}`,o.ariaValueText=n}getValueRatio(){return this.getElement().valueAsNumber/this.step.divider}static registerDefaultPreventers(t,i){"both"===i?t.removeListener("keydown",e.onKeyDown):t.addListener("keydown",e.onKeyDown)}static onKeyDown(e,t){let i=[];const{orientation:s}=t;"horizontal"===s?i=["ArrowUp","ArrowDown"]:"vertical"===s&&(i=["ArrowLeft","ArrowRight"]),i.includes(e.sourceEvent.code)&&e.sourceEvent.preventDefault()}};VR.STEP_ONE={attributeValue:"1",divider:1},VR.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var HR=VR,WR=class extends TR{constructor(){super(),ew(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){ew(this.elem,"aria-checked",e)}},_R=class extends PR{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal","toolbar")}destructor(){}};function UR(e,t){return t.params?.type===e}function $R(e){const t={params:e,result:void 0};return t.result=function(e){if("button"===e)return new TR;if("slider"===e)return new HR;if("toolbar"===e)return new _R;if("group"===e)return new LR;if("list"===e)return new FR;if("region"===e)return new NR(Xy("div"));if("text"===e)return new AR;if("listswitch"===e)return new WR;throw Error("AG Charts - error allocating meta")}(t.params.type),t}var KR=class{constructor(e,t,i){this.eventsHub=e,this.localeManager=t,this.domManager=i,this.cleanup=new hw}destroy(){this.cleanup.flush()}addLocalisation(e){e(),this.cleanup.register(this.eventsHub.on("locale:change",e))}createProxyContainer(e){const t=$R(e),{params:i,result:s}=t,n=s.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,n),n.classList.add(...i.classList,"ag-charts-proxy-container"),n.role=i.type,UR("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation((()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)})),s}createProxyElement(e){const t=$R(e);if(UR("button",t)){const{params:e,result:i}=t,s=i.getElement();if(this.initInteract(e,i),"string"===typeof e.textContent)s.textContent=e.textContent;else{const{textContent:t}=e;this.addLocalisation((()=>{s.textContent=this.localeManager.t(t.id,t.params)}))}this.setParent(t.params,t.result)}if(UR("slider",t)){const{params:e,result:i}=t,s=i.getElement();this.initInteract(e,i),s.type="range",s.role="presentation",s.style.margin="0px",this.addLocalisation((()=>{s.ariaLabel=this.localeManager.t(e.ariaLabel.id,e.ariaLabel.params)})),this.setParent(t.params,t.result)}if(UR("text",t)){const{params:e,result:i}=t;this.initElement(e,i),this.setParent(t.params,t.result)}if(UR("listswitch",t)){const{params:e,result:i}=t;this.initInteract(e,i),i.setTextContent(e.textContent),i.setChecked(e.ariaChecked),i.setAriaDescribedBy(e.ariaDescribedBy),this.setParent(t.params,t.result)}if(UR("region",t)){const{params:e,result:i}=t,s=i.getElement();this.initInteract(e,i),s.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return sw(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:s}=e,n=this.initElement(e,t);void 0!==i&&(n.tabIndex=i),void 0!==s&&(t.domIndex=s)}setParent(e,t){if("parent"in e)e.parent?.addChild(t);else{const i={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),i),t.destroyListener=()=>{this.domManager.removeChild("canvas-proxy",e.domManagerId)}}}},YR={ariaInitSeriesArea:"interactive chart",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceStandaloneChart:"chart, ${caption}",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColor:"Color",ariaLabelColorPicker:"Color picker",ariaLabelColorPickerAlpha:"Transparency",ariaLabelColorPickerHue:"Hue",ariaLabelColorPickerMultiColor:"Multi Color",ariaLabelColorPickerPalette:"Palette",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaRoleDescription2DSlider:"2D slider",ariaValueColorPalette:"s ${s}[percent0to2dp], v ${v}[percent0to2dp]",ariaValueColorPaletteFirstV:"v ${v}[percent0to2dp], s ${s}[percent0to2dp]",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",contextMenuResetZoom:"Reset zoom",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"},ZR=/\$\{(\w+)}(?:\[(\w+)])?/gi,qR={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},QR=class{constructor(e){this.eventsHub=e,this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.eventsHub.emit("locale:change",null))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.eventsHub.emit("locale:change",null))}t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{localeText:i=YR,getLocaleText:s}=this,n=i[e];return s?.({key:e,defaultValue:n,variables:t})??(e=>{let{defaultValue:t,variables:i}=e;return t?.replaceAll(ZR,((e,t,s)=>{const n=i[t],o=null!=s?qR[s]:null;return null!=s&&null==o&&xy.warnOnce(`Format style [${s}] is not supported`),null!=o?o.format(n):"number"===typeof n?qR.number.format(n):n instanceof Date?qR.datetime.format(n):String(n)}))})({key:e,defaultValue:n,variables:t})??e}},XR=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:t,height:i,canvasElement:s,willReadFrequently:n=!1}=e;this.pixelRatio=e.pixelRatio??Qy("devicePixelRatio")??1,this.element=s??Xy("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:n}),this.onEnabledChange(),this.resize(t??0,i??0,this.pixelRatio),nS(this.context)}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,i){if(!(e>0&&t>0))return;const{element:s,context:n}=this;s.width=Math.round(e*i),s.height=Math.round(t*i),n.setTransform(i,0,0,i,0,0),s.style.width=e+"px",s.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=i}clear(){sS(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}reset(){this.context.reset(),this.context.verifyDepthZero?.()}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};$w([WM((e=>e.onEnabledChange()))],XR.prototype,"enabled",2);var JR=class extends Yy{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(e,t){const i=this.cache.get(e);if(i?.image)return i.image;if(null!=i&&t)return void i.nodes.add(t);if(!t)return;const s={image:void 0,nodes:new Set([t])},n=new Image;return this.imageLoadingCount++,n.onload=()=>{s.image=n;for(const e of s.nodes)e.markDirty();s.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:e})},n.onerror=()=>{this.imageLoadingCount--,s.nodes.clear(),this.emit("image-error",{uri:e})},n.src=e,this.cache.set(e,s),s.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){this.cache.forEach((e=>{e.nodes.clear()})),this.cache.clear()}},eE=class{constructor(e){this.canvas=e,this.debug=iS.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,i){this.canvas.resize(e,t,i),this.layersMap.forEach((s=>{let{canvas:n}=s;return n.resize(e,t,i)}))}addLayer(e){const{width:t,height:i,pixelRatio:s}=this.canvas,{name:n}=e,o=new rS({width:t,height:i,pixelRatio:s});return this.layersMap.set(o,{id:this.nextLayerId++,name:n,canvas:o}),this.debug("Scene.addLayer() - layers",this.layersMap),o}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}},tE=class extends Yy{constructor(e){super(),this.debug=iS.create(!0,"scene"),this.id=Ew(this),this.imageLoader=new JR,this.root=null,this.pendingSize=null,this.isDirty=!1,this.cleanup=new hw,this.updateDebugFlags(),this.canvas=new XR(e),this.layersManager=new eE(this.canvas),this.cleanup.register(this.imageLoader.on("image-loaded",(()=>{this.emit("scene-changed",{})})),this.imageLoader.on("image-error",(e=>{let{uri:t}=e;xy.warnOnce(`Unable to load image ${t}`)})))}waitingForUpdate(){return this.imageLoader?.waitingToLoad()??!1}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(e){const{element:t}=this.canvas;return t.parentElement?.removeChild(t),e.appendChild(t),this}setRoot(e){return this.root===e||(this.isDirty=!0,this.root?.setScene(),this.root=e,e&&(e.visible=!0,e.setScene(this))),this}updateDebugFlags(){iS.inDevelopmentMode((()=>VS._debugEnabled=!0))}clearCanvas(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>this.removeChild(e)}appendChild(e){return this.root?.appendChild(e),this}removeChild(e){return this.root?.removeChild(e),this}download(e,t){!function(e,t){const i=qy("body"),s=Xy("a",{display:"none"});s.href=e,s.download=t,i.appendChild(s),s.click(),setTimeout((()=>i.removeChild(s)))}(this.canvas.toDataURL(t),e?.trim()??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t,i){return e=Math.round(e),t=Math.round(t),i??(i=this.pixelRatio),e>0&&t>0&&(e!==this.width||t!==this.height||i!==this.pixelRatio)&&(this.pendingSize=[e,t,i],this.isDirty=!0,!0)}render(e){const{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:s}=e??{},{canvas:n,canvas:{context:o}={},root:r,pendingSize:a,width:l,height:c,pixelRatio:h}=this;if(!o)return;const d=performance.now();let u,p=!1;if(a&&(p=!0,this.layersManager.resize(...a),this.pendingSize=null),r&&!r.visible)return void(this.isDirty=!1);if(r instanceof gM&&(u=r.dirty),null!=r&&!1===u&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{tree:vD(r,"console")}),void pD(this.layersManager,t,o,void 0,i,s);const g={ctx:o,width:l,height:c,devicePixelRatio:h,debugNodes:{}};iS.check("scene:stats:verbose")&&(g.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),function(e){const t=jb(Qy("agChartsSceneDebug")),i=[];for(const s of t)"layout"===s?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);e.debugNodeSearch=i}(g);let m=!1;if((!1!==u||p)&&(m=!0,n.clear()),r&&iS.check("scene:dirtyTree")){const{dirtyTree:e,paths:t}=yD(r);iS.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:e,paths:t})}if(r&&m){if(r.visible&&r.preRender(g),this.debug.check()){const e=vD(r,"console");this.debug("Scene.render() - before",{canvasCleared:m,tree:e})}if(r.visible)try{o.save(),r.render(g),o.restore()}catch(mK){throw this.canvas.reset(),mK}}t["\u270d\ufe0f"]=performance.now()-d,o.verifyDepthZero?.(),this.isDirty=!1,pD(this.layersManager,t,o,g.stats,i,s),function(e,t){e.save();try{for(const[i,s]of Object.entries(t)){const t=uM.toCanvas(s);t?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,t.x,t.y,t.width),e.fillText(i,t.x,t.y,t.width)):xy.log(`Scene.render() - no bbox for debugged node [${i}].`)}}catch(mK){xy.warnOnce("Error during debug rendering",mK)}finally{e.restore()}}(o,g.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{tree:vD(r,"console"),canvasCleared:m})}toSVG(){const{root:e,width:t,height:i}=this;if(null!=e)return VS.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.cleanup.flush(),Object.assign(this,{canvas:void 0})}};tE.className="Scene";var iE=class{constructor(e,t,i){this.eventsHub=e,this.annotationRoot=t,this.fireChartEvent=i,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return null==e||iC(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i??[]).map((e=>yS(e,this.getAnnotationTypeStyles(e.type)))),this.eventsHub.emit("annotations:restore",{annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:TM([...this.annotations])})}attachNode(e){return this.annotationRoot.append(e),()=>(this.annotationRoot?.removeChild(e),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){return this.styles?.[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},sE=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_BAND_HIGHLIGHT=1]="AXIS_BAND_HIGHLIGHT",e[e.AXIS_GRID=2]="AXIS_GRID",e[e.AXIS=3]="AXIS",e[e.SERIES_AREA_CONTAINER=4]="SERIES_AREA_CONTAINER",e[e.ZOOM_SELECTION=5]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=6]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=7]="SERIES_LAYER",e[e.AXIS_FOREGROUND=8]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=9]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=10]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=11]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=12]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=13]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=14]="STATUS_BAR",e[e.SERIES_LABEL=15]="SERIES_LABEL",e[e.LEGEND=16]="LEGEND",e[e.NAVIGATOR=17]="NAVIGATOR",e[e.FOREGROUND=18]="FOREGROUND",e))(sE||{}),nE=class{constructor(e,t){this.eventsHub=e,this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new gM({name:"Axes-Grids",zIndex:2}),this.axisGroup=new gM({name:"Axes",zIndex:3}),this.axisLabelGroup=new gM({name:"Axes-Labels",zIndex:15}),this.axisCrosslineRangeGroup=new gM({name:"Axes-Crosslines-Range",zIndex:6}),this.axisCrosslineLineGroup=new gM({name:"Axes-Crosslines-Line",zIndex:10}),this.axisCrosslineLabelGroup=new gM({name:"Axes-Crosslines-Label",zIndex:15}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const s of e)t.includes(s)||(s.detachAxis(i),s.destroy());for(const s of t)e?.includes(s)||s.attachAxis(i);this.axes.clear();for(const s of t){const e=s.createAxisContext();this.axes.has(e.direction)?this.axes.get(e.direction)?.push(e):this.axes.set(e.direction,[e])}this.eventsHub.emit("axis:change",null)}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},oE=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",e[e.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=5]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=7]="SCENE_RENDER",e[e.NONE=8]="NONE",e))(oE||{}),rE=class{constructor(e,t,i){this.eventsHub=e,this.caller=t,this.animationManager=i,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.pendingData=void 0,this.debug=iS.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){"function"===typeof e&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.eventsHub.emit("data:source-change",null))}clearCallback(){this.dataSourceCallback=void 0}load(e){const{pendingData:t}=this;if(null!=t&&t.params.windowStart?.valueOf()===e.windowStart?.valueOf()&&t.params.windowEnd?.valueOf()===e.windowEnd?.valueOf()){const e=this.requestCounter++;return this.isLoadingInitialData=!1,void this.dispatch(e,t.data)}this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}async getData(){const{latestRequest:e}=this;if(!e)return;const{params:t,fetchRequest:i}=e;return{params:t,data:await i}}restoreData(e){this.pendingData=e}createThrottledFetch(e){return gC((e=>this.fetch(e).catch((e=>xy.error("callback failed",e)))),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return gC(((e,t)=>this.dispatch(e,t)),e,{leading:!0,trailing:!0})}dispatch(e,t){this.debug(`DataService - dispatching 'data-load' | ${e}`),this.eventsHub.emit("data:load",{data:t})}async fetch(e){"context"in this.caller&&(e.context=this.caller.context);const t=Promise.resolve().then((async()=>{if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const i=performance.now(),s=this.requestCounter++;let n;this.debug(`DataService - requesting | ${s}`);try{n=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-i}ms | ${s}`)}catch(Ey){this.debug(`DataService - request failed | ${s}`),xy.errorOnce(`DataService - request failed | [${Ey}]`)}this.isLoadingInitialData=!1;const o=this.freshRequests.indexOf(t);return-1===o||this.dispatchOnlyLatest&&o!==this.freshRequests.length-1?(this.debug(`DataService - discarding stale request | ${s}`),n):(this.freshRequests=this.freshRequests.slice(o+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(n)?this.throttledDispatch(s,n):this.eventsHub.emit("data:error",null),n)}));this.latestRequest={params:e,fetchRequest:t},this.freshRequests.push(t),await t}};$w([HM({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],rE.prototype,"dispatchThrottle",2),$w([HM({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],rE.prototype,"requestThrottle",2);var aE=class{constructor(e,t){this.domManager=e,this.updateService=t,this.observers=[]}updateFonts(e){e&&0!==e.size&&(this.loadFonts(e),e.forEach((e=>{this.observeFontStatus(e)})))}destroy(){for(const e of this.observers)e.disconnect();this.observers=[]}loadFonts(e){const t=Array.from(e).map((e=>encodeURIComponent(e))),i=":wght@100;200;300;400;500;600;700;800;900",s=`${i}&family=`,n=`@import url('https://fonts.googleapis.com/css2?family=${t.join(s)}${i}&display=swap');\n`;this.domManager.addStyles(`google-font-${t.join("-")}`,n)}observeFontStatus(e){const t=window.document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("margin","0"),t.style.setProperty("padding","0"),t.style.setProperty("overflow","hidden"),t.style.setProperty("visibility","hidden"),t.style.setProperty("width","auto"),t.style.setProperty("max-width","none"),t.style.setProperty("font-synthesis","none"),t.style.setProperty("font-family",e),t.style.setProperty("font-size","16px"),t.style.setProperty("white-space","nowrap"),t.textContent="UVWxyz",this.domManager.addChild("canvas-container",`font-check-${encodeURIComponent(e)}`,t);const i=new ResizeObserver((e=>{const t=e?.at(0)?.contentBoxSize.at(0)?.inlineSize;null!=t&&t>0&&(lD.clear(),this.updateService.update(4))}));i.observe(t),this.observers.push(i)}};var lE=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const s=i.findIndex((t=>t.symbol===e));if(s>=0){i.splice(s,1),0===i.length&&this.registeredListeners.delete(t);break}}}dispatch(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];for(const n of this.getListenersByType(e))try{n.handler(...i)}catch(mK){xy.errorOnce(mK)}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},cE=new WeakMap;function hE(e,t){const i=JSON.stringify(e,null,0);return cE.has(t)||cE.set(t,new Map),cE.get(t)?.has(i)||cE.get(t)?.set(i,t(e)),cE.get(t)?.get(i)}var dE=class{constructor(){this.weak=new WeakMap,this.strong=new Map,this.set=!1,this.value=void 0}};function uE(e,t){let i=new dE;const s=function(){let s=i;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(const e of o){const t="object"===typeof e||"symbol"===typeof e?s.weak:s.strong;let i=t.get(e);null==i&&(i=new dE,t.set(e,i)),s=i}if(s.set)return t?.("hit",e,o),s.value;{const i=e(...o);return s.set=!0,s.value=i,t?.("miss",e,o),i}};return s.reset=()=>{i=new dE},s}function pE(e,t){const i=new Map,s={},n=new WeakMap;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];const l=0===r.length?[s]:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.map((e=>"object"===typeof e||"symbol"===typeof e?e:(i.has(e)||i.set(e,{v:e}),i.get(e))))}(...r);let c=n;for(const e of l.slice(0,-1))c.has(e)||c.set(e,new WeakMap),c=c.get(e);const h=l.at(-1);let d=c.get(h);return d?t?.("hit",e,r):(d=e(...r),c.set(h,d),t?.("miss",e,r)),d}}var gE={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function mE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(e.getFullYear(),0,1);const i=e.getTimezoneOffset()-t.getTimezoneOffset(),s=e.getTime()-t.getTime()+6e4*i;return Math.floor(s/864e5)}function fE(e,t){const i=(t-new Date(e.getFullYear(),0,1).getDay()+7)%7,s=new Date(e.getFullYear(),0,i+1);return s<=e?Math.floor(mE(e,s)/7)+1:0}function vE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getFullYear();const i=new Date(t,0,1).getDay(),s=new Date(t,0,(4-i+7)%7-3+1);return s<=e?Math.floor(mE(e,s)/7)+1:vE(e,t-1)}var yE={a:e=>gE.shortDays[e.getDay()],A:e=>gE.days[e.getDay()],b:e=>gE.shortMonths[e.getMonth()],B:e=>gE.months[e.getMonth()],c:"%x, %X",d:(e,t)=>bE(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>bE(1e3*e.getMilliseconds(),6,t??"0"),H:(e,t)=>bE(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return 0===i?"12":bE(i,2,t??"0")},j:(e,t)=>bE(mE(e)+1,3,t??"0"),m:(e,t)=>bE(e.getMonth()+1,2,t??"0"),M:(e,t)=>bE(e.getMinutes(),2,t??"0"),L:(e,t)=>bE(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>bE(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>bE(fE(e,0),2,t??"0"),V:(e,t)=>bE(vE(e),2,t??"0"),w:(e,t)=>bE(e.getDay(),2,t??"0"),W:(e,t)=>bE(fE(e,1),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>bE(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>bE(e.getFullYear(),4,t??"0"),Z:e=>function(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${bE(Math.floor(i/60),2,"0")}${bE(Math.floor(i%60),2,"0")}`}(e),"%":()=>"%"},CE={_:" ",0:"0","-":""};function bE(e,t,i){const s=String(Math.floor(e));return s.length>=t?s:`${i.repeat(t-s.length)}${s}`}function wE(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(0!==i){const s=i>0?e.substring(0,i):e;t.push(s)}if(i<0)break;const s=e[i+1],n=CE[s];null!=n&&i++;const o=e[i+1],r=yE[o];if("function"===typeof r)t.push([r,n]);else if("string"===typeof r){const e=wE(r);t.push([e,n])}else t.push(`${n??""}${o}`);e=e.substring(i+2)}return e=>{const i="number"===typeof e?new Date(e):e;return t.map((e=>"string"===typeof e?e:e[0](i,e[1]))).join("")}}var SE={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},xE={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},ME={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},DE=/%[-_0]?L/,RE=/%[-_0]?S/,EE=/%[-_0]?M/,IE=/%[-_0]?[HI]/,AE=/^%[-_0]?[de]$/,kE=/^%[-_0]?[Bbm]$/,TE=/^%[-_0]?[Yy]$/;function LE(e,t,i){if("string"===typeof e)return e;e??(e=SE);const{millisecond:s=SE.millisecond,second:n=SE.second,minute:o=SE.minute,hour:r=SE.hour,day:a=SE.day,month:l=SE.month,year:c=SE.year}=e,h=ME[t],d=xE[t],u=i?ME[i]:-1;if(u<ME.year&&h>=ME.year&&!TE.test(c)||u<ME.month&&h>=ME.month&&!kE.test(l)||u<ME.day&&h>=ME.day&&!AE.test(a))return d;let p,g;switch(t){case"year":return c;case"month":return u<ME.year?`${l} ${c}`:l;case"day":return u<ME.year?`${l} ${a} ${c}`:`${l} ${a}`;case"hour":p=r;break;case"minute":p=o;break;case"second":p=n;break;case"millisecond":p=s;break;default:return d}return h>=ME.hour&&!IE.test(p)||h>=ME.minute&&!EE.test(p)||h>=ME.second&&!RE.test(p)||h>=ME.millisecond&&!DE.test(p)?d:(u<ME.year?g=`${l} ${a} ${c}`:u<ME.month&&(g=`${l} ${a}`),g?`${p} ${g}`:p)}var PE=class e extends lE{constructor(){super(...arguments),this.formats=new Map,this.dateFormatter=uE(((t,i,s,n,o)=>{const r=e.mergeSpecifiers(t,i)??SE;return e.getFormatter("date",r,s,n,{truncateDate:o})})),this.formatter=void 0}static mergeSpecifiers(){let e;for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(const n of i)"string"===typeof n?e=n:lC(n)&&(e=lC(e)?{...e,...n}:n);return e}static getFormatter(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"long",{truncateDate:n}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(lC(t)){if("date"!==e)return void xy.warn("Date formatter configuration is not supported for non-date types.");i??(i="millisecond");return wE("component"===s?t?.[i]??SE[i]:LE(t,i,n))}switch(e){case"number":{const e=Pw(t);if(null==e)return;return Fw(e)}case"date":return wE(t);case"category":return e=>t.replace("%s",String(e))}}setFormatter(e){this.formatter!==e&&(this.formatter=e,this.formats.clear(),this.dateFormatter.reset(),this.dispatch("format-changed"))}format(t,i){let{specifier:s,truncateDate:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==i.value)return;const{formatter:o}=this;if(null==o)return;if("function"===typeof o){const e=t(o,i);return null!=e?String(e):void 0}const r=o[i.property];if(null==r)return;if("function"===typeof r){const e=t(r,i);return null!=e?String(e):void 0}if("date"===i.type){const{unit:e,style:t}=i,o=this.dateFormatter(r,s,e,t,n);return o?.(i.value)}const a=s??r;if("string"!==typeof a)return;let l=this.formats.get(a);return null==l&&(l=e.getFormatter(i.type,a),this.formats.set(a,l)),l?.(i.value,"number"===i.type?i.fractionDigits:void 0)}defaultFormat(e){let{specifier:t,truncateDate:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{formatter:s}=this,n="function"===typeof s?void 0:s?.[e.property];switch(e.type){case"date":{const{unit:s,style:o}=e,r=null!=n&&"function"!==typeof n?n:void 0,a=this.dateFormatter(r,t,s,o,i);return a?.(e.value)??String(e.value)}case"number":return BR(e.value,e.fractionDigits);case"category":return Array.isArray(e.value)?e.value.join(" - "):"string"===typeof e.value?e.value:"number"===typeof e.value?BR(e.value):String(e.value)}}};function FE(e,t){if("string"===typeof e)try{e=nx.fromString(e)}catch{e=nx.fromArray([0,0,0])}if("string"===typeof t)try{t=nx.fromString(t)}catch{t=nx.fromArray([0,0,0])}return i=>nx.mix(e,t,i).toRgbaString()}var NE={};Uw(NE,{easeIn:()=>BE,easeInOut:()=>zE,easeInOutQuad:()=>HE,easeInQuad:()=>jE,easeOut:()=>GE,easeOutQuad:()=>VE,inverseEaseOut:()=>WE,linear:()=>OE});var OE=e=>e,BE=e=>1-Math.cos(e*Math.PI/2),GE=e=>Math.sin(e*Math.PI/2),zE=e=>-(Math.cos(e*Math.PI)-1)/2,jE=e=>e*e,VE=e=>1-(1-e)**2,HE=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,WE=e=>2*Math.asin(e)/Math.PI,_E=.2,UE=["initial","remove","update","add","trailing","end","none"],$E={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:_E,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},KE=(e=>(e.Loop="loop",e.Reverse="reverse",e))(KE||{});function YE(e){return e.every((e=>e instanceof VS))?{nodes:e,selections:[]}:{nodes:[],selections:e}}function ZE(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(((e,i)=>ZE(e,t[i]))):qw(e)&&qw(t)?e.equals(t):!(!lC(e)||!lC(t))&&vS(e,t,ZE))}var qE=class{constructor(e){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??OE,this.phase=e.phase;const t=e.duration??$E[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,!0===e.skip&&(this.onUpdate?.(e.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),!1!==e.collapsable&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return ZE(e.from,e.to)?0:t}play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,e&&this.onUpdate?.(this.from,!0,this)))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(e){if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,this.onComplete?.(this),e-(s-t)):0}get delta(){return this.ease(dw(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if("object"!==typeof t||qw(t))return this.interpolateValue(e,t);const i=[];for(const s of Object.keys(t)){const n=this.interpolateValue(e[s],t[s]);null!=n&&i.push([s,n])}return e=>{const t={};for(const[s,n]of i)t[s]=n(e);return t}}interpolateValue(e,t){if(null!=e&&null!=t){if(qw(e))return i=>e[Zw](t,i);try{switch(typeof e){case"number":return function(e,t){return i=>Number(e)*(1-i)+Number(t)*i}(e,t);case"string":return FE(e,t);case"boolean":if(e===t)return()=>e;break;case"object":return()=>e;default:throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}catch{}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}},QE=class{constructor(e){this.maxAnimationTime=e,this.debug=iS.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(UE.map((e=>[e,[]]))),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(UE[this.currentPhase])??[]}checkOverlappingId(e){null!=e&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){if(e.isComplete)return;if(UE.indexOf(e.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",e.id),void e.stop();this.controllers.set(e.id,e),this.phases.get(e.phase)?.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t?.indexOf(e);null!=i&&i>=0&&t?.splice(i,1)}progress(e){if(!this.isReady)return;let t=0===e?.01:e;const i=()=>{const e=UE[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:e,phaseMeta:$E[e]}};let{phase:s,phaseControllers:n,phaseMeta:o}=i();const r=()=>null==UE[this.currentPhase],a=()=>{for(({phase:s,phaseControllers:n,phaseMeta:o}=i());!r()&&0===n.length;)this.currentPhase++,({phase:s,phaseControllers:n,phaseMeta:o}=i()),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:t},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${s} with ${n?.length} of ${l}`);do{const e=t,i=o.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let s=0;for(const o of n)i?o.stop():t=Math.min(o.update(e),t),o.isComplete&&(s++,this.removeAnimation(o));this.animationTimeConsumed+=e-t,this.debug(`AnimationBatch - updated ${n.length} controllers; ${s} completed`,n),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!r());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&!0!==$E[t.phase].skipIfNoEarlierAnimations){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===e){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(Ey){xy.error("Error during animation stop",Ey)}this.dispatchStopped()}stopByAnimationId(e){if(null!=e&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach((e=>e())),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(e){if(!this.isActive())return 0;let t=0;for(const[i,s]of this.phases)0!==s.length&&(null!=e&&e!==i||(t+=Math.max(...s.map((e=>e.isComplete?0:e.delay+e.duration-(e.elapsed??0))))));return t}destroy(){this.stop(),this.controllers.clear()}},XE=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))(XE||{}),JE=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function eI(e){return null==e||!isNaN(e)&&e>=0&&e<=2}var tI=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new QE(1.5*this.defaultDuration),this.debug=iS.create(!0,"animation"),this.events=new Yy,this.rafAvailable="undefined"!==typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(Ey){return void this.failsafeOnError(Ey)}let{id:i}=e;null==i&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||"none"===e.phase;s&&this.debug("AnimationManager - skipping animation");const{delay:n,duration:o}=e;if(!eI(n))throw new Error(`Animation delay of ${n} is unsupported (${i})`);if(!eI(o))throw new Error(`Animation duration of ${o} is unsupported (${i})`);const r=new qE({...e,id:i,skip:s,autoplay:!!this.isPlaying&&e.autoplay,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(Ey){this.failsafeOnError(Ey)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(Ey){this.failsafeOnError(Ey)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(Ey){this.failsafeOnError(Ey)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(e){return this.batch.getRemainingTime(e)}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=Qy().requestAnimationFrame((t=>{e(t).catch((e=>xy.error(e)))}))}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let e;const t=async i=>{await this.debug.group("AnimationManager.onAnimationFrame()",(async()=>{const s=()=>{const t=i-(e??i);e=i,this.debug("AnimationManager",{controllersCount:this.batch.size,deltaTime:t}),this.interactionManager.pushState(2);try{this.batch.progress(t)}catch(Ey){this.failsafeOnError(Ey)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:t})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}),this.requestId=null,this.startBatch())}failsafeOnError(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];xy.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new QE(1.5*this.defaultDuration),!0===e&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},iI=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["reset-zoom"]={type:"action",showOn:"series-area",label:"contextMenuResetZoom",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},sI=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series"]}},nI=class{constructor(){this.items=new iI,this.lists=new sI}},oI=class{constructor(e){this.eventsHub=e,this.builtins=new nI,this.hiddenActions=new Set,this.setVisible("zoom-to-cursor",!1),this.setVisible("pan-to-cursor",!1),this.setVisible("reset-zoom",!1)}static check(e,t){return t.showOn==e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,s){const{widgetEvent:n}=t;if(n.sourceEvent.defaultPrevented)return;const o={showOn:e,x:s?.x??t.canvasX,y:s?.y??t.canvasY,context:i,widgetEvent:n};this.eventsHub.emit("context-menu:setup",o),this.eventsHub.emit("context-menu:complete",o)}isVisible(e){return!this.hiddenActions.has(e)}setVisible(e,t){t?this.hiddenActions.delete(e):this.hiddenActions.add(e)}},rI=class{constructor(e){this.eventsHub=e,this.highlightStates=new CR}updateHighlight(e,t){const i=this.getActiveHighlight();this.highlightStates.set(e,t);const s=this.getActiveHighlight();this.isEqual(s,i)||this.eventsHub.emit("highlight:change",{callerId:e,currentHighlight:s,previousHighlight:i})}getActiveHighlight(){return this.highlightStates.stateValue()}isEqual(e,t){return e===t||null!=e&&null!=t&&e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}};function aI(e,t){if(null==e||0===t.length)return[!1,!1];const i=e.valueOf(),s=t[0],n=t[t.length-1];if("string"===typeof s)return[i===s,i===n];let o=s.valueOf(),r=n.valueOf();return o>r&&([o,r]=[r,o]),[i===o,i===r]}function lI(e,t,i,s,n,o){const[r,a]=aI(t,o),[l,c]=aI(e,n);return{xKey:i,yKey:s,xValue:e,yValue:t,first:l,last:c,min:r,max:a}}function cI(e,t,i,s){let[n,o]=i,r=lw(0,t-1,(i=>{const o=1===e?i:t-i,r=s(o)?.[1]??NaN;return!Number.isFinite(r)||r>n}))??0,a=aw(0,t-1,(i=>{const n=1===e?i:t-i,r=s(n)?.[0]??NaN;return!Number.isFinite(r)||r<o}))??t-1;return-1===e&&([r,a]=[t-a,t-r]),r=Math.max(r,0),a=Math.min(a+1,t),[r,a]}function hI(e,t,i){if(i){const{x:e,y:t,width:s,height:n}=i;return{canvasX:e+s/2,canvasY:t+n/2}}const s=t.yBar?.upperPoint??t.midPoint??e.datumMidPoint?.(t);if(s){const{x:t,y:i}=uM.toCanvasPoint(e.contentGroup,s.x,s.y);return{canvasX:Math.round(t),canvasY:Math.round(i)}}}function dI(e,t,i,s,n){let o=-1,r=0,a=0,l=!1;for(;r<s&&o<=t-e;){o+=1;const s=i+a;l||(a*=-1),a>=0&&(a+=1),l&&a<0&&(a-=1),s<e||s>t?l=!0:n(s)&&(r+=1)}return r}var uI=class{constructor(e,t,i,s){this.domManager=i,this.tooltip=s,this.stateTracker=new CR,this.suppressState=new CR(!1),this.appliedState=null,this.cleanup=new hw,this.cleanup.register(s.setup(t,i),e.on("dom:hidden",(()=>this.tooltip.hide())))}destroy(){this.cleanup.flush()}updateTooltip(e,t,i,s){i??(i=this.stateTracker.get(e)?.content),this.stateTracker.set(e,{meta:t,content:i,pagination:s}),this.applyStates()}removeTooltip(e){this.stateTracker.delete(e),this.applyStates()}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}applyStates(){const e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):void 0;if(this.suppressState.stateValue()||null==t?.meta||null==t?.content)return this.appliedState=null,void this.tooltip.hide();const i=this.domManager.getBoundingClientRect(),s="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():i;if(fS(this.appliedState?.content,t?.content)&&fS(this.appliedState?.pagination,t?.pagination)){const e=this.tooltip.isVisible();this.tooltip.show(s,i,t?.meta,null,void 0,e)}else this.tooltip.show(s,i,t?.meta,t?.content,t?.pagination);this.appliedState=t}static makeTooltipMeta(e,t,i,s){const{canvasX:n,canvasY:o}=e,r=t.properties.tooltip,{placement:a,anchorTo:l,xOffset:c,yOffset:h}=r.position,d=hI(t,i,s);return{canvasX:n,canvasY:o,nodeCanvasX:d?.canvasX??n,nodeCanvasY:d?.canvasY??o,enableInteraction:r.interaction?.enabled??!1,showArrow:r.showArrow,position:{placement:a,anchorTo:l,xOffset:c,yOffset:h}}}};function pI(e,t){const{device:i,offsetX:s,offsetY:n,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:c}=t;return{type:e,device:i,offsetX:s,offsetY:n,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:c}}function gI(e,t){return e*e+t*t>=9}var mI=class{constructor(e){this.cleanup=new hw,this.events=new Yy,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.cleanup.register(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.cleanup.flush()}onTouchStart(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=t,this.touch.clientY=i}onTouchMove(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-t),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=t,this.touch.clientY=i}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.events.emit("mousemove",e)}onDblClick(e){this.events.emit("dblclick",e)}onDragStart(e){this.dragStartEvent=e}onDragMove(e){null!=this.dragStartEvent&&gI(e.originDeltaX,e.originDeltaY)&&(this.events.emit("drag-start",this.dragStartEvent),this.events.emit("drag-move",{...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.events.emit("drag-move",e)}onDragEnd(e){if(this.isDragging)return this.events.emit("drag-end",e),void(this.isDragging=!1);if("mouse"===e.device){const t=pI("click",e);this.events.emit("click",t)}else if("touchend"===e.sourceEvent.type){if(gI(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const t=pI("click",e);this.events.emit("click",t);const i=Date.now();if(void 0!==this.lastClick&&i-this.lastClick.time<=505&&function(e,t){const i=e.clientX-t.clientX,s=e.clientY-t.clientY;return i*i+s*s<900}(this.lastClick,e)){const t=pI("dblclick",e);this.events.emit("dblclick",t),this.lastClick=void 0}else this.lastClick={time:i,clientX:e.clientX,clientY:e.clientY}}}},fI=class extends NR{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},vI=class{constructor(e,t){this.seriesWidget=new fI(e.getParent("series-area")),this.chartWidget=new fI(e.getParent("canvas-proxy")),this.containerWidget=new fI(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),t.withDragInterpretation&&(this.seriesDragInterpreter=new mI(this.seriesWidget))}destroy(){this.seriesDragInterpreter?.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}};function yI(e,t){const[i,s]=CI(t);return dw(i,e,s)}function CI(e){if(0===e.length)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function bI(e){const[t,i]=CI(e);return i-t}function wI(e){return(e|=0)<=0?1:1===e?2:1<<32-Math.clz32(e-1)}function SI(e){return(e|=0)<=0?0:1===e?1:1<<31-Math.clz32(e)}var xI=class e extends rx{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];super(),this.domain=t,this.range=i,this.defaultTickCount=e.defaultTickCount,this.defaultClamp=!1}static is(t){return t instanceof e}normalizeDomains(){return DI(...arguments)}calcBandwidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const{domain:i}=this,s=this.getPixelRange();if(0===i.length)return s;let n=Math.abs(i[1].valueOf()-i[0].valueOf())/e+1;if(0!==t){const e=Math.floor(s);n=Math.min(n,e)}return s/Math.max(1,n)}convert(e,t){const{domain:i}=this;if(!i||i.length<2||null==e)return NaN;const{range:s}=this,n=t?.clamp??this.defaultClamp;let o=i[0].valueOf(),r=i[1].valueOf(),a=e.valueOf();if(this.transform&&(o=this.transform(o),r=this.transform(r),a=this.transform(a)),n){const[e,t]=CI([o,r]);if(a<e)return s[0];if(a>t)return s[1]}if(o===r)return(s[0]+s[1])/2;if(a===o)return s[0];if(a===r)return s[1];const l=s[0];return l+(a-o)/(r-o)*(s[1]-l)}invert(e,t){const{domain:i}=this;if(i.length<2)return;let s=i[0].valueOf(),n=i[1].valueOf();this.transform&&(s=this.transform(s),n=this.transform(n));const{range:o}=this,[r,a]=o;let l;return l=r===a?this.toDomain((s+n)/2):this.toDomain(s+(e-r)/(a-r)*(n-s)),this.transformInvert?this.transformInvert(l):l}getPixelRange(){const[e,t]=this.range;return Math.abs(t-e)}};xI.defaultTickCount=5;var MI=xI;function DI(){let e,t,i=1/0,s=-1/0;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(const a of o)for(const n of a){const o=n.valueOf();o<i&&(i=o,e=n),o>s&&(s=o,t=n)}if(null!=e&&null!=t){return{domain:[e,t],animatable:!0}}return{domain:[],animatable:!1}}var RI=class e extends rx{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof e}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=dw(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this.invalid=!0,this._paddingInner=dw(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this.invalid=!0,this._paddingOuter=dw(0,e,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&xy.warnOnce("Expected update to not invalidate scale"))}convert(e,t){this.refresh();const i=this.findIndex(e,t?.alignment);return null==i||i<0||i>=this.bands.length?NaN:this.ordinalRange(i)}invertNearestIndex(e){this.refresh();const t=this.bands.length;if(0===t)return-1;let i=0,s=t-1,n=1/0,o=0;for(;i<=s;){const t=(s+i)/2|0,r=this.ordinalRange(t),a=Math.abs(r-e);if(0===a)return t;a<n&&(n=a,o=t),r<e?i=t+1:s=t-1}return o}update(){const[e,t]=this.range;let{_paddingInner:i}=this;const{_paddingOuter:s,round:n,bands:o}=this,r=o.length;if(0===r)return;const a=t-e;let l;1===r?(i=0,l=a*(1-2*s)):l=a/Math.max(1,r-i+2*s);const c=n?Math.floor(l):l;let h=e+(a-c*(r-i))/2,d=c*(1-i);n&&(h=Math.round(h),d=Math.round(d)),this._step=c,this._inset=h,this._bandwidth=d,this._rawBandwidth=l*(1-i)}ordinalRange(e){const{_inset:t,_step:i,range:s}=this;return dw(Math.min(s[0],s[1]),t+i*e,Math.max(s[0],s[1]))}};$w([ax],RI.prototype,"range",2),$w([ax],RI.prototype,"round",2);var EI=RI,II=class e extends EI{static is(t){return t instanceof e}toDomain(e){return new Date(e)}convert(e,t){e instanceof Date||(e=new Date(e));const{domain:i,bands:s}=this;if(i.length<=0)return NaN;const n=this.ordinalRange(0),o=this.ordinalRange(s.length-1);if(0===s.length)return n;if(!0===t?.clamp){const{range:t}=this;if(e<s[0])return t[0];if(e>s[s.length-1])return t[1]}const r=t?.alignment??0,a=i[0].valueOf()>i[i.length-1].valueOf();if(2!==r){const i=super.convert(e,t);return a?o-(i-n):i}const l=e.valueOf();let c,h=this.findIndex(e)??0;a?(h=Math.min(Math.max(h,1),s.length-1),c=-1):(h=Math.min(Math.max(h,0),s.length-2),c=1);const d=s[h].valueOf(),u=s[h+c].valueOf(),p=this.ordinalRange(h),g=(l-d)/(u-d)*(this.ordinalRange(h+c)-p)+p;return a?o-(g-n):g}invert(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.refresh();const{domain:i,bands:s}=this;if(i.length<=0)return;const n=i[0].valueOf()>i[i.length-1].valueOf();let o;if(t)o=this.invertNearestIndex(e-this.bandwidth/2);else{o=lw(0,s.length-1,(t=>this.ordinalRange(t)>=e))??s.length-1}return s[n?s.length-1-o:o]}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{bands:i}=this,s=e.valueOf();return 1===t?lw(0,i.length-1,(e=>i[e].valueOf()>=s)):aw(0,i.length-1,(e=>i[e].valueOf()<=s))}},AI={bottomCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}},center:function(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}},clone:function(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}},collides:function(e,t){const i=kI(e),s=kI(t);return i.x1<=s.x2&&i.x2>=s.x1&&i.y1<=s.y2&&i.y2>=s.y1},end:function(e){return{x:e.x2,y:e.y2}},from:function(e,t,i,s){if("number"===typeof e)return{x1:e,y1:t,x2:i,y2:s};if("width"in e)return kI({x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height});throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${i}] [${s}]`)},height:function(e){return Math.abs(e.y2-e.y1)},round:function(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}},start:function(e){return{x:e.x1,y:e.y1}},topCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(e){return Math.abs(e.x2-e.x1)}};function kI(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function TI(e,t,i,s,n){return t+(n-e)/(i-e)*(s-t)}function LI(e,t,i,s,n){return e+(i-e)/(s-t)*(n-t)}function PI(e,t,i){return[LI(e,i.min,t,i.max,0),LI(e,i.min,t,i.max,1)]}function FI(e,t,i,s,n,o){if(i<=n&&o<=s)return i;const r=n-i,a=o-s;return dw(e,i+(Math.abs(r)<Math.abs(a)?r:a),t)}function NI(e,t,i){const{x:s={min:0,max:1},y:n={min:0,max:1}}=t,o=AI.from(i),r=AI.from(e),a=function(e,t,i){const[s,n]=PI(e.x1,e.x2,t),[o,r]=PI(e.y1,e.y2,i);return{x1:s,x2:n,y1:o,y2:r}}(r,s,n),l=FI(a.x1,a.x2,r.x1,r.x2,o.x1,o.x2),c=FI(a.y1,a.y2,r.y1,r.y2,o.y1,o.y2),h={x:{min:TI(r.x1,s.min,r.x2,s.max,l),max:TI(r.x1,s.min,r.x2,s.max,l+e.width)},y:{min:TI(r.y1,n.min,r.y2,n.max,c),max:TI(r.y1,n.min,r.y2,n.max,c+e.height)}},d=h.x.max-h.x.min,u=h.y.max-h.y.min;return h.x.min=dw(0,h.x.min,1-d),h.x.max=h.x.min+d,h.y.min=dw(0,h.y.min,1-u),h.y.max=h.y.min+u,h}function OI(e,t){const i=e?.valueOf(),s=t?.valueOf();return"number"!==typeof i||"number"!==typeof s?[void 0,void 0]:i<s?[0,1]:[1,0]}var BI=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},GI=e=>LC(((t,i)=>{let{options:s}=i;return!MI.is(e?.scale)&&!II.is(e?.scale)||(null==t||null==s.end||t<s.end)}),"to be less than end"),zI=class extends JD{constructor(e,t){super(),this.eventsHub=e,this.fireChartEvent=t,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new CR(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new BI,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.boundFireOnceChartEvent=this.fireOnceChartEvent.bind(this),this.cleanup.register(e.on("layout:complete",(()=>{this.didLayoutAxes=!0;const{pendingMemento:e}=this;e&&this.restoreMemento(e.version,e.mementoVersion,e.memento),this.autoScaleYZoom("zoom-manager")})))}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(null==e)return!0;if(!rC(e))return!1;const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n={rangeX:{start:GI(i),end:KC},rangeY:{start:GI(s),end:KC},ratioX:{start:KC,end:KC},ratioY:{start:KC,end:KC},autoScaledAxes:KC},{invalid:o}=TC(e,n);return!(o.length>0)||(t.push(...o.map(String)),!1)}restoreMemento(e,t,i){const{independentAxes:s}=this;if(!this.axes||!this.didLayoutAxes)return void(this.pendingMemento={version:e,mementoVersion:t,memento:i});this.pendingMemento=void 0;const n=this.getDefinedZoom();if(n.x=i?.rangeX?this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i?.ratioX?{min:i.ratioX.start??0,max:i.ratioX.end??1}:{min:0,max:1},!this.navigatorModule||this.zoomModule){let e=i?.autoScaledAxes?.includes("y");if(i?.rangeY)e??(e=!1),n.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1};else if(i?.ratioY)e??(e=!1),n.y={min:i.ratioY.start??0,max:i.ratioY.end??1};else{e??(e=!0);const t=e?this.getAutoScaleYZoom(n.x):void 0;n.y=t??{min:0,max:1}}n.autoScaleYAxis=e}if(this.lastRestoredState=n,!0!==s)return void this.updateZoom("zoom-manager",n);const o=this.getPrimaryAxis("x"),r=this.getPrimaryAxis("y");for(const a of[o,r])a&&this.updateAxisZoom("zoom-manager",a.id,n[a.direction])}updateAxes(e){this.axes=e;const t=new Map(e.map((e=>[e.id,this.axisZoomManagers.get(e.id)])));this.axisZoomManagers.clear();for(const i of e)this.axisZoomManagers.set(i.id,t.get(i.id)??new jI(i));this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t,e&&this.autoScaleYZoom("toggle-auto-scale")}setNavigatorEnabled(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.navigatorModule=e}setZoomModuleEnabled(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoomModule=e}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(t?.x&&(t.x.min<0||t.x.max>1)&&(xy.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${t.x.min}, max: ${t.x.max} }], expecting a ratio of 0 to 1, ignoring.`),t.x=void 0),t?.y&&(t.y.min<0||t.y.max>1)&&(xy.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${t.y.min}, max: ${t.y.max} }], expecting a ratio of 0 to 1, ignoring.`),t.y=void 0),0===this.axisZoomManagers.size){const i=this.state.stateId();return void("initial"!==i&&i!==e||this.state.set(e,t))}this.state.set(e,t);const i=t?.autoScaleYAxis;null!=i&&(this.autoScaleYAxis.manuallyAdjusted=!i),this.axisZoomManagers.forEach((i=>{i.updateZoom(e,t?.[i.getDirection()])})),this.applyChanges(e)}updateAxisZoom(e,t,i){this.axisZoomManagers.get(t)?.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){this.autoScaleYAxis.manuallyAdjusted=!1;const t=this.getRestoredZoom();this.updateZoom(e,{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1},autoScaleYAxis:t?.autoScaleYAxis??!0})}resetAxisZoom(e,t){const i=this.axisZoomManagers.get(t),s=i?.getDirection();if(null==s)return;const n=this.getRestoredZoom();if("y"===s){const e=n?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!e}for(const o of this.axes)o.direction===s&&this.updateAxisZoom(e,o.id,n?.[s]??{min:0,max:1})}setAxisManuallyAdjusted(e,t){const i=this.axisZoomManagers.get(t)?.getDirection();"y"===i&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){const s=this.getPrimaryAxis(t);s&&this.updateAxisZoom(e,s.id,i)}panToBBox(e,t,i){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;const s=this.getZoom();if(void 0===s||!s.x&&!s.y)return!1;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height)))return xy.warnOnce("cannot pan to target BBox - chart too small?"),!1;const n=NI(t,s,i);return this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",n.x),this.updatePrimaryAxisZoom(e,"y",n.y)):this.updateZoom(e,n),!0}fireZoomPanStartEvent(e){this.eventsHub.emit("zoom:pan-start",{callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,(e=>Number(e)-i))}extendWith(e,t,i){const s=this.getPrimaryAxis(t);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;const[,o]=n,r=i(o),a=this.rangeToRatio({start:r,end:o},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,i){const s=this.getPrimaryAxis(t);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;let[o,r]=n;[o,r]=i(o,r);const a=this.rangeToRatio({start:o,end:r},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;if(this.axisZoomManagers.forEach((i=>{"x"===i.getDirection()?e??(e=i.getZoom()):"y"===i.getDirection()&&(t??(t=i.getZoom()))})),e||t)return{x:e,y:t}}getAxisZoom(e){return this.axisZoomManagers.get(e)?.getZoom()??{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){return this.getPrimaryAxis(e)?.id}isVisibleItemsCountAtLeast(e,t){const{autoScaleYAxis:i}=this,s=this.getPrimaryAxis("x"),n=this.getPrimaryAxis("y");let o;if(this.independentAxes){const e=new Set(s?.boundSeries??[]),t=new Set(n?.boundSeries??[]);o=new Set;for(const i of e)t.has(i)&&o.add(i)}else o=new Set([...s?.boundSeries??[],...n?.boundSeries??[]]);const r=[e.x.min,e.x.max],a=i.enabled&&!i.manuallyAdjusted?void 0:[e.y.min,e.y.max];let l=0;for(const c of o){const e=t-(l??0);if(l+=c.getVisibleItems(r,a,e),l>=t)return!0}return 0===o.size}getMementoRanges(){const e=this.getDefinedZoom();let t;this.autoScaleYAxis.enabled&&(t=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]);return{rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max},autoScaledAxes:t}}getAutoScaleYZoom(e){if(!this.isZoomEnabled())return;const{independentAxes:t,autoScaleYAxis:i}=this;if(!i.enabled||i.manuallyAdjusted)return;const{padding:s}=i;return 0===e?.min&&1===e?.max?{min:0,max:1}:t?this.primaryAxisZoom("y",e,{padding:s}):this.combinedAxisZoom("y",e,{padding:s})}autoScaleYZoom(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{independentAxes:i}=this,s=this.getZoom();if(null==s?.x)return;const n=this.getAutoScaleYZoom(s.x);if(null!=n&&!fS(s.y,n)){if(i){const e=this.getPrimaryAxis("y"),t=null==e?void 0:this.axisZoomManagers.get(e.id);t?.updateZoom("zoom-manager",n)}else for(const e of this.axisZoomManagers.values())"y"===e.getDirection()&&e.updateZoom("zoom-manager",n);t&&this.applyChanges(e)}}applyChanges(e){this.autoScaleYZoom(e,!1);if(!Array.from(this.axisZoomManagers.values(),(e=>e.applyChanges())).includes(!0))return;const t={};for(const[i,s]of this.axisZoomManagers.entries())t[i]=s.getZoom();this.eventsHub.emit("zoom:change",{...this.getZoom(),axes:t,callerId:e}),this.eventsHub.on("layout:complete",this.boundFireOnceChartEvent)}fireOnceChartEvent(){this.fireChartEvent({type:"zoom",...this.getMementoRanges()}),this.eventsHub.off("layout:complete",this.boundFireOnceChartEvent)}getRangeDirection(e,t){const i=this.getPrimaryAxis(t);if(!i||!MI.is(i.scale)&&!II.is(i.scale))return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,o]=s;let r,a;return n<=o?(r=i.scale.invert(0),a=i.scale.invert(n+(o-n)*e.max)):(r=i.scale.invert(n-(n-o)*e.min),a=i.scale.invert(0)),{start:r,end:a}}rangeToRatio(e,t){const i=this.getPrimaryAxis(t);if(!i)return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,o]=s,{scale:r}=i,{start:a,end:l}=e,[c=0,h=1]=OI(a,l);let d=null==e.start?n:r.convert(e.start,{alignment:c}),u=null==e.end?o:r.convert(e.end,{alignment:h})+(r.bandwidth??0);if(!uC(d)||!uC(u))return;const[p,g]=[Math.min(n,o),Math.max(n,o)];if(d<p||d>g)return void xy.warnOnce(`Invalid range start [${e.start}], expecting a value between [${r.invert(n)}] and [${r.invert?.(o)}], ignoring.`);if(u<p||u>g)return void xy.warnOnce(`Invalid range end [${e.end}], expecting a value between [${r.invert(n)}] and [${r.invert?.(o)}], ignoring.`);d=Math.min(g,Math.max(p,d)),u=Math.min(g,Math.max(p,u));const m=o-n;return{min:Math.abs((d-n)/m),max:Math.abs((u-n)/m)}}getPrimaryAxis(e){return this.axes?.find((t=>t.direction===e))}getDomainExtents(e){const{domain:t}=e.scale,i=t.at(0),s=t.at(-1);if(null!=i&&null!=s)return[i,s]}getDomainPixelExtents(e){const[t,i]=e.scale.range;if(uC(t)&&uC(i))return[t,i]}getDefinedZoom(){const e=this.getZoom();return{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}}}zoomBounds(e,t,i,s){const n=e.scale,o=n.range;n.range=[0,1];const r=t.scale,a=r.range;r.range=[0,1];let l=1,c=!1,h=0,d=!1;for(const g of t.boundSeries){if(!g.visible)continue;const{connectsToYAxis:e}=g,t=g.getRange("y",[i.min,i.max]);for(const i of t){const t=r.convert(i);Number.isFinite(t)&&(t<l&&(l=t,c=!e||i<0),t>h&&(h=t,d=!e||i>0))}}if(uC(t.min)&&(l=0),uC(t.max)&&(h=1),n.range=o,r.range=a,l>=h)return;const u=(c?s:0)+(d?s:0),p=Math.min((h-l)*(1+u),1);if(!(p<=0)){if(c&&d){const e=(h+l)/2;l=e-p/2,h=e+p/2}else!c&&d?h=l+p:c&&!d&&(l=h-p);return l<0?(h+=-l,l=0):h>1&&(l-=h-1,h=1),{min:l,max:h}}}primaryAxisZoom(e,t){let{padding:i=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="x"===e?"y":"x",n=this.getPrimaryAxis(s),o=this.getPrimaryAxis(e);if(null!=n&&null!=o)return this.zoomBounds(n,o,t,i)}combinedAxisZoom(e,t){let{padding:i=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s="x"===e?"y":"x",n=new Map;for(const l of this.axes)if(l.direction===s)for(const e of l.boundSeries)n.set(e,l);let o=1,r=0;for(const l of this.axes)if(l.direction===e)for(const e of l.boundSeries){const s=n.get(e);if(null==s)continue;const a=this.zoomBounds(s,l,t,i);if(null==a)return;o=Math.min(o,a.min),r=Math.max(r,a.max)}const a=1e-6;if(o<a&&(o=0),r>.999999&&(r=1),!(o>r))return{min:o,max:r}}},jI=class{constructor(e){this.axis=e;const[t=0,i=1]=e.visibleRange;this.state=new CR({min:t,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return TM(this.state.stateValue())}hasChanges(){const e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){const e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}},VI=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(VI||{}),HI=class{constructor(e){this.eventsHub=e,this.elements=new Map}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>this.elements.get(e)?.delete(t)}createContext(e,t){const i=new WI(e,t);for(const s of Object.values(VI))"number"===typeof s&&this.elements.get(s)?.forEach((e=>e(i)));return i}emitLayoutComplete(e,t){const{width:i,height:s}=e;this.eventsHub.emit("layout:complete",{axes:t.axes??[],chart:{width:i,height:s},clipSeries:t.clipSeries??!1,series:t.series})}},WI=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new eS(0,0,e,t)}};function _I(e,t,i,s,n){let{point:o,anchor:r}=e;if(0===o.size)return!1;let a=o.x,l=o.y;null!=r&&(a-=(r.x-.5)*o.size,l-=(r.y-.5)*o.size);let c=a;a<t?c=t:a>t+s&&(c=t+s);let h=l;l<i?h=i:l>i+n&&(h=i+n);const d=a-c,u=l-h;return Math.sqrt(d*d+u*u)<=.5*o.size}function UI(e){return null!=e&&"object"===typeof e.point&&"object"===typeof e.label}var $I={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};var KI=class{constructor(){this.labelData=new Map}updateLabels(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eS.zero;const s={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},n=new Set(e.map((e=>e.id)));for(const r of this.labelData.keys())n.has(r)||this.labelData.delete(r);for(const r of e){const e=r.getLabelData();e.every(UI)&&this.labelData.set(r.id,e)}const o=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const s=new Map,n=[],o=new Map([...e.entries()].map((e=>{let[t,i]=e;return[t,i.toSorted(((e,t)=>t.point.size-e.point.size))]}))),r=[...o.values()].flat();for(const[a,l]of o.entries()){const e=[];if(l[0]?.label){for(let s=0,o=l.length;s<o;s++){const o=l[s],{point:a,label:c,anchor:h}=o,{text:d,width:u,height:p}=c,g=.5*a.size;let m=0,f=0;if(g>0&&null!=o.placement){const e=$I[o.placement];m=(.5*u+g+i)*e.x,f=(.5*p+g+i)*e.y}const v=a.x-.5*u+m-((h?.x??.5)-.5)*a.size,y=a.y-.5*p+f-((h?.y??.5)-.5)*a.size;if(!ow(t,v,y,u,p))continue;if(r.some((e=>_I(e,v,y,u,p))))continue;if(n.some((e=>nw(e,v,y,u,p))))continue;const C={index:s,text:d,x:v,y:y,width:u,height:p,datum:o};e.push(C),n.push(C)}s.set(a,e)}}return s}(this.labelData,s,5);for(const r of e)r.updatePlacedLabelData?.(o.get(r.id)??[])}},YI=class{constructor(e){this.eventsHub=e,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter((e=>{let{hideInLegend:t,isFixed:i}=e;return!t&&!i})).map((e=>{let{enabled:t,seriesId:i,itemId:s,legendItemName:n}=e;return{visible:t,seriesId:i,itemId:s,legendItemName:n}}))}guardMemento(e){return null==e||iC(e)}restoreMemento(e,t,i){i?.forEach((e=>{const{seriesId:t,data:i}=this.getRestoredData(e)??{};t&&i&&this.updateData(t,i)})),this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:s,visible:n}=e;if(t){const e=(this.legendDataMap.get(t)??[]).map((e=>{const s=e.seriesId===t&&(!i||e.itemId===i);return s&&e.isFixed&&this.warnFixed(e.seriesId,e.itemId),!e.isFixed&&s?{...e,enabled:n}:e}));return{seriesId:t,data:e}}if(null!=i||null!=s)for(const o of this.getData()){if(null!=i&&o.itemId!==i||null!=s&&o.legendItemName!==s)continue;if(o.isFixed)return void this.warnFixed(o.seriesId,i);const e=(this.legendDataMap.get(o.seriesId)??[]).map((e=>e.itemId===i||e.legendItemName===s?{...e,enabled:n}:e));return{seriesId:o.seriesId,data:e}}}warnFixed(e,t){xy.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.eventsHub.emit("legend:change",{legendData:e??this.getData()})}updateData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e,t,i,s){if(s)return void this.getData().forEach((t=>{const i=(this.legendDataMap.get(t.seriesId)??[]).map((t=>t.legendItemName===s?{...t,enabled:e}:t));this.updateData(t.seriesId,i)}));const n=this.getData(t),o=1===n.length,r=n.map((t=>null==i&&o||t.itemId===i?{...t,enabled:e}:t));this.updateData(t,r)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce(((e,t)=>{let[i,s]=t;return e.concat(s)}),[])}getDatum(){let{seriesId:e,itemId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getData(e).find((e=>e.itemId===t))}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some((e=>e.enabled))}getItemEnabled(){let{seriesId:e,itemId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getDatum({seriesId:e,itemId:t})?.enabled??!0}},ZI=class{constructor(){this.groups=new Map}registerSeries(e){let{internalId:t,seriesGrouping:i,visible:s,type:n}=e;if(!i)return;let o=this.groups.get(n);null==o&&(o=new Map,this.groups.set(n,o)),o.set(t,{grouping:i,visible:s})}updateSeries(e){let{internalId:t,seriesGrouping:i,visible:s,type:n}=e;if(!i)return;const o=this.groups.get(n)?.get(t);o&&(o.grouping=i,o.visible=s)}deregisterSeries(e){let{internalId:t,type:i}=e;const s=this.groups.get(i);null!=s&&(s.delete(t),0===s.size&&this.groups.delete(i))}getVisiblePeerGroupIndex(e){let{type:t,seriesGrouping:i,visible:s}=e;if(!i)return{visibleGroupCount:s?1:0,visibleSameStackCount:s?1:0,index:0};const n=new Set,o=new Set,r=this.groups.get(t);for(const l of r?.values()??[])l.visible&&(n.add(l.grouping.groupIndex),l.grouping.groupIndex===i.groupIndex&&o.add(l.grouping.stackIndex));const a=Array.from(n);return a.sort(((e,t)=>e-t)),{visibleGroupCount:a.length,visibleSameStackCount:o.size,index:a.indexOf(i.groupIndex)}}},qI=class{constructor(e){this.updateCallback=e,this.events=new Yy}addListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.updateCallback(e,t)}dispatchUpdateComplete(e){this.events.emit("update-complete",{type:"update-complete",apiUpdate:e})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData(e){let{series:t}=e;this.events.emit("process-data",{type:"process-data",series:t})}},QI=class{constructor(e,t){this.eventsHub=new Yy,this.callbackCache=new wM,this.highlightManager=new rI(this.eventsHub),this.formatManager=new PE,this.layoutManager=new HI(this.eventsHub),this.localeManager=new QR(this.eventsHub),this.seriesStateManager=new ZI,this.stateManager=new XD,this.seriesLabelLayoutManager=new KI,this.cleanup=new hw,this.contextModules=[];const{scene:i,root:s,syncManager:n,container:o,fireEvent:r,updateCallback:a,updateMutex:l,styleContainer:c,chartType:h,domMode:d,withDragInterpretation:u}=t;this.chartService=e,this.syncManager=n,this.domManager=new IR(this.eventsHub,this.chartService,o,c,d),this.widgets=new vI(this.domManager,{withDragInterpretation:u});const p=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new tE({canvasElement:p}),this.scene.setRoot(s),this.cleanup.register(this.scene.on("scene-changed",(()=>{this.updateService.update(7)}))),this.axisManager=new nE(this.eventsHub,s),this.legendManager=new YI(this.eventsHub),this.annotationManager=new iE(this.eventsHub,e.annotationRoot,r),this.chartTypeOriginator=new KD(e),this.interactionManager=new JE,this.contextMenuRegistry=new oI(this.eventsHub),this.updateService=new qI(a),this.proxyInteractionService=new KR(this.eventsHub,this.localeManager,this.domManager),this.fontManager=new aE(this.domManager,this.updateService),this.historyManager=new qD(this.eventsHub),this.animationManager=new tI(this.interactionManager,l),this.dataService=new rE(this.eventsHub,e,this.animationManager),this.tooltipManager=new uI(this.eventsHub,this.localeManager,this.domManager,e.tooltip),this.zoomManager=new zI(this.eventsHub,r);for(const g of Yw.byType("context")){if(!g.chartTypes.includes(h))continue;const e=g.moduleFactory(this);this.contextModules.push(e),this[g.contextKey]=e}}destroy(){this.animationManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.domManager.destroy(),this.fontManager.destroy(),this.proxyInteractionService.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach((e=>e.destroy())),this.cleanup.flush()}},XI=class extends vx{constructor(){super(...arguments),this.range="tooltip"}};function JI(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function eA(e,t){if(null==e||null==t)return e===t;if(e.size!==t.size)return!1;for(const[i,s]of e){const e=t.get(i);if(null==e)return!1;if(!JI(s,e))return!1}return!0}function tA(e,t){const{props:i,...s}=e,{props:n,...o}=t;return fS(s,o)&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const{type:s,idsMap:n,scopes:o,data:r,...a}=e[i],{type:l,idsMap:c,scopes:h,data:d,...u}=t[i];if(s!==l)return!1;if(o&&h&&!Hb(o,h))return!1;if(r&&d&&r!==d)return!1;if(!fS(a,u)||!eA(n,c))return!1}return!0}(i,n)}function iA(e,t,i,s){return t===e.data&&Hb(i,e.ids)&&tA(s,e.opts)}$w([fx],XI.prototype,"range",2);var sA=class e{constructor(){this.domain=new Set}static is(t){return t instanceof e}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},nA=class e{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof e}static extendDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of e)"number"===typeof i&&(t[0]>i&&(t[0]=i),t[1]<i&&(t[1]=i));return t}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}},oA=class{constructor(e){const t=e.reduce(((e,t)=>Math.max(e,t.length)),0);let i=1<<32-Math.clz32(t);t===i/2&&(i>>>=1),this.maxLevelSize=i;const s=new Float64Array(2*(2*i-1)).fill(NaN);for(const n of e)for(let e=0;e<n.length;e+=1){const t=Number(n[e]),o=i+e-1,r=0+(2*o|0),a=1+(2*o|0),l=s[r],c=s[a];(!Number.isFinite(l)||t<l)&&(s[r]=t),(!Number.isFinite(c)||t>c)&&(s[a]=t)}for(let n=i/2|0;n>=1;n=n/2|0){const e=n-1|0,t=e+n|0;for(let i=0;i<n;i+=1){const n=e+i,o=t+2*i,r=o+1,a=s[0+(2*o|0)],l=s[0+(2*r|0)];s[0+(2*n|0)]=!Number.isFinite(l)||a<l?a:l;const c=s[1+(2*o|0)],h=s[1+(2*r|0)];s[1+(2*n|0)]=!Number.isFinite(h)||c>h?c:h}}this.buffer=s}computeRangeInto(e,t,i,s,n,o,r){const a=n+o-1;if(a<t||n>=i)return r;if(n>=t&&a<i){const t=e[0+(2*s|0)],i=e[1+(2*s|0)];Number.isFinite(t)&&(r[0]=Math.min(r[0],t)),Number.isFinite(i)&&(r[1]=Math.max(r[1],i))}else o>1&&(s=2*s|0,o=o/2|0,this.computeRangeInto(e,t,i,s+1|0,n,o,r),this.computeRangeInto(e,t,i,s+2|0,n+o,o,r));return r}rangeBetween(e,t){if(e>t)return[NaN,NaN];const{maxLevelSize:i,buffer:s}=this,n=[1/0,-1/0];return this.computeRangeInto(s,e,t,0,0,i,n),n}get range(){const{buffer:e}=this;return[e[0],e[1]]}};function rA(e){if(e.length<=1)return 1;let t=0,i=e[0];for(let s=1;s<e.length;s++){const n=e[s];if(null==n)continue;if("number"!==typeof n.valueOf())return;const o=Math.sign(n-i);if(0!==o){if(0!==t&&t!==o)return;t=o}i=n}return 0===t?1:t}var aA=Symbol("key-sort-orders"),lA=Symbol("column-sort-orders"),cA=Symbol("domain-ranges");function hA(e){return e.map((e=>rC(e)?JSON.stringify(e):e)).join("-")}function dA(e){const t=e?.map(Number);return t?.every(Number.isFinite)?t:[]}function uA(e,t){return t?.get(e.id)??0}function pA(e,t){const i=[];for(let s=0;s<e;s+=1)i[s]=t;return i}function gA(e,t,i){const s=[];for(const n of e){const e=n.get(t)?.[i];if(null==e)return;s.push(e)}return s}function mA(e){const t=[];let i,s=0;const n=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|(?<!\\)\\')*'|"(?:[^"]|(?<!\\)\\")*"|-?\d+)\s*\])\s*)/g;for(;i=n.exec(e);){if(i.index!==s)return;s=i.index+i[0].length;const e=i[1].trim();if(e.startsWith("."))t.push(e.slice(1).trim());else if(e.startsWith("[")){const i=e.slice(1,-1).trim();i.startsWith("'")?t.push(i.slice(1,-1).replace(/(?<!\\)\\'/g,"'")):i.startsWith('"')?t.push(i.slice(1,-1).replace(/(?<!\\)\\"/g,'"')):t.push(i)}else t.push(e)}if(s===e.length)return t}function fA(e){return t=>{let i=t;for(const s of e)i=i[s];return i}}var vA=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standalone",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=iS.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(e,t,i,s){for(const n of e)s.has(n)||s.set(n,pA(t.length,!1)),s.get(n)[i]=!0};let s=!0;for(const l of e.props){if("key"===l.type&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===l.type&&s&&(s=!1)}const n=e=>{let{matchGroupIds:t=[]}=e;for(const i of t)if(this.values.every((e=>e.groupId!==i)))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)},o=new Set,r=new Set;for(const l of e.props){const e="key"===l.type?o:r;switch("scopes"in(a=l)&&Array.isArray(a.scopes)&&l.scopes?.forEach((t=>e.add(t))),l.type){case"key":this.keys.push({...l,index:this.keys.length,missing:new Map});break;case"value":if(null==l.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(l)}`);this.values.push({...l,index:this.values.length,missing:new Map});break;case"aggregate":n(l),this.aggregates.push({...l,index:this.aggregates.length});break;case"group-value-processor":n(l),this.groupProcessors.push({...l,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...l,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...l,index:this.reducers.length});break;case"processor":this.processors.push({...l,index:this.processors.length})}}var a;if(this.opts.groupByKeys||null!=this.opts.groupByFn){const e=new Set(r.values());if(o.forEach((t=>e.delete(t))),e.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...e.values()]}`)}}resolveProcessedDataDefById(e,t){const i=this.scopeCache.get(e.id)?.get(t);if(!i)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,i){const s=this.resolveProcessedDataIndexById(e,t),n=i.keys[s];if(null==n)throw new Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return n.get(e.id)}hasColumnById(e,t){return null!=this.scopeCache.get(e.id)?.get(t)}resolveColumnById(e,t,i){const s=this.resolveProcessedDataIndexById(e,t),n=i.columns?.[s];if(null==n)throw new Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return n}*forEachDatum(e,t,i){const s=t.columnScopes.findIndex((t=>t.has(e.id)));for(const n of i.datumIndices[s]??[])yield t.columns[s][n]}*forEachGroupDatum(e,t){const i=t.columnScopes.findIndex((t=>t.has(e.id))),s={groupIndex:0,columnIndex:i},n=[];for(const o of t.groups){s.group=o;for(const e of o.datumIndices[i]??n)s.datumIndex=e,yield s;s.groupIndex++}}*forEachGroupDatumTuple(e,t){const i={columnIndex:t.columnScopes.findIndex((t=>t.has(e.id))),datumIndexes:[void 0,void 0,void 0]};for(const s of this.forEachGroupDatum(e,t))i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=s.group,i.nextGroupIndex=s.groupIndex,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=s.datumIndex,null!=i.group&&null!=i.datumIndexes[1]&&(yield i);i.group=i.nextGroup,i.groupIndex=i.nextGroupIndex,i.nextGroup=void 0,i.nextGroupIndex=void 0,i.datumIndexes[0]=i.datumIndexes[1],i.datumIndexes[1]=i.datumIndexes[2],i.datumIndexes[2]=void 0,null!=i.group&&null!=i.datumIndexes[1]&&(yield i)}getDomain(e,t,i,s){const n=this.getDomainsByType(i??"value",s);return n?.[this.resolveProcessedDataIndexById(e,t)]??[]}getDomainBetweenRange(e,t,i,s){let[n,o]=i;const r=t.map((t=>this.resolveProcessedDataIndexById(e,t))),a=r.join(":"),l=s[cA];let c=l.get(a);if(null==c){const e=r.map((e=>s.columns[e]));c=new oA(e),l.set(a,c)}return c.rangeBetween(n,o)}getSortOrder(e,t,i){let s=i.get(t);return null==s&&(s={sortOrder:rA(e)},i.set(t,s)),s.sortOrder}getKeySortOrder(e,t,i){const s=this.resolveProcessedDataIndexById(e,t),n=i.keys[s]?.get(e.id);return n?this.getSortOrder(n,s,i[aA]):void 0}getColumnSortOrder(e,t,i){const s=this.resolveProcessedDataIndexById(e,t);return this.getSortOrder(i.columns[s],s,i[lA])}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:s,groupProcessors:n,reducers:o,processors:r,propertyProcessors:a}=this,l=performance.now();if(t&&0===this.keys.length)return;let c=this.extractData(e);t?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),n.length>0&&"grouped"===c.type&&this.postProcessGroups(c),s.length>0&&"ungrouped"===c.type?this.aggregateUngroupedData(c):s.length>0&&"grouped"===c.type&&this.aggregateGroupedData(c),a.length>0&&this.postProcessProperties(c),o.length>0&&this.reduceData(c),r.length>0&&this.postProcessData(c),this.warnDataMissingProperties(e);const h=performance.now();return c.time=h-l,this.debug.check()&&function(e){const t=(e,t)=>{t.length>0&&(xy.log(`DataModel.processData() - ${e}`),xy.table(t))};xy.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Group Domains",e.domain.groups??[]),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[])}(c),this.processScopeCache(),c}warnDataMissingProperties(e){if(0!==e.size)for(const t of Yb(this.keys,this.values))for(const[i,s]of t.missing){if(s<(e.get(i)?.length??1/0))continue;const n=null==i?"":` for ${i}`;xy.warnOnce(`the key '${t.property}' was not found in any data element${n}.`)}}processScopeCache(){this.scopeCache.clear();for(const e of Yb(this.keys,this.values,this.aggregates))if(e.idsMap)for(const[t,i]of e.idsMap)for(const s of i)if(this.scopeCache.has(t)){if(this.scopeCache.get(t)?.has(s))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(t).set(s,e)}else this.scopeCache.set(t,new Map([[s,e]]))}valueGroupIdxLookup(e){let{matchGroupIds:t}=e;const i=[];for(const[s,n]of this.values.entries())(!t||n.groupId&&t.includes(n.groupId))&&i.push(s);return i}valueIdxLookup(e,t){const i=null==e||0===e.length,s="string"===typeof t?t:t.id,n=this.values.reduce(((t,n,o)=>((null==n.scopes||i&&!n.scopes.length||n.scopes.some((t=>e?.includes(t))))&&(n.property===s||n.id===s||(t=>{if(t.idsMap)for(const[i,n]of t.idsMap)if(e?.includes(i)&&n.has(s))return!0;return!1})(n))&&t.push(o),t)),[]);if(0===n.length)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return n}extractData(e){const{dataDomain:t,processValue:i,allScopesHaveSameDefs:s}=this.initDataDomainProcessor(),{keys:n,values:o}=this,{invalidData:r,invalidKeys:a,invalidKeyCount:l,allKeyMappings:c}=this.extractKeys(n,e,i),{columns:h,columnScopes:d,partialValidDataCount:u,maxDataLength:p}=this.extractValues(r,o,e,a,i),g=e=>{const i=t.get(e),s=i.getDomain();return nA.is(i)&&s[0]>s[1]?[]:s};return{type:"ungrouped",input:{count:p},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...c.values()],columns:h,columnScopes:d,invalidKeys:a,invalidKeyCount:l,invalidData:r,domain:{keys:n.map(g),values:o.map(g)},defs:{allScopesHaveSameDefs:s,keys:n,values:o},partialValidDataCount:u,time:0,[cA]:new Map,[aA]:new Map,[lA]:new Map}}extractKeys(e,t,i){const s=new Map,n=new Map,o=new Map,r=new Map;let a,l;const c=(e,t)=>{const i=l.get(e);a.set(t,a.get(i)),s.has(i)&&(s.set(t,s.get(i)),n.set(t,n.get(i)))};for(const h of e){const{invalidValue:e,scopes:d}=h;a=new Map,l=new Map,r.set(h,a);for(const r of d??[]){const d=t.get(r)??[];if(l.has(d)){c(d,r);continue}const u=[];let p,g;a.set(r,u),l.set(d,r);let m=0;for(let t=0;t<d.length;t++){if(null==d[t]||"object"!==typeof d[t])continue;const s=i(h,d[t],t,r);s.valid?u.push(s.value):(u.push(e),p??(p=pA(d.length,!1)),g??(g=pA(d.length,!1)),m+=1,p[t]=!0,g[t]=!0)}p&&g&&(s.set(r,p),n.set(r,g),o.set(r,m))}}return{invalidData:n,invalidKeys:s,invalidKeyCount:o,allKeyMappings:r}}extractValues(e,t,i,s,n){let o=0;const r=[],a=[];let l=0;for(const c of t){const{invalidValue:t}=c;if(new Set(c.scopes.map((e=>i.get(e)))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(c)}`);const h=new Set(c.scopes),d=Zb(c.scopes),u=i.get(d),p=new Array,g=s.get(d);for(let i=0;i<u.length;i++){if(null==u[i]||"object"!==typeof u[i])continue;const s=u[i],r=null!=g&&g[i],a=n(c,s,i,c.scopes);let l=a.value;!r&&a.valid||this.markScopeDatumInvalid(c.scopes,u,i,e),r?l=t:a.valid||(o+=1,l=t),p[i]=l}r.push(p),a.push(h),l=Math.max(l,p.length)}return{columns:r,columnScopes:a,partialValidDataCount:o,maxDataLength:l}}groupData(e,t){var i;const{keys:s,columns:n,columnScopes:o,invalidKeys:r,invalidData:a}=e,l=e.scopes,c=[],h=[],d=new Set,u=1!==l.size||null!=t?new Map:void 0;for(const p of l){const e=n.map(((e,t)=>t)).filter((e=>!d.has(e)&&o[e].has(p)));if(0===e.length)continue;for(const t of e)d.add(t);const g=new Set;for(const t of e)for(const e of o[t])g.add(e);const m=s.map((e=>e.get(p))).filter((e=>null!=e)),f=n[Zb(e)],v=a?.get(p),y=r?.get(p);for(let s=0;s<f.length;s++){if(!0===y?.[s])continue;const n=m.map((e=>e[s]));if(null==n||0===n.length)throw new Error("AG Charts - no keys found for scope: "+p);const o=t?.(n)??n,r=null!=u?hA(o):void 0;let a=u?.get(r);if(null==a&&(a={keys:o,datumIndices:[],aggregation:[],validScopes:l},u?.set(r,a),c.push(a.keys),h.push(a)),!0===v?.[s]){a.validScopes===l&&(a.validScopes=new Set(l.values()));for(const e of g)a.validScopes.delete(e)}for(const t of e)(i=a.datumIndices)[t]??(i[t]=[]),a.datumIndices[t].push(s)}}return{...e,type:"grouped",domain:{...e.domain,groups:c},groups:h}}aggregateUngroupedData(e){const t=this.aggregates.map((()=>[1/0,-1/0]));e.domain.aggValues=t;const{keys:i,columns:s,dataSources:n}=e,o=Zb(n.keys()),r=n.get(o);e.aggregation=r?.map(((e,n)=>{const r=[];for(const[a,l]of this.aggregates.entries()){const e=this.valueGroupIdxLookup(l);let c=l.groupAggregateFunction?.()??[1/0,-1/0];const h=e.map((e=>s[e][n])),d=gA(i,o,n),u=null!=d?l.aggregateFunction(h,d):void 0;u&&(c=l.groupAggregateFunction?.(u,c)??nA.extendDomain(u,c));const p=l.finalFunction?.(c)??c;r[a]=p,nA.extendDomain(p,t[a])}return r}))}aggregateGroupedData(e){const t=this.aggregates.map((()=>[1/0,-1/0]));e.domain.aggValues=t;const{columns:i}=e;for(const[s,n]of this.aggregates.entries()){const o=this.valueGroupIdxLookup(n);for(const r of e.groups){r.aggregation??(r.aggregation=[]);const e=r.keys;let a=n.groupAggregateFunction?.()??[1/0,-1/0];const l=Math.max(...o.map((e=>r.datumIndices[e]?.length??0)));for(let t=0;t<l;t++){const s=o.map((e=>i[e][r.datumIndices[e]?.[t]])),l=n.aggregateFunction(s,e);l&&(a=n.groupAggregateFunction?.(l,a)??nA.extendDomain(l,a))}const c=n.finalFunction?.(a)??a;r.aggregation[s]=c,nA.extendDomain(c,t[s])}}}postProcessGroups(e){const{groupProcessors:t}=this,{columnScopes:i,columns:s,invalidData:n}=e;for(const o of t){const t=this.valueGroupIdxLookup(o),r=o.adjust()();for(const i of e.groups)r(s,t,i);for(const o of t){const t="category"===this.values[o].valueType,r=s[o],a=Zb(i[o]),l=n?.get(a),c=t?new sA:new nA;for(let e=0;e<r.length;e+=1)!0!==l?.[e]&&c.extend(r[e]);e.domain.values[o]=c.getDomain()}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:s}of this.propertyProcessors)for(const n of this.valueIdxLookup(s,i))t()(e,n)}reduceData(e){e.reduced??(e.reduced={});const{dataSources:t,keys:i}=e;for(const s of this.reducers){const n=s.reducer();let o=s.initialValue;if("grouped"===e.type)for(const t of e.groups)o=n(o,t.keys);else{const e=Zb(t.keys()),s=i.map((t=>t.get(e))).filter((e=>null!=e)),r=s.map((()=>{})),a=t.get(e);for(let t=0;t<a.length;t+=1){for(let e=0;e<r.length;e++)r[e]=s[e]?.[t];o=n(o,r)}}e.reduced[s.property]=o}}postProcessData(e){e.reduced??(e.reduced={});for(const t of this.processors)e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(){const{keys:e,values:t}=this,i=new Set;for(const c of t)if(c.scopes)for(const e of c.scopes)i.add(e);const s=new Map,n=new Map;let o=!0;const r=()=>{for(const n of Yb(e,t))"category"===n.valueType?s.set(n,new sA):(s.set(n,new nA),o&&(o=(n.scopes?.length??0)===i.size))};r();const a=this.buildAccessors(Yb(e,t)),l={value:void 0,missing:!1,valid:!1};return{dataDomain:s,processValue:(e,t,i,o)=>{let c,h;if(a.has(e.property)){try{h=a.get(e.property)(t)}catch{}c=null!=h}else c=e.property in t,h=c?t[e.property]:e.missingValue;if(null!=e.forceValue){h=c&&pw(h)?-1*e.forceValue:e.forceValue,c=!0}l.missing=!c;if(!c&&!("missingValue"in e))if("string"===typeof o){const t=e.missing.get(o)??0;e.missing.set(o,t+1)}else for(const s of o){const t=e.missing.get(s)??0;e.missing.set(s,t+1)}if(s.has(e)||r(),c&&!1===e.validation?.(h,t,i)){if(l.valid=!1,!("invalidValue"in e))return"integrated"!==this.mode&&xy.warnOnce(`invalid value of type [${typeof h}] for [${e.scopes} / ${e.id}] ignored:`,`[${h}]`),l.value=void 0,l;h=e.invalidValue}else l.valid=!0;if(e.processor){let t=n.get(e);null==t&&(t=e.processor(),n.set(e,t)),h=t(h,i)}return s.get(e)?.extend(h),l.value=h,l},initDataDomain:r,scopes:i,allScopesHaveSameDefs:o}}buildAccessors(e){const t=new Map;if(this.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const e=mA(i.property);if(null==e){xy.warnOnce("Invalid property path [%s]",i.property);continue}const s=fA(e);t.set(i.property,s)}return t}};var yA=class e{constructor(e,t){this.mode=e,this.suppressFieldDotNotation=t,this.debug=iS.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,t,i){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((s,n)=>{this.requested.push({id:e,opts:i,data:t,resolve:s,reject:n})}))}execute(e){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);const i=this.mergeRequested(t);this.debug("DataController.execute() - merged",i),this.debug.check()&&(Qy().processedData=[]);const s=[];for(const{data:n,ids:o,opts:r,resolves:a,rejects:l}of i){const i=e?.find((e=>iA(e,n,o,r)));let c,h;if(null==i)try{c=new vA(r,this.mode,this.suppressFieldDotNotation);const e=new Map(t.map((e=>[e.id,e.data])));h=c.processData(e)}catch(Ey){l.forEach((t=>t(Ey)));continue}else({dataModel:c,processedData:h}=i);s.push({opts:r,data:n,ids:o,dataModel:c,processedData:h}),this.debug.check()&&Qy("processedData").push(h),0===h?.partialValidDataCount?a.forEach((e=>e({dataModel:c,processedData:h}))):h?this.splitResult(c,h,o,a):l.forEach((e=>e(new Error("AG Charts - no processed data generated"))))}return s}validateRequests(e){const t=[];for(const[i,s]of e.entries())i>0&&s.data.length!==e[0].data.length&&!1===s.opts.groupByData&&!1===s.opts.groupByKeys?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):t.push(s);return t}mergeRequested(t){const i=[];for(const s of t){const t=i.find(e.groupMatch(s));t?t.push(s):i.push([s])}return i.map(e.mergeRequests)}splitResult(e,t,i,s){for(let n=0;n<i.length;n++){(0,s[n])({dataModel:e,processedData:t})}}static groupMatch(e){let{data:t,opts:i}=e;function s(e){return e.filter((e=>"key"===e.type)).map((e=>e.property)).join(";")}const{groupByData:n,groupByKeys:o=!1,groupByFn:r,props:a}=i,l=s(a);return e=>{let[i]=e;return(!1===n||i.data===t)&&(i.opts.groupByKeys??!1)===o&&i.opts.groupByFn===r&&s(i.opts.props)===l}}static mergeRequests(t){const i={ids:[],rejects:[],resolves:[],data:t[0].data,opts:{...t[0].opts,props:[]}},s=new Map,n=new Map;let o=0;for(const r of t){const{id:t,data:a,resolve:l,reject:c,opts:{props:h,...d}}=r;i.ids.push(t),i.rejects.push(c),i.resolves.push(l),i.data??(i.data=a),i.opts??(i.opts={...d,props:[]});for(const r of h){const l={...r,scopes:[t],data:a};let c;e.createIdsMap(t,l),e.crossScopeMergableTypes.has(l.type)?c=-1:n.has(a)?c=n.get(a):(c=o++,n.set(a,c));const h=`${l.type}-${c}-${l.groupId}`,d=s.get(h),u=d?.find((t=>e.deepEqual(t,l)));null!=d?null!=u?(null!=l.scopes&&(u.scopes??(u.scopes=[]),u.scopes.push(...l.scopes)),"key"!==u.type&&"value"!==u.type||!l.idsMap?.size||(u.idsMap??(u.idsMap=new Map),e.mergeIdsMap(l.idsMap,u.idsMap))):(i.opts.props.push(l),d.push(l)):(i.opts.props.push(l),s.set(h,[l]))}}return i}static mergeIdsMap(e,t){for(const[i,s]of e){const e=t.get(i);if(null==e)t.set(i,new Set(s));else for(const t of s)e.add(t)}}static createIdsMap(e,t){null!=t.id&&(t.idsMap??(t.idsMap=new Map),t.idsMap.has(e)?t.idsMap.get(e).add(t.id):t.idsMap.set(e,new Set([t.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(t)){if(n=t.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!e.deepEqual(t[s],i[s]))return!1;return!0}const o=Object.keys(t);if(n=o.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const n=o[s];if(!e.skipKeys.has(n)&&(!Object.hasOwn(i,n)||!e.deepEqual(t[n],i[n])))return!1}return!0}return!1}};yA.crossScopeMergableTypes=new Set(["key","group-value-processor"]),yA.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var CA=yA,bA=new class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},wA=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","topology","standalone"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"axis-option",optionsKey:"bandHighlight",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"radial-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sankey"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function SA(e){return wA.find((t=>"series"===t.type&&t.identifier===e))?.chartTypes}function xA(e){if(!function(e){return"enterprise"===e.packageType}(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=wA.find((t=>t.type===e.type&&(!("optionsKey"in t)||!("optionsKey"in e)||t.optionsKey===e.optionsKey)&&(!("contextKey"in t)||!("contextKey"in e)||t.contextKey===e.contextKey)&&t.identifier===e.identifier&&e.chartTypes.every((e=>t.chartTypes.includes(e)))));return t&&(t.useCount??(t.useCount=0),t.useCount++),null!=t}var MA=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,t){let{optionsKey:i,moduleFactory:s,themeTemplate:n}=t;this.legendMap.set(e,{optionsKey:i,moduleFactory:s}),this.themeTemplates.set(i,n)}create(e,t){const i=this.legendMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce(((e,t)=>{let[i,s]=t;return e[i]=s.optionsKey,e}),{})}},DA=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return"cartesian"===this.get(e)}isPolar(e){return"polar"===this.get(e)}isTopology(e){return"topology"===this.get(e)}isStandalone(e){return"standalone"===this.get(e)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter((e=>this.isCartesian(e)))}get polarTypes(){return this.seriesTypes.filter((e=>this.isPolar(e)))}get topologyTypes(){return this.seriesTypes.filter((e=>this.isTopology(e)))}get standaloneTypes(){return this.seriesTypes.filter((e=>this.isStandalone(e)))}},RA=class extends Map{set(e,t){return super.set(e,yS(t,this.get(e)))}},EA=new DA,IA=new DA,AA=new RA,kA=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,t){let{chartTypes:[i],moduleFactory:s,defaultAxes:n,themeTemplate:o,solo:r,stackable:a,groupable:l,stackedByDefault:c,hidden:h}=t;this.setThemeTemplate(e,o),this.seriesMap.set(e,{moduleFactory:s,defaultAxes:n,solo:r,stackable:a,groupable:l,stackedByDefault:c}),EA.set(e,i),h||IA.set(e,i)}create(e,t){const i=this.seriesMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}cloneDefaultAxes(e){const t=this.seriesMap.get(e)?.defaultAxes;return null==t?null:{axes:TM(t)}}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,yS(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}isSolo(e){return this.seriesMap.get(e)?.solo??!1}isGroupable(e){return this.seriesMap.get(e)?.groupable??!1}isStackable(e){return this.seriesMap.get(e)?.stackable??!1}isStackedByDefault(e){return this.seriesMap.get(e)?.stackedByDefault??!1}},TA=class e{constructor(e){this.chart=e}subscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP,i=this.get(t);return i||(i={members:new Set},e.chartsGroups.set(t,i)),i.members.add(this.chart),this}unsubscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;const i=this.get(t);return i?.members.delete(this.chart),delete i?.domains?.x?.sources?.[this.chart.id],delete i?.domains?.y?.sources?.[this.chart.id],this}getChart(){return this.chart}getGroupState(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.get(t)}getGroupMembers(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;const i=this.get(t);return i?Array.from(i.members):[]}getGroupSiblings(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.getGroupMembers(t).filter((e=>e!==this.chart))}getGroupSyncMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.getGroupMembers(t).some((e=>e.series.length>1))?"multi-series":"single-series"}get(t){return e.chartsGroups.get(t)}};TA.chartsGroups=new Map,TA.DEFAULT_GROUP=Symbol("sync-group-default");var LA=TA,PA=class extends vx{constructor(){super(...arguments),this.enabled=!1}};$w([fx],PA.prototype,"enabled",2),$w([fx],PA.prototype,"tabIndex",2);var FA={};Uw(FA,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>NA,fromToMotion:()=>OA,staticFromToMotion:()=>BA});var NA={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function OA(e,t,i,s,n,o,r){const{fromFn:a,toFn:l,applyFn:c=((e,t)=>e.setProperties(t))}=n,{nodes:h,selections:d}=YE(s),u=(s,n)=>{let h,d=0,u=0;for(const p of n){const g=s[d]===p,m={last:u>=n.length-1,lastLive:d>=s.length-1,prev:n[u-1],prevFromProps:h,prevLive:s[d-1],next:n[u+1],nextLive:s[d+(g?1:0)]},f=`${e}_${t}_${p.id}`;i.stopByAnimationId(f);let v="unknown";g?o&&r&&(v=GA(p,p.datum,o,r)):v="removed",p.transitionOut="removed"===v;const{phase:y,start:C,finish:b,delay:w,duration:S,...x}=a(p,p.datum,v,m),{phase:M,start:D,finish:R,delay:E,duration:I,...A}=l(p,p.datum,v,m),k=null==b;i.animate({id:f,groupId:e,phase:y??M??"update",duration:S??I,delay:w??E,from:x,to:A,ease:GE,collapsable:k,onPlay:()=>{const e={...C,...D,...x};c(p,e,"start")},onUpdate(e){c(p,e,"update")},onStop:()=>{const e={...C,...D,...x,...A,...b,...R};c(p,e,"end")}}),g&&d++,u++,h=x}};let p=0;for(const g of d){const s=g.nodes();u(s.filter((e=>!g.isGarbage(e))),s),i.animate({id:`${e}_${t}_selection_${p}`,groupId:e,phase:"end",from:0,to:1,ease:GE,onStop(){g.cleanup()}}),p++}u(h,h)}function BA(e,t,i,s,n,o,r){const{nodes:a,selections:l}=YE(s),{start:c,finish:h,phase:d}=r;i.animate({id:`${e}_${t}`,groupId:e,phase:d??"update",from:n,to:o,ease:GE,onPlay:()=>{if(c){for(const e of a)e.setProperties(c);for(const e of l)for(const t of e.nodes())t.setProperties(c)}},onUpdate(e){for(const t of a)t.setProperties(e);for(const t of l)for(const i of t.nodes())i.setProperties(e)},onStop:()=>{for(const e of a)e.setProperties({...o,...h});for(const e of l){for(const t of e.nodes())t.setProperties({...o,...h});e.cleanup()}}})}function GA(e,t,i,s){const n=i(e,t);return s.added.has(n)?"added":s.removed.has(n)?"removed":null==e.previousDatum&&null!=e.datum?"added":null!=e.previousDatum&&null==e.datum?"removed":"updated"}var zA={};function jA(e,t){const{nodes:i,selections:s}=YE(e);for(const n of s){for(const e of n.nodes()){const i=t(e,e.datum);e.setProperties(i)}n.cleanup()}for(const n of i){const e=t(n,n.datum);n.setProperties(e)}}Uw(zA,{resetMotion:()=>jA});var VA=class e{constructor(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=iS.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(VS,t)?()=>new t:t}static select(t,i){return new e(t,i,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(e,t){const i=[],s=e=>{if(t(e)&&i.push(e),e instanceof gM)for(const t of e.children())s(t)};return s(e),i}static selectByClass(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return e.selectAll(t,(e=>s.some((t=>e instanceof t))))}static selectByTag(t,i){return e.selectAll(t,(e=>e.tag===i))}createNode(e,t,i){const s=this.nodeFactory(e);return s.datum=e,t?.(s),null==i?this._nodes.push(s):this._nodes.splice(i,0,s),this.parentNode.appendChild(s),s}update(e,t,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",e),i){const s=new Map,n=new Map;for(let t=0;t<e.length;t++){let o=i(e[t]);if(s.has(o)){const e=(n.get(o)??0)+1;n.set(o,e),o=`${o}:${e}`}s.set(o,t)}for(const[t,i]of this._nodesMap.entries()){const n=s.get(i);null==n?this.garbageBin.add(t):(t.datum=e[n],this.garbageBin.delete(t),s.delete(i))}for(const[i,o]of s.entries()){const s=e[o];this._nodesMap.set(this.createNode(s,t,o),i)}}else{const i=Math.max(e.length,this.data.length);for(let s=0;s<i;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],t):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((e=>!this.garbageBin.has(e)||(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1)))),this}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}each(e){for(const t of this._nodes.entries())e(t[1],t[1].datum,t[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const t=this._nodes[e];yield{node:t,datum:t.datum,index:e}}}select(t){return e.selectAll(this.parentNode,t)}selectByClass(t){return e.selectByClass(this.parentNode,t)}selectByTag(t){return e.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}get length(){return this._nodes.length}},HA=class extends tM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.fill=void 0,this.strokeWidth=1}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new eS(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t)}distanceSquared(e,t){const{x1:i,y1:s,x2:n,y2:o}=this;return Dx(e,t,i,s,n,o,1/0)}render(e){const{ctx:t,devicePixelRatio:i}=e;let{x1:s,y1:n,x2:o,y2:r}=this;if(s===o){const{strokeWidth:e}=this,t=Math.round(s*i)/i+Math.trunc(e*i)%2/(2*i);s=t,o=t}else if(n===r){const{strokeWidth:e}=this,t=Math.round(n*i)/i+Math.trunc(e*i)%2/(2*i);n=t,r=t}t.beginPath(),t.moveTo(s,n),t.lineTo(o,r),this.fillStroke(t),this.fillShadow?.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=Jy("line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};HA.className="Line",$w([LS()],HA.prototype,"x1",2),$w([LS()],HA.prototype,"y1",2),$w([LS()],HA.prototype,"x2",2),$w([LS()],HA.prototype,"y2",2);var WA="color: green",_A="color: grey";function UA(){return uS((()=>{}))}function $A(e,t){const i=gS(t);if(0===i.length)return;const s=mS(e);for(const n of i)n in s&&(t[n]=s[n])}var KA=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},YA=class e extends KA{constructor(e,t,i){super(),this.defaultState=e,this.states=t,this.enterEach=i,this.debug=iS.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,WA)}transition(t,i){if(!this.transitionChild(t,i)||this.state===e.child||this.state===e.parent)return;const s=this.state,n=this.states[this.state];let o=n[t];const r=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(o))o=o.find((e=>{if(!e.guard)return!0;const t=e.guard(i);return t||this.debug(`${r} (guarded)`,e.target,_A),t}));else if("object"===typeof o&&!(o instanceof e)&&o.guard&&!o.guard(i))return void this.debug(`${r} (guarded)`,o.target,_A);if(!o)return void this.debug(`${r} ${this.state}`,_A);const a=this.getDestinationState(o),l=a===this.state?void 0:n.onExit;this.debug(`${r} ${a}`,WA),this.state=a,"function"===typeof o?o(i):"object"!==typeof o||o instanceof e||o.action?.(i),l?.(),this.enterEach?.(s,a),a!==s&&a!==e.child&&a!==e.parent&&this.states[a].onEnter?.(s,i)}transitionAsync(e,t){setTimeout((()=>{this.transition(e,t)}),0)}is(t){return this.state===e.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){return this.state!==e.child||!this.childState||($A(this,this.childState),this.childState.transition(t,i),!this.childState.is(e.parent)||(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,WA),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1))}getDestinationState(t){let i=this.state;return"string"===typeof t?i=t:t instanceof e?(this.childState=t,this.childState.parent=this,i=e.child):"object"===typeof t&&(t.target instanceof e?(this.childState=t.target,this.childState.parent=this,i=e.child):null!=t.target&&(i=t.target)),i}};YA.child="__child",YA.parent="__parent";var ZA=YA,qA=class extends KA{constructor(){super();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.stateMachines=t;for(const s of t)s.parent=this}transition(e,t){for(const i of this.stateMachines)$A(this,i),i.transition(e,t)}transitionAsync(e,t){for(const i of this.stateMachines)$A(this,i),i.transitionAsync(e,t)}},QA=1e3,XA=60*QA,JA=60*XA,ek=24*JA,tk=7*ek,ik=30*ek,sk=365*ek,nk=(new Date).getTimezoneOffset()*XA,ok={millisecond:{milliseconds:1,hierarchy:"day",encode:e=>e.getTime(),decode:e=>new Date(e)},second:{milliseconds:QA,hierarchy:"day",encode(e,t){const i=t?0:nk;return Math.floor((e.getTime()-i)/QA)},decode:(e,t)=>new Date((t?0:nk)+e*QA)},minute:{milliseconds:XA,hierarchy:"day",encode(e,t){const i=t?0:nk;return Math.floor((e.getTime()-i)/XA)},decode:(e,t)=>new Date((t?0:nk)+e*XA)},hour:{milliseconds:JA,hierarchy:"day",encode(e,t){const i=t?0:nk;return Math.floor((e.getTime()-i)/JA)},decode:(e,t)=>new Date((t?0:nk)+e*JA)},day:{milliseconds:ek,hierarchy:"month",encode(e,t){const i=t?0:e.getTimezoneOffset()*XA;return Math.floor((e.getTime()-i)/ek)},decode(e,t){let i;return t?(i=new Date(0),i.setUTCDate(i.getUTCDate()+e),i.setUTCHours(0,0,0,0)):(i=new Date(1970,0,1),i.setDate(i.getDate()+e)),i}},month:{milliseconds:ik,hierarchy:"year",encode:(e,t)=>t?12*e.getUTCFullYear()+e.getUTCMonth():12*e.getFullYear()+e.getMonth(),decode(e,t){if(t){const t=Math.floor(e/12),i=e-12*t;return new Date(Date.UTC(t,i,1))}{const t=Math.floor(e/12);return new Date(t,e-12*t,1)}}},year:{milliseconds:sk,hierarchy:void 0,encode:(e,t)=>t?e.getUTCFullYear():e.getFullYear(),decode(e,t){let i;return t?(i=new Date,i.setUTCFullYear(e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)):i=new Date(e,0,1,0,0,0,0),i}}};function rk(e){return"string"===typeof e?{unit:e,step:1,epoch:void 0,utc:!1}:{unit:e.unit,step:e.step??1,epoch:e.epoch,utc:e.utc??!1}}function ak(e,t,i,s){if(null==i)return 0;const n=ok[e];return Math.floor(n.encode(new Date(i),s))%t}function lk(e,t,i,s,n){const o=ok[t];return Math.floor((o.encode(new Date(e),s)-n)/i)}function ck(e,t,i,s,n){return ok[t].decode(e*i+n,s)}function hk(e,t,i,s,n){return ck(lk(new Date(e),t,i,s,n),t,i,s,n)}function dk(e,t,i,s,n){return ck(lk(new Date(Number(e)-1),t,i,s,n)+1,t,i,s,n)}function uk(e,t){const{unit:i,step:s,epoch:n,utc:o}=rk(e);return hk(t,i,s,o,ak(i,s,n,o))}function pk(e,t){const{unit:i,step:s,epoch:n,utc:o}=rk(e);return dk(t,i,s,o,ak(i,s,n,o))}function gk(e,t){const{unit:i,step:s,epoch:n,utc:o}=rk(e),r=ak(i,s,n,o);return ck(lk(dk(t,i,s,o,r),i,s,o,r)-1,i,s,o,r)}function mk(e,t){const{unit:i,step:s,epoch:n,utc:o}=rk(e),r=ak(i,s,n,o);return ck(lk(hk(t,i,s,o,r),i,s,o,r)+1,i,s,o,r)}function fk(e,t,i){if(e.valueOf()>t.valueOf()&&([e,t]=[t,e],null!=i&&(i=[1-i[1],1-i[0]])),null!=i){const s=t.valueOf()-e.valueOf(),n=e.valueOf();e=new Date(n+i[0]*s),t=new Date(n+i[1]*s)}return[new Date(e),new Date(t)]}function vk(e,t,i){let{extend:s=!1,visibleRange:n=[0,1],limit:o,defaultAlignment:r="start"}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=rk(e),{unit:l,step:c,utc:h}=a;let d;d=null!=a.epoch?a.epoch:"interval"===r?void 0:t.valueOf()>i.valueOf()?i:t;const u=ak(a.unit,a.step,d,a.utc);let[p,g]=fk(t,i,n);p=s?hk(p,l,c,h,u):dk(p,l,c,h,u),g=s?dk(g,l,c,h,u):hk(g,l,c,h,u);const m=lk(p,l,c,h,u);let f=lk(g,l,c,h,u);return null!=o&&f-m>o&&(f=m+o),{range:[m,f],unit:l,step:c,utc:h,offset:u}}function yk(e,t,i,s){const{range:[n,o]}=vk(e,t,i,s);return Math.abs(o-n)}function Ck(e,t,i,s){const{range:[n,o],unit:r,step:a,utc:l,offset:c}=vk(e,t,i,s),h=[];for(let d=n;d<=o;d+=1){const e=ck(d,r,a,l,c);h.push(e)}return h}function bk(e,t,i){let{extend:s,visibleRange:n,limit:o,defaultAlignment:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{range:[a]}=vk(e,t,i,{extend:s,visibleRange:n,limit:o,defaultAlignment:r}),{range:[l]}=vk(e,t,i,{extend:s,limit:o,defaultAlignment:r});return a-l}function wk(e){return"string"===typeof e?e:e.unit}function Sk(e){return"string"===typeof e?1:e.step??1}function xk(e){return"string"===typeof e?void 0:e.epoch}function Mk(e){return ok[wk(e)].hierarchy}function Dk(e){return Sk(e)*ok[wk(e)].milliseconds}var Rk=class{constructor(){this.enabled=!0}};$w([fx],Rk.prototype,"enabled",2),$w([fx],Rk.prototype,"stroke",2),$w([fx],Rk.prototype,"strokeWidth",2),$w([fx],Rk.prototype,"strokeOpacity",2);var Ek=class extends vx{constructor(){super(...arguments),this.enabled=!0,this.border=new Rk,this._cachedFormatter=void 0}formatValue(e,t,i,s){const{formatter:n,format:o}=this;let r;if(null!=n&&(r??(r=e(n,s))),null!=o){let e=this._cachedFormatter;null!=e&&e.type===t&&e.format===o||(e={type:t,format:o,formatter:PE.getFormatter(t,o)},this._cachedFormatter=e),r??(r=e.formatter?.(i))}return null!=r?String(r):void 0}};function Ik(e){const{enabled:t=!1,stroke:i}=e?.border??{},s=null!=e?.fill||t&&null!=i?e?.padding:null;if(null==s)return{bottom:0,left:0,right:0,top:0};if("number"===typeof s)return{bottom:s,left:s,right:s,top:s};{const{bottom:e=0,left:t=0,right:i=0,top:n=0}=s;return{bottom:e,left:t,right:i,top:n}}}function Ak(e,t){if(null!=e)return"string"===typeof e?e:lC(e)&&null!=t?e[wk(t)]:void 0}$w([fx],Ek.prototype,"enabled",2),$w([fx],Ek.prototype,"border",2),$w([fx],Ek.prototype,"color",2),$w([fx],Ek.prototype,"cornerRadius",2),$w([fx],Ek.prototype,"fill",2),$w([fx],Ek.prototype,"fillOpacity",2),$w([fx],Ek.prototype,"fontStyle",2),$w([fx],Ek.prototype,"fontWeight",2),$w([fx],Ek.prototype,"fontSize",2),$w([fx],Ek.prototype,"fontFamily",2),$w([fx],Ek.prototype,"formatter",2),$w([fx],Ek.prototype,"format",2),$w([fx],Ek.prototype,"padding",2),$w([fx],Ek.prototype,"itemStyler",2);var kk=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){const t=hC(e)?e:e.optionsKey;this.moduleMap.get(t)?.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){return this.moduleMap.get(hC(e)?e:e.optionsKey)?.moduleInstance}isEnabled(e){return this.moduleMap.has(hC(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),((t,i)=>e(t.moduleInstance,i)))}destroy(){for(const e of this.moduleMap.keys())this.moduleMap.get(e)?.moduleInstance.destroy();this.moduleMap.clear()}},Tk=class extends tM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.strokeWidth=1}computeBBox(){return new eS(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){const{ctx:t}=e;let{x1:i,y1:s,x2:n,y2:o}=this;i=this.align(i),s=this.align(s),n=this.align(n),o=this.align(o);const{fill:r,horizontal:a}=this,{globalAlpha:l}=t;null!=r&&(this.applyFillAndAlpha(t),t.beginPath(),t.moveTo(i,s),t.lineTo(n,s),t.lineTo(n,o),t.lineTo(i,o),t.closePath(),t.fill(),t.globalAlpha=l);const{stroke:c,strokeWidth:h,startLine:d,endLine:u}=this;if(!(!d&&!u||!c||!h)){const{lineDash:e,lineDashOffset:r,lineCap:c,lineJoin:p}=this;this.applyStrokeAndAlpha(t),t.lineWidth=h,e&&t.setLineDash([...e]),r&&(t.lineDashOffset=r),c&&(t.lineCap=c),p&&(t.lineJoin=p),t.beginPath(),d&&(t.moveTo(i,s),a?t.lineTo(i,o):t.lineTo(n,s)),u&&(t.moveTo(n,o),a?t.lineTo(n,s):t.lineTo(i,o)),t.stroke(),t.globalAlpha=l}this.fillShadow?.markClean(),super.render(e)}};function Lk(e){return uC(e)||nC(e)||function(e){return null!=e&&Object.hasOwn(e,"valueOf")&&uC(e.valueOf())}(e)}function Pk(e){return function(e){return null!=e&&Object.hasOwn(e,"toString")&&hC(e.toString())}(e)&&Object.hasOwn(e,"id")?e.id:e}function Fk(e){switch(e.type){case"line":return e.value;case"range":return e.range}}function Nk(e,t){const i=Fk(e);if(null==i)return!1;const s=MI.is(t)||II.is(t),n=e=>function(e,t){return null!=e&&(!t||Lk(e))}(e,s)&&!isNaN(t.convert(e,{clamp:!0}));if("range"===e.type){const[e,t]=i;return n(e)&&n(t)}return n(i)}Tk.className="Range",$w([LS()],Tk.prototype,"x1",2),$w([LS()],Tk.prototype,"y1",2),$w([LS()],Tk.prototype,"x2",2),$w([LS()],Tk.prototype,"y2",2),$w([LS()],Tk.prototype,"startLine",2),$w([LS()],Tk.prototype,"endLine",2),$w([LS()],Tk.prototype,"horizontal",2);var Ok={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},Bk={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},Gk={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},zk={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},jk=class extends vx{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};$w([fx],jk.prototype,"enabled",2),$w([fx],jk.prototype,"text",2),$w([fx],jk.prototype,"fontStyle",2),$w([fx],jk.prototype,"fontWeight",2),$w([fx],jk.prototype,"fontSize",2),$w([fx],jk.prototype,"fontFamily",2),$w([fx],jk.prototype,"padding",2),$w([fx],jk.prototype,"color",2),$w([fx],jk.prototype,"position",2),$w([fx],jk.prototype,"rotation",2),$w([fx],jk.prototype,"parallel",2);var Vk=class extends vx{constructor(){super(),this.id=Ew(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new jk,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new gM({name:this.id}),this.lineGroup=new gM({name:this.id}),this.labelGroup=new gM({name:this.id}),this.crossLineRange=new Tk,this.crossLineLabel=new TD,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(e){const{enabled:t,type:i,data:s,scale:n}=this;if(!n||!t||!e||!Nk(this,n)||null==s)return this.rangeGroup.visible=!1,this.lineGroup.visible=!1,void(this.labelGroup.visible=!1);this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const o="range"===i;o!==this._isRange&&(o?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=o}calculateLayout(e){if(this.data=void 0,!e)return;const{type:t,range:i,value:s,scale:n,clippedRange:o,strokeWidth:r=0}=this;if(!n)return;const a=n.bandwidth??0,l=n.step??0,c=n instanceof EI?(l-a)/2:0;let h,d,u,p,[g,m]=CI(o);if(g-=a,m+=a,"line"===t){const e=a/2;if(h=n.convert(s)+e,d=NaN,u=n.convert(s,{clamp:!0})+e,p=NaN,u>=m||u<=g)return}else{if(!i)return;{const[e,t]=i,[s,o]=OI(e,t);if(h=n.convert(e,{alignment:s}),d=n.convert(t,{alignment:o}),u=n.convert(e,{clamp:!0,alignment:s}),p=n.convert(t,{clamp:!0,alignment:o}),u>p&&([u,p]=[p,u],[h,d]=[d,h]),u>=m||p<=g)return;Number.isFinite(h)&&(u-=c),Number.isFinite(d)&&(d+=a,p+=a+c)}}u=yI(u,o),p=yI(p,o),h-c>=u&&(h-=c),d+c<=p&&(d+=c),this.startLine=r>0&&h>=u&&h<=u+c,this.endLine=r>0&&d>=p-a-c&&d<=p,this.data=[u,p],!1!==this.label.enabled&&this.label.text}updateNodes(){const{position:e,data:[t,i]=[0,0],gridLength:s}=this,n=Number.isFinite(i)?i-t:0;let o;switch(e){case"top":case"bottom":o=new eS(t,"top"===e?0:-s,n,s);break;case"left":case"right":o=new eS("left"===e?0:-s,t,s,n)}this.updateRangeNode(o);const{label:r}=this;!1!==r.enabled&&r.text&&(this.updateLabel(),this.positionLabel(o))}updateRangeNode(e){const{type:t,position:i,crossLineRange:s,startLine:n,endLine:o,fill:r,fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:h,lineDash:d}=this;s.x1=e.x,s.x2=e.x+e.width,s.y1=e.y,s.y2=e.y+e.height,s.horizontal="top"===i||"bottom"===i,s.startLine=n,s.endLine=o,s.fill="range"===t?r:void 0,s.fillOpacity=a??1,s.stroke=l,s.strokeWidth=c??1,s.strokeOpacity=h??1,s.lineDash=d}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}get anchor(){const e="left"===this.position||"right"===this.position,t="range"===this.type,{position:i=this.defaultLabelPosition}=this.label;if(t){return(e?Gk:zk)[i]}return(e?Ok:Bk)[i]}positionLabel(e){const{crossLineLabel:t,label:i,anchor:s}=this;t.rotation=YS(i.rotation??0),t.textBaseline="middle",t.textAlign="center";const n=t.getBBox();if(!n)return;const{width:o,height:r}=n,a=i.padding+o/2,l=i.padding+r/2,c=e.x+e.width*(s.rangeH+1)/2-a*s.labelH,h=e.y+e.height*(s.rangeV+1)/2-l*s.labelV;t.x=c,t.y=h,t.rotationCenterX=c,t.rotationCenterY=h}computeLabelSize(){const{label:e}=this;if(!1===e.enabled||!e.text)return;const t=new TD;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text,t.rotation=YS(e.rotation??0),t.textBaseline="middle",t.textAlign="center";const i=t.getBBox();if(!i)return;const{width:s,height:n}=i;return{width:s,height:n}}calculatePadding(e){const{label:t,anchor:i}=this,s=this.computeLabelSize();if(!s)return;const{width:n,height:o}=s,r=t.padding+n,a=t.padding+o,l="left"===this.position||"right"===this.position;l&&(-1===i.rangeH&&1===i.labelH?e.left=Math.max(e.left??0,r):1===i.rangeH&&-1===i.labelH&&(e.right=Math.max(e.right??0,r))),l||(-1===i.rangeV&&1===i.labelV?e.top=Math.max(e.top??0,a):1===i.rangeV&&-1===i.labelV&&(e.bottom=Math.max(e.bottom??0,a)))}};Vk.className="CrossLine",$w([fx],Vk.prototype,"enabled",2),$w([fx],Vk.prototype,"type",2),$w([fx],Vk.prototype,"range",2),$w([fx],Vk.prototype,"value",2),$w([fx],Vk.prototype,"defaultColorRange",2),$w([fx],Vk.prototype,"fill",2),$w([fx],Vk.prototype,"fillOpacity",2),$w([fx],Vk.prototype,"stroke",2),$w([fx],Vk.prototype,"strokeWidth",2),$w([fx],Vk.prototype,"strokeOpacity",2),$w([fx],Vk.prototype,"lineDash",2),$w([fx],Vk.prototype,"label",2);var Hk=class{constructor(){this.enabled=!0,this.width=1,this.style=[{fill:void 0,fillOpacity:1,stroke:void 0,strokeWidth:void 0,lineDash:[]}]}};$w([fx],Hk.prototype,"enabled",2),$w([fx],Hk.prototype,"width",2),$w([fx],Hk.prototype,"style",2);var Wk=class extends vx{};$w([fx],Wk.prototype,"placement",2),$w([fx],Wk.prototype,"step",2),$w([fx],Wk.prototype,"values",2),$w([fx],Wk.prototype,"minSpacing",2),$w([fx],Wk.prototype,"maxSpacing",2);var _k=class extends vx{constructor(){super(...arguments),this.enabled=!0,this.border=new Rk,this.wrapping="never",this.truncate=!1,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this._formatters={"component:year":void 0,"component:month":void 0,"component:day":void 0,"component:none":void 0,"long:year":void 0,"long:month":void 0,"long:day":void 0,"long:none":void 0}}getSideFlag(){return this.mirrored?1:-1}formatValue(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{dateStyle:"long",truncateDate:void 0};const{formatter:n,format:o}=this,{type:r,value:a,domain:l,boundSeries:c}=t,h="number"===t.type?t.fractionDigits:void 0,d="date"===t.type?t.unit:void 0;let u;if(null!=n){u=e(n,{value:a,index:i,domain:l,fractionDigits:h,unit:d,step:"date"===t.type?t.step:void 0,boundSeries:c})}if(null!=o&&null==u){const{specifier:e,dateStyle:t,truncateDate:i}=s,n=`${t}:${i??"none"}`;let l=this._formatters[n];const c=PE.mergeSpecifiers(e,o);null!=l&&l.type===r&&l.unit===d&&fS(l.mergedFormat,c)||(l={type:r,mergedFormat:c,unit:d,formatter:PE.getFormatter(r,c,d,t,s)},this._formatters[n]=l),u=l.formatter?.(a,h)}return null!=u?String(u):void 0}};$w([fx],_k.prototype,"enabled",2),$w([fx],_k.prototype,"border",2),$w([fx],_k.prototype,"cornerRadius",2),$w([fx],_k.prototype,"fill",2),$w([fx],_k.prototype,"fillOpacity",2),$w([fx],_k.prototype,"fontStyle",2),$w([fx],_k.prototype,"fontWeight",2),$w([fx],_k.prototype,"fontSize",2),$w([fx],_k.prototype,"fontFamily",2),$w([fx],_k.prototype,"wrapping",2),$w([fx],_k.prototype,"truncate",2),$w([fx],_k.prototype,"spacing",2),$w([fx],_k.prototype,"minSpacing",2),$w([fx],_k.prototype,"color",2),$w([fx],_k.prototype,"rotation",2),$w([fx],_k.prototype,"avoidCollisions",2),$w([fx],_k.prototype,"mirrored",2),$w([fx],_k.prototype,"padding",2),$w([fx],_k.prototype,"parallel",2),$w([fx],_k.prototype,"itemStyler",2),$w([fx],_k.prototype,"formatter",2),$w([fx],_k.prototype,"format",2);var Uk=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};$w([fx],Uk.prototype,"enabled",2),$w([fx],Uk.prototype,"width",2),$w([fx],Uk.prototype,"stroke",2);var $k=class extends vx{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};$w([fx],$k.prototype,"enabled",2),$w([fx],$k.prototype,"width",2),$w([fx],$k.prototype,"size",2),$w([fx],$k.prototype,"stroke",2);var Kk=class extends vx{constructor(){super(...arguments),this.caption=new HD,this.enabled=!1,this.spacing=HD.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};$w([fx],Kk.prototype,"enabled",2),$w([fx],Kk.prototype,"text",2),$w([fx],Kk.prototype,"spacing",2),$w([fx],Kk.prototype,"fontStyle",2),$w([fx],Kk.prototype,"fontWeight",2),$w([fx],Kk.prototype,"fontSize",2),$w([fx],Kk.prototype,"fontFamily",2),$w([fx],Kk.prototype,"color",2),$w([fx],Kk.prototype,"wrapping",2),$w([fx],Kk.prototype,"formatter",2);var Yk=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(Yk||{});function Zk(e){const[t,i]=CI(e.range),s=Math.floor(t),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}var qk=2*Math.PI,Qk=qk/2;function Xk(e){const{min:t,max:i}=e,s=e=>e<t||e>i,n={fromFn(e,t,i){const n=e.previousDatum??t;let{x:o,y:r,rotationCenterX:a,rotationCenterY:l,rotation:c}=n,h=e.opacity;return"removed"===i||s(n.y)?c=t.rotation:("added"===i||s(e.datum.y))&&(({x:o,y:r,rotationCenterX:a,rotationCenterY:l,rotation:c}=t),h=0),{x:o,y:r,rotationCenterX:a,rotationCenterY:l,rotation:c,opacity:h,phase:NA[i]}},toFn(e,t,i){const{x:s,y:n,rotationCenterX:o,rotationCenterY:r}=t;let a=0,l=1;var c,h;return"added"===i?a=t.rotation:"removed"===i?(l=0,a=t.rotation):(c=e.previousDatum?.rotation??t.rotation,h=t.rotation,a=Math.abs(h-c)<Qk?h:c>h?h+qk:h-qk),{x:s,y:n,rotationCenterX:o,rotationCenterY:r,rotation:a,opacity:l,finish:{rotation:t.rotation}}}};return{tick:{fromFn(e,t,i){let{x1:n,x2:o,y1:r,y2:a}=e,l=e.opacity;return("added"===i||s(t.offset))&&(({x1:n,x2:o,y1:r,y2:a}=t),l=0),{x1:n,x2:o,y1:r,y2:a,opacity:l,phase:NA[i]}},toFn(e,t,i){const{x1:s,x2:n,y1:o,y2:r}=t;let a=1;return"removed"===i&&(a=0),{x1:s,x2:n,y1:o,y2:r,opacity:a}},applyFn(e,t){e.setProperties(t),e.visible=!s(e.y)}},line:{fromFn(e,t){const{x1:i,x2:s,y1:n,y2:o}=e.previousDatum??t;return{x1:i,x2:s,y1:n,y2:o,phase:NA.updated}},toFn(e,t){const{x1:i,x2:s,y1:n,y2:o}=t;return{x1:i,x2:s,y1:n,y2:o}}},label:n,group:{fromFn(e,t){const{translationX:i,translationY:s}=e;return{translationX:i,translationY:s,phase:NA.updated}},toFn(e,t){const{translationX:i,translationY:s}=t;return{translationX:i,translationY:s}}}}}function Jk(){return(e,t)=>({translationX:t.translationX,translationY:t.translationY})}function eT(){return(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})}function tT(){return(e,t)=>{const{x1:i,x2:s,y1:n,y2:o}=t;return{x1:i,x2:s,y1:n,y2:o}}}function iT(){return(e,t)=>{const{x1:i,x2:s,y1:n,y2:o}=t;return{x:i,y:n,width:s-i,height:o-n}}}var sT=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(sT||{});function nT(e,t){return e.domain===t.domain&&e.rangeExtent===t.rangeExtent&&e.nice===t.nice&&e.gridLength===t.gridLength&&e.visibleRange[0]===t.visibleRange[0]&&e.visibleRange[1]===t.visibleRange[1]&&e.initialPrimaryTickCount?.unzoomed===t.initialPrimaryTickCount?.unzoomed&&e.initialPrimaryTickCount?.zoomed===t.initialPrimaryTickCount?.zoomed}var oT=class e{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id=Ew(this),this._crossLines=[],this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new Wk,this.dataDomain={domain:[],clipped:!1},this.title=new Kk,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new gM({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new yM({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new yM({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new gM({name:`${this.id}-Labels`,zIndex:11}),this.gridGroup=new vM({name:`${this.id}-Axis-grid`,zIndex:2}),this.gridFillGroup=this.gridGroup.appendChild(new gM({name:`${this.id}-gridFills`})),this.gridLineGroup=this.gridGroup.appendChild(new gM({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new yM({name:`${this.id}-CrossLines-Range`,zIndex:6}),this.crossLineLineGroup=new yM({name:`${this.id}-CrossLines-Line`,zIndex:10}),this.crossLineLabelGroup=new yM({name:`${this.id}-CrossLines-Label`,zIndex:15}),this.tickLabelGroupSelection=VA.select(this.tickLabelGroup,TD,!1),this.line=new Uk,this.tick=new $k,this.gridLine=new Hk,this.label=this.createLabel(),this.defaultTickMinSpacing=e.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.cleanup=new hw,this.isHovering=!1,this.range=[0,1],this.visibleRange=[0,1],this.animatable=!0,this.tickLayout=void 0,this.formatterBoundSeries=new cw((()=>{const{direction:e,boundSeries:t}=this;return IS(t.flatMap((t=>t.getFormatterContext(e))))})),this.moduleMap=new kk,this.range=this.scale.range.slice(),this.crossLines.forEach((e=>this.initCrossLine(e))),this.cleanup.register(this.moduleCtx.widgets.containerWidget.addListener("mousemove",(e=>this.onMouseMove(e))))}set crossLines(e){const{CrossLineConstructor:t}=this.constructor;this._crossLines.forEach((e=>this.detachCrossLine(e))),this._crossLines=e.map((e=>{const i=new t;return i.set(e),i})),this._crossLines.forEach((e=>{this.attachCrossLine(e),this.initCrossLine(e)}))}get crossLines(){return this._crossLines}get type(){return this.constructor.type??""}get primaryLabel(){}get primaryTick(){}isCategoryLike(){return!1}resetAnimation(e){}onMouseMove(e){const t=this.tickLabelGroup.pickNode(e.currentX,e.currentY),i=t?.datum,{textUntruncated:s}=i??{};null!=s?(this.moduleCtx.tooltipManager.updateTooltip(this.id,{canvasX:e.currentX,canvasY:e.currentY,showArrow:!1},[{type:"structured",title:s}]),this.isHovering=!0):this.isHovering&&(this.moduleCtx.tooltipManager.removeTooltip(this.id),this.isHovering=!1)}attachCrossLine(e){this.crossLineRangeGroup.appendChild(e.rangeGroup),this.crossLineLineGroup.appendChild(e.lineGroup),this.crossLineLabelGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineRangeGroup.removeChild(e.rangeGroup),this.crossLineLineGroup.removeChild(e.lineGroup),this.crossLineLabelGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.cleanup.flush()}setScaleRange(e){const{range:t,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),n=s*e[0],o=t[0]-n;i.range=[o,o+s]}updateScale(){const{range:[e,t]}=this;this.setScaleRange(this.visibleRange),this.crossLines.forEach((i=>{i.clippedRange=[e,t]}))}setCrossLinesVisible(e){this.crossLineRangeGroup.visible=e,this.crossLineLineGroup.visible=e,this.crossLineLabelGroup.visible=e}attachAxis(e){e.gridNode.appendChild(this.gridGroup),e.axisNode.appendChild(this.axisGroup),e.labelNode.appendChild(this.labelGroup),e.crossLineRangeNode.appendChild(this.crossLineRangeGroup),e.crossLineLineNode.appendChild(this.crossLineLineGroup),e.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(e){e.gridNode.removeChild(this.gridGroup),e.axisNode.removeChild(this.axisGroup),e.labelNode.removeChild(this.labelGroup),e.crossLineRangeNode.removeChild(this.crossLineRangeGroup),e.crossLineLineNode.removeChild(this.crossLineLineGroup),e.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(e){this.labelGroup.append(e)}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[i,s]=CI(this.range);return e>=i-t&&e<=s+t}getRangeOverflow(e){const{range:t,visibleRange:i}=this,s=(t[1]-t[0])/(i[1]-i[0]),[n,o]=CI([t[0]-s*i[0],t[0]-s*i[0]+s]);return e<n?e-n:e>o?e-o:0}createDatumFormatter(e,t){}onGridLengthChange(e,t){t^e&&this.onGridVisibilityChange(),this.crossLines.forEach((e=>this.initCrossLine(e)))}onGridVisibilityChange(){}createLabel(){return new _k}update(){this.formatterBoundSeries.clear(),this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.label;const s={border:i.border,color:i.color,cornerRadius:i.cornerRadius,fill:i.fill,fillOpacity:i.fillOpacity,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,padding:i.padding,spacing:i.spacing};let n;i.itemStyler&&(n=this.cachedCallWithContext(i.itemStyler,{...e,...s}));const o=yS(n,t,s);return{border:o.border,color:o.color,cornerRadius:o.cornerRadius,fill:o.fill,fillOpacity:o.fillOpacity,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,padding:o.padding,spacing:o.spacing}}getTickSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tick;return e.enabled?e.size:0}processData(){this.invalidateLayoutCache();const{includeInvisibleDomains:e,boundSeries:t,direction:i}=this,s=(e?t:t.filter((e=>e.isEnabled()))).map((e=>e.getDomain(i)));this.setDomains(...s)}setDomains(){let e,t;arguments.length>0?({domain:e,animatable:t}=this.scale.normalizeDomains(...arguments)):(e=[],t=!0),this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=t}calculateDomain(e){const{dataDomain:{domain:t},range:i,nice:s,scale:n,gridLength:o}=this,r=bI(i),a=[0,1];this.updateScale();const{unzoomedTickLayoutCache:l}=this;let c;if(null!=l&&nT(l,{domain:t,rangeExtent:r,nice:s,gridLength:o,visibleRange:a,initialPrimaryTickCount:e}))c=l.tickLayout;else{const i=n.range;this.setScaleRange([0,1]);const l=s?0:2;c=this.calculateTickLayout(t,l,[0,1],e),n.range=i,this.unzoomedTickLayoutCache={domain:t,rangeExtent:r,nice:s,gridLength:o,visibleRange:a,initialPrimaryTickCount:e,tickLayout:c}}return this.updateScale(),n.domain=c.niceDomain,{unzoomedTickLayout:c,domain:n.domain}}calculateLayout(e,t){this.chartLayout=t;const{visibleRange:i,nice:s}=this,n=0===i[0]&&1===i[1],{unzoomedTickLayout:o,domain:r}=this.calculateDomain(e);let a;if(n)a=o;else{const{range:t,gridLength:n}=this,o=bI(t),l=s?1:2,{tickLayoutCache:c}=this;null!=c&&nT(c,{domain:r,rangeExtent:o,nice:s,gridLength:n,visibleRange:i,initialPrimaryTickCount:e})?a=c.tickLayout:(a=this.calculateTickLayout(r,l,i,e),this.tickLayoutCache={domain:r,rangeExtent:o,nice:s,gridLength:n,visibleRange:i,initialPrimaryTickCount:e,tickLayout:a})}const{rawTickCount:l=0,fractionDigits:c,bbox:h}=a,d=o.rawTickCount??0,u=0!==l&&0!==d?{zoomed:l,unzoomed:d}:void 0;return this.tickLayout=a.layout,this.layout.label={fractionDigits:c,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:u,bbox:h}}invalidateLayoutCache(){this.unzoomedTickLayoutCache=void 0,this.tickLayoutCache=void 0,this.tickLayout=void 0}updateCrossLines(){const e=this.hasDefinedDomain()||this.hasVisibleSeries();this.crossLines.forEach((t=>{t.update(e)}))}updatePosition(){const{crossLineRangeGroup:e,crossLineLineGroup:t,crossLineLabelGroup:i,gridGroup:s,translation:n}=this,o=Math.floor(n.x),r=Math.floor(n.y);s.setProperties({translationX:o,translationY:r}),e.setProperties({translationX:o,translationY:r}),t.setProperties({translationX:o,translationY:r}),i.setProperties({translationX:o,translationY:r})}tickFormatter(e,t,i,s,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"long";const{moduleCtx:r,label:a}=this,{formatManager:l}=r,c=i?this.primaryLabel:void 0,h=this.tickFormatParams(e,t,s,n),d=this.formatterBoundSeries.get();let u,p,g;if("number"===h.type)u=h.fractionDigits;else if("date"===h.type){const{unit:e,step:t,epoch:i}=h;p={unit:e,step:t,epoch:i},g=h.truncateDate}const m=this.uncachedCallWithContext.bind(this),f={datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"axis-label",property:this.direction,domain:e,boundSeries:d},v=c??a,y=i?a.format:void 0,C={specifier:PE.mergeSpecifiers(c?.format,a.format),truncateDate:g};return(e,t)=>{const i=this.datumFormatParams(e,f,u,p,o);return i.value=e,v.formatValue(m,i,t,{specifier:y,dateStyle:o,truncateDate:g})??l.format(m,i,C)??l.defaultFormat(i,C)}}formatDatum(e,t,i,s,n,o,r,a,l,c){if(null==t)return"";const{moduleCtx:h,direction:d,dataDomain:u}=this;a??(a=u.domain);const{formatManager:p}=h,g=this.formatterBoundSeries.get();let m;switch(i){case"crosshair":case"annotation-label":m=this.layout.label.fractionDigits+1;break;case"series-label":m=2;break;case"tooltip":m=3;break;case"legend-label":m=void 0}const f=this.datumFormatParams(t,{source:i,datum:o,seriesId:s,legendItemName:n,key:r,property:d,domain:a,boundSeries:g},m,void 0,"long"),{type:v,value:y}=f,C=this.createCallWithContext(e),b=l?.formatValue(C,v,y,c??f)??p.format(C,f)??this.label.formatValue(C,f,NaN)??p.defaultFormat(f);return String(b)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}hasVisibleSeries(){return this.boundSeries.some((e=>e.isEnabled()))}clipTickLines(e,t,i,s){this.tickLineGroup.setClipRect(new eS(e,t,i,s))}clipGrid(e,t,i,s){this.gridGroup.setClipRect(new eS(e,t,i,s))}getTitleFormatterParams(e){const{direction:t}=this;return{domain:e,direction:t,boundSeries:this.formatterBoundSeries.get(),defaultValue:this.title?.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:MI.is(e)||II.is(e),getCanvasBounds:()=>uM.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce(((e,t)=>(t.getKeyProperties(this.direction).forEach((t=>e.add(t))),e)),new Set),seriesIds:()=>this.boundSeries.map((e=>e.id)),scaleInvert:t=>e.invert(t,!0),scaleInvertNearest:t=>e.invert(t,!0),formatScaleValue:(e,t,i)=>this.formatDatum(void 0,e,t,void 0,void 0,void 0,void 0,void 0,i),attachLabel:e=>this.attachLabel(e),inRange:(e,t)=>this.inRange(e,t),getRangeOverflow:e=>this.getRangeOverflow(e),pickBand:e=>this.pickBand(e)}}pickBand(e){if(!EI.is(this.scale))return;const{scale:t,range:i}=this,s=t.invert(this.isVertical()?e.y:e.x,!0),n=t.bandwidth??0,o=((t.step??0)-n)/2,r=t.convert(s),a=r-o,l=r+n+o;return{id:this.id,value:s,band:[yI(a,i),yI(l,i)],position:r}}isVertical(){return"y"===this.direction}isReversed(){return this.reverse}cachedCallWithContext(e){const{callbackCache:t,chartService:i}=this.moduleCtx;for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];return t.call([this,i],e,...n)}uncachedCallWithContext(e){const{chartService:t}=this.moduleCtx;for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return bM([this,t],e,...s)}createCallWithContext(e){var t=this;const{chartService:i}=this.moduleCtx;return function(s){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return bM([e,t,i],s,...o)}}};oT.defaultTickMinSpacing=50,oT.CrossLineConstructor=Vk,$w([fx],oT.prototype,"nice",2),$w([fx],oT.prototype,"reverse",2),$w([fx],oT.prototype,"keys",2),$w([fx],oT.prototype,"interval",2),$w([fx],oT.prototype,"title",2),$w([WM(((e,t,i)=>e.onGridLengthChange(t,i)))],oT.prototype,"gridLength",2);var rT=oT;function aT(e){return e instanceof Date?e.getTime():e}function lT(e){return e<QA?"millisecond":e<XA?"second":e<JA?"minute":e<23*JA?"hour":e<28*ek?"day":e<sk?"month":"year"}function cT(e){if(0===e.length)return"millisecond";if(1===e.length)return hT(e[0]);let t=1/0;for(let i=1;i<e.length;i++)t=Math.min(t,Math.abs(e[i].valueOf()-e[i-1].valueOf()));return lT(t)}function hT(e){return uk("second",e)<e?"millisecond":uk("minute",e)<e?"second":uk("hour",e)<e?"minute":uk("day",e)<e?"hour":uk("month",e)<e?"day":uk("year",e)<e?"month":"year"}function dT(e){const[t,i]=0===e.length?[0,0]:CI([e[0].valueOf(),e[e.length-1].valueOf()]);if(new Date(t).getFullYear()!==new Date(i).getFullYear())return;if(new Date(t).getMonth()!==new Date(i).getMonth())return"year";return new Date(t).getDate()!==new Date(i).getDate()?"month":"day"}function uT(e,t,i){if(null==i||0===i[0]&&1===i[1])return{ticks:e,count:e.length,firstTickIndex:0};const s=dw(0,Math.floor(i[0]*e.length),e.length),n=dw(0,Math.ceil(i[1]*e.length),e.length),o=t?e.length-n:s,r=t?e.length-s:n;return{ticks:e.slice(o,r),count:e.length,firstTickIndex:o}}var pT=class e extends EI{constructor(){super(...arguments),this.type="category",this.defaultTickCount=0,this.index=new Map,this.indexInitialized=!1,this._domain=[]}static is(t){return t instanceof e}set domain(e){this._domain!==e&&(this.invalid=!0,this._domain=e,this.index.clear(),this.indexInitialized=!1)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(){let e;const t=new Set;let i=!0;for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];for(const r of n)t.has(r)||(t.add(r),null==e?e=gT(r):(i&&(i=mT(r,e)),e=gT([...e,...r])));return e??(e=[]),{domain:e,animatable:i}}toDomain(e){}invert(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.refresh();const i=t?this.bandwidth/2:0,s=this.invertNearestIndex(Math.max(0,e-i));return t||e===this.ordinalRange(s)?this.domain[s]:void 0}ticks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,i=arguments.length>2?arguments[2]:void 0;const{bands:s}=this;let{tickCount:n}=e;if(0===n){const e=s.length>1?1:0;return{ticks:[s[e]],count:void 0,firstTickIndex:e}}let o=null!=n&&0!==n?s.length/n|0:1;if(o=SI(o),o<=1)return uT(t,!1,i);n=s.length/o|0;const r=o*n,a=SI((s.length-r)/2|0),l=dw(0,Math.floor((i?.[0]??0)*s.length),s.length),c=dw(0,Math.ceil((i?.[1]??1)*s.length),s.length),h=Math.floor((l-a)/o)*o+a,d=Math.ceil((c-a)/o)*o+a,u=[];for(let g=h;g<d;g+=o)g>=0&&g<s.length&&u.push(s[g]);let p=u.length>0?this.findIndex(u[0]):void 0;return null!=p&&(p=Math.floor((p-a)/o)),{ticks:u,count:void 0,firstTickIndex:p}}findIndex(e){const{index:t,indexInitialized:i}=this;if(!i){const{domain:e}=this;for(let i=0;i<e.length;i++)t.set(aT(e[i]),i);this.indexInitialized=!0}return t.get(aT(e))}};function gT(e){let t;const i=new Set;for(const s of e){const n=aT(s),o=i.size;i.add(n);i.size!==o?t?.push(s):t??(t=e.slice(0,i.size))}return t??e}function mT(e,t){let i=-1;for(const s of e){const e=t.indexOf(s);if(-1===e)i=1/0;else{if(e<=i)return!1;i=e}}return!0}function fT(e,t){return e.valueOf()-t.valueOf()}function vT(e){const t=e.slice().sort(fT);return null==yT(t)?function(e){let t=NaN;const i=[];for(const s of e){const e=s.valueOf();t!==e&&i.push(s),t=e}return i}(t):t}function yT(e){if(0===e.length)return 1;const t=Number(e[e.length-1])>Number(e[0])?1:-1;let i=-1/0*t;for(const s of e){const e=s.valueOf();if(Math.sign(e-i)!==t)return;i=e}return t}var CT=(e,t)=>({duration:Dk(e)*t,timeInterval:e,step:t}),bT=[CT({unit:"second"},1),CT({unit:"second"},5),CT({unit:"second"},15),CT({unit:"second"},30),CT({unit:"minute"},1),CT({unit:"minute"},5),CT({unit:"minute"},15),CT({unit:"minute"},30),CT({unit:"hour"},1),CT({unit:"hour"},3),CT({unit:"hour"},6),CT({unit:"hour"},12),CT({unit:"day"},1),CT({unit:"day"},2),CT({unit:"day",step:7},1),CT({unit:"day",step:7},2),CT({unit:"day",step:7},3),CT({unit:"month"},1),CT({unit:"month"},2),CT({unit:"month"},3),CT({unit:"month"},4),CT({unit:"month"},6),CT({unit:"year"},1)],wT=[1,2,5,10];function ST(e,t){return Math.abs(Math.round(e)-e)<t}function xT(e,t,i){return Math.abs(t-e)>=i?Math.abs(t-e)/i+1:1}function MT(e,t,i,s,n,o){if(e===t)return{ticks:[e],count:1,firstTickIndex:0};if(i<2)return{ticks:[e,t],count:2,firstTickIndex:0};const r=AT(e,t,i,s,n);if(!Number.isFinite(r))return{ticks:[],count:0,firstTickIndex:void 0};let a=e,l=t;if(ST(a/r,1e-12)||(a=Math.ceil(a/r)*r),ST(l/r,1e-12)||(l=Math.floor(l/r)*r),null!=o){const i=l-a,s=t-e;o=[(e+s*o[0]-a)/i,(e+s*o[1]-a)/i]}const{ticks:c}=LT(a,l,r,o),h=c.at(0);return{ticks:c,count:xT(a,l,r),firstTickIndex:null==h?void 0:Math.round((h-a)/r)}}var DT=Math.floor(2*tk/ik*10)/10;function RT(e){let{timeInterval:t,step:i}=e;const s=Dk(t)*i,n=Mk(t);return s<=((n?Dk(n):void 0)??1/0)*DT}function ET(e,t){let{weekStart:i}=t;if("day"===e.unit&&7===e.step)return i}function IT(e,t,i,s,n,o){let{weekStart:r,primaryOnly:a=!1,targetInterval:l}=o;if(i<=0)return;const c=l??Math.abs(t-e)/Math.max(i,1),h=bT.findLast((e=>(!a||RT(e))&&c>e.duration)),d=bT.find((e=>(!a||RT(e))&&c<=e.duration));if(null==h){return{unit:"millisecond",step:Math.max(AT(e,t,i,s,n),1)}}if(null==d){return{unit:"year",step:null==l?AT(e/sk,t/sk,i,s,n):1}}const{timeInterval:u,step:p}=c-h.duration<d.duration-c?h:d;return{unit:u.unit,step:Sk(u)*p,epoch:ET(u,{weekStart:r})}}function AT(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if(e===t)return dw(1,s,n);if(i<1)return NaN;const o=Math.abs(t-e),r=10**Math.floor(Math.log10(o/i));let a=NaN,l=1/0,c=!1;for(const h of wT){const e=Math.ceil(o/(h*r)),t=e>=s&&e<=n;if(c&&!t)continue;const d=Math.abs(e-i);(l>d||c!==t)&&(c||(c=t),l=d,a=h)}return a*r}function kT(e){for(let t=e.length-1;t>=0;t-=1)if("0"!==e[t])return t+1;return 0}function TT(e,t){const i=Pw(t??",f");if(null==i)return;(null==i.precision||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map((e=>{if(!Number.isFinite(e))return 0;const[t,s]=e.toExponential((i.type?6:12)-1).split(/[.e]/g);return("1"!==t&&"-1"!==t?1:0)+kT(s)+1}))):"f%".includes(i.type)&&(i.precision=Math.max(...e.map((e=>{if(!Number.isFinite(e)||0===e)return 0;const t=Math.floor(Math.log10(Math.abs(e))),s=i.type?6:12,n=kT(e.toExponential(s-1).split(/[.e]/g)[1]);return Math.max(0,n-t)})))));const s=Fw(i);return e=>s(Number(e))}function LT(e,t,i,s){if(!Number.isFinite(i)||i<=0)return{ticks:[],count:0,firstTickIndex:void 0};if(e===t)return{ticks:[e],count:1,firstTickIndex:0};const n=10**mw(i),o=Math.min(e,t),r=Math.max(e,t);let a,l;if(null==s||0===s[0]&&1===s[1])a=o,l=r;else{const i=t-e,n=e+i*s[0],o=t-i*(1-s[1]);a=Math.min(n,o),l=Math.max(n,o)}a=Math.floor(a*n)/n,l=Math.ceil(l*n)/n;const c=[];for(let d=0;;d+=1){const e=Math.round((o+i*d)*n)/n;if(e>r)break;e>=a&&e<=l&&c.push(e)}const h=c.at(0);return{ticks:c,count:xT(o,r,i),firstTickIndex:null==h?void 0:Math.round((h-o)/i)}}function PT(e,t){return e>=t&&(xy.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}function FT(e,t){const i=Math.abs(t-e),s=10**Math.floor(Math.log10(i));let n=1/0,o=[e,t];for(const r of wT){const a=r*s,l=Math.floor(e/a)*a,c=Math.ceil(t/a)*a,h=1-i/Math.abs(c-l);n>h&&(n=h,o=[l,c])}return o}function NT(e,t,i,s,n,o){if(e<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};o=Math.max(o,e/(n+1)),i??(i=o),s??(s=e),i>s&&(i===o?i=s:s=i),i=Math.max(i,1);const r=Math.max(1,Math.floor(e/(t*i))),a=Math.min(r,Math.ceil(e/(t*s)));return{minTickCount:a,maxTickCount:r,tickCount:dw(a,Math.floor(n/t),r)}}var OT=new Date(1970,0,4),BT=class e extends MI{constructor(){super([],[0,1]),this.type="time"}static is(t){return t instanceof e}toDomain(e){return new Date(e)}convert(e,t){return super.convert(e?.valueOf()??NaN,t)}invert(e){return new Date(super.invert(e))}niceDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;if(t.length<2)return[];let[i,s]=t;const n=this.getPixelRange();for(let o=0;o<4;o++){const[t,o]=jT(i,s,e,n);if(aT(i)===aT(t)&&aT(s)===aT(o))break;i=t,s=o}return[i,s]}ticks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],{extend:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{nice:n,interval:o,tickCount:r=MI.defaultTickCount,minTickCount:a,maxTickCount:l}=e;if(t.length<2)return;const c=t.map(aT),h=c[0],d=c[c.length-1];if(null!=o){return{ticks:zT({start:h,stop:d,interval:o,availableRange:this.getPixelRange(),visibleRange:i,extend:s})??GT({start:h,stop:d,tickCount:r,minTickCount:a,maxTickCount:l,visibleRange:i,extend:s}),count:void 0}}if(n&&2===r)return{ticks:t,count:void 0};if(n&&1===r)return{ticks:t.slice(0,1),count:void 0};const u=IT(h,d,r,a,l,{weekStart:OT});if(null==u)return;return{ticks:Ck(u,new Date(h),new Date(d),{visibleRange:i,extend:s}),count:void 0,firstTickIndex:bk(u,new Date(h),new Date(d),{visibleRange:i,extend:s}),timeInterval:u}}};function GT(e){let{start:t,stop:i,tickCount:s,minTickCount:n,maxTickCount:o,visibleRange:r,extend:a}=e;const l=IT(t,i,s,n,o,{weekStart:OT});return l?Ck(l,new Date(t),new Date(i),{visibleRange:r,extend:a}):[]}function zT(e){let{start:t,stop:i,interval:s,availableRange:n,visibleRange:o,extend:r}=e;if(!s)return[];if(lC(s)||"string"===typeof s){const e=Ck(s,new Date(t),new Date(i),{visibleRange:o,extend:r});if(PT(e.length,n))return;return e}const a=Math.abs(s);if(PT(Math.abs(i-t)/a,n))return;const l=bT.findLast((e=>a%e.duration===0));if(l){const{timeInterval:e,step:s,duration:n}=l;return Ck({...e,step:s*Sk(e)*Math.round(a/n),epoch:ET(e,{weekStart:OT})},new Date(t),new Date(i),{visibleRange:o,extend:r})}let c=new Date(Math.min(t,i));const h=new Date(Math.max(t,i)),d=[];for(;c<=h;)d.push(c),c=new Date(c),c.setMilliseconds(c.getMilliseconds()+a);return d}function jT(e,t,i,s){const{interval:n}=i,o=Math.min(aT(e),aT(t)),r=Math.max(aT(e),aT(t));let a;if(lC(n)||"string"===typeof n)a=n;else{let e;"number"===typeof n&&(e=(r-o)/Math.max(n,1),PT(e,s)&&(e=void 0)),e??(e=i.tickCount??MI.defaultTickCount),a=IT(o,r,e,i.minTickCount,i.maxTickCount,{weekStart:OT})}if(null==a)return[e,t];const l=Ck(a,new Date(o),new Date(r),{extend:!0});if(null==l||l.length<2)return[e,t];const c=l[0],h=l[l.length-1];return e<=t?[c,h]:[h,c]}var VT=class e extends II{constructor(){super(...arguments),this.type="ordinal-time",this.defaultTickCount=MI.defaultTickCount,this._domain=[],this.isReversed=!1}static is(t){return t instanceof e}set domain(e){e!==this._domain&&(this.invalid=!0,this._domain=e,this._bands=void 0,this.isReversed=HT(e))}get domain(){return this._domain}get bands(){return this._bands??(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}normalizeDomains(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=t.filter((e=>e.length>0));if(0===s.length)return{domain:[],animatable:!1};if(1===s.length){let e=s[0];const t=yT(e);return-1===t?e=e.slice().reverse():null==t&&(e=vT(e.slice())),{domain:e,animatable:!0}}return{domain:vT(s.flat()),animatable:!0}}ticks(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],{extend:s=!1,dropInitial:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{interval:o,maxTickCount:r,tickCount:a=r}=e,{bands:l}=this;if(!l.length)return;if(this.refresh(),null==o){const{ticks:e,tickOffset:n,tickEvery:o}=this.getDefaultTicks(t,a,i,s);let r=e.length>0?this.findIndex(e[0]):void 0;return r=null!=r?Math.floor((r-n)/o):void 0,{ticks:e,count:void 0,firstTickIndex:r}}let c,h;t&&t.length>=2?(c=t[0].valueOf(),h=t[t.length-1].valueOf()):(c=l[0].valueOf(),h=l[l.length-1].valueOf());const[d,u]=this.range,p=zT({start:c,stop:h,interval:o,availableRange:Math.abs(u-d),visibleRange:i,extend:s})??this.getDefaultTicks(t,a,i,s).ticks,g=[];let m=-1;for(const f of p){const e=this.findIndex(f,1)??-1,t=e===m;m=e,n&&0===e||-1===e||t||g.push(l[e])}return{ticks:g,count:void 0,firstTickIndex:void 0}}stepTicks(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=t?this.bandDomainIndices(t):void 0,o=this.ticksEvery(n,i,e,0,!1),r=o.at(-1),a=s&&e>1?n?.[1]:void 0,l=null!=a&&null!=r?this.findIndex(r):void 0;return null!=l&&null!=a&&a-l<e&&o.pop(),o}bandCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,1];const{domain:t}=this,i=Math.floor(e[0]*t.length);return Math.ceil(e[1]*t.length)-i}getDefaultTicks(e,t,i,s){const{bands:n}=this,o=Math.ceil(n.length/t),r=Math.floor(o/2),a=e?this.bandDomainIndices(e):void 0;return{ticks:this.ticksEvery(a,i,o,r,s),tickOffset:r,tickEvery:o}}bandDomainIndices(e){const t=HT(e);return[this.findIndex(e[t?e.length-1:0],1)??0,this.findIndex(e[t?0:e.length-1],1)??this.bands.length-1]}ticksEvery(){let[e,t]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,this.bands.length],i=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const{bands:r}=this,a=e,l=t-e+1;let c,h=a+Math.floor(i[0]*l),d=a+Math.ceil(i[1]*l);if(o&&(h-=s,d+=s),h=Math.max(h,0),d=Math.min(d,r.length),s<=1)c=r.slice(h,d);else{c=[];for(let e=h;e<d;e+=1)(e-a+n)%s===0&&c.push(r[e])}return c}};function HT(e){return e.length>0&&e[0]>e[e.length-1]}var WT=5e7,_T=class e extends II{constructor(){super(...arguments),this.type="unit-time",this.defaultTickCount=12,this._domain=[],this._bands=void 0}static is(t){return t instanceof e}static supportsInterval(e,t){return UT(e,t)}set domain(e){e!==this._domain&&(this._domain=e,this._bands=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(e){this._interval!==e&&(this._interval=e,this._bands=void 0)}get bands(){return this._bands??(this._bands=this.calculateBands(this._domain,[0,1]).bands),this._bands}normalizeDomains(){return DI(...arguments)}convert(e,t){e instanceof Date||(e=new Date(e));const{domain:i,interval:s}=this;if(i.length<2)return NaN;if(!0!==t?.clamp&&null!=s){const t=e.valueOf(),[n,o]=$T(i,s),r=Math.min(n.valueOf(),o.valueOf()),a=Math.max(n.valueOf(),o.valueOf());if(t<r||t>=a+Dk(s))return NaN}return super.convert(e,t)}calculateBands(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===this.domain&&0===t[0]&&1===t[1]&&!i&&null!=this._bands)return{bands:this._bands,firstBandIndex:0};if(e.length<2)return{bands:[],firstBandIndex:void 0};const{interval:s}=this;if(null==s)return{bands:[],firstBandIndex:void 0};const n={visibleRange:t,extend:i};if(!UT(e,s,n))return{bands:[],firstBandIndex:void 0};const[o,r]=$T(e,s);if(yk(s,o,r,n)>WT)return xy.warnOnce("the configured unit results in too many bands, ignoring. Supply a larger unit."),{bands:[],firstBandIndex:void 0};return{bands:Ck(s,o,r,n),firstBandIndex:bk(s,o,r,n)}}ticks(e){let{interval:t}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],{extend:n=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(i.length<2)return;const{bands:o,firstBandIndex:r}=this.calculateBands(i,s,n),a=this.interval?Dk(this.interval):1/0;if(null==t)return{ticks:o,count:void 0,firstTickIndex:r};const l=Math.min(i[0].valueOf(),i[1].valueOf()),c=Math.max(i[0].valueOf(),i[1].valueOf());let h,d,u;lC(t)||"string"===typeof t?(h=Ck(t,i[0],i[1],{extend:!0,visibleRange:s}),d=0,u=h.length-1):(h=o,d=aw(0,o.length-1,(e=>o[e].valueOf()<=l))??0,u=aw(0,o.length-1,(e=>o[e].valueOf()<=c))??o.length-1);const p=[];let g,m,f;for(let C=d;C<=u;C++){const e=h[C].valueOf(),t=aw(0,o.length-1,(t=>o[t].valueOf()<=e)),i=null!=t&&t!=g?o[t]:void 0;g=t,null!=i&&e-i.getTime()<=a&&p.push(i)}if(this.interval){const e=$T([new Date(l),new Date(c)],this.interval);m=e[0].valueOf(),f=e[1].valueOf()}else m=l,f=c;let v=lw(0,p.length-1,(e=>p[e].valueOf()>=m))??0,y=aw(0,p.length-1,(e=>p[e].valueOf()<=f))??p.length-1;return n&&(v=Math.max(v-1,0),y=Math.min(y+1,p.length-1)),{ticks:p.slice(v,y+1),count:p.length,firstTickIndex:r}}};function UT(e,t,i){const[s,n]=$T(e,t);return yk(t,s,n,i)<=WT}function $T(e,t){return[uk(t,e[0]),uk(t,e[1])]}function KT(e,t,i,s,n){let[o,r]=CI(t.map(Number));const a=Math.floor(i.unzoomed);if(a<=1){const[t,i]=function(e,t){let i=e,s=t,n=0;do{[i,s]=FT(i,s);const{ticks:e}=MT(i,s,5);if(e.length%2===1)return[i,s];i-=1,s+=1}while(n++<10);return[e,t]}(o,r),a=5*Math.pow(2,-Math.ceil(Math.log2(n[1]-n[0]))),{ticks:l}=MT(t,i,a,void 0,void 0,n),c=[e.toDomain(t),e.toDomain(i)];return s&&c.reverse(),{domain:c,ticks:l}}if(o===r){const e=Math.floor(Math.log10(o)),t=Math.pow(10,e),i=Math.min(t,1),s=a-1;o-=i*Math.floor(s/2),r=o+i*s}let l=o,c=r;l=function(e,t,i){e=Math.floor(e);const s=Math.abs(t-e)/(i-1),n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return Math.floor(e/o)*o}(l,c,a);const h=function(e,t,i){const s=i-1,n=(t-e)/s;return function(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),s=e/i;return s>0&&s<=1?i:s>1&&s<=2?2*i:s>2&&s<=5?5*i:s>5&&s<=10?10*i:e}(n)}(l,c,a);c=l+(a-1)*h;const d=Math.floor(l/h)*h,u=Math.floor(c/h)*h;d<=o&&u>=r&&(l=d,c=u);const p=[e.toDomain(l),e.toDomain(c)];s&&p.reverse();const g=function(e,t,i){const s=mw(t),n=Math.pow(10,s),o=[];for(let r=0;r<i;r++){const i=e+t*r;o.push(Math.round(i*n)/n)}return o}(l,h*((i.unzoomed-1)/(i.zoomed-1)),Math.floor(i.zoomed));return{domain:p,ticks:g}}function YT(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),`${t}_${i}`):(e.set(t,1),t)}}var ZT=[1,2,3,4,6,8,9,10,12],qT=new Date(1970,0,4),QT=class{constructor(e){this.axis=e}estimateTickCount(e,t,i,s,n,o){const{scale:r,label:a}=this.axis,{defaultTickCount:l}=r,c=bI(t),h=bI(i);if(pT.is(r)){const t=e.length;let i=Math.ceil(c/(h*a.fontSize));return i=Math.min(i,t),{minTickCount:0,maxTickCount:t,tickCount:i}}return NT(c,h,n,o,l,s)}generateTicks(e){let{range:t,domain:i,reverse:s,primaryTickCount:n,defaultTickMinSpacing:o,visibleRange:r,niceMode:a,parallelFlipRotation:l,regularFlipRotation:c,labelX:h,sideFlag:d,removeOverflowLabels:u,removeOverflowThreshold:p=0,sizeLimit:g}=e;const{label:m,primaryLabel:f,interval:{minSpacing:v,maxSpacing:y}}=this.axis,{parallel:C,fontFamily:b,fontSize:w,fontStyle:S,fontWeight:x}=m,M=void 0!==n,{defaultRotation:D,configuredRotation:R,parallelFlipFlag:E,regularFlipFlag:I}=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n=JS(e),o=!n&&s>=0&&s<=Math.PI?-1:1,r=!n&&i>=0&&i<=Math.PI?-1:1;let a=0;return t?a=o*Math.PI/2:-1===r&&(a=Math.PI),{configuredRotation:n,defaultRotation:a,parallelFlipFlag:o,regularFlipFlag:r}}(m.rotation,C,c,l),{maxTickCount:A}=this.estimateTickCount(i,t,r,o,v,y),k=Number.isFinite(A)?A:10,T=function(e,t,i,s){return e&&!t?i*s===-1?"top":"bottom":"middle"}(C,R,d,E),L={fontFamily:b,fontSize:w,fontStyle:S,fontWeight:x},P=lD.getMeasurer({font:L}),F=m.enabled&&m.avoidCollisions,N=R+D,O=new sM,B=e=>{const t=N+e;sM.updateTransformMatrix(O,1,1,t,0,0)},G=(e,t)=>{let{ticks:i}=e;return B(t),function(e,t,i,s,n){const o=Ik(n),r=o.left+o.right,a=o.top+o.bottom,l=[];for(const{tickLabel:c,translation:h}of e){if(!c)continue;const{x:e,y:n}=i.transformBBox(new eS(t,h,0,0)),o=s.measureLines(c),d=o.width+r,u=o.height+a;l.push({point:{x:e,y:n},label:{text:c,width:d,height:u}})}return l}(i,h,O,P,m)},z=(e,t)=>{const{niceDomain:s,ticks:n,timeInterval:o}=e;if(null==o)return[];B(t);const r=function(e){if(e.length<2)return 1/0;let t=0,i=e[0].translation;for(let s=1;s<e.length;s++){const n=e[s].translation,o=Math.abs(n-i);t=Math.max(t,o),i=n}return t}(n),{width:a,height:l}=function(e,t,i,s,n){const o=Ak(e.format,s)??("string"===typeof e.format?e.format:void 0);if(null==o)return{width:0,height:0};const r=wE(o),a=s?Mk(s):void 0,l=Ak(t?.format,a),c=l?wE(l):r,h=new Date(i[0]),d=new Date(i[i.length-1]),u=a?Ck(a,new Date(i[0]),new Date(i[i.length-1]),{extend:!0}):void 0;let p=0,g=0;if(null!=r){const t=Ik(e),i=t.left+t.right,o=t.top+t.bottom;let a,l;null!=u&&u.length>1?(a=u[0],l=u[1]):(a=h,l=d);const c=Ck(s,a,l,{limit:50});for(const e of c){const t=r(e),{width:s,height:a}=n.measureLines(t);p=Math.max(p,s+i),g=Math.max(g,a+o)}}if(null!=c&&null!=u){const e=Ik(t),i=e.left+e.right,s=e.top+e.bottom;for(const t of u){const e=c(t),{width:o,height:r}=n.measureLines(e);p=Math.max(p,o+i),g=Math.max(g,r+s)}}return{width:Math.ceil(p),height:Math.ceil(g)}}(m,f,s??i,o,P);return function(e,t,i){let{width:s,height:n,spacing:o}=e;const r=[];for(const a of[0,o]){const{x:e,y:o}=i.transformBBox(new eS(t,a,0,0));r.push({point:{x:e,y:o},label:{text:void 0,width:s,height:n}})}return r}({width:a,height:l,spacing:r},h,O)},j=(e,t)=>{if(!F)return!1;const i=0!==R||0!==t,s=function(e,t){return null!=e?e:t?0:10}(m.minSpacing,i);return XT(z(e,t),s)||XT(G(e,t),s)};let V={tickDomain:[],niceDomain:i,ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0},H=0,W=0,_=!0,U=!1;for(;!U&&_&&H<=k;){W=0;for(const e of this.getTickStrategies({domain:i,range:t,reverse:s,niceMode:a,secondaryAxis:M,sizeLimit:g}))({tickData:V,index:H,autoRotation:W,terminate:U}=e({index:H,tickData:V,terminate:U,primaryTickCount:n,defaultTickMinSpacing:o,visibleRange:r,labelsOverlap:()=>j(V,W)}));_=j(V,W)}const $=function(e,t,i,s,n){const o=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI;if(e){if(!t&&!i)return"center";if(s*(o||r?-1:1)===-1)return"end"}else if(s*n===-1)return"end";return"start"}(C,R,W,d,I),K=R+W;if(u&&V.ticks.length>2){const e=G(V,W),i=V.ticks.at(-1),s=e.at(-1);null!=i&&null!=s&&i.translation+s.label.width/2>t[1]+p&&(i.tickLabel=void 0,0===r[0]&&1===r[1]&&(V.ticks[0].tickLabel=void 0))}return{tickData:V,rotation:K,textBaseline:T,textAlign:$}}getTickStrategies(e){let{domain:t,range:i,reverse:s,niceMode:n,secondaryAxis:o,sizeLimit:r}=e;const{label:a,interval:l}=this.axis,c=a.enabled&&a.avoidCollisions,h=!0===a.autoRotate&&void 0===a.rotation,d=[];let u;u=l.values?2:o?1:0;if(d.push((e=>{let{index:o,tickData:a,primaryTickCount:l,defaultTickMinSpacing:c,visibleRange:h,terminate:d}=e;return this.createTickData(t,i,s,n,h,l,c,u,o,a,d,r)})),c&&h){const e=e=>{let{index:t,tickData:i,labelsOverlap:s,terminate:n}=e;return{index:t,tickData:i,autoRotation:s()?JS(a.autoRotateAngle):0,terminate:n}};d.push(e)}return d}createTickData(e,t,i,s,n,o,r,a,l,c,h,d){const{interval:u}=this.axis,{step:p,values:g,minSpacing:m,maxSpacing:f}=u,{maxTickCount:v,minTickCount:y,tickCount:C}=this.estimateTickCount(e,t,n,r,m,f),b=C-y,w=e=>Math.max(C-e,y),S=c.rawTicks,x=null==p&&null==g&&w(l)>y,M={domain:e,reverse:i,niceMode:s,visibleRange:n,primaryTickCount:o,tickGenerationType:a,minTickCount:y,maxTickCount:v,tickCount:0};M.tickCount=w(l);let D=this.getTicks(M);if(x&&eL(D.rawTicks,S)){let e=l,t=b;for(;e<=t;){l=(e+t)/2|0,M.tickCount=w(l);const i=this.getTicks(M);eL(i.rawTicks,S)?e=l+1:(D=i,t=l-1)}}const{tickDomain:R,niceDomain:E,rawTicks:I,rawTickCount:A,rawFirstTickIndex:k,generatePrimaryTicks:T,primaryTicksIndices:L,alignment:P,fractionDigits:F,timeInterval:N}=D;return h||(h=null!=p||null!=g),{tickData:{tickDomain:R,niceDomain:E,rawTicks:I,rawTickCount:A,timeInterval:N,fractionDigits:F,ticks:this.formatTicks({range:t,niceDomain:E,rawTicks:I,rawFirstTickIndex:k,generatePrimaryTicks:T,primaryTicksIndices:L,alignment:P,fractionDigits:F,timeInterval:N,sizeLimit:d})},index:l+=1,autoRotation:0,terminate:h}}getTimeIntervalTicks(e,t,i,s,n,o){const r=Mk(n);if(null==r)return;const{scale:a}=this.axis;if(!BT.is(a)&&!II.is(a))return;o&&(e=[1-e[1],1-e[0]]);const l=Math.min(a.domain[0].valueOf(),a.domain[a.domain.length-1].valueOf()),c=Math.max(a.domain[0].valueOf(),a.domain[a.domain.length-1].valueOf());let[h,d]=fk(new Date(l),new Date(c),e);h=uk(r,h),h.valueOf()>=l&&(h=gk(r,h)),d=pk(r,d),d.valueOf()<=c&&(d=mk(r,d));const u=Ck(r,h,d),p=Dk(n);let g=new Set;const m=VT.is(a),f=[],v={...s,interval:n};let y,C,b=0;if(VT.is(a)){const s=this.axis.minimumTimeGranularity,o=wk(n);y=null!=s&&Dk(s)>=Dk(o)?2:3,C=1;const r=t/i,l=a.bandCount(e)/(18*r);b=ZT.findLast((e=>l>=e))??1}else _T.is(a)&&(null==a.interval||Dk(a.interval)>=p)?y=1:(y=0,C=2);for(let w=0;w<u.length-1;w+=1){const e=u[w],t=u[w+1],i=0===w,s=w===u.length-2,n=t.valueOf()-e.valueOf(),o=[Math.max((l-e.valueOf())/n,0),Math.min((c-e.valueOf())/n,1)];let r;switch(y){case 0:r=JT(v.interval,[e,t],o,!0).ticks;break;case 1:case 3:const i=a.ticks(v,[e,t],o,{extend:!0,dropInitial:!0});r=i?.ticks??[];break;case 2:r=a.stepTicks(b,[e,t],void 0,!s)}if(_b(r,(t=>t.valueOf()<e.valueOf())),s||Ub(r,(e=>{switch(y){case 0:case 3:return e.valueOf()+p>t.valueOf();case 1:case 2:return e.valueOf()>=t.valueOf()}})),0===r.length)continue;const h=fT(r[0],e);!(0===y?0===h:h<=p)||m&&i||g.add(f.length),f.push(...r)}return(0===g.size||1===g.size&&g.has(0))&&(g=void 0),{ticks:f,tickCount:void 0,firstTickIndex:undefined,primaryTicksIndices:g,alignment:C}}getTicks(e){let{domain:t,reverse:i,niceMode:s,visibleRange:n,tickGenerationType:o,tickCount:r,minTickCount:a,maxTickCount:l,primaryTickCount:c}=e;const{axis:h}=this,{primaryLabel:d,scale:u,interval:p}=h,g={nice:0===s,interval:p.step,tickCount:r,minTickCount:a,maxTickCount:l},m={...g,nice:0===s||1===s};let f;1===o&&null!=c&&MI.is(u)&&(f=KT(u,t,c,i,n));const v=0===s?f?.domain??u.niceDomain(g,t):t;let y,C,b,w,S,x,M=v;const D=!0===d?.enabled&&null==m.interval,R=u.domain;switch(u.domain=v,o){case 2:if(M=p.values,y=p.values,C=y.length,VT.is(u)?x=1:_T.is(u)&&(x=2),MI.is(u)){const[e,t]=CI(v.map(Number));y=y.filter((i=>Number(i)>=e&&Number(i)<=t)).sort(((e,t)=>Number(e)-Number(t)))}break;case 1:if(f)y=f.ticks,C=f.ticks.length;else{const e=u.ticks(m,v,n);y=e?.ticks??[],C=e?.count}break;default:{if(v.length>0&&null==m.interval&&(_T.is(u)||D&&(BT.is(u)||VT.is(u)))){const e=v;w=IT(Math.min(e[0].valueOf(),e[e.length-1].valueOf()),Math.max(e[0].valueOf(),e[e.length-1].valueOf()),r,a,l,{weekStart:null==d?qT:void 0,primaryOnly:!0})}let e;VT.is(u)?e=h.minimumTimeGranularity:_T.is(u)&&(e=u.interval),null!=e&&null!=w&&Dk(e)>=Dk(w)&&(w=e);const t=w?this.getTimeIntervalTicks(n,r,l,m,w,i):void 0;if(t)({ticks:y,tickCount:C,firstTickIndex:b,primaryTicksIndices:S,alignment:x}=t);else{const e=_T.is(u)&&null==m.interval&&null!=w?{...m,interval:w}:m,t=u.ticks(e,v,n);if(y=t?.ticks??[],C=t?.count,b=t?.firstTickIndex,BT.is(u)||II.is(u)){const e=m,i="number"===typeof e.interval?lT(e.interval):e.interval;w??(w=i??t?.timeInterval)}}}}const E=y.reduce(((e,t)=>Math.max(e,"number"===typeof t?mw(t):0)),0);return D||(S=void 0),u.domain=R,{tickDomain:M,niceDomain:v,rawTicks:y,rawTickCount:C,rawFirstTickIndex:b,generatePrimaryTicks:D,primaryTicksIndices:S,alignment:x,fractionDigits:E,timeInterval:w}}formatTicks(e){let{niceDomain:t,range:i,rawTicks:s,rawFirstTickIndex:n=0,generatePrimaryTicks:o,primaryTicksIndices:r,alignment:a,fractionDigits:l,timeInterval:c,sizeLimit:h=1/0}=e;const{axis:d}=this,{label:u,scale:p}=d,g=p.domain;p.domain=t;const m=o?"component":"long",f=u.enabled?d.tickFormatter(t,s,!1,l,c,m):void 0,v=null!=c?Mk(c):void 0,y=o?d.tickFormatter(t,s,!0,l,v,m):void 0,C=(p.bandwidth??0)/2,b=[],w=BT.is(p)||II.is(p),S=YT(),x="y"===d.direction,M=(EI.is(p)?p.bandwidth:null)??1/0,D={font:u,maxWidth:x?h:M,maxHeight:x?M:h,overflow:u.truncate?"ellipsis":"hide",textWrap:u.wrapping};for(let R=0;R<s.length;R++){const e=s[R],t=p.convert(e,{alignment:a})+C;if(i.length>0&&!d.inRange(t,.001))continue;const o=r?.has(R)??!1;let l=o?y?.(e,R):f?.(e,R);const c=l??String(e);let h;u.avoidCollisions&&(l=LD.wrapText(c,D)||l);const g=w?e?.valueOf():void 0;h=Number.isFinite(g)?S(`v:${g}`):S(`l:${l}`),b.push({index:R+n,tick:e,tickId:h,tickLabel:l,textUntruncated:null!=l&&c!==l?c:void 0,translation:Math.floor(t),primary:o})}return p.domain=g,b}};function XT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=[];for(const s of e){const{x:e,y:n}=s.point;let{width:o,height:r}=s.label;if(o+=t,r+=t,i.some((t=>nw(t,e,n,o,r))))return!0;i.push({x:e,y:n,width:o,height:r})}return!1}function JT(e,t,i,s){if(null==e)return{ticks:t,firstTickIndex:void 0};const n=t[0].valueOf(),o=t[1].valueOf();if("number"!==typeof e){const n=t[0],o="string"===typeof e?{unit:e,epoch:n}:{...e,epoch:n};return{ticks:Ck(o,t[0],t[1],{visibleRange:i,extend:s}),firstTickIndex:bk(o,t[0],t[1],{visibleRange:i,extend:s})}}const r=[];for(let a=n;a<=o;a+=e)r.push(new Date(a));return{ticks:r,firstTickIndex:void 0}}function eL(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]?.valueOf()!==t[i]?.valueOf())return!1;return!0}var tL=class extends _k{constructor(){super(...arguments),this.autoRotateAngle=335}};$w([fx],tL.prototype,"autoRotate",2),$w([fx],tL.prototype,"autoRotateAngle",2);var iL=class e extends rT{constructor(e,t){let i;super(e,t),this.maxThicknessRatio=.3,this.headingLabelGroup=this.axisGroup.appendChild(new vM({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new vM({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new HA({zIndex:1})),this.tickLineGroupSelection=VA.select(this.tickLineGroup,HA,!1),this.gridLineGroupSelection=VA.select(this.gridLineGroup,HA,!1),this.gridFillGroupSelection=VA.select(this.gridFillGroup,RD,!1),this.tempText=new TD({debugDirty:!1}),this.tempCaption=new HD,this.tickGenerator=new QT(this),this.animationManager=e.animationManager,this.animationState=new ZA("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:e=>this.animateReadyUpdate(e),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(e.eventsHub.on("layout:complete",(e=>{const t=[e.chart.width,e.chart.height];null==i||Hb(t,i)||this.animationState.transition("resize"),i=t})),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof e}get horizontal(){return"top"===this.position||"bottom"===this.position}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.gridFillGroupSelection.clear()}resetAnimation(e){"initial"===e&&this.animationState.transition("reset")}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new tL}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(e,t){return this.updateDirection(),super.calculateLayout(e,t)}layoutCrossLines(){const e=this.hasDefinedDomain()||this.hasVisibleSeries();this.crossLines.forEach((t=>{t.calculateLayout?.(e)}))}calculateTickLayout(e,t,i,s){const n=this.label.getSideFlag(),o=this.horizontal?-.5*Math.PI:0,r=_S(o),a=_S(o-Math.PI/2),l=n*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(2===t&&!1===this.label.enabled&&!1===this.tick.enabled&&!1===this.gridLine.enabled){const{bbox:t,spacing:i}=this.tickBBox(e,[],[]);return{ticks:[],rawTickCount:0,tickDomain:e,niceDomain:e,fractionDigits:0,timeInterval:void 0,bbox:t,layout:{ticks:[],tickLines:[],gridLines:[],gridFills:[],labels:[],spacing:i}}}const{range:c,reverse:h,defaultTickMinSpacing:d}=this,u=this.label.avoidCollisions&&this.horizontal&&(MI.is(this.scale)||II.is(this.scale)),p=this.tickGenerator.generateTicks({domain:e,range:c,reverse:h,niceMode:t,visibleRange:i,primaryTickCount:s,defaultTickMinSpacing:d,parallelFlipRotation:r,regularFlipRotation:a,labelX:l,sideFlag:n,sizeLimit:this.chartLayout?.sizeLimit,removeOverflowLabels:u,removeOverflowThreshold:this.chartLayout?.padding.right}),{tickData:g}=p,{ticks:m,tickDomain:f,rawTicks:v,rawTickCount:y,fractionDigits:C,timeInterval:b,niceDomain:w}=g,S=m.map((e=>this.getTickLabelProps(e,p))),{position:x,gridPadding:M,gridLength:D}=this,R="bottom"===x||"right"===x?-1:1,E=R*M,I=R*(D+M),A=this.calculateGridLines(m,E,I),k=this.calculateGridFills(m,E,I),T=this.calculateTickLines(m,R),{bbox:L,spacing:P}=this.tickBBox(f,m,S);return{ticks:v,rawTickCount:y,tickDomain:f,niceDomain:w,fractionDigits:C,timeInterval:b,bbox:L,layout:{ticks:m,gridLines:A,gridFills:k,tickLines:T,labels:S,spacing:P}}}calculateGridLines(e,t,i){return e.map(((s,n)=>this.calculateGridLine(s,n,t,i,e)))}calculateGridLine(e,t,i,s,n){let{index:o,tickId:r,translation:a}=e;const{gridLine:l,horizontal:c}=this,[h,d,u,p]=c?[a,i,a,s]:[i,a,s,a],{style:g}=l,{stroke:m,strokeWidth:f=0,lineDash:v}=g[o%g.length]??{};return{tickId:r,offset:a,x1:h,y1:d,x2:u,y2:p,stroke:m,strokeWidth:f,lineDash:v}}calculateGridFills(e,t,i){const{horizontal:s,range:n,type:o}=this,r=[];if(0==e.length)return r;let a=0;const l=!s&&"unit-time"===o;if(l&&e[0].translation<n[0]||!l&&e[0].translation>n[0]){const s={tickId:`before:${e[0].tickId}`,translation:n[0]};r.push(this.calculateGridFill(s,-1,e[0].index,t,i,e)),a=1}return r.push(...e.map(((s,n)=>this.calculateGridFill(s,n,s.index+a,t,i,e)))),r}calculateGridFill(e,t,i,s,n,o){let{tickId:r,translation:a}=e;const{gridLine:l,horizontal:c,range:h}=this,d=o[t+1],u=a,p=d?d.translation:h[1],[g,m,f,v]=c?[u,Math.max(s,n),p,Math.min(s,n)]:[Math.min(s,n),Math.min(u,p),Math.max(s,n),Math.max(u,p)],{fill:y,fillOpacity:C}=l.style[i%l.style.length]??{};return{tickId:r,x1:g,y1:m,x2:f,y2:v,fill:y,fillOpacity:C}}calculateTickLines(e,t){return e.map((i=>this.calculateTickLine(i,i.index,t,e)))}calculateTickLine(e,t,i,s){let{primary:n,tickId:o,translation:r}=e;const{horizontal:a,tick:l,primaryTick:c}=this,h=n&&c?.enabled?c:l,d=-i*this.getTickSize(h),[u,p,g,m]=a?[r,0,r,d]:[0,r,d,r],{stroke:f,width:v}=h;return{tickId:o,offset:r,x1:u,y1:p,x2:g,y2:m,stroke:f,strokeWidth:v,lineDash:void 0}}update(){this.updateDirection();const e=Array.from(this.tickLabelGroupSelection.nodes(),(e=>e.datum.tickId));super.update(),this.tickLineGroup.visible=this.tick.enabled||(this.primaryTick?.enabled??!1),this.tickLabelGroup.visible=this.label.enabled||(this.primaryTick?.enabled??!1);const{tickLayout:t}=this;if(this.updateTitle(this.scale.domain,t?.spacing??0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),t){const{ticks:i}=t;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=function(e,t){const i=Math.max(e.length,t.length),s=new Set,n=new Set;for(let o=0;o<i;o++){const i=e[o],r=t[o];i!==r&&(n.has(r)?n.delete(r):r&&s.add(r),s.has(i)?s.delete(i):i&&n.add(i))}return{changed:s.size>0||n.size>0,added:s,removed:n}}(e,i.map((e=>e.tickId)));this.animationState.transition("update",t)}}const{enabled:i,stroke:s,width:n}=this.line;this.lineNode.setProperties({stroke:s,strokeWidth:i?n:0}),this.updateTickLines(),this.updateGridLines(),this.updateGridFills()}getAxisTransform(){return{translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.datum=e,this.tickLabelGroup.datum=e,this.lineNodeGroup.datum=e,this.headingLabelGroup.datum=e}getAxisLineCoordinates(){const{horizontal:e}=this,[t,i]=CI(this.range);return e?{x1:t,x2:i,y1:0,y2:0}:{x1:0,x2:0,y1:t,y2:i}}getTickLineBBox(e){const{translation:t}=e,{position:i,primaryTick:s}=this;let n=this.getTickSize();switch(s?.enabled&&(n=Math.max(n,this.getTickSize(s))),i){case"top":return new eS(t,-n,t,n);case"bottom":return new eS(t,0,t,n);case"left":return new eS(-n,t,n,t);case"right":return new eS(0,t,n,t)}}lineNodeBBox(){const{position:e,seriesAreaPadding:t}=this,{y1:i,y2:s}=this.getAxisLineCoordinates(),n=s-i;switch(e){case"top":return new eS(i,-t,n,t);case"bottom":return new eS(i,0,n,t);case"left":return new eS(-t,i,t,n);case"right":return new eS(0,i,t,n)}}titleBBox(e,t){const{tempCaption:i}=this;return i.node.setProperties(this.titleProps(i,e,t)),i.node.getBBox()}tickBBox(e,t,i){const{tick:s,primaryTick:n,label:o,primaryLabel:r,title:a,position:l,horizontal:c,seriesAreaPadding:h}=this,d=[];if(d.push(this.lineNodeBBox()),s.enabled||n?.enabled)for(const g of t)d.push(this.getTickLineBBox(g));const{tempText:u}=this;if(o.enabled)for(const g of i){if(!g.visible)continue;u.setProperties(g);const e=u.getBBox(!1);e&&d.push(e)}if(r?.enabled&&"bottom"===l){const e=2;if(d.push(new eS(0,hD.getLineHeight(o.fontSize)+e,1,this.getTickSize(s)+o.spacing+h)),null!=r.format){const{format:t}=r,i=(lC(t)?Object.values(t):[t]).reduce(((e,t)=>Math.max(e,function(e){let t=1;for(let i=0;i<e.length;i++)10===e.charCodeAt(i)&&t++;return t}(t))),0);d.push(new eS(0,this.getTickSize(n??s)+r.spacing+h,1,i*hD.getLineHeight(r.fontSize)+e))}}let p=0;if(a.enabled){const t=eS.merge(d);p=c?t.height:t.width,d.push(this.titleBBox(e,p))}return{bbox:eS.merge(d),spacing:p}}titleProps(e,t,i){const{title:s}=this;if(!s.enabled)return e.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};e.enabled=!0,e.color=s.color,e.fontFamily=s.fontFamily,e.fontSize=s.fontSize,e.fontStyle=s.fontStyle,e.fontWeight=s.fontWeight,e.wrapping=s.wrapping;const n=(s.spacing??0)+i,{range:o}=this,r=(o[0]+o[1])/2;let a,l,c,h;switch(this.position){case"top":a=r,l=-n,c=0,h="bottom";break;case"bottom":a=r,l=n,c=0,h="top";break;case"left":a=-n,l=r,c=-.5*Math.PI,h="bottom";break;case"right":a=n,l=r,c=.5*Math.PI,h="bottom"}const{formatter:d=(e=>e.defaultValue)}=s,u=this.cachedCallWithContext(d,this.getTitleFormatterParams(t));return e.text=u,{visible:!0,text:u,textBaseline:h,x:a,y:l,rotationCenterX:a,rotationCenterY:l,rotation:c}}getLabelBorderOffset(e){const t=Ik(e);switch(this.position){case"top":return t.bottom;case"right":return t.left;case"bottom":return t.top;case"left":return t.right;default:this.position}}getTickLabelProps(e,t){const{horizontal:i,primaryLabel:s,primaryTick:n,seriesAreaPadding:o,scale:r}=this,{tickId:a,tickLabel:l="",translation:c,primary:h,textUntruncated:d}=e,u=h&&s?.enabled?s:this.label,p=h&&n?.enabled?n:this.tick,{rotation:g,textBaseline:m,textAlign:f}=t,{range:v}=r,y=this.label.getSideFlag(),C=-this.getLabelBorderOffset(u),b=y*(this.getTickSize(p)+u.spacing+o)+C,w=""!==l,S=i?c:b,x=i?-b:c;return{...this.getLabelStyles({value:l},void 0,u),tickId:a,rotation:g,text:l,textAlign:f,textBaseline:m,textUntruncated:d,visible:w,x:S,y:x,rotationCenterX:S,rotationCenterY:x,range:v}}updateSelections(){if(!this.tickLayout)return;const e=this.getAxisLineCoordinates(),{tickLines:t,gridLines:i,gridFills:s,labels:n}=this.tickLayout,o=e=>e.tickId;this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLine.enabled?i:[],void 0,o),this.gridFillGroupSelection.update(this.gridLine.enabled?s:[],void 0,o),this.tickLineGroupSelection.update(t,void 0,o),this.tickLabelGroupSelection.update(n,void 0,o)}updateGridLines(){this.gridLineGroupSelection.each(((e,t)=>{e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.lineDash=t.lineDash}))}updateGridFills(){this.gridFillGroupSelection.each(((e,t)=>{e.fill=t.fill,e.fillOpacity=t.fillOpacity??1}))}updateTickLines(){this.tickLineGroupSelection.each(((e,t)=>{e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.lineDash=t.lineDash}))}updateTitle(e,t){const{caption:i}=this.title,s=this.titleProps(i,e,t);i.node.visible=s.visible,i.node.text=s.text,i.node.textBaseline=s.textBaseline,i.node.datum=s}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each(((e,t)=>{e.fill=t.color,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=t.textAlign??"center",e.pointerEvents=null==t.textUntruncated?1:0,e.setFont(t),e.setBoxing(t)}))}animateReadyUpdate(e){const{animationManager:t}=this.moduleCtx,i=Xk(Zk(this));OA(this.id,"axis-group",t,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],i.group),OA(this.id,"line",t,[this.lineNode],i.line),OA(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((e,t)=>t.tickId),e),OA(this.id,"tick-labels",t,[this.tickLabelGroupSelection],i.label,((e,t)=>t.tickId),e),OA(this.id,"title",t,[this.title.caption.node],i.label,((e,t)=>t.tickId),e)}resetSelectionNodes(){jA([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],((e,t)=>({translationX:t.translationX,translationY:t.translationY}))),jA([this.gridLineGroupSelection,this.tickLineGroupSelection],((e,t)=>{const{x1:i,x2:s,y1:n,y2:o}=t;return{x1:i,x2:s,y1:n,y2:o}})),jA([this.gridFillGroupSelection],((e,t)=>{const{x1:i,x2:s,y1:n,y2:o}=t;return{x:i,y:n,width:s-i,height:o-n}})),jA([this.tickLabelGroupSelection],((e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation}))),jA([this.title.caption.node],((e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation}))),jA([this.lineNode],((e,t)=>{const{x1:i,x2:s,y1:n,y2:o}=t;return{x1:i,x2:s,y1:n,y2:o}}))}};$w([fx],iL.prototype,"thickness",2),$w([fx],iL.prototype,"maxThicknessRatio",2),$w([fx],iL.prototype,"position",2);var sL=iL,nL=["top","right","bottom","left"];var oL=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function rL(e){const{series:t}=e;return t?.[0]?.type??"line"}function aL(e){const t=rL(e);return EA.isCartesian(t)||function(e){const t=SA(e)?.find((e=>"cartesian"===e));return"cartesian"===t}(t)}function lL(e){const t=rL(e);return EA.isTopology(t)||function(e){const t=SA(e)?.find((e=>"topology"===e));return"topology"===t}(t)}function cL(e){const t=rL(e);return EA.isStandalone(t)||function(e){const t=SA(e)?.find((e=>"standalone"===e));return"standalone"===t}(t)}var hL=class extends kk{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&Cx(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())"legend"===e.type&&(yield{legendType:e.identifier,legend:t})}},dL="ag-charts-overlay",uL="ag-charts-dark-overlay",pL=class extends vx{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return iC(this.text)?this.text.map((e=>e.text)).join(""):e.t(this.text??this.defaultMessageId)}getElement(e,t,i,s){if(this.content?.remove(),this.focusBox=s,this.renderer){const t={},i=bM(e,this.renderer,t);if(i instanceof HTMLElement)this.content=i;else{const e=Xy("div");e.innerHTML=i;const{firstElementChild:t}=e;t instanceof HTMLElement&&1===e.childElementCount?this.content=t:this.content=e}}else{const e=Xy("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});if(iC(this.text)){const t=Xy("div");for(const e of this.text){const i=Xy("span",{color:e.color,fontSize:`${e.fontSize}px`,fontFamily:e.fontFamily??"inherit",fontWeight:String(e.fontWeight),fontStyle:e.fontStyle});i.innerText=e.text,t.appendChild(i)}e.appendChild(t)}else e.innerText=this.getText(i);this.content=e,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(t){e.style.opacity=String(t)},onStop(){e.style.opacity="1"}})}return this.content}removeElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>this.content?.remove(),t=arguments.length>1?arguments[1]:void 0;if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){e?.()}})}else e?.();this.content=void 0,this.focusBox=void 0}}};$w([fx],pL.prototype,"enabled",2),$w([fx],pL.prototype,"text",2),$w([fx],pL.prototype,"renderer",2);var gL=class extends vx{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new pL("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new pL("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new pL("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new pL("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(void 0!==t.focusBox)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};$w([fx],gL.prototype,"darkTheme",2),$w([fx],gL.prototype,"loading",2),$w([fx],gL.prototype,"noData",2),$w([fx],gL.prototype,"noVisibleSeries",2),$w([fx],gL.prototype,"unsupportedBrowser",2);var mL=(e=>(e[e.None=0]="None",e[e.Item=1]="Item",e[e.Series=2]="Series",e[e.OtherSeries=3]="OtherSeries",e[e.OtherItem=4]="OtherItem",e))(mL||{}),fL=class extends vx{};$w([fx],fL.prototype,"fill",2),$w([fx],fL.prototype,"fillOpacity",2),$w([fx],fL.prototype,"stroke",2),$w([fx],fL.prototype,"strokeWidth",2),$w([fx],fL.prototype,"strokeOpacity",2),$w([fx],fL.prototype,"lineDash",2),$w([fx],fL.prototype,"lineDashOffset",2);var vL=class extends vx{constructor(){super(...arguments),this.enabled=!0,this.range="tooltip",this.bringToFront=!1,this.highlightedItem={},this.unhighlightedItem={},this.highlightedSeries={},this.unhighlightedSeries={}}getItemHighlightStyle(e){switch(e){case 1:return this.highlightedItem;case 4:return this.unhighlightedItem;case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getSeriesHighlightStyle(e){switch(e){case 1:case 4:case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getStyle(e){return yS(this.getItemHighlightStyle(e),this.getSeriesHighlightStyle(e))}};$w([fx],vL.prototype,"enabled",2),$w([fx],vL.prototype,"range",2),$w([fx],vL.prototype,"bringToFront",2),$w([fx],vL.prototype,"highlightedItem",2),$w([fx],vL.prototype,"unhighlightedItem",2),$w([fx],vL.prototype,"highlightedSeries",2),$w([fx],vL.prototype,"unhighlightedSeries",2);var yL=class extends vx{};$w([fx],yL.prototype,"strokeWidth",2),$w([fx],yL.prototype,"dimOpacity",2),$w([fx],yL.prototype,"enabled",2);var CL=class extends vx{constructor(){super(...arguments),this.color="black"}};$w([fx],CL.prototype,"color",2);var bL=class extends vx{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1}};$w([fx],bL.prototype,"type",2),$w([fx],bL.prototype,"colorStops",2),$w([fx],bL.prototype,"bounds",2),$w([fx],bL.prototype,"gradient",2),$w([fx],bL.prototype,"rotation",2),$w([fx],bL.prototype,"reverse",2);var wL=class extends vx{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};$w([fx],wL.prototype,"type",2),$w([fx],wL.prototype,"colorStops",2),$w([fx],wL.prototype,"bounds",2),$w([fx],wL.prototype,"gradient",2),$w([fx],wL.prototype,"rotation",2),$w([fx],wL.prototype,"scale",2),$w([fx],wL.prototype,"reverse",2),$w([fx],wL.prototype,"path",2),$w([fx],wL.prototype,"pattern",2),$w([fx],wL.prototype,"width",2),$w([fx],wL.prototype,"height",2),$w([fx],wL.prototype,"padding",2),$w([fx],wL.prototype,"fill",2),$w([fx],wL.prototype,"fillOpacity",2),$w([fx],wL.prototype,"backgroundFill",2),$w([fx],wL.prototype,"backgroundFillOpacity",2),$w([fx],wL.prototype,"stroke",2),$w([fx],wL.prototype,"strokeOpacity",2),$w([fx],wL.prototype,"strokeWidth",2);var SL=class extends vx{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}};$w([fx],SL.prototype,"type",2),$w([fx],SL.prototype,"url",2),$w([fx],SL.prototype,"rotation",2),$w([fx],SL.prototype,"scale",2),$w([fx],SL.prototype,"backgroundFill",2),$w([fx],SL.prototype,"backgroundFillOpacity",2),$w([fx],SL.prototype,"repeat",2),$w([fx],SL.prototype,"fit",2);var xL=class extends vx{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super(),this.deprecated=e,this.item=new fL,this.series=new yL,this.text=new CL}set(e){return this.deprecated&&xy.warnOnce("highlightStyle is deprecated, use highlight instead."),super.set(e)}};$w([fx],xL.prototype,"item",2),$w([fx],xL.prototype,"series",2),$w([fx],xL.prototype,"text",2);var ML=class extends vx{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new vL,this.highlightStyle=new xL}handleUnknownProperties(e,t){"context"in t&&(this.context=t.context,e.delete("context"))}};$w([fx],ML.prototype,"id",2),$w([fx],ML.prototype,"visible",2),$w([fx],ML.prototype,"focusPriority",2),$w([fx],ML.prototype,"showInLegend",2),$w([fx],ML.prototype,"cursor",2),$w([fx],ML.prototype,"nodeClickRange",2),$w([fx],ML.prototype,"highlight",2),$w([fx],ML.prototype,"highlightStyle",2);var DL=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(DL||{}),RL=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(RL||{});function EL(e,t,i,s){if(qx(e))return{type:"gradient",gradient:e.gradient??t.gradient,colorStops:e.colorStops??t.colorStops,bounds:e.bounds??t.bounds,rotation:e.rotation??t.rotation,reverse:e.reverse??t.reverse};if(Qx(e)){const t=e.pattern??i.pattern;let s=e.strokeWidth;"backward-slanted-lines"===t||"forward-slanted-lines"===t||"horizontal-lines"===t||"vertical-lines"===t?s??(s=i.strokeWidth):s??(s=0);return{type:"pattern",pattern:t,width:e.width??e.height??i.width,height:e.height??e.width??i.height,path:e.path,padding:e.padding??i.padding,fill:e.fill??i.fill,fillOpacity:e.fillOpacity??i.fillOpacity,backgroundFill:e.backgroundFill??i.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??i.backgroundFillOpacity,stroke:e.stroke??i.stroke,strokeOpacity:e.strokeOpacity??i.strokeOpacity,strokeWidth:s,rotation:e.rotation??i.rotation,scale:e.scale??i.scale}}return Xx(e)?{type:"image",url:e.url,width:e.width,height:e.height,backgroundFill:e.backgroundFill??s.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??s.backgroundFillOpacity,rotation:e.rotation??s.rotation,repeat:e.repeat??s.repeat,fit:e.fit??s.fit}:e}function IL(e,t,i,s){return qx(e?.fill)||Qx(e?.fill)||Xx(e?.fill)?{...e,fill:EL(e.fill,t,i,s)}:e}function AL(e,t,i,s){null!=i&&qx(t)&&null!=t.bounds&&"item"!==t.bounds?e.fillBBox=i[t.bounds]:e.fillBBox=void 0,e.fillParams=s}function kL(e,t,i,s){const n=t?.opacity??1;e.fill=t?.fill,AL(e,e.fill,i,s),e.fillOpacity=(t?.fillOpacity??1)*n,e.stroke=t?.stroke,e.strokeOpacity=(t?.strokeOpacity??1)*n,e.strokeWidth=t?.strokeWidth??0,e.lineDash=t?.lineDash,e.lineDashOffset=t?.lineDashOffset??0}var TL=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(TL||{}),LL=class{constructor(e,t,i,s){this.type=e,this.event=t,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=s.id}preventDefault(){this.defaultPrevented=!0}},PL=class{constructor(e,t){this.series=e,this.seriesGrouping=t,this.type="groupingChanged"}};function FL(e){switch(e){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}function NL(e){switch(e){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}var OL=class extends BM{constructor(e){super(),this.cleanup=new hw,this.usesPlacedLabels=!1,this.hasChangesOnHighlight=!1,this.seriesGrouping=void 0,this.NodeEvent=LL,this.internalId=Ew(this),this.contentGroup=new vM({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new vM({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new vM({name:`${this.internalId}-annotation`}),this.labelGroup=new vM({name:`${this.internalId}-series-labels`}),this.axes={},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new kk,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this.declarationOrder=-1,this._broughtToFront=!1,this.events=new Yy,this._pickNodeCache=new aD,this.fireEventWrapper=e=>super.fireEvent(e);const{moduleCtx:t,pickModes:i,propertyKeys:s={},propertyNames:n={},canHaveAxes:o=!1,usesPlacedLabels:r=!1}=e;this.ctx=t,this.propertyKeys=s,this.propertyNames=n,this.canHaveAxes=o,this.usesPlacedLabels=r,this.pickModes=i,this.cleanup.register(this.ctx?.eventsHub.on("highlight:change",(e=>this.onChangeHighlight(e))))}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem(e,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:s,visible:n}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:n,seriesGrouping:t}),this.fireEvent(new PL(this,t))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),i?.appendChild(this.annotationGroup)}detachSeries(e,t,i){e?.removeChild(this.contentGroup),t.removeChild(this.highlightGroup),t.removeChild(this.labelGroup),i?.removeChild(this.annotationGroup)}setSeriesIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.bringToFront();return!(!t&&e===this.declarationOrder&&i===this._broughtToFront)&&(this.declarationOrder=e,this._broughtToFront=i,this.setZIndex(i?Number.MAX_VALUE:e),this.fireEvent(new PL(this,this.seriesGrouping)),!0)}setZIndex(e){this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}removeEventListener(e,t){return super.removeEventListener(e,t)}hasEventListener(e){return super.hasEventListener(e)}addChartEventListeners(){}updatedDomains(){}destroy(){this.cleanup.flush(),this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getPropertyValues(e,t){const i=FL(e),s=null!=i?NL(this.resolveKeyDirection(i)):e,n=t?.[s],o=[];if(!n)return o;const r=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t)Array.isArray(s)?r(...s):"object"===typeof s?r(...Object.values(s)):o.push(s)};return r(...n.map((e=>this.properties[e]))),o}getKeys(e){return this.getPropertyValues(NL(e),this.propertyKeys)}getKeyProperties(e){return this.propertyKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getPropertyValues(NL(e),this.propertyNames)}getFormatterContext(e){const{id:t}=this,i=this.getPropertyValues(e,this.propertyKeys),s=this.getPropertyValues(e,this.propertyNames),n=[];for(let o=0;o<i.length;o++)n.push({seriesId:t,key:i[o],name:s[o]});return n}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules((t=>t.getDomain(e))).flat();return 0!==i.length?t.concat(i):t}getRange(e,t){return this.getSeriesRange(e,t)}getVisibleItems(e,t,i){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const e=1;if(!this.properties.highlight)return e;const{opacity:t=e}=this.getHighlightStyle();return t}getHighlightState(e,t,i,s){if(t)return 1;if(null==e?.series)return 0;if(this.isSeriesHighlighted(e,s)){const t=this.isItemHighlighted(e,i);return null==t||t?2:4}return 3}getHighlightStateString(e,t,i,s){switch(this.getHighlightState(e,t,i,s)){case 1:return"highlighted-item";case 4:return"unhighlighted-item";case 2:return"highlighted-series";case 3:return"unhighlighted-series";default:return"none"}}onChangeHighlight(e){const t=e.previousHighlight,i=e.currentHighlight,s=this.getHighlightState(i),n=this.getHighlightState(t);if(this.setSeriesIndex(this.declarationOrder),s===n)return void(this.hasChangesOnHighlight=!1);const{highlightedSeries:o,unhighlightedItem:r,unhighlightedSeries:a}=this.properties.highlight,l=this.hasItemStylers();this.hasChangesOnHighlight=l||!cC(o)||!cC(r)||!cC(a)}bringToFront(){return this.properties.highlight.bringToFront&&this.isSeriesHighlighted(this.ctx.highlightManager.getActiveHighlight())}isSeriesHighlighted(e,t){return e?.series===this}isItemHighlighted(e,t){if(null!=e?.datumIndex&&null!=t)return e.datumIndex===t}getHighlightStyle(e,t,i){const s=this.ctx.highlightManager?.getActiveHighlight(),n=this.getHighlightState(s,e,t,i);return this.properties.highlight.getStyle(n)}getModuleTooltipParams(){return this.moduleMap.mapModules((e=>e.getTooltipParams())).reduce(((e,t)=>Object.assign(e,t)),{})}pickNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pickModes:s,pickModeAxis:n,visible:o,contentGroup:r}=this;if(!o||!r.visible)return;if("highlight"===t&&!this.properties.highlight.enabled)return;if("highlight-tooltip"===t&&!this.properties.highlight.enabled)return;let a=1/0;if("tooltip"===t||"highlight-tooltip"===t){const{tooltip:e}=this.properties;a="number"===typeof e.range?e.range:1/0,i||(i="exact"===e.range)}else if("event"===t||"context-menu"===t){const{nodeClickRange:e}=this.properties;a="number"===typeof e?e:1/0,i||(i="exact"===e)}const l=s.filter((e=>!i||0===e)),{x:c,y:h}=e,d=JSON.stringify({x:c,y:h,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(d))return this._pickNodeCache.get(d);for(const u of l){let t;switch(u){case 0:{const i=this.pickNodesExactShape(e);t=0===i.length?void 0:{datums:i,distance:0};break}case 1:{const i=this.pickNodeClosestDatum(e),s=0===i?.distance?this.pickNodesExactShape(e):void 0;t=null!=s&&0!==s.length?{datums:s,distance:0}:i?{datums:[i.datum],distance:i.distance}:void 0;break}case 2:{const i=null!=n?this.pickNodeMainAxisFirst(e,"main-category"===n):void 0;t=null!=i?{datums:[i.datum],distance:i.distance}:void 0;break}}if(t&&t.distance<=a)return this._pickNodeCache.set(d,{pickMode:u,datums:t.datums,distance:t.distance})}return this._pickNodeCache.set(d,void 0)}pickNodesExactShape(e){const t=[];for(const i of this.contentGroup.pickNodes(e.x,e.y)){const e=i.closestDatum();null!=e&&!0!==e.missing&&t.push(e)}return t}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){const i=Qw(e.x,e.y,t),s=i.nearest?.closestDatum();if(null!=s&&!0!==s.missing)return{datum:s,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireEvent(e){bM([this.properties,this.ctx.chartService],this.fireEventWrapper,e)}fireNodeClickEvent(e,t){const i=new this.NodeEvent("seriesNodeClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}fireNodeDoubleClickEvent(e,t){const i=new this.NodeEvent("seriesNodeDoubleClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){const{visible:i=!0,itemId:s,legendItemName:n}=t??{};this.toggleSeriesItem(i,e,s,n)}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendType:n}=e,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=void 0!=o&&o===e.legendItemName;(s.id===this.id||a||void 0!=r)&&this.toggleSeriesItem(t,n,i,o,e)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n,legendType:o}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=void 0!=r&&r===e.legendItemName;s.id===this.id||l||void 0!=a?this.toggleSeriesItem(!0,o,i,r,e):t&&1===n?this.toggleSeriesItem(!0,o,void 0,r):this.toggleSeriesItem(!1,o,void 0,r)}toggleSeriesItem(e,t,i,s,n){const o=this.id;(e||"category"!==t)&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const r={type:"seriesVisibilityChange",seriesId:o,itemId:i,legendItemName:n?.legendItemName??s,visible:e};this.fireEvent(r),this.ctx.legendManager.toggleItem(e,o,i,s)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getAxisValueText(e,t,i,s,n,o){const{id:r,properties:a}=this;return e.formatDatum(a,i,t,r,o,s,n)}getLabelText(e,t,i,s,n,o,r){if(null==e)return"";const{axes:a,canHaveAxes:l,ctx:c,id:h,properties:d}=this,u="series-label",p="legendItemName"in d?d.legendItemName:void 0,g={seriesId:this.id,...r},m=l?FL(s):void 0,f=null!=m?a[this.resolveKeyDirection(m)]:void 0;if(null!=f)return f.formatDatum(d,e,u,h,p,t,i,n,o,g);const{formatManager:v}=c,y=this.callWithContext.bind(this),C=t=>o.formatValue(y,t.type,t.value,g)??v.format(y,t)??String(e),b=this.getFormatterContext(s);switch(s){case"y":case"color":case"size":return C({type:"number",value:e,datum:t,seriesId:h,legendItemName:p,key:i,source:u,property:s,domain:n,boundSeries:b,fractionDigits:void 0});case"x":case"radius":case"angle":case"label":case"secondaryLabel":case"calloutLabel":case"sectorLabel":case"legendItem":return C({type:"category",value:e,datum:t,seriesId:h,legendItemName:p,key:i,source:u,property:s,domain:n,boundSeries:b})}}getMarkerStyle(e,t,i){let{datumIndex:s,datum:n,point:o}=t,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{size:o?.size??e.size??0},l=arguments.length>5?arguments[5]:void 0,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const{itemStyler:h,fillGradientDefaults:d,fillPatternDefaults:u,fillImageDefaults:p}=e;let g=IL(yS(c?this.getHighlightStyle(r,s):void 0,a,e.getStyle(),l),d,u,p);if(h&&i){const e=this.ctx.highlightManager?.getActiveHighlight(),t=this.getHighlightStateString(e,r,s);g=IL(yS(this.cachedCallWithContext(h,{seriesId:this.id,...g,...i,highlighted:r,highlightState:t,datum:n}),g),d,u,p)}return g}applyMarkerStyle(e,t,i,s){let{applyTranslation:n=!0,selected:o=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{shape:r,size:a=0}=e,l=this.visible&&a>0&&i&&!isNaN(i.x)&&!isNaN(i.y);if(kL(t,e,s),n?t.setProperties({visible:l,shape:r,size:a,x:i?.x,y:i?.y,scalingCenterX:i?.x,scalingCenterY:i?.y}):t.setProperties({visible:l,shape:r,size:a}),o||(t.fillOpacity*=.25,t.strokeOpacity*=.125),"function"===typeof r&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();const s=t.getBBox();if(null!=i&&s.isFinite()){const t=s.computeCenter(),[n,o]=["x","y"].map((s=>(e.strokeWidth??0)+Math.abs(t[s]-i[s])));i.focusSize=Math.max(s.width+n,s.height+o)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){const{width:t,height:i}=e??{width:NaN,height:NaN},s=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,n=null!=AM(this.nodeDataDependencies,s);return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){const{datumCallbackCache:i}=this,s=i.get(e);if(null!=s)return s;try{const s=t();return i.set(e,s),s}catch(Ey){xy.error(String(Ey))}}cachedCallWithContext(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return this.ctx.callbackCache.call([this.properties,this.ctx.chartService],e,...i)}callWithContext(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return bM([this.properties,this.ctx.chartService],e,...i)}formatTooltipWithContext(e,t,i){return e.formatTooltip([this.properties,this.ctx.chartService],t,i)}minTimeInterval(){}};$w([HM({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],OL.prototype,"seriesGrouping",2);var BL=class{constructor(e){this.swapChain=e,this.hasBeenActivated=!1,this.div=Xy("div"),this.svg=Jy("svg"),this.outerPath=Jy("path"),this.innerPath=Jy("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=Xy("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",(e=>this.onSwap(e)))}clear(){}update(e,t,i){if(null!=t)if(e instanceof SD){const i=(i,s)=>{let{x:n,y:o}=uM.toCanvasPoint(e,i,s);return n-=t.x??0,o-=t.y??0,{x:n,y:o}},s=e.svgPathData(i);this.outerPath.setAttribute("d",s),this.innerPath.setAttribute("d",s),this.show(this.svg)}else{let s;if(i){const i=Math.max(e.x-t.x,0),n=Math.max(e.y-t.y,0),o=Math.min(e.x+e.width-t.x,t.width),r=Math.min(e.y+e.height-t.y,t.height);s=new eS(i,n,o-i,r-n)}else s=new eS(e.x-t.x,e.y-t.y,e.width,e.height);SM(this.div,s),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t=this.element.parentElement;t?.style.setProperty("opacity",{true:"1",false:"0",undefined:""}[`${e}`])}isFocusVisible(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!this.hasBeenActivated)return!1;const e=this.element.parentElement;return null!=e&&"1"===Qy().getComputedStyle(e).opacity}},GL=class{constructor(e,t,i,s){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=e=>(sw(e.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",e)),this.onFocus=e=>(sw(e.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",e)),ew(this.label1,"id",Iw()),ew(this.label2,"id",Iw()),sw(this.label1,"display","none"),sw(this.label2,"display","none"),this.label1.textContent=s,this.label2.textContent=s,this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),ew(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap(s)}createAnnouncer(e){const t=Xy("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){if(this.listeners[e].push(t),"swap"===e){t(this.activeAnnouncer)}}dispatch(e,t){"focus"===e?this.hasFocus=!0:"blur"===e&&(this.hasFocus=!1),this.listeners[e].forEach((e=>e(t)))}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],tw(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),tw(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},zL={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function jL(e,t){for(const i of t)if("code"in i){if(i.code===e.code)return!0}else{if(i.key===e.key&&(void 0===i.shift||i.shift===e.shiftKey)&&(void 0===i.ctrlOrMeta||i.ctrlOrMeta===e.ctrlKey||i.ctrlOrMeta===e.metaKey))return!0}return!1}function VL(e,t,i){const{x:s,y:n}=function(e,t,i){const s=hI(e,i.datum,i.movedBounds);if(null!=s)return{x:s.canvasX,y:s.canvasY};const n=i.bounds;if(null!=n){if(n instanceof eS){const{x:e,y:i}=n.computeCenter();return{x:t.x+e,y:t.y+i}}return uM.toCanvas(n).computeCenter()}}(e,t,i)??{};if(void 0!==s&&void 0!==n)return{type:"keyboard",canvasX:s,canvasY:n}}function HL(e,t,i,s){let{top:n,right:o,bottom:r,left:a,width:l,height:c}=s;return null!=a?null!=l?o=i.width-a+l:null!=o&&(l=i.width-a-o):null!=o&&null!=l&&(a=i.width-o-l),null!=n?null!=c?r=i.height-n-c:null!=r&&(c=i.height-r-n):null!=r&&null!=c&&(n=i.height-r-c),null==l?null==c?(c=t,l=e):l=Math.ceil(e*c/t):c??(c=Math.ceil(t*l/e)),null==a&&(a=null==o?Math.floor((i.width-l)/2):i.width-o-l),null==n&&(n=null==r?Math.floor((i.height-c)/2):i.height-c-r),{x:a,y:n,width:l,height:c}}var WL=class{constructor(){this.events=new Yy,this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y))return this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),void(null!=this.animationFrameHandle&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0));this.x1=e,this.y1=t,this.t0=Date.now(),this.animationFrameHandle??(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,s=Date.now(),n=s-i;this.t0=s;const o=.001,r=0|Math.ceil(n/1);let{x:a,y:l,vx:c,vy:h}=this;for(let d=0;d<r;d+=1){c+=-(200*(a-e)+12*c)/.1*o,h+=-(200*(l-t)+12*h)/.1*o,a+=c*o,l+=h*o}Math.hypot(a-e,l-t)<.5?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=c,this.vy=h,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.events.emit("update",{x:this.x,y:this.y})}},_L=null;function UL(e){return""===e?"":(_L??(_L=Xy("div")),_L.textContent=String(e),_L.innerHTML.replace(/\n/g,"<br>"))}function $L(e,t){const{path:i,size:s}=e,{x:n,y:o}=e;i.clear();let r=!1;for(const[a,l]of t){const e=n+(a-.5)*s,t=o+(l-.5)*s;r?i.lineTo(e,t):i.moveTo(e,t),r=!0}i.closePath()}var KL={circle(e){let{path:t,x:i,y:s,size:n}=e;const o=n/2;t.arc(i,s,o,0,2*Math.PI),t.closePath()},cross(e){$L(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){$L(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart(e){let{path:t,x:i,y:s,size:n}=e;const o=n/4;s+=o/2,t.arc(i-o,s-o,o,YS(130),YS(330)),t.arc(i+o,s-o,o,YS(220),YS(50)),t.lineTo(i,s+o),t.closePath()},pin(e){let{path:t,x:i,y:s,size:n}=e;const o=.5,r=.5;t.moveTo(i+-.34375*n,s+-.15625*n),t.cubicCurveTo(i+-.34375*n,s+-.348509*n,i+-.192259*n,s+-.5*n,i+0*n,s+-.5*n),t.cubicCurveTo(i+(.692259-o)*n,s+-.5*n,i+.34375*n,s+-.348509*n,i+.34375*n,s+-.15625*n),t.cubicCurveTo(i+.34375*n,s+(.493824-r)*n,i+.284625*n,s+(.600181-r)*n,i+(.716461-o)*n,s+(.695393-r)*n),t.cubicCurveTo(i+.199009*n,s+.219769*n,i+(.681271-o)*n,s+.243104*n,i+(.663785-o)*n,s+(.766105-r)*n),t.cubicCurveTo(i+(.611893-o)*n,s+(.834367-r)*n,i+(.562228-o)*n,s+.399699*n,i+(.528896-o)*n,s+(.980648-r)*n),t.cubicCurveTo(i+(.524075-o)*n,s+(.992358-r)*n,i+(.512663-o)*n,s+.5*n,i+0*n,s+.5*n),t.cubicCurveTo(i+(.487337-o)*n,s+.5*n,i+(.475925-o)*n,s+(.992358-r)*n,i+(.471104-o)*n,s+(.980648-r)*n),t.cubicCurveTo(i+(.487337-o)*n,s+.5*n,i+(.475925-o)*n,s+(.992358-r)*n,i+(.471104-o)*n,s+(.980648-r)*n),t.cubicCurveTo(i+(.437772-o)*n,s+.399699*n,i+(.388107-o)*n,s+(.834367-r)*n,i+(.336215-o)*n,s+(.766105-r)*n),t.cubicCurveTo(i+(.318729-o)*n,s+.243104*n,i+-.199009*n,s+.219769*n,i+(.283539-o)*n,s+(.695393-r)*n),t.cubicCurveTo(i+-.284625*n,s+(.600181-r)*n,i+-.34375*n,s+(.493824-r)*n,i+-.34375*n,s+-.15625*n),t.closePath()},plus(e){$L(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square(e){let{path:t,x:i,y:s,size:n,pixelRatio:o}=e;const r=n/2;t.moveTo(Ux(o,i-r),Ux(o,s-r)),t.lineTo(Ux(o,i+r),Ux(o,s-r)),t.lineTo(Ux(o,i+r),Ux(o,s+r)),t.lineTo(Ux(o,i-r),Ux(o,s+r)),t.closePath()},star(e){let{path:t,x:i,y:s,size:n}=e;const o=n/2,r=o/2,a=Math.PI/2;for(let l=0;l<10;l++){const e=l%2===0?o:r,n=l*Math.PI/5-a,c=i+Math.cos(n)*e,h=s+Math.sin(n)*e;t.lineTo(c,h)}t.closePath()},triangle(e){$L(e,[[.5,0],[1,.87],[0,.87]])}},YL=class extends SD{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}isPointInPath(e,t){return this.distanceSquared(e,t)<=0}distanceSquared(e,t){const i=ZL.anchor(this.shape);return Math.max(Math.hypot(e-this.x+(i.x-.5)*this.size,t-this.y+(i.y-.5)*this.size)-this.size/2,0)}updatePath(){const{path:e,shape:t,x:i,y:s,size:n}=this,o=this.layerManager?.canvas?.pixelRatio??1,r=ZL.anchor(t),a={path:e,x:i-(r.x-.5)*n,y:s-(r.y-.5)*n,size:n,pixelRatio:o};e.clear(),"string"===typeof t?KL[t](a):"function"===typeof t&&t(a)}computeBBox(){const{x:e,y:t,size:i}=this,s=ZL.anchor(this.shape);return new eS(e-i*s.x,t-i*s.y,i,i)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};$w([FS({equals:TS})],YL.prototype,"shape",2),$w([LS()],YL.prototype,"x",2),$w([LS()],YL.prototype,"y",2),$w([LS({convertor:Math.abs})],YL.prototype,"size",2);var ZL=class extends(lM(cM(hM(YL)))){static anchor(e){return"pin"===e?{x:.5,y:1}:"function"===typeof e&&"anchor"in e?e.anchor:{x:.5,y:.5}}constructor(e){super(e),null!=e?.shape&&(this.shape=e.shape)}};function qL(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t*(5/3);const s=new gM,n=Math.min(e.marker.strokeWidth??1,2),o=Math.min(e.line?.strokeWidth??0,2),r=Math.max(!1===e.marker.enabled?0:t,null==e.line?0:i),a=Math.max(!1===e.marker.enabled?0:t,o);if(null!=e.line){const{stroke:t,strokeOpacity:i,lineDash:n}=e.line,l=new HA;l.x1=0,l.y1=a/2,l.x2=r,l.y2=a/2,l.stroke=t,l.strokeOpacity=i,l.strokeWidth=o,l.lineDash=n,s.append(l)}if(!1!==e.marker.enabled){const{shape:i,fill:o,fillOpacity:l,stroke:c,strokeOpacity:h,lineDash:d,lineDashOffset:u}=e.marker,p=new ZL;p.shape=i??"square",p.size=t,p.fill=o,p.fillOpacity=l??1,p.stroke=c,p.strokeOpacity=h??1,p.strokeWidth=n,p.lineDash=d,p.lineDashOffset=u??0;const g=ZL.anchor(i),m=r/2+(g.x-.5)*t,f=a/2+(g.y-.5)*t,v=t/(t+n);p.x=m,p.y=f,p.scalingCenterX=m,p.scalingCenterY=f,p.scalingX=v,p.scalingY=v,s.append(p)}return gM.toSVG(s,r,a)}var QL="ag-charts-tooltip",XL="ag-charts-tooltip--dark";function JL(e){const t=[],i=new Map;for(const s of e)if("structured"===s.type){const{heading:e}=s,n=null!=e?i.get(e):void 0,o={type:"structured",heading:e,items:[s]};null==n?(i.set(e,o),t.push(o)):n.items.push(s)}else t.push(s);return t}function eP(e){const t=JL(e),i=[];return t.forEach((e=>{if("raw"===e.type)return"";null!=e.heading&&i.push(e.heading),e.items.forEach((e=>{null!=e.title&&i.push(e.title),e.data?.forEach((e=>{i.push(e.label??e.fallbackLabel,e.value)}))}))})),i.join("; ")}function tP(e,t,i){let s="";null==e?s+=`<span class="${QL}-label">${UL(t)}</span>`:(s+=`<span class="${QL}-label">${UL(e)}</span>`,s+=" ",s+=`<span class="${QL}-value">${UL(t)}</span>`);const n=[`${QL}-row`];return i&&n.push(`${QL}-row--inline`),s=`<div class="${n.join(" ")}">${s}</div>`,s}function iP(e,t){if(null==e||1===t.length)return;const i=e?.t("tooltipPaginationStatus",{index:t.index+1,count:t.length});return`<div class="${QL}-footer">${i}</div>`}function sP(e,t,i,s){const n=1===t.items.length?t.items[0]:void 0;let o,r,a;switch(i){case"compact":o=!0,r=n?.title;break;case"single":o=null!=n&&(null==t.heading||null==n.title)&&1===n.data?.length&&null==n.data[0].label&&null!=n.data[0].value,a=t.heading??n?.title;break;case"shared":o=!1}let l="";if(o&&null!=n?(null!=r&&(l+=tP(void 0,r,!1)),n.data?.forEach((e=>{l+=tP(e.label??a,e.value,!1),l+=" "}))):(null!=t.heading&&(l+=`<span class="${QL}-heading">${UL(t.heading)}</span>`,l+=" "),t.items.forEach((e=>{l+=function(e){let t="";if(e.data?.length&&e.data.every((e=>null==e.value||""===e.value)))return t;const i=null==e.title&&1===e.data?.length,s=null==e.symbol?void 0:qL(e.symbol,12);return null==s||null==e.title&&!e.data?.length||(t+=`<span class="${QL}-symbol">${s}</span>`),null!=e.title&&(t+=`<span class="${QL}-title">${UL(e.title)}</span>`,t+=" "),e.data?.forEach((e=>{t+=tP(e.label??e.fallbackLabel,e.value,i),t+=" "})),t}(e)}))),0===l.length)return;const c="compact"!==i&&null!=s?iP(e,s):void 0;return c+null&&(l+=c),l=`<div class="${QL}-content">${l.trimEnd()}</div>`,l}function nP(e,t,i,s){const n=JL(t);if(0!==n.length){if(1===n.length&&"structured"===n[0].type)return sP(e,n[0],i,s);{const t=n.map((t=>"structured"===t.type?sP(e,t,i):t.rawHtmlString));return null!=s&&t.push(function(e,t){const i=null==t?void 0:iP(e,t);return null==i?"":`<div class="${QL}-content">${i}</div>`}(e,s)??""),t.join("")}}}var oP={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},rP={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},aP={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},lP={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},cP={pointer:"top",node:"top",chart:"top-left"},hP=class extends vx{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}};$w([fx],hP.prototype,"xOffset",2),$w([fx],hP.prototype,"yOffset",2),$w([fx],hP.prototype,"anchorTo",2),$w([fx],hP.prototype,"placement",2);var dP=class extends vx{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new hP,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.cleanup=new hw,this.springAnimation=new WL,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new yR,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.cleanup.register(this.springAnimation.events.on("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e,t){return"togglePopover"in Qy().HTMLElement.prototype&&(this.element=t.addChild("tooltip-container",QL),this.element.setAttribute("popover","manual"),this.element.className=QL,this.element.style.positionAnchor=t.anchorName,this.sizeMonitor.observe(this.element,(e=>{this._elementSize=e,this.updateTooltipPosition()}))),this.localeManager=e,()=>{t.removeChild("tooltip-container",QL),this.cleanup.flush(),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(e){return this.element?.contains(e)??!1}updateTooltipPosition(){const{element:e,_elementSize:t,positionParams:i}=this;if(null==e||null==t||null==i)return;const{canvasRect:s,relativeRect:n,meta:o}=i,{x:r,y:a}=this.springAnimation,l=o.position?.anchorTo??"pointer";let c=o.position?.placement??cP[l];Array.isArray(c)||(c=[c]);const h=o.position?.xOffset??0,d=o.position?.yOffset??0,u=n.x,p=n.y,g=n.width-t.width-1+u,m=n.height-t.height+p;let f,v,y=0,C=!1;do{f=c[y],y+=1;const e=this.getTooltipBounds({elementSize:t,placement:f,anchorTo:l,canvasX:r,canvasY:a,yOffset:d,xOffset:h,canvasRect:s});v=HL(t.width,t.height,n,e),C=!1,1&lP[f]&&(C||(C=v.x<u||v.x>g)),2&lP[f]&&(C||(C=v.y<p||v.y>m))}while(y<c.length&&C);const b=dw(u,v.x,g),w=dw(p,v.y,m);C||(C=b!==v.x||w!==v.y);const S="chart"!==l&&!C&&!h&&!d,x=o.showArrow??this.showArrow??S;this.arrowPosition=x?aP[f]:void 0,this.updateClassModifiers(),e.style.translate=`${b}px ${w}px`}show(e,t,i,s,n){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const{element:r}=this;if(null!=r&&null!=s&&0!==s.length){const e=nP(this.localeManager,s,this.mode,this.pagination?n:void 0);if(null==e)return void this.toggle(!1);r.innerHTML=e}else if(null==r||""===r.innerHTML)return void this.toggle(!1);const a={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};this.positionParams={canvasRect:t,relativeRect:a,meta:i};switch(i.position?.anchorTo??"pointer"){case"node":this.springAnimation.update(i.nodeCanvasX??i.canvasX,i.nodeCanvasY??i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",r.removeAttribute("aria-hidden"),r.tabIndex=-1):(this.enableInteraction=!1,r.style.pointerEvents="none",r.setAttribute("aria-hidden","true"),r.removeAttribute("tabindex")),r.style.setProperty("--top",`${t.top}px`),r.style.setProperty("--left",`${t.left}px`),this.updateClassModifiers(),this.toggle(!0,o)}hide(){this.toggle(!1)}maybeEnterInteractiveTooltip(e,t){let{relatedTarget:i}=e;const{interactive:s,interactiveLeave:n,enabled:o,element:r}=this;if(null==r)return!1;if(n)return!0;const a=s&&o&&this.isVisible()&&i instanceof Node&&this.contains(i);return a&&(this.interactiveLeave={callback:t,listener:e=>{(null==e.relatedTarget||e.relatedTarget instanceof Node&&!this.contains(e.relatedTarget))&&this.popInteractiveLeaveCallback()}},r.addEventListener("focusout",this.interactiveLeave.listener),r.addEventListener("mouseout",this.interactiveLeave.listener)),a}popInteractiveLeaveCallback(){const{interactiveLeave:e,element:t}=this;this.interactiveLeave=void 0,e&&(t&&(t.removeEventListener("focusout",e.listener),t.removeEventListener("mouseout",e.listener)),e.callback())}toggle(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{delay:i}=this;e&&i>0&&!t?this._showTimeout??(this._showTimeout=setTimeout((()=>{this._showTimeout=void 0,this.toggleCallback(!0)}),i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(e))}toggleCallback(e){this.element?.isConnected&&this._visible!==e&&(this._visible=e,this.element.togglePopover(e),e?this.updateTooltipPosition():(this.springAnimation.reset(),this.popInteractiveLeaveCallback()))}updateClassModifiers(){if(!this.element?.isConnected)return;const{classList:e}=this.element,t=(t,i)=>e.toggle(`${QL}--${t}`,i);t("no-interaction",!this.enableInteraction),t("arrow-top",1===this.arrowPosition),t("arrow-right",3===this.arrowPosition),t("arrow-bottom",2===this.arrowPosition),t("arrow-left",0===this.arrowPosition),t("compact","compact"===this.mode),e.toggle(XL,this.darkTheme);for(const i of this.wrapTypes)e.toggle(`${QL}--wrap-${i}`,i===this.wrapping)}getTooltipBounds(e){const{elementSize:t,anchorTo:i,placement:s,canvasX:n,canvasY:o,yOffset:r,xOffset:a,canvasRect:l}=e,{width:c,height:h}=t,d={width:c,height:h};if("node"===i||"pointer"===i){const e=oP[s],t=rP[s];return d.top=o+r+h*(t-1)/2+8*t,d.left=n+a+c*(e-1)/2+8*e,d}switch(s){case"top":return d.top=r,d.left=l.width/2-c/2+a,d;case"right":return d.top=l.height/2-h/2+r,d.left=l.width-c/2+a,d;case"left":return d.top=l.height/2-h/2+r,d.left=a,d;case"bottom":return d.top=l.height-h+r,d.left=l.width/2-c/2+a,d;case"top-left":return d.top=r,d.left=a,d;case"top-right":return d.top=r,d.left=l.width-c+a,d;case"bottom-right":return d.top=l.height-h+r,d.left=l.width-c+a,d;case"bottom-left":return d.top=l.height-h+r,d.left=a,d}return d}};function uP(e,t){return e.series===t.series&&fS(e.datumIndex,t.datumIndex)}$w([fx],dP.prototype,"enabled",2),$w([fx],dP.prototype,"mode",2),$w([fx],dP.prototype,"showArrow",2),$w([fx],dP.prototype,"delay",2),$w([fx],dP.prototype,"range",2),$w([fx],dP.prototype,"wrapping",2),$w([fx],dP.prototype,"position",2),$w([fx],dP.prototype,"pagination",2),$w([fx],dP.prototype,"darkTheme",2),$w([fx],dP.prototype,"bounds",2);var pP=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(e,t){this.candidates=e;let i=null!=t?e.findIndex((e=>uP(e,t))):-1;return-1===i&&(i=0),this.active=e[i],{current:this.active,index:i,length:e.length}}next(){const{candidates:e,active:t}=this,i=null==t?-1:e.findIndex((e=>uP(e,t)));if(-1===i)return;let s=i+1;return s>=e.length&&(s=0),this.active=e[s],{current:this.active,index:s,length:this.candidates.length}}},gP=class extends JD{constructor(e){super(),this.chart=e,this.id=Ew(this),this.series=[],this.announceMode="when-changed",this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.cachedTooltipContent=void 0,this.hoverScheduler=_M(((e,t)=>Qy().requestAnimationFrame(e)),(()=>{(this.tooltip.lastHover||this.highlight.pendingHoverEvent)&&(this.chart.getUpdateType()<=5?this.hoverScheduler.schedule():(this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)))})),this.tooltipCandidates=new pP;const t=e.ctx.localeManager.t("ariaInitSeriesArea"),i=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),s=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new GL(i,s,"img",t),this.swapChain.addListener("blur",(e=>this.onBlur(e))),this.swapChain.addListener("focus",(()=>this.onFocus())),"normal"===e.ctx.domManager.mode&&(this.focusIndicator=new BL(this.swapChain),this.focusIndicator.overrideFocusVisible("integrated"!==e.mode&&void 0));const{seriesDragInterpreter:n,seriesWidget:o,containerWidget:r}=e.ctx.widgets;o.setTabIndex(-1),this.cleanup.register((()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1")),(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2")),o.addListener("focus",(()=>this.swapChain.focus({preventScroll:!0}))),o.addListener("mousemove",(e=>this.onHover(e,o))),o.addListener("wheel",(e=>this.onWheel(e))),o.addListener("mouseleave",(e=>this.onLeave(e))),o.addListener("keydown",(e=>this.onKeyDown(e))),o.addListener("contextmenu",((e,t)=>this.onContextMenu(e,t))),r.addListener("contextmenu",((e,t)=>this.onContextMenu(e,t))),r.addListener("click",((e,t)=>this.onClick(e,t))),r.addListener("dblclick",((e,t)=>this.onClick(e,t))),e.ctx.animationManager.addListener("animation-start",(()=>this.clearAll())),e.ctx.eventsHub.on("dom:resize",(()=>this.clearAll())),e.ctx.eventsHub.on("highlight:change",(e=>this.changeHighlightDatum(e))),e.ctx.eventsHub.on("layout:complete",(e=>this.layoutComplete(e))),e.ctx.updateService.addListener("pre-scene-render",(()=>this.preSceneRender())),e.ctx.updateService.addListener("update-complete",(()=>this.updateComplete())),e.ctx.eventsHub.on("zoom:change",(()=>this.clearAll())),e.ctx.eventsHub.on("zoom:pan-start",(()=>this.clearAll()))),n&&this.cleanup.register(n.events.on("drag-move",(e=>this.onDragMove(e,o))),n.events.on("click",(e=>this.onClick(e,o))),n.events.on("dblclick",(e=>this.onClick(e,o))))}get bbox(){return(this.seriesRect??eS.zero).clone()}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return"touch"===e.device&&"click"!==e.type&&("hover"!==this.chart.ctx.chartService.touch.dragAction&&("drag"!==this.chart.ctx.chartService.touch.dragAction||!this.isState(9)))}dataChanged(){var e;this.cachedTooltipContent=void 0,this.highlight.appliedHoverEvent&&((e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.clearHighlight()),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator?.clear()}preSceneRender(){null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.isState(34)&&this.focusIndicator?.isFocusVisible()&&("always"!==this.announceMode&&(this.announceMode="never"),this.handleFocus(0,0))}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort(((e,t)=>{let i=e.properties.focusPriority??1/0,s=t.properties.focusPriority??1/0;return i===s&&([i,s]=[e.declarationOrder,t.declarationOrder]),i<s?-1:i>s?1:0})),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.rect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.rect),"normal"===this.chart.ctx.domManager.mode&&this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){const{sourceEvent:i}=e;if(i.currentTarget!=t.getElement())return;if(i.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){const{currentX:t,currentY:i}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:e,canvasX:t,canvasY:i},void 0)}return}let s,n;if(this.focusIndicator?.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(n=uM.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.isState(36)){const t=this.pickNodes({x:e.currentX,y:e.currentY},"context-menu");t&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=t.matches[0].datum)}const o=s?.series;this.clearAll();const r=e.currentX+t.cssLeft(),a=e.currentY+t.cssTop();o&&s?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:e,canvasX:r,canvasY:a},{pickedSeries:o,pickedNode:s},n):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:e,canvasX:r,canvasY:a},void 0,n)}onLeave(e){if(!this.isState(41))return;const t=e.sourceEvent.relatedTarget;"ag-charts-text-input__textarea"!==t?.className&&(this.maybeEnterInteractiveTooltip(e.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),"keyboard"!==this.hoverDevice&&this.clearAll()))}onWheel(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e,t){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t))}onHover(e,t){this.isState(41)&&this.onHoverLikeEvent(e,t)}onHoverLikeEvent(e,t){var i;if(!this.isIgnoredTouch(e)&&("touch"===e.device&&"hover"===this.chart.ctx.chartService.touch.dragAction&&e.sourceEvent.preventDefault(),t===this.chart.ctx.widgets.seriesWidget&&("touch"!==e.device&&(i="drag-move",e.type===i)||(this.tooltip.lastHover=e),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),this.isState(32)))){const{currentX:t,currentY:i}=e,s=this.pickNodes({x:t,y:i},"event")?.matches,n=s?.[0];n?.series.hasEventListener("seriesNodeClick")||n?.series.hasEventListener("seriesNodeDoubleClick")||null!=s&&s.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(e,t){if("keyboard"===e.device)return;if(t===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),"touch"===e.device&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;if(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t),!this.isState(32))return;if(t==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(e))return this.update(5),void e.sourceEvent.preventDefault();const i={type:"click"===e.type?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(i)}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator?.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(e){this.isState(34)&&(this.hoverDevice="pointer",this.maybeEnterInteractiveTooltip(e)||this.clearAll(),this.focusIndicator?.overrideFocusVisible(void 0))}onKeyDown(e){if(!this.isState(43))return;const t=function(e){for(const[t,{activatesFocusIndicator:i=!0,bindings:s}]of qb(zL))if(jL(e,s))return{name:t,activatesFocusIndicator:i}}(e.sourceEvent);switch(!1===t?.activatesFocusIndicator&&this.focusIndicator?.overrideFocusVisible("keyboard"===this.previousInputDevice),t?.name){case"redo":return this.chart.ctx.eventsHub.emit("series:redo",null);case"undo":return this.chart.ctx.eventsHub.emit("series:undo",null);case"zoomin":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:1,widgetEvent:e});case"zoomout":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:-1,widgetEvent:e});case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,i){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator?.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),i.sourceEvent.preventDefault(),this.chart.ctx.eventsHub.emit("series:focus-change",null))}onSubmit(e){if(!this.isState(34))return;const{series:t,datum:i}=this.focus,s=e.sourceEvent;null!=t&&null!=i?t.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),s.preventDefault()}checkSeriesNodeClick(e){var t;const i=this.pickNodes({x:e.currentX,y:e.currentY},"event");if(null==i||0===i.matches.length)return;const s=this.chart.tooltip.pagination?this.tooltipCandidates.update(i.matches,this.tooltipCandidates.current)?.current:void 0,{series:n,datum:o}=s??i.matches[0],r=null==s?i.distance:0;if("click"===e.type){const i=n.fireNodeClickEvent(e.sourceEvent,o)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(null!=i){e.sourceEvent.preventDefault();const{currentX:s,currentY:n}=e,o=s+(this.hoverRect?.x??0),r=n+(this.hoverRect?.y??0);(t=this.highlight).pendingHoverEvent??(t.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(i.current,o,r,{index:i.index,length:i.length})}return!0}return"dblclick"===e.type&&(e.preventZoomDblClick=0===r,n.fireNodeDoubleClickEvent(e.sourceEvent,o),!0)}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==i?0===this.handleSeriesFocus(e,t)?this.announceMode="when-changed":this.announceMode="always":(this.focusIndicator?.update(i.rect,this.seriesRect,!1),this.swapChain.update(i.text),this.announceMode="always")}handleSeriesFocus(e,t){if("standalone"===this.chart.chartType)return this.handleSoloSeriesFocus(e,t);const{focus:i}=this,s=i.sortedSeries.filter((e=>e.visible&&e.focusable));if(0===s.length)return 1;const n=i.datumIndex-t,o=i.seriesIndex-e;i.seriesIndex=dw(0,i.seriesIndex,s.length-1),i.series=s[i.seriesIndex];const r=this.focus.datumIndex,a=this.focus.seriesIndex;return this.updatePickedFocus(r,t,n,a,e,o)}handleSoloSeriesFocus(e,t){this.focus.series=this.focus.sortedSeries[0];const i=this.focus.datumIndex,s=this.focus.seriesIndex,n=this.focus.datumIndex-t,o=this.focus.seriesIndex-e;return this.updatePickedFocus(i,t,n,s,e,o)}updatePickedFocus(e,t,i,s,n,o){const{focus:r,hoverRect:a,seriesRect:l}=this;if(null==r.series||null==a)return 1;const c=r?.series?.pickFocus({datumIndex:e,datumIndexDelta:t,otherIndex:s,otherIndexDelta:n,seriesRect:l});if(!c)return 2;const{datum:h}=c;if(r.datum=h,r.datumIndex=c.datumIndex,null!=c.otherIndex&&(r.seriesIndex=c.otherIndex),this.focusIndicator?.isFocusVisible()){this.chart.ctx.animationManager.reset();const e=function(e){let{bounds:t}=e;return t instanceof eS?t:null!=t?uM.toCanvas(t):eS.NaN}(c),{x:t,y:i}=e.computeCenter();if(!a.containsPoint(t,i)){if(this.chart.ctx.zoomManager.panToBBox(this.id,a,e))return 3}const{x1:s,x2:n,y1:o,y2:r}=AI.from(e),l=a.containsPoint(s,o),h=a.containsPoint(n,o),d=a.containsPoint(s,r),u=a.containsPoint(n,r);if(!(l||h||d||u)){const t=AI.from(a);c.movedBounds=e.clone(),s<t.x1&&n<t.x1?(c.movedBounds.x=t.x1-2,c.movedBounds.width=4):s>t.x2&&n>t.x2&&(c.movedBounds.x=t.x2-2,c.movedBounds.width=4),o<t.y1&&r<t.y1?(c.movedBounds.y=t.y1-2,c.movedBounds.height=4):o>t.y2&&r>t.y2&&(c.movedBounds.y=t.y2-2,c.movedBounds.height=4)}}this.focusIndicator?.update(c.movedBounds??c.bounds,this.seriesRect,c.clipFocusBox);const d=VL(r.series,a,c);if(null!=d&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const e=this.getTooltipContent(r.series,h.datumIndex,h,"aria-label"),s=uI.makeTooltipMeta(d,r.series,h,c.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,h),this.isTooltipEnabled(r.series)&&this.chart.ctx.tooltipManager.updateTooltip(this.id,s,e),this.maybeAnnouncePickedFocus(t,i,n,o,c,e)}return 0}maybeAnnouncePickedFocus(e,t,i,s,n,o){const{focus:r}=this;let a;if("when-changed"===this.announceMode){a=0===e&&0===i||t!==n.datumIndex||s!==(n.otherIndex??r.seriesIndex)?"always":"never"}else a=this.announceMode;"always"===a&&this.swapChain.update(this.getDatumAriaText(n.datum,o))}getDatumAriaText(e,t){const i=null==t?"":eP(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:e.series.getDatumAriaText?.(e,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator?.clear()}handleHoverHighlight(e){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const t=this.highlight.appliedHoverEvent;if(!t||!this.isState(41))return;const{currentX:i,currentY:s}=t,n=t.currentX+(this.hoverRect?.x??0),o=t.currentY+(this.hoverRect?.y??0);if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(n,o))return void this.clearHighlight();const{range:r}=this.chart.highlight,a="tooltip"===r?"highlight-tooltip":"highlight",l=this.pickNodes({x:i,y:s},a);if(!l||0===l.matches.length)return void this.chart.ctx.highlightManager.updateHighlight(this.id);const{current:c}=this.tooltipCandidates,h=null==c?void 0:l.matches.find((e=>uP(e,c))),d=h?.datum??l.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,d),this.hoverDevice="pointer"}handleHoverTooltip(e,t){const{current:i}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;const{currentX:s,currentY:n}=e,o=s+(this.hoverRect?.x??0),r=n+(this.hoverRect?.y??0),a=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(o,r))return void("pointer"==this.hoverDevice&&this.clearTooltip());if(a&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(a,"canvas-overlay",QL))return;const l=this.pickNodes({x:e.currentX,y:e.currentY},"tooltip");if(l&&0!==l.matches.length)if(this.hoverDevice="pointer",0===l.distance){const{current:e,index:t,length:s}=this.tooltipCandidates.update(l.matches,this.chart.tooltip.pagination?i:void 0);this.showTooltip(e,o,r,{index:t,length:s})}else this.showTooltip(l.matches[0],o,r);else"pointer"==this.hoverDevice&&this.clearTooltip()}showTooltip(e,t,i,s){let{series:n,datum:o,datumIndex:r}=e;const a=this.getTooltipContent(n,r,o,"tooltip");if(null!=a){const e=uI.makeTooltipMeta({type:"pointermove",canvasX:t,canvasY:i},n,o,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,e,a,s)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}maybeEnterInteractiveTooltip(e){return this.chart.tooltip.maybeEnterInteractiveTooltip(e,(()=>{this.tooltip.lastHover=void 0,this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.highlightManager.updateHighlight(this.id)}))}changeHighlightDatum(e){const t=e.previousHighlight?.series,i=e.currentHighlight?.series;t?.properties.cursor&&e.previousHighlight?.datum&&this.chart.ctx.domManager.updateCursor(t.id),i?.properties.cursor&&"default"!==i.properties.cursor&&e.currentHighlight?.datum&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor),null==i||null==t?this.update(5):this.update(5,{seriesToUpdate:new Set([t,i].filter(Boolean))})}pickNodes(e,t,i){const s=[...this.series].reverse();let n;for(const o of s){if(!o.visible||!o.contentGroup.visible)continue;const s=o.pickNodes(e,t,i);if(null==s||0===s.datums.length)continue;const{datums:r,distance:a}=s;if(0!==s.datums.length)if(0===a){0!==n?.distance&&(n={matches:[],distance:0});for(const e of r){const{datumIndex:t}=e;n.matches.push({series:o,datum:e,datumIndex:t})}}else if(null==n||n.distance>a){const[e]=r,{datumIndex:t}=e;n={matches:[{series:o,datum:e,datumIndex:t}],distance:a}}}return n}isTooltipEnabled(e){return e.tooltipEnabled??this.chart.tooltip.enabled}getTooltipContent(e,t,i,s){let n;if("aria-label"===s||this.isTooltipEnabled(e)){const{cachedTooltipContent:s}=this;if(null!=s&&s.series===e&&s.datumIndex===t)n=s.content;else{const s=this.chart.getTooltipContent(e,t,i);this.cachedTooltipContent={series:e,datumIndex:t,content:s},n=s}}else this.cachedTooltipContent=void 0;return n}};var mP=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}getGroupIndex(e){const{internalId:t,seriesGrouping:i}=e;return i?.groupIndex??t}getGroupType(e,t){return t?"top":e.type}requestGroup(e){const{internalId:t,contentGroup:i}=e,s=e.bringToFront(),n=this.getGroupType(e,s),o=this.getGroupIndex(e),r=this.series.get(t);if(null!=r)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(r)}`);0===this.series.size&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal");let a=this.groups.get(n);null==a&&(a=new Map,this.groups.set(n,a));const l=this.lookupIdx(o);let c=a.get(l);return null==c&&(c={type:n,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new gM({name:`${e.contentGroup.name??n}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,c)),this.series.set(t,{layerState:c,seriesConfig:e,bringToFront:s}),c.seriesIds.push(t),c.group.appendChild(i),c.group}changeGroup(e){const{internalId:t,contentGroup:i}=e,s=e.bringToFront(),n=this.getGroupType(e,s),o=this.series.get(t),r=o?this.getGroupType(o.seriesConfig,o.bringToFront):void 0,a=this.getGroupIndex(e),l=this.lookupIdx(a),c=this.groups.get(n)?.get(l);if(r!==n||!0!==c?.seriesIds.includes(t))return this.series.has(t)&&this._releaseGroup({internalId:t,contentGroup:i,type:r}),this.requestGroup(e)}releaseGroup(e){const{internalId:t,contentGroup:i}=e,s=this.getGroupType(e,e.bringToFront());this._releaseGroup({internalId:t,contentGroup:i,type:s})}_releaseGroup(e){const{internalId:t,contentGroup:i,type:s}=e;if(!this.series.has(t))throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);const n=this.series.get(t)?.layerState;n&&(n.seriesIds=n.seriesIds.filter((e=>e!==t)),n.group.removeChild(i)),0===n?.seriesIds.length?(this.seriesRoot.removeChild(n.group),this.groups.get(n.type)?.delete(n.id),this.groups.get(s)?.delete(t)):null!=n&&n.seriesIds.length>0&&(n.group.zIndex=this.getLowestSeriesZIndex(n.seriesIds)),this.series.delete(t)}updateLayerCompositing(){this.groups.forEach((e=>{e.forEach((e=>{const{group:t,seriesIds:i}=e;let s;if(0===i.length)s=!1;else if(i.length>1)s=!0;else{const e=this.series.get(i[0]);s=!0===e?.seriesConfig.renderToOffscreenCanvas()}t.renderToOffscreenCanvas=s,t.zIndex=this.getLowestSeriesZIndex(i)}))}))}lookupIdx(e){return"normal"===this.mode?e:"string"!==typeof e||(e=Number(e.split("-").at(-1)),Number.isFinite(e))?Math.floor(30*dw(0,e/this.expectedSeriesCount,1)):0}destroy(){this.groups.forEach((e=>{e.forEach((e=>{this.seriesRoot.removeChild(e.group)}))})),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){let t;for(const i of e){const e=this.series.get(i),s=e?.seriesConfig.contentGroup.zIndex??1;null!=t&&null!=s?t=GS(t,s)<=0?t:s:t=s}return t??1}},fP=class extends vx{constructor(){super(...arguments),this.dragAction="drag"}};$w([fx],fP.prototype,"dragAction",2);var vP=class{constructor(e,t,i,s,n,o){this.chart=e,this.eventsHub=t,this.dataService=i,this.updateService=s,this.zoomManager=n,this.animationManager=o,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.cleanup=new hw,this.cleanup.register(this.eventsHub.on("data:source-change",(()=>this.onDataSourceChange())),this.eventsHub.on("data:load",(()=>this.onDataLoad())),this.eventsHub.on("data:error",(()=>this.onDataError())),this.updateService.addListener("update-complete",(e=>this.onUpdateComplete(e))),this.eventsHub.on("zoom:change",(()=>this.onZoomChange())))}destroy(){this.cleanup.flush()}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(4)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(e){(e.apiUpdate||this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow(e)}onZoomChange(){this.dirtyZoom=!0}updateWindow(e){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let i,s=!0;if(t){const n=this.zoomManager.getAxisZoom(t.id);0===n.min&&1===n.max||(i=this.getAxisWindow(t,n)),s=this.shouldRefresh(e,t,n)}this.dirtyZoom=!1,this.dirtyDataSource=!1,s&&this.dataService.load({windowStart:i?.min,windowEnd:i?.max})}getValidAxis(){return this.chart.axes.find((e=>"time"===e.type))}shouldRefresh(e,t,i){if(e.apiUpdate)return!0;if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const s=this.lastAxisZooms.get(t.id);return(!s||i.min!==s.min||i.max!==s.max)&&(this.lastAxisZooms.set(t.id,i),!0)}getAxisWindow(e,t){const{domain:i}=e.scale;if(!t||0===i.length||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]);return{min:new Date(Number(i[0])+s*t.min),max:new Date(Number(i[0])+s*t.max)}}},yP=/^((?!chrome|android).)*safari/i,CP=/Version\/(\d+(\.\d+)?)/,bP=/Chrome/,wP=/Chrome\/(\d+)/,SP=/Edg/,xP=/OPR/;var MP=new Set(["map-shape-background","map-line-background"]),DP=class{constructor(e,t,i,s,n,o,r){this.chartLike=e,this.overlays=t,this.eventsHub=i,this.dataService=s,this.localeManager=n,this.animationManager=o,this.domManager=r,this.cleanup=new hw,this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(dL),this.cleanup.register(this.eventsHub.on("layout:complete",(e=>this.onLayoutComplete(e))))}destroy(){this.cleanup.flush(),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete(e){let{series:{rect:t}}=e;const i=this.dataService.isLoading(),s=this.chartLike.series.some((e=>e.hasData)),n=this.chartLike.series.some((e=>e.visible&&!MP.has(e.type)));this.overlays.darkTheme?this.overlayElem.classList.add(uL):this.overlayElem.classList.remove(uL),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`;const o=i,r=!i&&!s,a=s&&!n,l=this.overlays.unsupportedBrowser.enabled&&function(){const{userAgent:e}=Qy("navigator");if(yP.test(e)){const t=CP.exec(e);if(null==t)return!1;const i=parseFloat(t[1]),s=Math.floor(i)>16;return s||xy.warnOnce(`Unsupported Safari version: ${i}; ${e}`),!s}if(bP.test(e)&&!SP.test(e)&&!xP.test(e)){const t=wP.exec(e);if(null==t)return!1;const i=parseInt(t[1],10),s=i>126;return s||xy.warnOnce(`Unsupported Chrome version: ${i}; ${e}`),!s}return!1}();o?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),a?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries),l?this.showOverlay(this.overlays.unsupportedBrowser,t):this.hideOverlay(this.overlays.unsupportedBrowser);const c=o||r||a||l;ew(this.overlayElem,"aria-hidden",!c)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.chartLike,this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement((()=>{this.overlayElem.innerText="\xa0"}),this.animationManager)}},RP=iS.create(!0,"opts"),EP=class e extends BM{constructor(e,t){var i,s;super(),this.id=Ew(this),this.seriesRoot=new vM({name:`${this.id}-series-root`,zIndex:7}),this.annotationRoot=new vM({name:`${this.id}-annotation-root`,zIndex:11}),this.titleGroup=new gM({name:"titles",zIndex:15}),this.debug=iS.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new $b,this.chartCaptions=new UD,this.padding=new GM(20),this.keyboard=new PA,this.touch=new fP,this.mode="standalone",this.styleNonce=void 0,this.formatter=void 0,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this.cleanup=new hw,this.chartAnimationPhase="initial",this.modulesManager=new hL,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.fireEventWrapper=e=>super.fireEvent(e),this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new $b,this.performUpdateType=8,this.runningUpdateType=8,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new OM,this.updateRequestors={},this.performUpdateTrigger=(s=e=>{let{count:t}=e;this.destroyed||this.updateMutex.acquire((async()=>{try{await this.performUpdate(t)}catch(Ey){xy.error("update error",Ey,Ey.stack)}})).catch((e=>xy.errorOnce(e)))},_M((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===t?queueMicrotask(e):setTimeout(e,t)}),s)),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=e=>{this.fireEvent(e)},this.onSeriesNodeDoubleClick=e=>{this.fireEvent(e)},this.onSeriesVisibilityChange=e=>{this.fireEvent(e)},this.seriesGroupingChanged=e=>{if(!(e instanceof PL))return;const{series:t,seriesGrouping:i}=e;if(t.contentGroup.isRoot())return;const s=this.seriesLayerManager.changeGroup({internalId:t.internalId,type:t.type,contentGroup:t.contentGroup,bringToFront:()=>t.bringToFront(),renderToOffscreenCanvas:()=>t.renderToOffscreenCanvas(),seriesGrouping:i});null!=s&&t.attachSeries(s,this.seriesRoot,this.annotationRoot)},this.chartOptions=e;const n=t?.scene,o=t?.container??e.processedOptions.container??void 0,r=t?.styleContainer??e.specialOverrides.styleContainer;n&&(this._firstAutoSize=!1,this._lastAutoSize=[n.width,n.height,n.pixelRatio]);const a=new gM({name:"root"});a.visible=!1,a.append(this.seriesRoot),a.append(this.annotationRoot),a.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new dP,this.seriesLayerManager=new mP(this.seriesRoot),this.mode=e.userOptions.mode??this.mode,this.styleNonce=e.processedOptions.styleNonce;const l=this.ctx=new QI(this,{chartType:this.getChartType(),scene:n,root:a,container:o,styleContainer:r,domMode:e.optionMetadata.domMode,withDragInterpretation:e.optionMetadata.withDragInterpretation??!0,syncManager:new LA(this),fireEvent:e=>this.fireEvent(e),updateCallback:(e,t)=>this.update(e,t),updateMutex:this.updateMutex});this.cleanup.register(l.eventsHub.on("dom:resize",(()=>this.parentResize(l.domManager.containerSize)))),this.overlays=new gL,(i=this.overlays.loading).renderer??(i.renderer=()=>function(e,t){const{animationDuration:i}=$E.add,s=Xy("div",`${dL}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i*t}ms linear 50ms both`}),n=Xy("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Xy("p",{marginTop:"1em"});o.innerText=e;const r=Xy("div",`${dL}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),a=Xy("style");return a.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(a,n,o,r),s}(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new vP(this,l.eventsHub,l.dataService,l.updateService,l.zoomManager,l.animationManager),new DP(this,this.overlays,l.eventsHub,l.dataService,l.localeManager,l.animationManager,l.domManager)],this.highlight=new XI,this.container=o;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new gP(this.initSeriesAreaDependencies()),this.cleanup.register(l.layoutManager.registerElement(0,(e=>{e.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(e)})),l.eventsHub.on("layout:complete",(e=>this.chartCaptions.positionAbsoluteCaptions(e))),l.eventsHub.on("data:load",(e=>{this.data=e.data})),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),rD.addWindowEvent("page-left",(()=>this.destroy())),l.animationManager.addListener("animation-frame",(()=>{this.update(7)})),l.animationManager.addListener("animation-start",(()=>l.domManager.setDataBoolean("animating",!0))),l.animationManager.addListener("animation-stop",(()=>l.domManager.setDataBoolean("animating",!1))),l.eventsHub.on("zoom:change",(()=>{this.series.forEach((e=>e.animationState?.transition("updateData")));const e="initial"!==this.chartAnimationPhase;this.update(4,{forceNodeDataRefresh:!0,skipAnimations:e})}))),this.parentResize(l.domManager.containerSize)}static getInstance(t){return e.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,t){this.ctx.scene.download(e,t)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(e){this.seriesAreaManager.focusIndicator?.overrideFocusVisible(e)}fireEvent(e){bM(this,this.fireEventWrapper,e)}initSeriesAreaDependencies(){const{ctx:e,tooltip:t,highlight:i,overlays:s,seriesRoot:n,mode:o}=this,r=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(e,t,i)=>this.getTooltipContent(e,t,i),chartType:r,ctx:e,tooltip:t,highlight:i,overlays:s,seriesRoot:n,mode:o}}getModuleContext(){return this.ctx}getTooltipContent(e,t,i){const s=!1!==e.properties.tooltip.enabled?e.getTooltipContent(t,i):void 0,n=null==s?[]:[s];if("shared"!==this.tooltip.mode||1===this.series.length)return n;const o=e.getCategoryValue(t);return null==o?n:this.series.flatMap((t=>{if(t===e)return n;if(!t.isEnabled()||!1===t.properties.tooltip.enabled)return[];const i=t.datumIndexForCategoryValue(o),s=null==i?void 0:t.getTooltipContent(i,void 0);return null==s?[]:[s]}))}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter((e=>e.enabled&&e.text)).map((e=>e.text)).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(e){if(this.destroyed)return;const t=e?.keepTransferableResources;let i;return this.performUpdateType=8,this.cleanup.flush(),this.processors.forEach((e=>e.destroy())),this.overlays.destroy(),this.modulesManager.destroy(),t?(this.ctx.scene.strip(),i={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach((e=>e.destroy())),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),i}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((async()=>{if(!this.destroyed)try{await e(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}})).catch((e=>xy.errorOnce(e))))}clearCallbackCache(){this.ctx.callbackCache.invalidateCache();for(const e of this.series)e.resetDatumCallbackCache()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;if(this.destroyed)return;const{forceNodeDataRefresh:i=!1,skipAnimations:s,seriesToUpdate:n=this.series,newAnimationBatch:o,apiUpdate:r=!1}=t??{};this.apiUpdate=r,this.ctx.widgets.seriesWidget.setDragTouchEnabled("none"!==this.touch.dragAction),i&&this.series.forEach((e=>e.markNodeDataDirty()));for(const a of n)this.seriesToUpdate.add(a);if(s&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.debug.check()){let t=(new Error).stack??"<unknown>";t=t.replace(/\([^)]*/g,""),this.updateRequestors[t]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(t?.backOffMs))}async performUpdate(e){const{performUpdateType:t,extraDebugStats:i,_performUpdateSplits:s,ctx:n}=this,o=[...this.seriesToUpdate];this.clearCallbackCache(),this.performUpdateType=8,this.seriesToUpdate.clear(),this.runningUpdateType=t,0===this.updateShortcutCount&&t<7&&(n.animationManager.startBatch(this._performUpdateSkipAnimations),n.animationManager.onBatchStop((()=>this.chartAnimationPhase="ready"))),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",oE[t]);let r=performance.now();s.start??(s.start=r);const a=e=>{s[e]??(s[e]=0),s[e]+=performance.now()-r,r=performance.now()};switch(t){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),a("\u2b07\ufe0f");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),a("\ud83c\udfed");case 3:if(this.checkUpdateShortcut(3))break;await this.processDomains(),a("\u26f0\ufe0f");case 4:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(4))break;await this.processLayout(),a("\u2316");case 5:if(this.checkUpdateShortcut(5))break;await this.updateSeries(o),a("\ud83e\udd14"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing();case 6:if(this.checkUpdateShortcut(6))break;n.updateService.dispatchPreSceneRender(),a("\u2196");case 7:if(this.checkUpdateShortcut(7))break;n.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,n.scene.render({debugSplitTimes:s,extraDebugStats:i,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const e of Object.keys(s))delete s[e];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 8:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,n.animationManager.endBatch()}this.destroyed||(n.updateService.dispatchUpdateComplete(this.apiUpdate),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=8,this.syncStatus="ready"),this._performUpdateNotify.notify();const l=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(l-s.start))/100,count:e,performUpdateType:oE[t]})}updateThemeClassName(){const e="ag-charts-theme-",t=[`${e}default`,`${e}default-dark`];let i=t[0],s=!1,{theme:n}=this.chartOptions.processedOptions;for(;"string"!==typeof n&&null!=n;)n=n.baseTheme;"string"===typeof n&&(i=n.replace("ag-",e),s=n.includes("-dark")),t.includes(i)||(i=s?t[1]:t[0]),this.ctx.domManager.setThemeClass(i)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:t}=this.keyboard;this.ctx.domManager.setTabGuardIndex(e?t??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return!!this.destroyed||(this.updateShortcutCount>3?(xy.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0))}async checkFirstAutoSize(){if(null!=this.width&&null!=this.height);else if(!this._lastAutoSize){await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}}onAxisChange(e,t){null==t&&0===e.length||this.ctx.axisManager.updateAxes(t??[],e)}onSeriesChange(e,t){const i=t?.filter((t=>!e.includes(t)))??[];this.destroySeries(i),this.seriesLayerManager?.setSeriesCount(e.length);for(const s of e){if(t?.includes(s))continue;const e=this.seriesLayerManager.requestGroup(s);s.attachSeries(e,this.seriesRoot,this.annotationRoot);const i=this;s.chart={get mode(){return i.mode},get isMiniChart(){return!1},get seriesRect(){return i.seriesRect}},s.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(s),s.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(e)}destroySeries(e){e?.forEach((e=>{e.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),e.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),e.removeEventListener("groupingChanged",this.seriesGroupingChanged),e.destroy(),this.seriesLayerManager.releaseGroup(e),e.detachSeries(void 0,this.seriesRoot,this.annotationRoot),e.chart=void 0}))}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&e.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter((t=>t.axes[e.direction]===e))}assignAxesToSeries(){const e=Vb(this.axes,(e=>e.direction));for(const t of this.series)for(const i of t.directions){const s=e[i];if(!s)return void xy.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=t.getKeys(i),o=s.find((e=>!e.keys.length||n.some((t=>e.keys.includes(t)))));if(!o)return void xy.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`);t.axes[i]=o}}parentResize(e){if(null==e||null!=this.width&&null!=this.height)return;let{width:t,height:i}=e;const{pixelRatio:s}=e;if(t=Math.floor(t),i=Math.floor(i),0===t&&0===i)return;const[n=0,o=0,r=1]=this._lastAutoSize??[];n===t&&o===i&&r===s||(this._lastAutoSize=[t,i,s],this.resize("SizeMonitor",{}))}resize(e,t){const{scene:i,animationManager:s}=this.ctx,{inWidth:n,inHeight:o,inMinWidth:r,inMinHeight:a,inOverrideDevicePixelRatio:l}=t;this.ctx.domManager.setSizeOptions(r??this.minWidth,a??this.minHeight,n??this.width,o??this.height);const c=n??this.width??this._lastAutoSize?.[0],h=o??this.height??this._lastAutoSize?.[1],d=l??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${e}`,{width:c,height:h,pixelRatio:d,stack:(new Error).stack}),null!=c&&null!=h&&uC(c)&&uC(h)&&i.resize(c,h,d)){s.reset();let e=!0;null!=this.width&&null!=this.height||!this._firstAutoSize||(e=!1,this._firstAutoSize=!1),this.update(4,{forceNodeDataRefresh:!0,skipAnimations:e}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach((e=>e.setChartData(this.data)));const e=this.modulesManager.mapModules((e=>e.updateData?.(this.data)));await Promise.all(e)}async processData(){this.series.some((e=>e.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=new CA(this.mode,this.suppressFieldDotNotation),t=this.series.map((t=>t.processData(e))),i=this.modulesManager.mapModules((t=>t.processData?.(e)));this._cachedData=e.execute(this._cachedData),await Promise.all([...t,...i]),this.updateLegends()}async processDomains(){for(const e of this.axes)e.processData();for(const e of this.series)e.updatedDomains()}updateLegends(e){for(const{legend:t,legendType:i}of this.modulesManager.legends())"category"===i?this.setCategoryLegendData(e):this.setLegendData(i,t)}setCategoryLegendData(e){var t;const{ctx:{legendManager:i,stateManager:s}}=this;e&&this.series.forEach((t=>{const i=e.find((e=>e.seriesId===t.id));t.onLegendInitialState("category",i)}));const n=this.series.flatMap((e=>{const t=e.getLegendData("category");return i.updateData(e.id,t),t}));if(e)s.setStateAndRestore(i,e);else{if("integrated"!==this.mode){const e={},i=new Map(this.series.map((e=>[e.id,e.type])));for(const{seriesId:s,symbol:{marker:o},label:r}of n.filter((e=>!e.hideInLegend))){if(null==o.fill)continue;const n=i.get(s),a=e[n]??(e[n]={});a[t=r.text]??(a[t]=o.fill),a[r.text]!==o.fill&&xy.warnOnce(`legend item '${r.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}i.update()}}setLegendData(e,t){t.data=this.series.filter((e=>e.properties.showInLegend)).flatMap((t=>t.getLegendData(e)))}async processLayout(){const e=this.animationRect,{width:t,height:i}=this.ctx.scene,s=this.ctx.layoutManager.createContext(t,i);await this.performLayout(s),e&&!this.animationRect?.equals(e)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(e){const{seriesRect:t}=this;await Promise.all(e.map((e=>e.update({seriesRect:t})))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter((e=>e.visible&&e.usesPlacedLabels)),this.padding,this.seriesRect)}async waitForUpdate(e,t){const i=Qy("agChartsDebugTimeout");null==i?(e??(e=1e5),t??(t=!1)):(e=i,t??(t=!0));const s=performance.now();for(;(this._pendingFactoryUpdatesCount>0||8!==this.performUpdateType||8!==this.runningUpdateType||this.ctx.scene.waitingForUpdate())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),8===this.performUpdateType&&8===this.runningUpdateType||await this._performUpdateNotify.await(),performance.now()-s>e){const i=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(t)throw new Error(i);xy.warnOnce(i)}DM()&&await Kb(),this.ctx.scene.waitingForUpdate()&&await Kb(50)}}filterMiniChartSeries(e){return e?.filter((e=>!1!==e.showInMiniChart))}applyOptions(e){const t=this.firstApply?e.processedOptions:e.diffOptions(this.chartOptions);if(null==t||0===Object.keys(t).length)return RP("Chart.applyOptions() - no delta, forcing re-layout",t),void this.update(4,{apiUpdate:!0,newAnimationBatch:!0});const i=this.firstApply?{}:this.chartOptions.processedOptions,s=e.processedOptions;RP("Chart.applyOptions() - applying delta",t);const n=this.applyModules(s);t.listeners&&this.registerListeners(this,t.listeners),FM(this,t,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer","formatter"]});let o=!1,r="no-op";null!=t.series&&(r=this.applySeries(this,t.series,i?.series),o=!0),"replaced"===r&&this.resetAnimations(),this.applyAxes(this,s,i,r,[])&&(o=!0),t.data&&(this.data=t.data),t.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,t.legend.listeners),t.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=t.locale?.localeText),this.chartOptions=e;const a=this.modulesManager.getModule("navigator"),l=this.modulesManager.getModule("zoom");a?.enabled||l?.enabled||this.ctx.zoomManager.updateZoom("chart");const c=a?.miniChart,h=s.navigator?.miniChart?.series??s.series;!0===c?.enabled&&null!=h?this.applyMiniChartOptions(c,h,s,i):!1===c?.enabled&&(c.series=[],c.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),o||(o=this.shouldForceNodeDataRefresh(t,r));const d=o||n?0:4;if(this.maybeResetAnimations(r),this.shouldClearLegendData(s,i,r)&&this.ctx.legendManager.clearData(),this.applyInitialState(s),this.ctx.formatManager.setFormatter(s.formatter),RP("Chart.applyOptions() - update type",oE[d],{seriesStatus:r,forceNodeDataRefresh:o}),void 0!==e.optionsProcessingTime){this._performUpdateSplits["\u2699\ufe0f"]=e.optionsProcessingTime;const t=performance.now()-e.optionsProcessingTime;this._performUpdateSplits.start=t}this.update(d,{apiUpdate:!0,forceNodeDataRefresh:o,newAnimationBatch:!0}),this.firstApply=!1}applyInitialState(e){const{annotationManager:t,chartTypeOriginator:i,historyManager:s,stateManager:n,zoomManager:o}=this.ctx,{initialState:r}=e;if("annotations"in e&&e.annotations?.enabled&&null!=r?.annotations){const e=r.annotations.map((e=>yS(e,t.getAnnotationTypeStyles(e.type))));n.setState(t,e)}null!=r?.chartType&&n.setState(i,r.chartType),(e.navigator?.enabled||e.zoom?.enabled)&&null!=r?.zoom&&n.setState(o,r.zoom),null!=r?.legend&&this.updateLegends(r.legend),null!=r&&s.clear()}maybeResetAnimations(e){if("standalone"===this.mode)switch(e){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(e,t){const i=!!e.data||"data-change"===t||"replaced"===t,s=MA.getKeys(),n=Object.values(s).some((t=>null!=e[t])),o=null!=e.title&&null!=e.subtitle||null!=e.formatter;return i||n||o}shouldClearLegendData(e,t,i){const s="replaced"===i||"series-grouping-change"===i||"updated"===i&&(e.series?.length!==t.series?.length||!e.series?.every(((e,i)=>e.type===t.series?.[i].type))),n=null!=t.legend&&null==e.legend;return s||n}applyMiniChartOptions(e,t,i,s){const n=s?.navigator?.miniChart?.series??s?.series,o=this.applySeries(e,this.filterMiniChartSeries(t),this.filterMiniChartSeries(n));this.applyAxes(e,i,s,o,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const r=e.series;for(const c of r)c.properties.id=void 0;const a=e.axes,l=a.find((e=>"x"===e.direction));for(const c of a)c.nice=!1,c.gridLine.enabled=!1,c.label.enabled=c===l,c.tick.enabled=!1,c.interactionEnabled=!1;if(null!=l){const e=i.navigator?.miniChart,t=e?.label,s=e?.label?.interval;if(l.line.enabled=!1,l.label.set(SS(t,["interval","autoRotate","autoRotateAngle","itemStyler","minSpacing","rotation"])),"grouped-category"===l.type){l.label.enabled=!1,l.label.rotation=0;const{depthOptions:e}=l;if(0===e.length)e.set([{label:{enabled:!0}}]);else for(let t=1;t<e.length;t++)e[t].label.enabled=!1}else"time"!==l.type&&"unit-time"!==l.type&&"ordinal-time"!==l.type||(l.parentLevel.enabled=!1);l.interval.step=s?.step,l.interval.values=s?.values,l.interval.minSpacing=s?.minSpacing,l.interval.maxSpacing=s?.maxSpacing}}applyModules(e){const{type:t}=this.constructor;let i=!1;for(const s of Yw.byType("root","legend")){const n=null!=e[s.optionsKey]&&s.chartTypes.includes(t);n!==this.modulesManager.isEnabled(s)&&(n?(this.modulesManager.addModule(s,(e=>e.moduleFactory(this.getModuleContext()))),"legend"===s.type&&this.modulesManager.getModule(s)?.attachLegend(this.ctx.scene),this[s.optionsKey]=this.modulesManager.getModule(s)):(this.modulesManager.removeModule(s),delete this[s.optionsKey]),i=!0)}return i}initSeriesDeclarationOrder(e){for(let t=0;t<e.length;t++)e[t].setSeriesIndex(t)}applySeries(e,t,i){if(!t)return"no-change";const s=function(e,t,i){const s=(e,t,i)=>{const s=[e];for(const n of oL)n in t&&null!=t[n]&&s.push(`${n}=${t[n]}`);return i?.seriesGrouping&&s.push(`seriesGrouping.groupId=${i?.seriesGrouping.groupId}`),s.join(";")},n=new Map;let o=0;for(const c of e){const e=s(c.type,c.properties,i?.[o]);n.has(e)||n.set(e,[]),n.get(e)?.push([c,o++])}const r=new Map;o=0;for(const c of t){const e=s(c.type,c,c);r.has(e)||r.set(e,[]),r.get(e)?.push([c,o++])}const a=[...n.keys()].some((e=>r.has(e)));if(!a)return{status:"no-overlap",oldKeys:n.keys(),newKeys:r.keys()};const l=[];for(const[c,h]of r.entries())for(const[e,t]of h){const s=n.get(c);if(null==s||s.length<1){l.push({opts:e,targetIdx:t,idx:t,status:"add"}),n.delete(c);continue}const[o,r]=s.shift(),a=AM(i?.[r]??{},e??{}),{groupIndex:h,stackIndex:d}=a?.seriesGrouping??{};null!=h||null!=d?l.push({opts:e,series:o,diff:a,targetIdx:t,idx:r,status:"series-grouping"}):a?l.push({opts:e,series:o,diff:a,targetIdx:t,idx:r,status:"update"}):l.push({opts:e,series:o,targetIdx:t,idx:r,status:"no-op"}),0===s.length&&n.delete(c)}for(const c of n.values())for(const[e,t]of c)l.push({series:e,idx:t,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}(e.series,t,i);if("no-overlap"===s.status){RP(`Chart.applySeries() - creating new series instances, status: ${s.status}`,s);const i=t.map((e=>this.createSeries(e)));return this.initSeriesDeclarationOrder(i),e.series=i,"replaced"}RP("Chart.applySeries() - matchResult",s);const n=[];let o=!1,r=!1,a=!1;const l=s.changes.toSorted(((e,t)=>e.targetIdx-t.targetIdx));for(const c of l)switch(r||(r="series-grouping"===c.status),o||(o=null!=c.diff?.data),a||(a="no-op"!==c.status),c.status){case"add":{const e=this.createSeries(c.opts);n.push(e),RP("Chart.applySeries() - created new series",e);break}case"remove":RP(`Chart.applySeries() - removing series at previous idx ${c.idx}`,c.series);break;case"no-op":n.push(c.series),RP(`Chart.applySeries() - no change to series at previous idx ${c.idx}`,c.series);break;default:{const{series:e,diff:t,idx:i}=c;RP(`Chart.applySeries() - applying series diff previous idx ${i}`,t,e),this.applySeriesValues(e,t),e.markNodeDataDirty(),n.push(e)}}return this.initSeriesDeclarationOrder(n),RP("Chart.applySeries() - final series instances",n),e.series=n,r?"series-grouping-change":o?"data-change":a?"updated":"no-op"}applyAxes(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!("axes"in t)||!t.axes)return!1;n=["axes[].type",...n];const o=t.axes;return"replaced"!==s&&e.axes.length===o.length&&e.axes.every(((e,t)=>e.type===o[t].type))&&aL(i)?(e.axes.forEach(((e,t)=>{const s=AM(i.axes?.[t]??{},o[t]);RP(`Chart.applyAxes() - applying axis diff idx ${t}`,s);FM(e,s,{path:`axes[${t}]`,skip:n})})),!0):(RP(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${s}`),e.axes=this.createAxis(o,n),!0)}createSeries(e){const t=kA.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(t,e),this.applySeriesValues(t,e),t}applySeriesOptionModules(e,t){const i=e.createModuleContext(),s=e.getModuleMap();for(const n of Yw.byType("series-option"))n.optionsKey in t&&n.seriesTypes.includes(e.type)&&s.addModule(n,(e=>e.moduleFactory(i)))}applySeriesValues(e,t){const i=e.getModuleMap(),{type:s,data:n,listeners:o,seriesGrouping:r,showInMiniChart:a,...l}=t;for(const c of wA)if("series-option"===c.type&&c.optionsKey in l){const e=i.getModule(c.optionsKey);if(e){const t=l[c.optionsKey];delete l[c.optionsKey],e.properties.set(t)}}null!=l.visible&&(e.visible=l.visible),e.properties.set(l),"data"in t&&e.setOptionsData(n),o&&this.registerListeners(e,o),"seriesGrouping"in t&&(e.seriesGrouping=null==r?void 0:{...e.seriesGrouping,...r})}createAxis(e,t){const i=[],s=this.getModuleContext();for(let n=0;n<e.length;n++){const o=e[n],r=bA.create(o.type,s);this.applyAxisModules(r,o),FM(r,o,{path:`axes[${n}]`,skip:t}),i.push(r)}return function(e){const t=[],i=[],s=[...nL];for(const o of e)o instanceof sL&&("string"===typeof(n=o.position)&&nL.includes(n)?i.push(o.position):t.push(o));var n;for(const o of t){let e;do{e=s.pop()}while(e&&i.includes(e));if(null==e)break;o.position=e}}(i),i}applyAxisModules(e,t){const i=e.createModuleContext(),s=e.getModuleMap();for(const n of Yw.byType("axis-option")){const o=null!=t[n.optionsKey];o!==s.isEnabled(n)&&(o?(s.addModule(n,(e=>e.moduleFactory(i))),e[n.optionsKey]=s.getModule(n)):(s.removeModule(n),delete e[n.optionsKey]))}}registerListeners(e,t){e.clearEventListeners();for(const[i,s]of qb(t))e.addEventListener(i,s)}};EP.chartsInstances=new WeakMap,$w([HM({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),EP.chartsInstances.set(e,this))},oldValue(e){EP.chartsInstances.delete(e)}})],EP.prototype,"container",2),$w([HM({newValue(e){this.resize("width option",{inWidth:e})}})],EP.prototype,"width",2),$w([HM({newValue(e){this.resize("height option",{inHeight:e})}})],EP.prototype,"height",2),$w([HM({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],EP.prototype,"minWidth",2),$w([HM({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],EP.prototype,"minHeight",2),$w([HM({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],EP.prototype,"overrideDevicePixelRatio",2),$w([fx],EP.prototype,"padding",2),$w([fx],EP.prototype,"keyboard",2),$w([fx],EP.prototype,"touch",2),$w([fx],EP.prototype,"mode",2),$w([fx],EP.prototype,"styleNonce",2),$w([zM("chartCaptions.title")],EP.prototype,"title",2),$w([zM("chartCaptions.subtitle")],EP.prototype,"subtitle",2),$w([zM("chartCaptions.footnote")],EP.prototype,"footnote",2),$w([fx],EP.prototype,"formatter",2),$w([fx],EP.prototype,"suppressFieldDotNotation",2),$w([fx],EP.prototype,"loadGoogleFonts",2),$w([HM({changeValue(e,t){this.onAxisChange(e,t)}})],EP.prototype,"axes",2),$w([HM({changeValue(e,t){this.onSeriesChange(e,t)}})],EP.prototype,"series",2);var IP=EP;function AP(e,t){let i=[];const s=e?.series?.[0]?.type,n="linear-gauge"===s||"radial-gauge"===s,o=s?EA.get(s):"unknown";for(const r of wA)if("unknown"===o||r.chartTypes.includes(o))if("root"===r.type||"legend"===r.type){const t=e[r.optionsKey];if(null==t)continue;r.optionsInnerKey?t[r.optionsInnerKey]&&(i.push(`${r.optionsKey}.${r.optionsInnerKey}`),delete t[r.optionsInnerKey]):(i.push(r.optionsKey),delete e[r.optionsKey])}else if("axis"===r.type){if(!("axes"in e)||!iC(e.axes)||!e.axes?.some((e=>e.type===r.identifier)))continue;i.push(`axis[type=${r.identifier}]`),e.axes=e.axes.filter((e=>e.type!==r.identifier))}else if("axis-option"===r.type){if(!("axes"in e)||!iC(e.axes)||!e.axes?.some((e=>e[r.optionsKey])))continue;i.push(`axis.${r.optionsKey}`),e.axes.forEach((e=>{e[r.optionsKey]&&delete e[r.optionsKey]}))}else if("series"===r.type){if(r.community)continue;if(!iC(e.series)||!e.series?.some((e=>e.type===r.identifier)))continue;i.push(`series[type=${r.identifier}]`),e.series=e.series.filter((e=>e.type!==r.identifier))}else if("series-option"===r.type){if(!iC(e.series)||!e.series?.some((e=>e[r.optionsKey])))continue;i.push(`series.${r.optionsKey}`),e.series.forEach((e=>{e[r.optionsKey]&&delete e[r.optionsKey]}))}if(i.length&&!t){n&&(i=["AgCharts.createGauge"]);let t="ag-charts-enterprise",s="https://www.ag-grid.com/charts/javascript/installation/";"integrated"===e.mode&&(t="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",s="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),xy.warnOnce([`unable to use these enterprise features as '${t}' has not been loaded:`,"",...i,"",`See: ${s}`].join("\n"))}}function kP(e){return e?.up||e?.down||e?.neutral?"user-full":e?.fills||e?.strokes?"user-indexed":"inbuilt"}var TP={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},LP={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},PP={};Uw(PP,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>sF,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>rF,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>aF,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>lF,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>cF,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>nF,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>oF,DEFAULT_CAPTION_ALIGNMENT:()=>GP,DEFAULT_CAPTION_LAYOUT_STYLE:()=>BP,DEFAULT_FIBONACCI_STROKES:()=>eF,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>iF,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>JP,DEFAULT_GRIDLINE_ENABLED:()=>gF,DEFAULT_POLAR_SERIES_STROKE:()=>QP,DEFAULT_SEPARATION_LINES_COLOUR:()=>NP,DEFAULT_SHADOW_COLOUR:()=>OP,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>XP,DEFAULT_TEXTBOX_COLOR:()=>uF,DEFAULT_TEXTBOX_FILL:()=>hF,DEFAULT_TEXTBOX_STROKE:()=>dF,DEFAULT_TEXT_ANNOTATION_COLOR:()=>tF,DEFAULT_TOOLBAR_POSITION:()=>pF,IS_DARK_THEME:()=>FP,PALETTE_ALT_DOWN_FILL:()=>YP,PALETTE_ALT_DOWN_STROKE:()=>$P,PALETTE_ALT_NEUTRAL_FILL:()=>ZP,PALETTE_ALT_NEUTRAL_STROKE:()=>qP,PALETTE_ALT_UP_FILL:()=>KP,PALETTE_ALT_UP_STROKE:()=>UP,PALETTE_DOWN_FILL:()=>HP,PALETTE_DOWN_STROKE:()=>jP,PALETTE_NEUTRAL_FILL:()=>_P,PALETTE_NEUTRAL_STROKE:()=>WP,PALETTE_UP_FILL:()=>VP,PALETTE_UP_STROKE:()=>zP});var FP=Symbol("is-dark-theme"),NP=Symbol("default-separation-lines-colour"),OP=Symbol("default-shadow-colour"),BP=Symbol("default-caption-layout-style"),GP=Symbol("default-caption-alignment"),zP=Symbol("palette-up-stroke"),jP=Symbol("palette-down-stroke"),VP=Symbol("palette-up-fill"),HP=Symbol("palette-down-fill"),WP=Symbol("palette-neutral-stroke"),_P=Symbol("palette-neutral-fill"),UP=Symbol("palette-alt-up-stroke"),$P=Symbol("palette-alt-down-stroke"),KP=Symbol("palette-alt-up-fill"),YP=Symbol("palette-alt-down-fill"),ZP=Symbol("palette-gray-fill"),qP=Symbol("palette-gray-stroke"),QP=Symbol("default-polar-series-stroke"),XP=Symbol("default-sparkline-crosshair-stroke"),JP=Symbol("default-financial-charts-annotation-stroke"),eF=Symbol("default-hierarchy-strokes"),tF=Symbol("default-text-annotation-color"),iF=Symbol("default-financial-charts-annotation-background-fill"),sF=Symbol("default-annotation-handle-fill"),nF=Symbol("default-annotation-statistics-fill"),oF=Symbol("default-annotation-statistics-stroke"),rF=Symbol("default-annotation-statistics-color"),aF=Symbol("default-annotation-statistics-divider-stroke"),lF=Symbol("default-annotation-statistics-fill"),cF=Symbol("default-annotation-statistics-stroke"),hF=Symbol("default-textbox-fill"),dF=Symbol("default-textbox-stroke"),uF=Symbol("default-textbox-color"),pF=Symbol("default-toolbar-position"),gF=Symbol("default-gridline-enabled"),mF=[{type:"number",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"left","bottom"]}}],fF={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillFallback"},{$palette:"fill"}]},vF={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillsFallback"},{$palette:"fills"}]},yF={$if:[{$isGradient:{$palette:"fill"}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},CF={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},bF={type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},wF={...bF,colorStops:[{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]},{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}]},SF=e=>({...bF,colorStops:{$if:[{$or:[{$isGradient:{$palette:`${e}.fill`}},{$isPattern:{$palette:`${e}.fill`}},{$isImage:{$palette:`${e}.fill`}}]},{$map:[{$path:["/color",void 0,{$value:"$1"}]},{$path:["/colorStops",void 0,{$palette:`${e}.fill`}]}]},[{$mix:[{$palette:`${e}.fill`},"black",.15]},{$mix:[{$palette:`${e}.fill`},"white",.15]}]]}}),xF={type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},MF={...xF,reverse:!0},DF={...xF,bounds:"series"},RF={...xF,bounds:"series",reverse:!0},EF={type:"gradient",gradient:"conic",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},IF={type:"pattern",pattern:"forward-slanted-lines",width:10,height:10,padding:2,fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:yF,strokeOpacity:1,strokeWidth:4,backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},AF={...IF,fill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]}},kF={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0};function TF(e){return wS(e,(e=>{const t=nx.fromString(e);return[nx.darken(t,.15).toString(),e,nx.lighten(t,.15).toString()]}))}var LF={stroke:{$path:["../../highlightStyle/item/stroke","rgba(0, 0, 0, 0.4)"]},strokeWidth:{$path:["../../highlightStyle/item/strokeWidth",2]},strokeOpacity:{$path:["../../highlightStyle/item/strokeOpacity",void 0]},opacity:{$path:["../../highlightStyle/item/opacity",1]}},PF={...LF,fill:{$path:["../../highlightStyle/item/fill","rgba(255,255,255, 0.33)"]},fillOpacity:{$path:["../../highlightStyle/item/fillOpacity",void 0]}},FF={padding:8,cornerRadius:4,fill:{$if:[{$and:[{$eq:[{$path:"./fill/type"},"image"]},{$isUserOption:["./fill/backgroundFill",!1,!0]}]},{backgroundFill:"transparent"},void 0]},border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}}};function NF(){return{enabled:!0,highlightedItem:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?PF:LF,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},highlightedSeries:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},unhighlightedSeries:{opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}function OF(){return{enabled:!0,highlightedItem:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?PF:LF,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]},opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}var BF={border:{enabled:!1,stroke:{$foregroundBackgroundMix:.25},strokeOpacity:1,strokeWidth:1},cornerRadius:4,fillOpacity:1,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,{$isUserOption:["./fill",5,0]}]}},GF="white",zF={get cartesian(){return{seriesTypes:EA.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:EA.polarTypes,commonOptions:[]}},get topology(){return{seriesTypes:EA.topologyTypes,commonOptions:[]}},get standalone(){return{seriesTypes:EA.standaloneTypes,commonOptions:[]}}},jF={"radial-gauge":!0,"linear-gauge":!0};var VF=class e{static getDefaultColors(){return{fills:TP,fillsFallback:Object.values(TP),strokes:LP,sequentialColors:TF(TP),divergingColors:[TP.ORANGE,TP.YELLOW,TP.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:nx.interpolate([nx.fromHexString(TP.BLUE),nx.fromHexString("#cbdef5")],8).map((e=>e.toString())),secondDivergingColors:[TP.GREEN,TP.YELLOW,TP.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:TP.GREEN,stroke:LP.GREEN},down:{fill:TP.RED,stroke:LP.RED},neutral:{fill:TP.GRAY,stroke:LP.GRAY},altUp:{fill:TP.BLUE,stroke:LP.BLUE},altDown:{fill:TP.ORANGE,stroke:LP.ORANGE},altNeutral:{fill:TP.GRAY,stroke:LP.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:.325},backgroundColor:GF,borderColor:{$foregroundOpacity:.15},borderRadius:4,chartBackgroundColor:{$ref:"backgroundColor"},chartPadding:20,focusShadow:"0 0 0 3px var(--ag-charts-accent-color)",foregroundColor:"#181d1f",fontFamily:"Verdana, sans-serif",fontSize:OD,fontWeight:400,gridLineColor:{$foregroundBackgroundMix:.1},popupShadow:"0 0 16px rgba(0, 0, 0, 0.15)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:.02},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:{$ref:"foregroundColor"},chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},buttonBackgroundColor:{$ref:"backgroundColor"},buttonBorder:!0,buttonFontWeight:400,buttonTextColor:{$ref:"textColor"},inputBackgroundColor:{$ref:"backgroundColor"},inputBorder:!0,inputTextColor:{$ref:"textColor"},menuBackgroundColor:{$ref:"chromeBackgroundColor"},menuBorder:!0,menuTextColor:{$ref:"chromeTextColor"},panelBackgroundColor:{$ref:"chromeBackgroundColor"},panelSubtleTextColor:{$ref:"chromeSubtleTextColor"},tooltipBackgroundColor:{$ref:"chromeBackgroundColor"},tooltipBorder:!0,tooltipTextColor:{$ref:"chromeTextColor"},tooltipSubtleTextColor:{$ref:"chromeSubtleTextColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"chartBackgroundColor"}}}static getAxisDefaults(e,t){let{title:i,time:s}=t;return yS(e,i&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:BD.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},s&&{parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},border:{enabled:{$or:[{$isUserOption:["../border",!0,!1]},{$path:"../../../label/border/enabled"}]},strokeWidth:{$path:"../../../label/border/strokeWidth"},stroke:{$path:"../../../label/border/stroke"}},fill:{$path:"../../label/fill"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},cornerRadius:{$path:"../../label/cornerRadius"},padding:{$path:"../../label/padding"},avoidCollisions:{$path:"../../label/avoidCollisions"}},tick:{enabled:{$path:"../../tick/enabled"},width:{$path:"../../tick/width"},size:{$path:"../../tick/size"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0,cornerRadius:4,border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}},padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},{left:12,right:12,top:8,bottom:8},void 0]}},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,width:1,style:{$apply:[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]},[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]}]]}},crossLines:{$apply:[{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.08,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},void 0,{$pathString:["/common/axes/$axisType/crossLines",{axisType:{$path:["/axes/$index/type"]}}]},{$pathString:["/$seriesType/axes/$axisType/crossLines",{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["/axes/$index/type"]}}]}]}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"chartBackgroundColor"}},padding:{top:{$ref:"chartPadding"},right:{$ref:"chartPadding"},bottom:{$ref:"chartPadding"},left:{$ref:"chartPadding"}},seriesArea:{border:{enabled:!1,stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:1},cornerRadius:4,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,0]}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:BD.LARGEST},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:BP,textAlign:GP},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:BD.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:BP,textAlign:GP},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:BD.MEDIUM},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:BP,textAlign:GP},legend:{...BF,enabled:{$and:[{$greaterThan:[{$size:[{$path:"/series"}]},1]},{$or:[{$isChartType:"cartesian"},{$isChartType:"standalone"},{$and:[{$isChartType:"polar"},{$not:{$isSeriesType:"pie"}},{$not:{$isSeriesType:"donut"}}]}]}]},position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"left-top"]},{$eq:[{$path:"./position"},"left-bottom"]},{$eq:[{$path:"./position"},"right"]},{$eq:[{$path:"./position"},"right-top"]},{$eq:[{$path:"./position"},"right-bottom"]},{$eq:[{$path:"./position/placement"},"left"]},{$eq:[{$path:"./position/placement"},"left-top"]},{$eq:[{$path:"./position/placement"},"left-bottom"]},{$eq:[{$path:"./position/placement"},"right"]},{$eq:[{$path:"./position/placement"},"right-top"]},{$eq:[{$path:"./position/placement"},"right-bottom"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$rem:BD.SMALL},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}},fill:{$if:[{$path:["./position/floating",!1]},{$ref:"chartBackgroundColor"},"transparent"]}},tooltip:{enabled:!0,darkTheme:FP,delay:0,pagination:!1,mode:{$if:[{$and:[{$isChartType:"cartesian"},{$not:{$hasSeriesType:"bubble"}},{$not:{$hasSeriesType:"scatter"}},{$greaterThan:[{$size:[{$path:"/series"}]},1]},{$lessThan:[{$size:[{$path:"/series"}]},4]}]},"shared","single"]}},overlays:{darkTheme:FP},listeners:{},series:{tooltip:{range:{$path:["/tooltip/range","exact"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","pointer"]},placement:{$path:["/tooltip/position/placement",void 0]},xOffset:{$path:["/tooltip/position/xOffset",0]},yOffset:{$path:["/tooltip/position/yOffset",0]}}}}}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{overrides:t,palette:i,params:s}=TM(e),n=this.createChartConfigPerChartType(this.getDefaults()),o={};t&&this.processOverrides(o,t);const{fills:r,strokes:a,sequentialColors:l,...c}=this.getDefaultColors();this.palette=IS(yS(i,{fills:Object.values(r),strokes:Object.values(a),sequentialColors:Object.values(l),...c})),this.paletteType=kP(i),this.params=yS(s,this.getPublicParameters()),this.config=IS(TM(n)),this.overrides=IS(t),this.presets=IS(o)}processOverrides(e,t){EA.seriesTypes.forEach((i=>{const s=i,n=t[s];!0===jF[s]&&(e[s]=n,delete t[s])}))}createChartConfigPerChartType(e){for(const[t,{seriesTypes:i}]of qb(zF)){const s=AA.get(t);for(const t of i)e[t]??(e[t]=TM(s))}return e}getDefaults(){const t=(t,i)=>{const s={},n={axes:{},...MA.getThemeTemplates(),...this.getChartDefaults(),...AA.get(t)};for(const o of i){s[o]=yS(kA.getThemeTemplate(o),s[o]??TM(n));const{axes:t}=s[o];for(const i of bA.keys())t[i]=yS(t[i],bA.getThemeTemplate(i),e.axisDefault[i]);"map-shape-background"!==o&&"map-line-background"!==o||delete s[o].series.tooltip}return s};return yS(t("cartesian",EA.cartesianTypes),t("polar",EA.polarTypes),t("topology",EA.topologyTypes),t("standalone",EA.standaloneTypes))}static applyTemplateTheme(e,t,i){if(iC(e))for(let s=0;s<e.length;s++){const t=e[s];"symbol"===typeof t&&i?.has(t)&&(e[s]=i.get(t))}else for(const s of Object.keys(e)){const t=e[s];"symbol"===typeof t&&i?.has(t)&&(e[s]=i.get(t))}}templateTheme(t){const i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?TM(t):t,s=this.getTemplateParameters();return PM(i,e.applyTemplateTheme,void 0,void 0,s),i}getDefaultColors(){return e.getDefaultColors()}getPublicParameters(){return e.getDefaultPublicParameters()}getTemplateParameters(){const e=new Map;e.set(FP,!1),e.set(NP,"#d9d9d9"),e.set(OP,"#00000080"),e.set(XP,"#aaa"),e.set(BP,"block"),e.set(GP,"center"),e.set(eF,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),e.set(QP,GF),e.set(JP,TP.BLUE),e.set(iF,TP.BLUE),e.set(tF,TP.BLUE),e.set(sF,GF),e.set(nF,"#fafafa"),e.set(oF,"#ddd"),e.set(rF,"#000"),e.set(aF,"#181d1f"),e.set(lF,"#e35c5c"),e.set(cF,"#e35c5c"),e.set(hF,"#fafafa"),e.set(dF,"#ddd"),e.set(uF,"#000"),e.set(pF,"top"),e.set(gF,!1);const t=this.getDefaultColors();return e.set(zP,this.palette.up?.stroke??t.up.stroke),e.set(VP,this.palette.up?.fill??t.up.fill),e.set(jP,this.palette.down?.stroke??t.down.stroke),e.set(HP,this.palette.down?.fill??t.down.fill),e.set(WP,this.palette.neutral?.stroke??t.neutral.stroke),e.set(_P,this.palette.neutral?.fill??t.neutral.fill),e.set(UP,this.palette.altUp?.stroke??t.up.stroke),e.set(KP,this.palette.altUp?.fill??t.up.fill),e.set($P,this.palette.altDown?.stroke??t.down.stroke),e.set(YP,this.palette.altDown?.fill??t.down.fill),e.set(ZP,this.palette.altNeutral?.fill??t.altNeutral.fill),e.set(qP,this.palette.altNeutral?.stroke??t.altNeutral.stroke),e}};VF.axisDefault={number:VF.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),log:VF.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),category:VF.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0,wrapping:"on-space"},gridLine:{enabled:gF},crosshair:{enabled:!1}},{title:!0,time:!1}),"grouped-category":VF.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:NP},label:{spacing:10,rotation:270,wrapping:"on-space"},maxThicknessRatio:.5,paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}},{title:!0,time:!1}),time:VF.getAxisDefaults({keys:[],gridLine:{enabled:gF},crosshair:{enabled:!0}},{title:!0,time:!0}),"unit-time":VF.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:gF},crosshair:{enabled:!0},parentLevel:{enabled:!0}},{title:!0,time:!0}),"ordinal-time":VF.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:gF},crosshair:{enabled:!0}},{title:!0,time:!0}),"angle-category":VF.getAxisDefaults({label:{spacing:5},gridLine:{enabled:gF},shape:{$findFirstSiblingNotOperation:void 0}},{title:!1,time:!1}),"angle-number":VF.getAxisDefaults({label:{spacing:5},gridLine:{enabled:gF}},{title:!1,time:!1}),"radius-category":VF.getAxisDefaults({positionAngle:0,line:{enabled:!1}},{title:!0,time:!1}),"radius-number":VF.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$findFirstSiblingNotOperation:void 0}},{title:!0,time:!1})};var HF=VF,WF="#192232",_F={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},UF={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},$F=class extends HF{getDefaultColors(){return{fills:_F,fillsFallback:Object.values(_F),strokes:UF,sequentialColors:TF(_F),divergingColors:[_F.ORANGE,_F.YELLOW,_F.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[_F.GREEN,_F.YELLOW,_F.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:_F.GREEN,stroke:UF.GREEN},down:{fill:_F.RED,stroke:UF.RED},neutral:{fill:_F.GRAY,stroke:UF.GRAY},altUp:{fill:_F.BLUE,stroke:UF.BLUE},altDown:{fill:_F.ORANGE,stroke:UF.ORANGE},altNeutral:{fill:_F.GRAY,stroke:UF.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:.737},backgroundColor:WF,borderColor:{$foregroundBackgroundMix:.216},chromeBackgroundColor:{$foregroundBackgroundMix:.07},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundMix:.257},popupShadow:"0 0 16px rgba(0, 0, 0, 0.33)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.57]},crosshairLabelBackgroundColor:{$foregroundBackgroundMix:.65}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(FP,!0),e.set(QP,WF),e.set(NP,"#7f8389"),e.set(JP,_F.BLUE),e.set(tF,"#fff"),e.set(iF,_F.BLUE),e.set(sF,WF),e.set(nF,"#28313e"),e.set(oF,"#4b525d"),e.set(rF,"#fff"),e.set(aF,"#fff"),e.set(hF,"#28313e"),e.set(dF,"#4b525d"),e.set(uF,"#fff"),e}constructor(e){super(e)}},KF={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},YF={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},ZF=class extends $F{getDefaultColors(){return{...super.getDefaultColors(),fills:{...KF},fillsFallback:Object.values({...KF}),strokes:{...YF},sequentialColors:TF(KF),divergingColors:[KF.GREEN,KF.BLUE,KF.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:KF.GREEN,stroke:YF.GREEN},down:{fill:KF.RED,stroke:YF.RED},neutral:{fill:KF.BLUE,stroke:YF.BLUE},altUp:{fill:KF.GREEN,stroke:YF.GREEN},altDown:{fill:KF.RED,stroke:YF.RED},altNeutral:{fill:KF.GRAY,stroke:YF.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.12}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,KF.BLUE),e.set(iF,KF.BLUE),e.set(BP,"overlay"),e.set(GP,"left"),e.set(pF,"bottom"),e.set(gF,!0),e}},qF={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},QF={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},XF=class extends HF{getDefaultColors(){return{...super.getDefaultColors(),fills:{...qF},fillsFallback:Object.values({...qF}),strokes:{...QF},sequentialColors:TF(qF),divergingColors:[qF.GREEN,qF.BLUE,qF.RED],up:{fill:qF.GREEN,stroke:QF.GREEN},down:{fill:qF.RED,stroke:QF.RED},neutral:{fill:qF.BLUE,stroke:QF.BLUE},altUp:{fill:qF.GREEN,stroke:QF.GREEN},altDown:{fill:qF.RED,stroke:QF.RED},altNeutral:{fill:qF.GRAY,stroke:QF.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.06}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,qF.BLUE),e.set(iF,qF.BLUE),e.set(BP,"overlay"),e.set(GP,"left"),e.set(pF,"bottom"),e.set(gF,!0),e}},JF={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},eN={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},tN=class extends $F{getDefaultColors(){return{...super.getDefaultColors(),fills:JF,fillsFallback:Object.values(JF),strokes:eN,sequentialColors:TF(JF),divergingColors:[JF.ORANGE,JF.YELLOW,JF.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[JF.GREEN,JF.YELLOW,JF.RED],up:{fill:JF.GREEN,stroke:eN.GREEN},down:{fill:JF.RED,stroke:eN.RED},neutral:{fill:JF.GRAY,stroke:eN.GRAY},altUp:{fill:JF.BLUE,stroke:eN.BLUE},altDown:{fill:JF.RED,stroke:eN.RED},altNeutral:{fill:JF.GRAY,stroke:eN.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,JF.BLUE),e.set(iF,JF.BLUE),e}},iN={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},sN={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},nN=class extends HF{getDefaultColors(){return{...super.getDefaultColors(),fills:iN,fillsFallback:Object.values(iN),strokes:sN,sequentialColors:TF(iN),divergingColors:[iN.ORANGE,iN.YELLOW,iN.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[iN.GREEN,iN.YELLOW,iN.RED],up:{fill:iN.GREEN,stroke:sN.GREEN},down:{fill:iN.RED,stroke:sN.RED},neutral:{fill:iN.GRAY,stroke:sN.GRAY},altUp:{fill:iN.BLUE,stroke:sN.BLUE},altDown:{fill:iN.RED,stroke:sN.RED},altNeutral:{fill:iN.GRAY,stroke:sN.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,iN.BLUE),e.set(iF,iN.BLUE),e}},oN={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},rN={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},aN=class extends $F{getDefaultColors(){return{fills:oN,fillsFallback:Object.values(oN),strokes:rN,sequentialColors:TF(oN),divergingColors:[oN.BLUE,oN.RED],hierarchyColors:[],secondSequentialColors:[oN.BLUE,oN.PURPLE,oN.MAGENTA,oN.PINK,oN.RED,oN.ORANGE,oN.YELLOW,oN.GREEN],secondDivergingColors:[oN.BLUE,oN.RED],secondHierarchyColors:[],up:{fill:oN.GREEN,stroke:rN.GREEN},down:{fill:oN.RED,stroke:rN.RED},neutral:{fill:oN.GRAY,stroke:rN.GRAY},altUp:{fill:oN.BLUE,stroke:rN.BLUE},altDown:{fill:oN.RED,stroke:rN.RED},altNeutral:{fill:oN.GRAY,stroke:rN.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,oN.BLUE),e.set(iF,oN.BLUE),e}},lN={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},cN={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},hN=class extends HF{getDefaultColors(){return{...super.getDefaultColors(),fills:lN,fillsFallback:Object.values(lN),strokes:cN,sequentialColors:TF(lN),divergingColors:[lN.BLUE,lN.RED],hierarchyColors:[],secondSequentialColors:[lN.BLUE,lN.PURPLE,lN.MAGENTA,lN.PINK,lN.RED,lN.ORANGE,lN.YELLOW,lN.GREEN],secondDivergingColors:[lN.BLUE,lN.RED],secondHierarchyColors:[],up:{fill:lN.GREEN,stroke:cN.GREEN},down:{fill:lN.RED,stroke:cN.RED},neutral:{fill:lN.GRAY,stroke:cN.GRAY},altUp:{fill:lN.BLUE,stroke:cN.BLUE},altDown:{fill:lN.RED,stroke:cN.RED},altNeutral:{fill:lN.GRAY,stroke:cN.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,lN.BLUE),e.set(iF,lN.BLUE),e}},dN={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},uN={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},pN=class extends $F{getDefaultColors(){return{...super.getDefaultColors(),fills:{...dN,RED:dN.ORANGE},fillsFallback:Object.values({...dN,RED:dN.ORANGE}),strokes:{...uN,RED:uN.ORANGE},sequentialColors:TF({...dN,RED:dN.ORANGE}),divergingColors:[dN.ORANGE,dN.YELLOW,dN.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[dN.GREEN,dN.YELLOW,dN.ORANGE],up:{fill:dN.GREEN,stroke:uN.GREEN},down:{fill:dN.ORANGE,stroke:uN.ORANGE},neutral:{fill:dN.GRAY,stroke:uN.GRAY},altUp:{fill:dN.BLUE,stroke:uN.BLUE},altDown:{fill:dN.ORANGE,stroke:uN.ORANGE},altNeutral:{fill:dN.GRAY,stroke:uN.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,dN.BLUE),e.set(iF,dN.BLUE),e}},gN={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},mN={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},fN=class extends HF{getDefaultColors(){return{...super.getDefaultColors(),fills:{...gN,RED:gN.ORANGE},fillsFallback:Object.values({...gN,RED:gN.ORANGE}),strokes:{...mN,RED:mN.ORANGE},sequentialColors:TF({...gN,RED:gN.ORANGE}),divergingColors:[gN.ORANGE,gN.YELLOW,gN.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[gN.GREEN,gN.YELLOW,gN.ORANGE],secondHierarchyColors:[],up:{fill:gN.GREEN,stroke:mN.GREEN},down:{fill:gN.ORANGE,stroke:mN.ORANGE},neutral:{fill:mN.GRAY,stroke:mN.GRAY},altUp:{fill:gN.BLUE,stroke:mN.BLUE},altDown:{fill:gN.ORANGE,stroke:mN.ORANGE},altNeutral:{fill:gN.GRAY,stroke:mN.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,gN.BLUE),e.set(iF,gN.BLUE),e}},vN=["top","top-right","top-left","bottom","bottom-right","bottom-left","right","right-top","right-bottom","left","left-top","left-bottom"],yN={floating:WC,placement:rb(...vN),xOffset:YC,yOffset:YC},CN=LC(((e,t)=>{let i;if("string"===typeof e){vN.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new AC(EC.Invalid,`a legend placement string: ["${vN.join('", "')}"]`,e,t.path)))}else{const{cleared:t,invalid:s}=TC(e,yN);i={valid:0===s.length,cleared:t,invalid:s}}return i}),"a legend position object or placement string"),bN=jC(rb("circle","cross","diamond","heart","plus","pin","square","star","triangle"),_C),wN=rb("never","always","hyphenate","on-space"),SN=rb("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),xN=jC(tb,rb("exact","nearest")),MN=jC(qC,cb({text:PC(qC),...Nb},"text segments array")),DN=rb("pointer","start","middle","end"),RN={enabled:WC,text:MN,textAlign:rb("left","center","right"),wrapping:rb("never","always","hyphenate","on-space"),spacing:tb,maxWidth:tb,maxHeight:tb,...Nb};RN.padding=FC(tb);var EN={enabled:WC,text:MN,renderer:hb(jC(qC,QC))},IN=["defaults","download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series","separator"],AN={type:rb("action","separator"),showOn:rb("always","series-area","series-node","legend-item"),label:PC(qC),enabled:WC,action:_C,items:(e,t)=>LN(e,t)};AN.iconUrl=FC(qC);var kN=BC(AN),TN=LC(((e,t)=>{let i;if("string"===typeof e){IN.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new AC(EC.Invalid,`a context menu item string alias: ["${IN.join('", "')}"]`,e,t.path)))}else i=kN(e,t);return i}),`a context menu item object or string alias: [${IN.join(", ")}]`),LN=lb(TN,"a menu items array",!1),PN={label:qC,ariaLabel:qC,tooltip:qC,icon:rb("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},FN=jC(qC,hb(qC)),NN=BC({x:FN,y:FN,angle:FN,radius:FN,size:FN,color:FN,label:FN,secondaryLabel:FN,sectorLabel:FN,calloutLabel:FN,legendItem:FN}),ON=LC((function(e){if(!hC(e))return!1;const t=Lw.exec(e);return Tw.test(t?t[2]:e)}),"a valid number format string"),BN={width:tb,height:tb,minWidth:tb,minHeight:tb,suppressFieldDotNotation:WC,title:RN,subtitle:RN,footnote:RN,padding:{top:tb,right:tb,bottom:tb,left:tb},seriesArea:{border:Gb,clip:WC,cornerRadius:YC,padding:Bb},legend:{enabled:WC,position:CN,orientation:rb("horizontal","vertical"),maxWidth:tb,maxHeight:tb,spacing:tb,border:Gb,cornerRadius:YC,padding:Bb,fill:Db,fillOpacity:sb,preventHidingAll:WC,reverseOrder:WC,toggleSeries:WC,item:{marker:{size:tb,shape:bN,padding:tb,strokeWidth:tb},line:{length:tb,strokeWidth:tb},label:{maxLength:tb,formatter:_C,...Nb},maxWidth:tb,paddingX:tb,paddingY:tb,showSeriesStroke:WC},pagination:{marker:{size:tb,shape:bN,padding:tb},activeStyle:{...Rb,...bb},inactiveStyle:{...Rb,...bb},highlightStyle:{...Rb,...bb},label:Nb},listeners:{legendItemClick:_C,legendItemDoubleClick:_C}},gradientLegend:{enabled:WC,position:CN,spacing:tb,reverseOrder:WC,border:Gb,cornerRadius:YC,padding:Bb,fill:Db,fillOpacity:sb,gradient:{preferredLength:tb,thickness:tb},scale:{label:{...Nb,minSpacing:tb,format:ON,formatter:_C},padding:tb,interval:{step:YC,values:HC,minSpacing:zC(tb,nb("maxSpacing")),maxSpacing:zC(tb,ob("minSpacing"))}}},listeners:{seriesNodeClick:_C,seriesNodeDoubleClick:_C,seriesVisibilityChange:_C,click:_C,doubleClick:_C,annotations:_C,zoom:_C},loadGoogleFonts:WC,highlight:{range:rb("tooltip","node")},overlays:{loading:EN,noData:EN,noVisibleSeries:EN,unsupportedBrowser:EN},tooltip:{enabled:WC,showArrow:WC,pagination:WC,delay:tb,range:xN,wrapping:wN,mode:rb("single","shared","compact"),position:{anchorTo:rb("pointer","node","chart"),placement:jC(SN,lb(SN)),xOffset:YC,yOffset:YC}},animation:{enabled:WC,duration:tb},contextMenu:{enabled:WC,items:LN},context:()=>!0,dataSource:{getData:_C},keyboard:{enabled:WC,tabIndex:YC},touch:{dragAction:rb("none","drag","hover")},ranges:{enabled:WC,buttons:cb({...PN,value:jC(YC,zC(lb(jC(YC,$C)),XC(2,2)),_C)},"range button options array")},locale:{localeText:ZC,getLocaleText:hb(qC)},background:{visible:WC,fill:UC,image:{url:PC(qC),top:YC,right:YC,bottom:YC,left:YC,width:tb,height:tb,opacity:sb}},styleNonce:qC,sync:{enabled:WC,groupId:qC,axes:rb("x","y","xy"),nodeInteraction:WC,zoom:WC},zoom:{enabled:WC,enableAxisDragging:WC,enableAxisScrolling:WC,enableDoubleClickToReset:WC,enablePanning:WC,enableScrolling:WC,enableSelecting:WC,enableTwoFingerZoom:WC,keepAspectRatio:WC,anchorPointX:DN,anchorPointY:DN,axisDraggingMode:rb("pan","zoom"),axes:rb("x","y","xy"),deceleration:jC(rb("off","short","long"),sb),minVisibleItems:tb,panKey:rb("alt","ctrl","meta","shift"),scrollingStep:sb,autoScaling:{enabled:WC,padding:sb},buttons:{enabled:WC,buttons:cb({...PN,value:rb("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:qC},"zoom button options array"),visible:rb("always","zoomed","hover")}},formatter:jC(hb(qC),NN)};BN.dataSource.requestThrottle=FC(tb),BN.dataSource.updateThrottle=FC(tb),BN.dataSource.updateDuringInteraction=FC(WC),BN.zoom.enableIndependentAxes=FC(WC),BN.statusBar=FC(KC),BN.foreground=FC({visible:WC,text:qC,image:{url:qC,top:YC,right:YC,bottom:YC,left:YC,width:tb,height:tb,opacity:sb},...Rb}),BN.overrideDevicePixelRatio=FC(YC),BN.sync.domainMode=FC(rb("direction","position","key"));var GN={cursor:qC,context:()=>!0,showInLegend:WC,nodeClickRange:xN,listeners:{seriesNodeClick:_C,seriesNodeDoubleClick:_C},highlightStyle:{item:{...Rb,...bb},series:{enabled:WC,dimOpacity:sb,strokeWidth:tb}},highlight:Tb(kb)},zN={...GN,id:qC,visible:WC,context:()=>!0,data:HC};zN.seriesGrouping=FC(KC);var jN={enabled:WC,shape:bN,size:tb,itemStyler:db({...Rb,...bb,...Eb,shape:bN,size:tb}),...Rb,...bb,...Eb},VN={enabled:WC,formatter:_C,format:ON,itemStyler:FC(db({enabled:WC,...zb,...Nb})),...zb,...Nb},HN={...VN,lineHeight:tb,minimumFontSize:tb,wrapping:wN,overflowStrategy:rb("ellipsis","hide")},WN={visible:WC,cap:{visible:WC,length:tb,lengthRatio:sb,...bb,...Eb},...bb,...Eb},_N={...WN,xLowerKey:qC,xUpperKey:qC,yLowerKey:qC,yUpperKey:qC,xLowerName:qC,xUpperName:qC,yLowerName:qC,yUpperName:qC,itemStyler:db({visible:WC,...bb,...Eb,cap:{visible:WC,length:tb,lengthRatio:sb,...bb,...Eb}})},UN={enabled:WC,showArrow:WC,range:xN,renderer:hb(jC(qC,BC({heading:qC,title:qC,data:cb({label:PC(qC),value:PC(qC)})},"tooltip renderer result object"))),position:{anchorTo:rb("node","pointer","chart"),placement:jC(SN,lb(SN)),xOffset:YC,yOffset:YC},interaction:{enabled:WC}},$N={enabled:WC,xOffset:YC,yOffset:YC,blur:tb,color:UC},KN=GC({linear:{},smooth:{tension:sb},step:{position:rb("start","middle","end")}},"interpolation line options"),YN={fills:zC(XC(2),lb(BC({color:UC,stop:YC},"")),fb),fillMode:rb("continuous","discrete")},ZN={value:PC(YC),text:qC,shape:jC(rb("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),_C),placement:rb("before","after","middle"),spacing:tb,size:tb,rotation:YC,...Rb,...bb,...Eb},qN={value:PC(YC),text:qC,shape:jC(rb("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),_C),placement:rb("inside","outside","middle"),spacing:tb,size:tb,rotation:YC,label:{...VN,spacing:tb},...Rb,...bb,...Eb},QN={direction:rb("horizontal","vertical"),cornerMode:rb("container","item"),cornerRadius:tb,thickness:tb,segmentation:{enabled:WC,spacing:tb,interval:{values:lb(YC),step:YC,count:YC}},bar:{enabled:WC,thickness:tb,thicknessRatio:sb,...YN,...Rb,...bb,...Eb},label:{...HN,text:qC,spacing:tb,avoidCollisions:WC,placement:rb("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:UN,...SS(GN,["listeners"])},XN={...QN,...SS(zN,["listeners"]),type:PC(ab("linear-gauge")),value:PC(YC),scale:{min:zC(YC,nb("max")),max:zC(YC,ob("min")),label:{enabled:WC,formatter:_C,rotation:YC,spacing:tb,minSpacing:tb,placement:rb("before","after"),avoidCollisions:WC,format:ON,...Nb},interval:{values:lb(YC),step:YC},...YN,...Rb,...bb,...Eb},targets:cb(ZN,"target options array")};XN.margin=FC(YC),XN.defaultColorRange=FC(lb(UC)),XN.defaultTarget=FC({...ZN,value:YC,label:{...VN,spacing:YC}}),XN.defaultScale=FC(XN.scale),XN.scale.defaultFill=FC(UC);var JN={outerRadius:tb,innerRadius:tb,outerRadiusRatio:sb,innerRadiusRatio:sb,startAngle:YC,endAngle:YC,spacing:tb,cornerMode:rb("container","item"),cornerRadius:tb,scale:{min:zC(YC,nb("max")),max:zC(YC,ob("min")),label:{enabled:WC,formatter:_C,rotation:YC,spacing:tb,minSpacing:tb,avoidCollisions:WC,format:ON,...Nb},interval:{values:lb(YC),step:YC},...YN,...Rb,...bb,...Eb},segmentation:{enabled:WC,spacing:tb,interval:{values:lb(YC),step:YC,count:YC}},bar:{enabled:WC,...YN,...Rb,...bb,...Eb},needle:{enabled:WC,spacing:tb,radiusRatio:sb,...Rb,...bb,...Eb},label:{text:qC,spacing:tb,...HN},secondaryLabel:{text:qC,...HN},tooltip:UN,...GN},eO={...JN,...zN,type:PC(ab("radial-gauge")),value:PC(YC),targets:cb(qN,"target options array")};eO.defaultColorRange=FC(lb(UC)),eO.defaultTarget=FC({...qN,value:YC,label:{...VN,spacing:YC}}),eO.scale.defaultFill=FC(UC);var tO=rb("millisecond","second","minute","hour","day","month","year"),iO={unit:PC(tO),step:ib,epoch:$C,utc:WC};iO.every=_C;var sO=BC(iO,"a time interval object"),nO={enabled:WC,text:qC,padding:YC,...Nb},oO=LC({enabled:WC,type:PC(rb("line","range")),range:zC(LC(((e,t)=>{let{options:i}=t;return"range"===i.type}),"crossLine type to be 'range'"),lb(KC),XC(2,2)),value:zC(LC(((e,t)=>{let{options:i}=t;return"line"===i.type}),"crossLine type to be 'line'"),KC),label:nO,fill:UC,fillOpacity:sb,...bb,...Eb},"cross-line options"),rO={...oO,label:{...nO,position:rb("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:YC}},aO={enabled:WC,rotation:YC,avoidCollisions:WC,minSpacing:tb,spacing:tb,formatter:_C,itemStyler:FC(db({...Nb,...zb,spacing:YC})),...Nb,...zb},lO={autoRotate:WC,autoRotateAngle:YC,wrapping:rb("never","always","hyphenate","on-space"),truncate:WC,...aO},cO={format:ON,...lO},hO={format:jC(qC,ZC),...lO},dO={enabled:WC,width:tb,size:tb,stroke:UC},uO={enabled:WC,label:hO,tick:dO},pO={values:lb(KC),minSpacing:tb},gO={reverse:WC,gridLine:{enabled:WC,width:tb,style:cb({fill:UC,fillOpacity:tb,stroke:jC(UC,gb),strokeWidth:tb,lineDash:lb(tb)},"a grid-line style object array")},interval:pO,label:aO,line:{enabled:WC,width:tb,stroke:UC},tick:dO,context:()=>!0};gO.layoutConstraints=FC({stacked:PC(WC),align:PC(rb("start","end")),unit:PC(rb("percent","px")),width:PC(tb)});var mO={...gO,keys:lb(qC),crossLines:cb(rO,"a cross-line options array"),position:rb("top","right","bottom","left"),thickness:tb,maxThicknessRatio:sb,title:{enabled:WC,text:qC,spacing:tb,formatter:_C,...Nb}};mO.title._enabledFromTheme=FC(WC);var fO={enabled:WC,...Rb,...bb,...Eb};function vO(e,t){const i={enabled:WC,xOffset:YC,yOffset:YC,formatter:hb(qC),renderer:hb(jC(qC,BC({text:qC,color:UC,backgroundColor:UC,opacity:sb},"crosshair label renderer result object")))};let s;return e&&(s={...i,format:t?jC(qC,BC({millisecond:qC,second:qC,hour:qC,day:qC,month:qC,year:qC})):qC}),{enabled:WC,snap:WC,label:s??i,...bb,...Eb}}function yO(e,t){return{min:zC(e,nb("max")),max:zC(e,ob("min")),nice:WC,interval:{step:t?jC(ib,tO,sO):ib,values:lb(e),minSpacing:zC(tb,nb("maxSpacing")),maxSpacing:zC(tb,ob("minSpacing"))}}}var CO={step:jC(ib,tO,sO),values:lb(jC(YC,$C)),minSpacing:zC(tb,nb("maxSpacing")),maxSpacing:zC(tb,ob("minSpacing")),placement:rb("on","between")},bO=class e extends sL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pT,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(e,t),this.groupPaddingInner=.1,this.includeInvisibleDomains=i,this.nice=!1}static is(t){return t instanceof e}isCategoryLike(){return!0}hasDefinedDomain(){return!1}normaliseDataDomain(e){return{domain:e,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:e,paddingOuter:t}=this;if(!uC(e)||!uC(t)){const i=this.reduceBandScalePadding();e??(e=i.inner),t??(t=i.outer)}this.scale.paddingInner=e??0,this.scale.paddingOuter=t??0}calculateGridLines(e,t,i){const s=super.calculateGridLines(e,t,i);return"between"===this.interval.placement&&e.length>0&&s.push(super.calculateGridLine({index:e.at(-1).index+1,tickId:`after:${e.at(-1).tickId}`,translation:this.range[1]},e.length,t,i,e)),s}calculateGridLine(e,t,i,s,n){let{index:o,tickId:r,translation:a}=e;const{gridLine:l,horizontal:c,interval:h,scale:d}=this;if("between"!==h.placement)return super.calculateGridLine({index:o,tickId:r,translation:a},t,i,s,n);const u=a-(a<d.step?Math.floor(d.step/2):d.step/2),[p,g,m,f]=c?[u,Math.max(i,s),u,Math.min(i,s)]:[Math.min(i,s),u,Math.max(i,s),u],{style:v}=l,{stroke:y,strokeWidth:C=0,lineDash:b}=v[o%v.length]??{};return{tickId:r,offset:u,x1:p,y1:g,x2:m,y2:f,stroke:y,strokeWidth:C,lineDash:b}}calculateGridFills(e,t,i){const{horizontal:s,range:n,scale:o}=this;if("between"!==this.interval.placement)return super.calculateGridFills(e,t,i);const r=[];if(0==e.length)return r;const a=e[0],l=a.translation>n[0]+o.step/2,c=e[e.length-1],h=s&&c.translation<n[1]-o.step/2;if(l){const s={tickId:`before:${a.tickId}`,translation:a.translation-o.step};r.push(this.calculateGridFill(s,-1,a.index-1,t,i,e))}if(r.push(...e.map(((s,n)=>this.calculateGridFill(s,n,s.index,t,i,e)))),h){const s={tickId:`after:${c.tickId}`,translation:c.translation+o.step};r.push(this.calculateGridFill(s,e.length,c.index+1,t,i,e))}return r}calculateGridFill(e,t,i,s,n,o){let{tickId:r,translation:a}=e;const{gridLine:l,horizontal:c,interval:h,scale:d}=this;if("between"!==h.placement)return super.calculateGridFill({tickId:r,translation:a},t,i,s,n,o);const u=a-d.step/2,p=a+d.step/2,[g,m,f,v]=c?[u,Math.max(s,n),p,Math.min(s,n)]:[Math.min(s,n),u,Math.max(s,n),p],{fill:y,fillOpacity:C}=l.style[i%l.style.length]??{};return{tickId:r,x1:g,y1:m,x2:f,y2:v,fill:y,fillOpacity:C}}calculateTickLines(e,t){const i=super.calculateTickLines(e,t);return"between"===this.interval.placement&&e.length>0&&i.push(super.calculateTickLine({primary:!1,tickId:`after:${e.at(-1)?.tickId}`,translation:this.range[1]},e.length,t,e)),i}calculateTickLine(e,t,i,s){let{primary:n,tickId:o,translation:r}=e;const{horizontal:a,interval:l,primaryTick:c,scale:h,tick:d}=this;if("between"!==l.placement)return super.calculateTickLine({primary:n,tickId:o,translation:r},t,i,s);const u=n&&c?.enabled?c:d,p=-i*this.getTickSize(u),g=r-(r<h.step?Math.floor(h.step/2):h.step/2),[m,f,v,y]=a?[g,0,g,p]:[0,g,p,g],{stroke:C,width:b}=u;return{tickId:o,offset:g,x1:m,y1:f,x2:v,y2:y,stroke:C,strokeWidth:b,lineDash:void 0}}reduceBandScalePadding(){return this.boundSeries.reduce(((e,t)=>{const i=t.getBandScalePadding?.();return i&&(e.inner>i.inner&&(e.inner=i.inner),e.outer<i.outer&&(e.outer=i.outer)),e}),{inner:1/0,outer:-1/0})}tickFormatParams(e,t,i,s){return{type:"category"}}datumFormatParams(e,t,i,s,n){const{datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:h,domain:d,boundSeries:u}=t;return Array.isArray(e)&&e.some((e=>"string"!==typeof e))?e=e.map(String):Array.isArray(e)||"string"===typeof e||"number"===typeof e||e instanceof Date||(e=String(e)),{type:"category",value:e,datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:h,domain:d,boundSeries:u}}};bO.className="CategoryAxis",bO.type="category",$w([fx],bO.prototype,"groupPaddingInner",2),$w([fx],bO.prototype,"paddingInner",2),$w([fx],bO.prototype,"paddingOuter",2);var wO=bO,SO=class e extends pT{static is(t){return t instanceof e}normalizeDomains(){const{domain:e}=super.normalizeDomains(...arguments);return{domain:e,animatable:!1}}findIndex(e){return super.findIndex(e)??this.getMatchIndex(e)}getMatchIndex(e){const t=JSON.stringify(e),i=this._domain.find((e=>JSON.stringify(e)===t));if(null!=i)return super.findIndex(i)}};function xO(e){if(0===e.length)return null;let t=1/0,i=-1/0;for(const n of e){const e=n instanceof Date?n.getTime():n;"number"===typeof e&&(e<t&&(t=e),e>i&&(i=e))}const s=[t,i];return s.every(isFinite)?s:null}function MO(e,t,i){let s=!1;const n=xO(e);if(null==n)return{extent:null!=t&&null!=i&&t<=i?[t,i]:[],clipped:!1};let[o,r]=n;return null!=t&&(s||(s=t>o),o=t),null!=i&&(s||(s=i<r),r=i),o>r?{extent:[],clipped:!1}:{extent:[o,r],clipped:s}}function DO(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of e)"number"===typeof i&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function RO(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:e=>DO(e)}}function EO(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:e=>DO(e),groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t}}}function IO(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t}}}function AO(e,t){const i={id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:e=>DO(e),groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];return t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t[2]++,t},finalFunction:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const t=e[0]+e[1];return t>=0?[0,t/e[2]]:[t/e[2],0]}};return i}function kO(e,t,i){const s={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=i[1]-i[0];return t.aggregateFunction(e).map((e=>e/s))}};return t.groupAggregateFunction&&(s.groupAggregateFunction=t.groupAggregateFunction),s}function TO(e){return()=>{let t=0;return i=>uC(i)?(t+=e?Math.max(0,i):i,t):i}}function LO(){return()=>{let e=0;return t=>{if(!uC(t))return t;const i=e;return e+=t,i}}}var PO=1e3;function FO(e){return e.input.count<=PO}function NO(e){return null!=e&&Lk(e)}function OO(e){return null!=e}function BO(e){switch(e){case"number":case"log":case"time":case"unit-time":case"ordinal-time":case"color":return NO;default:return OO}}function GO(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function zO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{property:e,type:"key",valueType:GO(t),validation:BO(t),...i}}function jO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{property:e,type:"value",valueType:GO(t),validation:BO(t),...i}}function VO(e){return{property:e,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}var HO=function(e){return e};function WO(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=t.filter((e=>null!=e));return 0===s.length?()=>HO:1===s.length?s[0]:()=>{const e=s.map((e=>e()));return(t,i)=>e.reduce(((e,t)=>t(e,i)),t)}}function _O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{min:i=-1/0,max:s=1/0,processor:n,...o}=t;return{type:"value",property:e,valueType:"range",validation:NO,processor:WO(n,(()=>e=>uC(e)?dw(i,e,s):e)),...o}}function UO(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{onlyPositive:s,processor:n,...o}=i;return{...jO(e,t,o),processor:WO(n,TO(s))}}function $O(e,t){return{...jO(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),processor:LO()}}function KO(e,t,i,s,n){return[jO(e,n,s),lB(s.groupId,t,i,s.separateNegative),...null!=s.rangeId?[(o=s.rangeId,r=s.groupId,{id:o,matchGroupIds:[r],type:"aggregate",aggregateFunction:e=>nA.extendDomain(e)})]:[]];var o,r}function YO(e,t,i){return[jO(e,t,i),hB(i.groupId)]}var ZO={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,i=arguments.length>1?arguments[1]:void 0;const s="number"===typeof i[0]?i[0]:Number(i[0]),n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n<t?n:t}}},qO={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1/0,i=arguments.length>1?arguments[1]:void 0;const s="number"===typeof i[0]?i[0]:Number(i[0]),n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n>t?n:t}}},QO={type:"processor",property:"sortedGroupDomain",calculate:e=>{let{domain:{groups:t}}=e;return t?.slice().sort(((e,t)=>{for(let i=0;i<e.length;i++){const s=e[i]-t[i];if(0!==s)return s}return 0}))}};function XO(e){let{normaliseTo:t}=e;const i=(e,i)=>{if(0===i)return null;const s=(e??0)*t/i;return s>=0?Math.min(t,s):Math.max(-t,s)};return()=>()=>(e,t,s)=>{const n=function(e,t,i){const s=[0,0];for(const n of t){const t=e[n],o=i.datumIndices[n];if(null!=o)for(const e of o){const i=t[e];if(null==i)continue;const n="number"===typeof i?i:Math.max(...i.map((e=>e??0))),o=n<0?0:1;s[o]=0===o?Math.min(s[o],n):Math.max(s[o],n)}}return Math.max(Math.abs(s[0]),s[1])}(e,t,s);for(const o of t){const t=s.datumIndices[o];if(null!=t)for(const s of t){const t=e[o],r=t[s];null!=r?t[s]="number"===typeof r?i(r,n):r.map((e=>i(e,n))):t[s]=void 0}}}}function JO(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:hE({normaliseTo:t},XO)}}function eB(e){let{normaliseTo:t,zeroDomain:i,rangeMin:s,rangeMax:n}=e;const o=t[1]-t[0],r=(e,s,n)=>{const r=t[0]+(e-s)/n*o;return 0===n?i:r>=t[1]?t[1]:r<t[0]?t[0]:r};return()=>(e,i)=>{let[o,a]=e.domain.values[i];null!=s&&(o=s),null!=n&&(a=n);const l=a-o;e.domain.values[i]=[t[0],t[1]];const c=e.columns[i];for(let t=0;t<c.length;t+=1)c[t]=r(c[t],o,l)}}function tB(e,t,i,s,n){return{type:"property-value-processor",property:e,adjust:hE({normaliseTo:t,rangeMin:s,rangeMax:n,zeroDomain:i},eB)}}var iB=1,sB=2;function nB(e,t,i,s){let n=iB|sB;if("category"===t.valueType)return i.length<e&&(n&=~iB),n;let o=s[0]?.valueOf();for(let r=1;0!==n&&r<s.length;r++){const e=s[r]?.valueOf();(!Number.isFinite(e)||o>e)&&(n&=~sB),Number.isFinite(e)&&o===e&&(n&=~iB),o=e}return n}function oB(e){return{type:"processor",property:"animationValidation",calculate(t){if(!FO(t))return;const{keys:i,values:s}=t.defs,{input:n,domain:{keys:o,values:r},keys:a,columns:l,invalidKeyCount:c}=t;let h=iB|sB;if(0!==n.count){for(let e=0;0!==h&&e<i.length;e++)for(const t of i[e].scopes){const s=a[e].get(t),n=c?.get(t)??0;h&=nB(s.length-n,i[e],o[e],s)}for(let t=0;0!==h&&t<s.length;t++){const i=s[t];e?.includes(i.id)&&(h&=nB(0,i,r[t],l[t]))}}return{uniqueKeys:0!==(h&iB),orderedKeys:0!==(h&sB)}}}}function rB(e){let{mode:t,separateNegative:i}=e;return()=>()=>(e,s,n)=>{const o=[0,0];for(const r of s){const s=n.datumIndices[r];if(null!=s)for(const n of s){const s=e[r],a=s[n],l=pw(a)&&i?0:1;uC(a)&&("normal"===t&&(o[l]+=a),s[n]=o[l],"trailing"===t&&(o[l]+=a))}}}}function aB(e){let{mode:t,sum:i}=e;return()=>{const e=[];let s=!0;return()=>(n,o,r)=>{let a=0;for(const l of o){const o=n[l],c=r.datumIndices[l];if(null!=c)for(const n of c){const r=o[n],c=s&&"current"===i?0:e[l];e[l]=r;const h="current"===i?r:c;uC(r)&&uC(c)?("normal"===t&&(a+=h),o[n]=a,"trailing"===t&&(a+=h)):o[n]=a}}s=!1}}}function lB(e,t,i){let s,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.startsWith("window")){s=hE({mode:t.endsWith("-trailing")?"trailing":"normal",sum:i},aB)}else s=hE({mode:t,separateNegative:n},rB);return{type:"group-value-processor",matchGroupIds:[e],adjust:s}}function cB(){return()=>(e,t,i)=>{const s=new Float64Array(t.length);let n=0;for(const o of t){const t=e[o],r=i.datumIndices[o];if(null!=r)for(const e of r){const i=t[e];s[n]=Number.isFinite(i)?i:NaN,n+=1,t[e]=s.subarray(0,n)}}}}function hB(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:cB}}function dB(e){return e.id??e.property}function uB(e,t,i,s,n){for(const{previousIndex:o,nextIndex:r}of i){const i=e[o],a=t[r];if(i[s]!==a[n])return!1}return!0}function pB(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{type:"processor",property:"diff",calculate(s,n){if(!FO(s))return;const o=new Map,r=new Map,a=new Map,l=new Map,c=t.keys,h=s.keys,d=t.columns,u=s.columns,p=function(e,t,i){const s=new Map,n=t.defs.values;for(let a=0;a<n.length;a+=1){const t=n[a];if(!1===t.scopes?.includes(e))continue;const i=dB(t);if(s.has(i))return;s.set(i,a)}const o=[],r=i.defs.values;for(let a=0;a<r.length;a+=1){const t=r[a];if(!1===t.scopes?.includes(e))continue;const i=dB(t),n=s.get(i);if(null==n)return;s.delete(i),o.push({previousIndex:n,nextIndex:a})}if(0===s.size)return o}(e,t,s);if(null==p)return n;const g=Math.max(t.input.count,s.input.count);for(let f=0;f<g;f++){const n=f<t.input.count,g=f<s.input.count,m=n?gA(c,e,f):void 0,v=null!=m?gB(m):"",y=g?gA(h,e,f):void 0,C=null!=y?gB(y):"";if(g&&n&&v===C){uB(d,u,p,f,f)||a.set(C,f);continue}const b=l.get(C);null!=b?(!i&&uB(d,u,p,b,f)||(a.set(C,f),o.set(C,f)),l.delete(C)):g&&r.set(C,f);const w=r.get(v);null!=w?(!i&&uB(d,u,p,w,f)||(a.set(v,f),o.set(v,f)),r.delete(v)):n&&(a.delete(v),l.set(v,f))}const m={changed:r.size>0||a.size>0||l.size>0,added:new Set(r.keys()),updated:new Set(a.keys()),removed:new Set(l.keys()),moved:new Set(o.keys())};return{...n,[e]:m}}}}function gB(e){let t;t=iC(e)?e.map((e=>Pk(e))).join("___"):Pk(e);const i="string"===typeof t||"number"===typeof t||"boolean"===typeof t||t instanceof Date;for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];return i&&n.length>0&&(t+=`___${n.join("___")}`),t}var mB=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},fB=class e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.label=e,this.parent=t,this.refId=i,this.position=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=t?t.depth+1:0}insertTick(t,i){let s=this;for(let n=0;n<t.length;n++){const o=t[n],r=n!==t.length-1,{children:a}=s,l=a.find((e=>e.label===o));if(l&&r)s=l;else{const t=new e(o,s,i);t.index=a.length,a.push(t),r&&(s=t)}}}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter(((e,t)=>t!==this.index))??[]}};function vB(e,t,i){const s=i/(t.index-e.index);t.change-=s,t.shift+=i,e.change+=s,t.prelim+=i,t.mod+=i}function yB(e,t,i){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:i}function CB(e,t){const i=e.getLeftSibling();if(i){let s=e,n=e,o=i,r=n.getLeftmostSibling(),a=n.mod,l=s.mod,c=o.mod,h=r.mod;for(;o.nextRight()&&n.nextLeft();){o=o.nextRight(),n=n.nextLeft(),r=r.nextLeft(),s=s.nextRight(),s.ancestor=e;const i=o.prelim+c-(n.prelim+a)+1;i>0&&(vB(yB(o,e,t),e,i),a+=i,l+=i),c+=o.mod,a+=n.mod,h+=r.mod,l+=s.mod}o.nextRight()&&!s.nextRight()?s.mod+=c-l:(n.nextLeft()&&!r.nextLeft()&&(r.mod+=a-h),t=e)}return t}function bB(e){const{children:t}=e;if(t.length){let[i]=t;for(const e of t)bB(e),i=CB(e,i);!function(e){let{children:t}=e,i=0,s=0;for(let n=t.length-1;n>=0;n--){const e=t[n];e.prelim+=i,e.mod+=i,s+=e.change,i+=e.shift+s}}(e);const s=(t[0].prelim+t.at(-1).prelim)/2,n=e.getLeftSibling();n?(e.prelim=n.prelim+1,e.mod=e.prelim-s):e.prelim=s}else{const t=e.getLeftSibling();e.prelim=t?t.prelim+1:0}}function wB(e,t,i){e.position=e.prelim+t,i.insertNode(e);for(const s of e.children)wB(s,t+e.mod,i)}function SB(e){const{children:t}=e;let i=0;for(const s of t)SB(s),s.children.length?i+=s.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[t.length-1].subtreeRight,e.position=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.position,e.subtreeRight=e.position)}function xB(e){const t=new MB,i=function(e){const t=e.reduce(((e,t)=>e<t.length?t.length:e),0),i=new fB;for(let s=0;s<e.length;s++){const n=e[s];for(;n.length<t;)n.push("");i.insertTick(n,s)}return i}(e);return bB(i),wB(i,-i.prelim,t),SB(i),t}var MB=class{constructor(){this.dimensions=new mB,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.position,e.depth),this.nodes.push(e)}scaling(e,t){let i=1;if(e>0){const{left:t,right:s}=this.dimensions;s!==t&&(i=e/(s-t))}return t&&(i*=-1),i}},DB=class extends vx{constructor(){super(...arguments),this.enabled=!0,this.border=new Rk}};$w([fx],DB.prototype,"enabled",2),$w([fx],DB.prototype,"avoidCollisions",2),$w([fx],DB.prototype,"border",2),$w([fx],DB.prototype,"color",2),$w([fx],DB.prototype,"cornerRadius",2),$w([fx],DB.prototype,"spacing",2),$w([fx],DB.prototype,"rotation",2),$w([fx],DB.prototype,"wrapping",2),$w([fx],DB.prototype,"truncate",2),$w([fx],DB.prototype,"fill",2),$w([fx],DB.prototype,"fontStyle",2),$w([fx],DB.prototype,"fontWeight",2),$w([fx],DB.prototype,"fontSize",2),$w([fx],DB.prototype,"fontFamily",2),$w([fx],DB.prototype,"padding",2);var RB=class extends vx{constructor(){super(...arguments),this.enabled=!0}};$w([fx],RB.prototype,"enabled",2),$w([fx],RB.prototype,"width",2),$w([fx],RB.prototype,"stroke",2);var EB=class extends vx{constructor(){super(...arguments),this.label=new DB,this.tick=new RB}};$w([fx],EB.prototype,"label",2),$w([fx],EB.prototype,"tick",2);var IB=class extends wO{constructor(e){super(e,new SO),this.tickScale=new SO,this.depthOptions=new yx(EB),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:s,bandwidth:n}=this.scale,o=Math.abs(t[1]-t[0])-i,r=this.tickTreeLayout.scaling(o,t[0]>t[1]),a=s+n/2;let l=0;for(const c of e){const e=c.position*r;l>e&&(l=e),c.screen=e+a}for(const c of e)c.screen-=l}getDepthOptionsMap(e){const t=[],{depthOptions:i,label:s}=this,n=this.horizontal?0:-90;for(let o=0;o<e;o++)t.push(i[o]?.label.enabled??s.enabled?{enabled:!0,spacing:i[o]?.label.spacing??s.spacing,wrapping:i[o]?.label.wrapping??s.wrapping,truncate:i[o]?.label.truncate??s.truncate,rotation:i[o]?.label.rotation??(o?n:s.rotation),avoidCollisions:i[o]?.label.avoidCollisions??s.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1});return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each(((e,t)=>{e.fill=t.color,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=t.textAlign??"center",e.setFont(t),e.setBoxing(t)}))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){this.updateDirection(),this.updateScale();const{step:e}=this.scale,{title:t,label:i,range:s,depthOptions:n,horizontal:o,line:r}=this;if(this.lineNode.datum=o?{x1:s[0],x2:s[1],y1:0,y2:0}:{x1:0,x2:0,y1:s[0],y2:s[1]},this.lineNode.setProperties({stroke:r.stroke,strokeWidth:r.enabled?r.width:0}),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:eS.zero,spacing:0,separatorLayout:[],tickLabelLayout:[]};const{depth:a,nodes:l}=this.tickTreeLayout,c=o?-i.getSideFlag():i.getSideFlag(),h=[],d=new Map,u=new TD,p=this.getDepthOptionsMap(a),g=c*p[0].spacing,m=this.tickFormatter(this.scale.domain,this.scale.domain,!1),f=(t,r)=>{const l=a-t.depth;if(!p[l]?.enabled||!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return e>=t[0]-i&&e<=t[1]+i}(t.screen,s))return!1;let c=m(t.label,r-1);const h=this.getLabelStyles({value:c,depth:l},n[l]?.label);if(i.avoidCollisions){const i=p[l].rotation;let s=(t.leafCount||1)*e,n=this.thickness;if(null!=i){const e=function(e,t){const i=t,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=e%180*(Math.PI/180),o=Math.abs(Math.sin(n)),r=Math.abs(Math.cos(n));if(0===o)return{width:i,height:s};if(0===r)return{width:s,height:i};if(!isFinite(s)){const e=r/o,t=i/(r+e*o);return{width:t,height:e*t}}const a=r*r-o*o;if(0===a){const e=Math.min(i,s)/Math.SQRT2;return{width:e,height:e}}return{width:Math.abs((i*r-s*o)/a),height:Math.abs((s*r-i*o)/a)}}(i,s,n);s=e.width,n=e.height}c=LD.wrapText(c,{font:h,textWrap:p[l].wrapping,overflow:p[l].truncate?"ellipsis":"hide",maxWidth:s,maxHeight:n})||c}return u.x=o?t.screen:g,u.y=o?g:t.screen,u.rotation=0,u.lineHeight=hD.getLineHeight(h.fontSize),u.fill=h.color,u.text=c,u.textAlign="center",u.textBaseline=i.parallel?"top":"bottom",u.setFont(h),u.setBoxing(h),!0},v={};l.forEach(((e,t)=>{const i=a-e.depth;v[i]??(v[i]=0);if(!f(e,t)||!u.getBBox())return;d.set(t,u.getBBox()),u.rotation=JS(p[i]?.rotation);const{width:s,height:n}=u.getBBox(),r=o?n:s;v[i]<r&&(v[i]=r)}));const y=YT(),C=new Map;l.forEach(((t,s)=>{if(0===s)return;const n=f(t,s),r=!t.children.length,l=a-t.depth;if(t.parent){const e=r?t.position:t.position-(t.leafCount-1)/2;if(!C.has(e)){const t=this.depthOptions[l]?.tick;let i=v[0];for(let e=0;e<=l;e++)i+=p[e].spacing,0!==e&&(i+=v[e]);C.set(e,{tickSize:i,tickStroke:t?.stroke,tickWidth:!1!==t?.enabled?t?.width:0})}}if(!n)return;const g=JS(p[l].rotation),{width:m,height:b}=d.get(s),w=(e=>{if(0===e)return 0;let t=v[0];for(let i=1;i<=e;i++)t+=p[i].spacing,i!==e&&(t+=v[i]);return t})(l);if(u.textAlign="center",u.textBaseline="middle",u.rotation=g,o?(u.y+=(w+XS(m/2,b/2,g))*c,u.rotationCenterX=t.screen,u.rotationCenterY=u.y):(u.x+=w*c+XS((p[l].spacing*c+m)/2,i.mirrored?m:0,g)-m/2,u.rotationCenterX=u.x,u.rotationCenterY=t.screen),p[l].avoidCollisions){const{width:i,height:n}=u.getBBox();if((o?i:n)>(r?e:t.leafCount*e))return void d.delete(s)}const S=u.getPlainText(),x=u.getBoxingProperties();h.push({text:S,visible:!0,tickId:y(S),range:this.scale.range,border:x.border,color:u.fill,cornerRadius:x.cornerRadius,fill:x.fill,fontFamily:u.fontFamily,fontSize:u.fontSize,fontStyle:u.fontStyle,fontWeight:u.fontWeight,padding:x.padding,rotation:u.rotation,rotationCenterX:u.rotationCenterX,rotationCenterY:u.rotationCenterY,textAlign:u.textAlign,textBaseline:u.textBaseline,x:u.x,y:u.y}),d.set(s,uM.toCanvas(u))}));const b=[...C.values()];b.push(b[0]);const w=[this.lineNodeBBox(),eS.merge(d.values()),new eS(0,0,b[0].tickSize*c,0)];let S=0;if(t.enabled){const e=eS.merge(w);S=o?e.height:e.width,w.push(this.titleBBox(this.scale.domain,S))}const x=eS.merge(w);return this.layoutCrossLines(),{bbox:x,spacing:S,separatorLayout:b,tickLabelLayout:h}}update(){if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();const{tickScale:e,tick:t,gridLine:i,gridLength:s}=this,{separatorLayout:n,spacing:o}=this.computedLayout,{position:r,horizontal:a,gridPadding:l}=this,c="bottom"===r||"right"===r?-1:1,h=l,d=c*s-l,u=e.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}).ticks.map(((t,i)=>({index:i,tickId:gB(t,i),translation:Math.round(e.convert(t))})));this.gridLineGroupSelection.update(i.enabled&&s?this.calculateGridLines(u,h,d):[]),this.gridFillGroupSelection.update(i.enabled&&s?this.calculateGridFills(u,h,d):[]),this.tickLineGroupSelection.update(t.enabled?u.map(((e,i)=>{let{tickId:s,translation:o}=e;const{tickSize:r=this.getTickSize(),tickStroke:l=t.stroke,tickWidth:h=t.width}=n[i]??{},d=-c*r,[u,p,g,m]=a?[o,o,0,d]:[0,d,o,o];return{tickId:s,offset:o,x1:u,y1:g,x2:p,y2:m,stroke:l,strokeWidth:h,lineDash:void 0}})):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateGridFills(),this.updateTickLines(),this.updateTitle(this.scale.domain,o),this.updateCrossLines(),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:e,tickLabelLayout:t,spacing:i,bbox:s}=this.computeLayout();return this.computedLayout={separatorLayout:e,tickLabelLayout:t,spacing:i},{bbox:s,niceDomain:this.scale.domain}}onGridVisibilityChange(){super.onGridVisibilityChange(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){const{direction:e}=this,t=this.boundSeries.filter((e=>e.visible)).flatMap((t=>t.getDomain(e)));this.dataDomain={domain:xO(t)??this.filterDuplicateArrays(t),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const i=this.dataDomain.domain.map((e=>jb(rC(e)&&"value"in e?e.value:e)));this.tickTreeLayout=xB(i);const s=[];for(const n of this.tickTreeLayout.nodes)n.leafCount||null==n.refId||s.push(this.dataDomain.domain[n.refId]);this.scale.domain=function(e,t){const i=new Map;return t.forEach(((e,t)=>{i.set(e,t)})),e.sort(((e,t)=>(i.get(e)??1/0)-(i.get(t)??1/0)))}(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]])}filterDuplicateArrays(e){const t=new Set;return e.filter((e=>{const i=iC(e)?JSON.stringify(e):e;return!t.has(i)&&(t.add(i),!0)}))}};IB.className="GroupedCategoryAxis",IB.type="grouped-category",$w([fx],IB.prototype,"depthOptions",2);var AB={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},kB=(e,t)=>Math.log(t)/Math.log(e);function TB(e,t,i){const s=Math.min(...t),n=AB[e]??kB;return s>=0?n(e,i):-n(e,-i)}var LB={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},PB=(e,t)=>e**t;function FB(e,t,i){const s=Math.min(...t),n=LB[e]??PB;return s>=0?n(e,i):-n(e,-i)}var NB=class e extends MI{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,10],arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,1]),this.type="log",this.defaultClamp=!0,this.base=10,this.log=e=>TB(this.base,this.domain,e),this.pow=e=>FB(this.base,this.domain,e)}static is(t){return t instanceof e}transform(e){const[t,i]=CI(this.domain);return t>=0!==i>=0?NaN:t>=0?Math.log(e):-Math.log(-e)}transformInvert(e){const[t,i]=CI(this.domain);return t>=0!==i>=0?NaN:t>=0?Math.exp(e):-Math.exp(-e)}toDomain(e){return e}niceDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;if(t.length<2)return[];const{base:i}=this,[s,n]=t,o=s>n?Math.ceil:Math.floor,r=s>n?Math.floor:Math.ceil;return[FB(i,t,o(TB(i,t,s))),FB(i,t,r(TB(i,t,n)))]}ticks(e){let{interval:t,tickCount:i=MI.defaultTickCount}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,n=arguments.length>2?arguments[2]:void 0;if(!s||s.length<2||i<1)return;const o=this.base,[r,a]=s,l=Math.min(r,a),c=Math.max(r,a);let h=this.log(l),d=this.log(c);if(t){const e=e=>e>=l&&e<=c,i=Math.min(Math.abs(t),Math.abs(d-h)),{ticks:s,count:o,firstTickIndex:r}=LT(h,d,i,n),a=s.map(this.pow).filter(e);if(!PT(a.length,this.getPixelRange()))return{ticks:a,count:o,firstTickIndex:r}}if(o%1!==0||d-h>=i){const e=Math.min(d-h,i),{ticks:t,count:s,firstTickIndex:o}=MT(h,d,e,void 0,void 0,n);return{ticks:t.map(this.pow),count:s,firstTickIndex:o}}const u=[],p=l>0;h=Math.floor(h)-1,d=Math.round(d)+1;const g=bI(this.range)/i;let m=1/0;for(let f=h;f<=d;f++){const e=this.convert(this.pow(f+1));for(let t=1;t<o;t++){const i=p?t:o-t+1,s=this.pow(f)*i,n=this.convert(s),r=Math.abs(m-n),a=Math.abs(n-e);s>=l&&s<=c&&(1===t||r>=g&&a>=g||0===u.length)&&(u.push(s),m=n)}}return uT(u,p,n)}},OB=class e extends MI{constructor(){super([0,1],[0,1]),this.type="number"}static is(t){return t instanceof e}static getTickStep(e,t,i){const{interval:s,tickCount:n=MI.defaultTickCount,minTickCount:o,maxTickCount:r}=i;return s??AT(e,t,n,o,r)}toDomain(e){return e}ticks(e){let{interval:t,tickCount:i=MI.defaultTickCount,minTickCount:s,maxTickCount:n}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain,r=arguments.length>2?arguments[2]:void 0;if(!o||o.length<2||i<1||!o.every(isFinite))return{ticks:[],count:0,firstTickIndex:0};const[a,l]=o;if(t){const e=Math.abs(t);if(!PT((l-a)/e,this.getPixelRange()))return LT(a,l,e,r)}return MT(a,l,i,s,n,r)}niceDomain(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.domain;if(i.length<2)return[];const{tickCount:s=MI.defaultTickCount}=t;let[n,o]=i;if(1===s)[n,o]=FT(n,o);else if(s>1){const s=n>o?Math.ceil:Math.floor,r=n>o?Math.floor:Math.ceil,a=4;for(let l=0;l<a;l++){const a=n,l=o,c=e.getTickStep(n,o,t),[h,d]=i;if(n=s(h/c)*c,o=r(d/c)*c,n===a&&o===l)break}}return[n,o]}},BB=class extends sL{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new OB)}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=MO(e,t,i);return{domain:s,clipped:n}}createDatumFormatter(e,t){const{format:i}=this.label;return"number"===typeof i?TT(t,i):void 0}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:s,seriesId:n,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:h}=t;return{type:"number",value:e,datum:s,seriesId:n,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:h,fractionDigits:i}}};BB.className="NumberAxis",BB.type="number",$w([fx],BB.prototype,"min",2),$w([fx],BB.prototype,"max",2);var GB=class extends BB{normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=MO(e,t,i);return s[0]<0&&s[1]>0||e[0]<0&&e[1]>0?(xy.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):0===s[0]||0===s[1]||0===e[0]||0===e[1]?(xy.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):{domain:s,clipped:n}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new NB)}};GB.className="LogAxis",GB.type="log";var zB=class extends vx{constructor(){super(...arguments),this.enabled=!1,this.label=new _k,this.tick=new $k}};$w([fx],zB.prototype,"enabled",2),$w([fx],zB.prototype,"label",2),$w([fx],zB.prototype,"tick",2);var jB=class extends sL{constructor(e){super(e,new BT),this.parentLevel=new zB,this.min=void 0,this.max=void 0,this.minimumTimeGranularity=void 0}get _unit(){}set _unit(e){xy.warnOnce("To use 'unit', use an axis with type 'unit-time' instead of 'time'.")}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}isCategoryLike(){return!1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(e){return WB(e,this.min,this.max)}processData(){super.processData();const{boundSeries:e,direction:t,min:i,max:s}=this;this.minimumTimeGranularity=VB(e,t,i,s)}tickFormatParams(e,t,i,s){s??(s=cT(t));const n=dT(e);return{type:"date",unit:wk(s),step:Sk(s),epoch:xk(s),truncateDate:n}}datumFormatParams(e,t,i,s,n){if("number"===typeof e&&(e=new Date(e)),null==s){const{minimumTimeGranularity:t}=this,i=hT(e);s=null!=t&&Dk(t)<Dk(i)?t:i}const{datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:h,domain:d,boundSeries:u}=t;return{type:"date",value:e,datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:h,domain:d,boundSeries:u,unit:wk(s),step:Sk(s),epoch:xk(s),style:n}}};function VB(e,t,i,s){const n=e.reduce(((e,t)=>Math.min(t.minTimeInterval()??1/0,e)),1/0);return Number.isFinite(n)?lT(n):HB(e,t,i,s)?.unit}function HB(e,t,i,s){let n,o=1/0,r=-1/0,a=0;const l=[];for(const d of e){if(!d.visible)continue;const{domain:e}=WB(d.getDomain(t),void 0,void 0);if(0===e.length)continue;const i=e[0].valueOf(),s=e[e.length-1].valueOf();l.push(i,s),o=Math.min(o??1/0,i,s),r=Math.max(r??-1/0,i,s);const c=Math.abs(s-i);if(0===c)continue;const h=d.dataCount();if(a=Math.max(a,h),h<=1)continue;const u=c/(h-1);n=Math.min(n??1/0,u)}if(o=Math.min(o,i?.valueOf()??1/0,s?.valueOf()??1/0),r=Math.max(r,i?.valueOf()??-1/0,s?.valueOf()??-1/0),!Number.isFinite(o)||!Number.isFinite(r))return;n??(n=Math.abs(r-o)),n=Math.min(n,function(e){e.sort(((e,t)=>e-t));let t=1/0;for(let i=1;i<e.length;i++){const s=e[i-1],n=e[i];n-s>0&&(t=Math.min(t,Math.abs(n-s)))}return t}(l));const c=lT(n);let h=n/Dk(c);h=a<=2?Math.floor(h):Math.round(h),h=Math.max(h,1);return{unit:c,step:h,epoch:1===h?void 0:uk(c,o)}}function WB(e,t,i){let s=!1;"number"===typeof t&&(t=new Date(t)),"number"===typeof i&&(i=new Date(i));const n=xO(e)?.map((e=>new Date(e)));if(null==n)return{domain:null!=t&&null!=i&&t.valueOf()<=i.valueOf()?[t,i]:[],clipped:!1};let[o,r]=n;return t instanceof Date&&(s||(s=t>o),o=t),i instanceof Date&&(s||(s=i<r),r=i),o>r?{domain:[],clipped:!1}:{domain:[o,r],clipped:s}}jB.className="TimeAxis",jB.type="time",$w([fx],jB.prototype,"parentLevel",2),$w([fx],jB.prototype,"min",2),$w([fx],jB.prototype,"max",2),$w([fx,VM("_unit")],jB.prototype,"unit",2);var _B=class extends wO{calculateGridLine(e,t,i,s,n){let{index:o,tickId:r,translation:a}=e;const{gridLine:l,horizontal:c,interval:h,range:d}=this;if("between"!==h.placement)return super.calculateGridLine({index:o,tickId:r,translation:a},t,i,s,n);const u=n[t-1],p=u?a-(a-u.translation)/2:d[0],[g,m,f,v]=c?[p,Math.max(i,s),p,Math.min(i,s)]:[Math.min(i,s),p,Math.max(i,s),p],{style:y}=l,{stroke:C,strokeWidth:b=0,lineDash:w}=y[o%y.length]??{};return{tickId:r,offset:p,x1:g,y1:m,x2:f,y2:v,stroke:C,strokeWidth:b,lineDash:w}}calculateGridFills(e,t,i){return"between"!==this.interval.placement?super.calculateGridFills(e,t,i):e.map(((s,n)=>this.calculateGridFill(s,n,s.index,t,i,e)))}calculateGridFill(e,t,i,s,n,o){let{tickId:r,translation:a}=e;const{gridLine:l,horizontal:c,interval:h,range:d}=this;if("between"!==h.placement)return super.calculateGridFill({tickId:r,translation:a},t,i,s,n,o);const u=o[t-1],p=o[t+1],g=u?a-(a-u.translation)/2:d[0],m=p?a+(p.translation-a)/2:d[1],[f,v,y,C]=c?[g,Math.max(s,n),m,Math.min(s,n)]:[Math.min(s,n),g,Math.max(s,n),m],{fill:b,fillOpacity:w}=l.style[i%l.style.length]??{};return{tickId:r,x1:f,y1:v,x2:y,y2:C,fill:b,fillOpacity:w}}calculateTickLine(e,t,i,s){let{primary:n,tickId:o,translation:r}=e;const{horizontal:a,interval:l,primaryTick:c,range:h,tick:d}=this;if("between"!==l.placement)return super.calculateTickLine({primary:n,tickId:o,translation:r},t,i,s);const u=n&&c?.enabled?c:d,p=-i*this.getTickSize(u),g=s[t-1],m=g?r-(r-g.translation)/2:h[0],[f,v,y,C]=a?[m,0,m,p]:[0,m,p,m],{stroke:b,width:w}=u;return{tickId:o,offset:m,x1:f,y1:v,x2:y,y2:C,stroke:b,strokeWidth:w,lineDash:void 0}}},UB=class extends _B{constructor(e){super(e,new _T,!1),this.parentLevel=new zB,this.min=void 0,this.max=void 0,this.unit=void 0,this.defaultUnit=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}hasDefinedDomain(){const{min:e,max:t}=this;return null!=e&&null!=t&&e<t}isCategoryLike(){return!0}processData(){let e;super.processData();const{domain:t}=this.dataDomain;if(2===t.length&&t[0].valueOf()===t[1].valueOf())e=hT(t[0]);else{const{boundSeries:t,direction:i,min:s,max:n}=this;e=HB(t,i,s,n)}fS(this.defaultUnit,e)||(this.defaultUnit=e)}updateScale(){super.updateScale(),this.scale.interval=this.unit??this.defaultUnit}normaliseDataDomain(e){return WB(e,this.min,this.max)}createDatumFormatter(e,t){const i=this.scale.interval,{format:s}=this.label;if(null==s)return;const n=Ak(null!=i?LE(s,wk(i)):s,i);return null!=n?wE(n):void 0}tickFormatParams(e,t,i,s){s??(s=cT(t));const n=dT(e);return{type:"date",unit:wk(s),step:Sk(s),epoch:xk(s),truncateDate:n}}datumFormatParams(e,t,i,s,n){const o=this.unit??this.defaultUnit??"millisecond";"number"===typeof(e=uk(o,e))&&(e=new Date(e)),s??(s=o);const{datum:r,seriesId:a,legendItemName:l,key:c,source:h,property:d,domain:u,boundSeries:p}=t;return{type:"date",value:e,datum:r,seriesId:a,legendItemName:l,key:c,source:h,property:d,domain:u,boundSeries:p,unit:wk(s),step:Sk(s),epoch:xk(s),style:n}}};UB.className="UnitTimeAxis",UB.type="unit-time",$w([fx],UB.prototype,"parentLevel",2),$w([fx],UB.prototype,"min",2),$w([fx],UB.prototype,"max",2),$w([fx],UB.prototype,"unit",2);var $B={...mO,...yO(YC),type:PC(ab("number")),label:cO,crosshair:vO(!0)},KB={...mO,...yO(YC),type:PC(ab("log")),base:zC(ib,LC((e=>1!==e),"not equal to 1")),label:cO,crosshair:vO(!0)},YB={...mO,...yO(jC(YC,$C),!0),type:PC(ab("time")),label:hO,parentLevel:uO,crosshair:vO(!0,!0)},ZB={...mO,type:PC(ab("category")),label:lO,paddingInner:sb,paddingOuter:sb,groupPaddingInner:sb,crosshair:vO(),bandHighlight:fO,interval:{...pO,placement:rb("on","between")}},qB={...mO,type:PC(ab("grouped-category")),label:lO,crosshair:vO(),bandHighlight:fO,paddingInner:sb,groupPaddingInner:sb,depthOptions:cb({label:{enabled:WC,avoidCollisions:WC,wrapping:rb("never","always","hyphenate","on-space"),truncate:WC,rotation:YC,spacing:YC,...Nb,...zb},tick:{enabled:WC,stroke:UC,width:tb}},"depth options objects array")},QB={...mO,type:PC(ab("unit-time")),unit:jC(sO,tO),label:hO,parentLevel:uO,paddingInner:sb,paddingOuter:sb,groupPaddingInner:sb,crosshair:vO(!0,!0),bandHighlight:fO,min:zC(jC(YC,$C),nb("max")),max:zC(jC(YC,$C),ob("min")),interval:CO},XB={type:"axis",name:"number",chartType:"cartesian",options:$B,create:e=>new BB(e)},JB={type:"axis",name:"log",chartType:"cartesian",options:KB,create:e=>new GB(e)},eG={type:"axis",name:"time",chartType:"cartesian",options:YB,create:e=>new jB(e)},tG={type:"axis",name:"category",chartType:"cartesian",options:ZB,create:e=>new wO(e)},iG={type:"axis",name:"grouped-category",chartType:"cartesian",options:qB,create:e=>new IB(e)},sG={type:"axis",name:"unit-time",chartType:"cartesian",options:QB,create:e=>new UB(e)},nG={...mO,type:PC(ab("ordinal-time")),paddingInner:sb,paddingOuter:sb,groupPaddingInner:sb,label:hO,parentLevel:uO,interval:CO,crosshair:vO(!0,!0),bandHighlight:fO},oG={...gO,...yO(YC),type:PC(ab("angle-number")),crossLines:cb(oO),startAngle:YC,endAngle:YC,label:{...aO,orientation:rb("fixed","parallel","perpendicular"),format:ON}},rG={innerRadiusRatio:sb},aG={...gO,...rG,type:PC(ab("angle-category")),shape:rb("polygon","circle"),crossLines:cb(oO),startAngle:YC,endAngle:YC,paddingInner:sb,groupPaddingInner:sb,label:{...aO,orientation:rb("fixed","parallel","perpendicular")}},lG={...gO,...yO(YC),type:PC(ab("radius-number")),shape:rb("polygon","circle"),positionAngle:YC,innerRadiusRatio:sb,crossLines:cb({...oO,label:{...nO,positionAngle:YC}},"cross-line options"),title:{enabled:WC,text:qC,spacing:tb,formatter:_C,...Nb},label:{...aO,format:ON}},cG={...gO,type:PC(ab("radius-category")),positionAngle:YC,innerRadiusRatio:sb,paddingInner:sb,paddingOuter:sb,groupPaddingInner:sb,label:aO,crossLines:cb({...oO,label:{...nO,positionAngle:YC}},"cross-line options"),title:{enabled:WC,text:qC,spacing:tb,formatter:_C,...Nb}},hG=Lb(kb,kb),dG={showInMiniChart:WC,connectMissingData:WC,interpolation:KN,label:VN,marker:jN,tooltip:UN,shadow:$N,...GN,...Rb,...bb,...Eb,highlight:hG},uG={...dG,...zN,highlight:hG,type:PC(ab("area")),xKey:PC(qC),yKey:PC(qC),xName:qC,yName:qC,stacked:WC,stackGroup:qC,normalizedTo:YC},pG=Lb(Ib,Ib),gG={direction:rb("horizontal","vertical"),showInMiniChart:WC,cornerRadius:tb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),crisp:WC,label:{...VN,placement:rb("inside-center","inside-start","inside-end","outside-start","outside-end"),spacing:tb},errorBar:WN,shadow:$N,tooltip:UN,...GN,highlight:pG,...Rb,...bb,...Eb};gG.sparklineMode=FC(WC);var mG={...gG,...zN,highlight:pG,type:PC(ab("bar")),xKey:PC(qC),yKey:PC(qC),xName:qC,yName:qC,direction:rb("horizontal","vertical"),grouped:WC,stacked:WC,stackGroup:qC,normalizedTo:YC,legendItemName:qC,errorBar:_N};mG.pickOutsideVisibleMinorAxis=FC(WC),mG.focusPriority=FC(YC);var fG={title:qC,domain:lb(YC),maxSize:tb,showInMiniChart:WC,label:{placement:rb("top","right","bottom","left"),...VN},tooltip:UN,maxRenderedItems:YC,...GN,...SS(jN,["enabled"]),highlight:Lb(kb,kb)},vG={...fG,...zN,type:PC(ab("bubble")),xKey:PC(qC),yKey:PC(qC),sizeKey:PC(qC),labelKey:qC,xName:qC,yName:qC,sizeName:qC,labelName:qC,highlight:Lb(kb,kb)},yG={showInMiniChart:WC,cornerRadius:tb,label:VN,tooltip:UN,shadow:$N,...GN,...Rb,...bb,...Eb,highlight:Lb(kb,kb)},CG={...zN,...yG,type:PC(ab("histogram")),xKey:PC(qC),yKey:qC,xName:qC,yName:qC,areaPlot:WC,aggregation:rb("count","sum","mean"),bins:lb(lb(YC)),binCount:tb},bG=Lb(kb,Ab),wG={title:qC,showInMiniChart:WC,connectMissingData:WC,interpolation:KN,label:VN,marker:jN,tooltip:UN,errorBar:WN,...GN,...bb,...Eb,highlight:bG};wG.sparklineMode=FC(WC);var SG={...wG,...zN,highlight:bG,type:PC(ab("line")),xKey:PC(qC),yKey:PC(qC),xName:qC,yName:qC,stacked:WC,stackGroup:qC,normalizedTo:YC,legendItemName:qC,errorBar:_N};SG.pickOutsideVisibleMinorAxis=FC(WC),SG.focusPriority=FC(YC);var xG={title:qC,showInMiniChart:WC,label:{placement:rb("top","right","bottom","left"),...VN},tooltip:UN,errorBar:WN,maxRenderedItems:YC,...GN,...SS(jN,["enabled"]),highlight:Lb(kb,kb)},MG={...xG,...zN,type:PC(ab("scatter")),xKey:PC(qC),yKey:PC(qC),labelKey:qC,xName:qC,yName:qC,labelName:qC,errorBar:_N,highlight:Lb(kb,kb)},DG=Lb(kb,kb),RG={...GN,radiusMin:tb,radiusMax:tb,rotation:YC,outerRadiusOffset:YC,outerRadiusRatio:sb,hideZeroValueSectorsInLegend:WC,sectorSpacing:tb,cornerRadius:tb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),title:{enabled:WC,text:qC,showInLegend:WC,spacing:tb,...Nb},calloutLabel:{enabled:WC,offset:YC,minAngle:tb,avoidCollisions:WC,formatter:_C,format:qC,itemStyler:db({enabled:WC,...zb,...Nb}),...zb,...Nb},sectorLabel:{enabled:WC,positionOffset:YC,positionRatio:sb,formatter:_C,format:qC,itemStyler:db({enabled:WC,...zb,...Nb}),...zb,...Nb},calloutLine:{colors:lb(UC),length:tb,strokeWidth:tb},fills:lb(Db),strokes:lb(UC),tooltip:UN,shadow:$N,highlight:DG,...Eb,...SS(Rb,["fill"]),...SS(bb,["stroke"])},EG={...RG,...zN,type:PC(ab("pie")),angleKey:PC(qC),radiusKey:qC,calloutLabelKey:qC,sectorLabelKey:qC,legendItemKey:qC,angleName:qC,radiusName:qC,calloutLabelName:qC,sectorLabelName:qC,highlight:DG};EG.defaultColorRange=FC(lb(lb(UC))),EG.defaultPatternFills=FC(lb(UC)),EG.title._enabledFromTheme=FC(WC),EG.calloutLabel._enabledFromTheme=FC(WC),EG.sectorLabel._enabledFromTheme=FC(WC);var IG={...RG,innerRadiusOffset:YC,innerRadiusRatio:sb,innerCircle:{fill:qC,fillOpacity:sb},innerLabels:{spacing:tb,...Nb,...zb}},AG={...IG,...EG,type:PC(ab("donut")),innerLabels:cb({text:PC(qC),spacing:tb,...Nb,...zb},"inner label options array")},kG={lineStyle:rb("solid","dashed","dotted"),...Eb},TG={...Rb,...bb,...Eb},LG={visible:WC,locked:WC,handle:TG,...Nb},PG={position:rb("top","center","bottom"),alignment:rb("left","center","right"),...Nb},FG={position:rb("top","inside","bottom"),alignment:rb("left","center","right"),...Nb},NG={enabled:WC,cornerRadius:tb,formatter:_C,...Nb,...Rb,...bb,...Eb},OG={visible:WC,...kG,...bb},BG={divider:bb,...Rb,...bb,...Nb},GG={handle:TG,statistics:BG,...kG,...Rb,...bb},zG={visible:WC,locked:WC,extendStart:WC,extendEnd:WC,handle:TG,text:PG,...kG,...bb},jG={visible:WC,locked:WC,axisLabel:NG,handle:TG,text:PG,...kG,...bb},VG={visible:WC,locked:WC,extendStart:WC,extendEnd:WC,handle:TG,text:FG,background:Rb,...kG,...bb},HG={...VG},WG={...VG,middle:OG},_G={label:Nb,showFill:WC,isMultiColor:WC,strokes:lb(UC),rangeStroke:UC,bands:rb(4,6,10),...zG},UG={...Rb,...bb,...LG},$G={...Rb,...bb,...LG},KG={...Rb,...bb,...LG,background:{...Rb,...bb}},YG={visible:WC,locked:WC,handle:TG,...Rb},ZG={visible:WC,locked:WC,extendStart:WC,extendEnd:WC,handle:TG,text:PG,background:Rb,statistics:BG,...kG,...bb},qG={visible:WC,up:GG,down:GG},QG={enabled:WC,axesButtons:{enabled:WC,axes:rb("x","y","xy")},toolbar:{enabled:WC,padding:tb,buttons:cb({...PN,value:rb("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:WC,buttons:lb(jC(BC({...PN,value:PC(rb("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))}),BC({...PN,value:PC(rb("lock")),checkedOverrides:PN})))}};QG.data=FC(HC),QG.xKey=FC(qC),QG.volumeKey=FC(qC),QG.snap=FC(WC);var XG={...Rb,...bb,...Eb,cornerRadius:tb,whisker:{...bb,...Eb},cap:{lengthRatio:sb}},JG={...XG,opacity:sb},ez={direction:rb("horizontal","vertical"),showInMiniChart:WC,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb,whisker:{...bb,...Eb},cap:{lengthRatio:sb}}),tooltip:UN,...GN,...XG,highlight:Lb(JG,JG)},tz={cornerRadius:tb,wick:{...bb,...Eb},...Rb,...bb,...Eb},iz={...tz,opacity:sb},sz={item:{up:tz,down:tz},itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb,wick:{...bb,...Eb}}),showInMiniChart:WC,tooltip:UN,...GN,highlight:Lb(iz,iz)},nz={fills:lb(Db),strokes:lb(UC),label:{spacing:tb,maxWidth:tb,...VN},link:{tension:sb,itemStyler:db({...Rb,...bb,...Eb,tension:sb}),...Rb,...bb,...Eb},node:{width:tb,spacing:tb,itemStyler:db({...Rb,...bb,...Eb}),...Rb,...bb,...Eb},tooltip:UN,...GN},oz={direction:rb("horizontal","vertical"),fills:lb(Db),strokes:lb(UC),label:{spacing:tb,placement:rb("before","middle","after"),...VN},stageLabel:{placement:rb("before","after"),format:ON,...aO},tooltip:UN,...SS(GN,["showInLegend"]),...SS(Rb,["fill"]),...SS(bb,["stroke"]),...Eb,highlight:Tb(Ab)},rz={direction:rb("horizontal","vertical"),fills:lb(Db),strokes:lb(UC),itemStyler:db({...Rb,...bb,...Eb}),spacingRatio:sb,crisp:WC,dropOff:{enabled:WC,...Rb,...bb,...Eb},stageLabel:{placement:rb("before","after"),format:ON,...aO},label:VN,tooltip:UN,shadow:$N,...SS(GN,["showInLegend"]),...SS(Rb,["fill"]),...SS(bb,["stroke"]),...Eb},az={title:qC,textAlign:rb("left","center","right"),verticalAlign:rb("top","middle","bottom"),itemPadding:tb,itemStyler:db({...Rb,...bb}),showInMiniChart:WC,label:HN,tooltip:UN,...GN,...bb},lz={showInMiniChart:WC,itemStyler:db({...bb,...Eb}),item:{up:{...bb,...Eb},down:{...bb,...Eb}},tooltip:UN,...GN,highlight:Lb(Ab,Ab)},cz={maxStrokeWidth:tb,itemStyler:db({...bb,...Eb}),sizeDomain:lb(tb),label:VN,tooltip:UN,...GN,...bb,...Eb,highlightStyle:{...GN.highlightStyle,...bb},highlight:Lb(Ab,Ab)},hz={...bb,...Eb},dz={colorRange:lb(UC),maxSize:tb,sizeDomain:lb(tb),label:{placement:rb("top","bottom","left","right"),...VN},tooltip:UN,...GN,...SS(jN,["enabled"]),highlightStyle:{...GN.highlightStyle,...Rb,...bb},highlight:Lb(kb,kb)},uz={colorRange:lb(UC),padding:tb,itemStyler:db({...Rb,...bb,...Eb}),label:HN,tooltip:UN,...GN,...Rb,...bb,...Eb,highlightStyle:{...GN.highlightStyle,...Rb,...bb},highlight:Lb(kb,kb)},pz={...GN,...Rb,...bb,...Eb},gz={cornerRadius:tb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),label:VN,tooltip:UN,...GN,...Rb,...bb,...Eb,highlight:Lb(Ib,Ib)},mz={direction:rb("horizontal","vertical"),aspectRatio:tb,spacing:tb,reverse:WC,itemStyler:db({...Rb,...bb,...Eb}),fills:lb(Db),strokes:lb(UC),label:VN,stageLabel:{spacing:tb,placement:rb("before","after"),...VN},tooltip:UN,shadow:$N,...GN,...SS(Rb,["fill"]),...SS(bb,["stroke"]),...Eb},fz={connectMissingData:WC,marker:jN,label:VN,tooltip:UN,...GN,...Rb,...bb,...Eb,highlight:Lb(kb,kb)},vz={connectMissingData:WC,marker:jN,label:VN,tooltip:UN,...GN,...bb,...Eb,highlight:Lb(kb,Ab)},yz={cornerRadius:tb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),label:VN,tooltip:UN,...GN,...Rb,...bb,...Eb,highlight:Lb(Ib,Ib)},Cz={cornerRadius:tb,columnWidthRatio:sb,maxColumnWidthRatio:sb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),label:VN,tooltip:UN,...GN,...Rb,...bb,...Eb,highlight:Lb(Ib,Ib)},bz={showInMiniChart:WC,connectMissingData:WC,interpolation:KN,label:{...VN,placement:rb("inside","outside"),spacing:tb},marker:jN,tooltip:UN,shadow:$N,...GN,...Rb,...bb,...Eb,highlight:Lb(kb,kb)},wz={direction:rb("horizontal","vertical"),grouped:WC,showInMiniChart:WC,cornerRadius:tb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),label:{...VN,placement:rb("inside","outside"),spacing:tb},tooltip:UN,shadow:$N,...GN,...Rb,...bb,...Eb,highlight:Lb(Ib,Ib)},Sz={fills:lb(Db),strokes:lb(UC),label:{...VN,spacing:tb},link:{itemStyler:db({...Rb,...bb,...Eb}),...Rb,...bb,...Eb},node:{width:tb,spacing:tb,alignment:rb("left","center","right","justify"),itemStyler:db({...Rb,...bb,...Eb}),...Rb,...bb,...Eb},tooltip:UN,...GN},xz={fills:lb(Db),strokes:lb(UC),colorRange:lb(UC),sectorSpacing:tb,cornerRadius:tb,padding:tb,itemStyler:db({...Rb,...bb}),label:{spacing:tb,...HN},secondaryLabel:HN,tooltip:UN,...SS(GN,["highlight","showInLegend"]),...SS(Rb,["fill"]),...SS(bb,["stroke"]),highlightStyle:{label:{color:UC},secondaryLabel:{color:UC},...Rb,...bb}},Mz={fills:lb(Db),strokes:lb(UC),colorRange:lb(UC),itemStyler:db({...Rb,...bb}),group:{gap:tb,padding:tb,cornerRadius:tb,textAlign:rb("left","center","right"),interactive:WC,label:{...VN,spacing:tb},...Rb,...bb},tile:{gap:tb,padding:tb,cornerRadius:tb,textAlign:rb("left","center","right"),verticalAlign:rb("top","middle","bottom"),label:{...VN,spacing:tb,lineHeight:tb,minimumFontSize:tb,wrapping:rb("never","always","hyphenate","on-space"),overflowStrategy:rb("ellipsis","hide")},secondaryLabel:{...VN,lineHeight:tb,minimumFontSize:tb,wrapping:rb("never","always","hyphenate","on-space"),overflowStrategy:rb("ellipsis","hide")},...Rb,...bb},tooltip:UN,...SS(GN,["highlight","showInLegend"]),highlightStyle:{group:{label:{color:UC},...Rb,...bb},tile:{label:{color:UC},secondaryLabel:{color:UC},...Rb,...bb}}},Dz={name:qC,cornerRadius:tb,itemStyler:db({...Rb,...bb,...Eb,cornerRadius:tb}),label:{...VN,placement:rb("inside-start","inside-center","inside-end","outside-start","outside-end"),spacing:tb},tooltip:UN,shadow:$N,...Rb,...bb,...Eb},Rz={direction:rb("horizontal","vertical"),showInMiniChart:WC,item:{positive:Dz,negative:Dz,total:Dz},line:{enabled:WC,...bb,...Eb},tooltip:UN,...GN},Ez=BC({__type:PC(ab("date")),value:jC(qC,YC)},"a serializable date object"),Iz={width:tb,height:tb,grip:WC,fill:UC,stroke:UC,strokeWidth:tb,cornerRadius:tb},Az={enabled:WC,height:tb,spacing:tb,cornerRadius:YC,mask:{fill:UC,fillOpacity:sb,stroke:UC,strokeWidth:tb},minHandle:Iz,maxHandle:Iz,miniChart:{enabled:WC,padding:{top:tb,bottom:tb},label:{enabled:WC,avoidCollisions:WC,spacing:tb,format:ON,formatter:_C,interval:{minSpacing:tb,maxSpacing:tb,values:HC,step:YC},...Nb},series:KC}},kz={number:{...SS($B,["type","crossLines"]),top:SS($B,["type","crossLines","position"]),right:SS($B,["type","crossLines","position"]),bottom:SS($B,["type","crossLines","position"]),left:SS($B,["type","crossLines","position"]),crossLines:SS(rO,["type"])},log:{...SS(KB,["type","crossLines"]),top:SS(KB,["type","crossLines","position"]),right:SS(KB,["type","crossLines","position"]),bottom:SS(KB,["type","crossLines","position"]),left:SS(KB,["type","crossLines","position"]),crossLines:SS(rO,["type"])},category:{...SS(ZB,["type","crossLines"]),top:SS(ZB,["type","crossLines","position"]),right:SS(ZB,["type","crossLines","position"]),bottom:SS(ZB,["type","crossLines","position"]),left:SS(ZB,["type","crossLines","position"]),crossLines:SS(rO,["type"])},time:{...SS(YB,["type","crossLines"]),top:SS(YB,["type","crossLines","position"]),right:SS(YB,["type","crossLines","position"]),bottom:SS(YB,["type","crossLines","position"]),left:SS(YB,["type","crossLines","position"]),crossLines:SS(rO,["type"])},"unit-time":{...SS(QB,["type","crossLines"]),top:SS(QB,["type","crossLines","position"]),right:SS(QB,["type","crossLines","position"]),bottom:SS(QB,["type","crossLines","position"]),left:SS(QB,["type","crossLines","position"]),crossLines:SS(rO,["type"])},"grouped-category":{...SS(qB,["type"]),top:SS(qB,["type","position"]),right:SS(qB,["type","position"]),bottom:SS(qB,["type","position"]),left:SS(qB,["type","position"]),crossLines:SS(rO,["type"])},"ordinal-time":{...SS(nG,["type","crossLines"]),top:SS(nG,["type","crossLines","position"]),right:SS(nG,["type","crossLines","position"]),bottom:SS(nG,["type","crossLines","position"]),left:SS(nG,["type","crossLines","position"]),crossLines:SS(rO,["type"])}},Tz={"angle-category":{...SS(aG,["type","crossLines"]),crossLines:SS(oO,["type"])},"angle-number":{...SS(oG,["type","crossLines"]),crossLines:SS(oO,["type"])},"radius-category":{...SS(cG,["type","crossLines"]),crossLines:{...SS(oO,["type"]),label:{...nO,positionAngle:YC}}},"radius-number":{...SS(lG,["type","crossLines"]),crossLines:{...SS(oO,["type"]),label:{...nO,positionAngle:YC}}}},Lz={visible:WC};function Pz(e,t){const i={};for(const s of Reflect.ownKeys(e))i[s]=t(e[s],s,e);return i}var Fz=Pz({common:{...BN,navigator:Az,axes:{...kz,...Tz},annotations:{...QG,line:zG,"horizontal-line":jG,"vertical-line":jG,"disjoint-channel":HG,"parallel-channel":WG,"fibonacci-retracement":_G,"fibonacci-retracement-trend-based":_G,callout:UG,comment:$G,note:KG,text:LG,arrow:zG,"arrow-up":YG,"arrow-down":YG,"date-range":ZG,"price-range":ZG,"date-price-range":ZG,"quick-date-price-range":qG},chartToolbar:{enabled:WC},initialState:{legend:cb({visible:WC,seriesId:qC,itemId:qC,legendItemName:qC},"legend state array"),zoom:{rangeX:{start:jC(YC,Ez),end:jC(YC,Ez)},rangeY:{start:jC(YC,Ez),end:jC(YC,Ez)},ratioX:{start:sb,end:sb},ratioY:{start:sb,end:sb},autoScaledAxes:lb(ab("y"))}}},line:{...BN,axes:kz,series:wG,navigator:Az,...Lz},scatter:{...BN,axes:kz,series:xG,navigator:Az,...Lz},bubble:{...BN,axes:kz,series:fG,navigator:Az,...Lz},area:{...BN,axes:kz,series:dG,navigator:Az,...Lz},bar:{...BN,axes:kz,series:gG,navigator:Az,...Lz},"box-plot":{...BN,axes:kz,series:ez,navigator:Az,...Lz},candlestick:{...BN,axes:kz,series:sz,navigator:Az,...Lz},"cone-funnel":{...BN,axes:kz,series:oz,navigator:Az,...Lz},funnel:{...BN,axes:kz,series:rz,navigator:Az,...Lz},ohlc:{...BN,axes:kz,series:lz,navigator:Az,...Lz},histogram:{...BN,axes:SS(kz,["category","grouped-category","unit-time","ordinal-time"]),series:yG,navigator:Az,...Lz},heatmap:{...BN,axes:kz,series:az,navigator:Az,...Lz},waterfall:{...BN,axes:kz,series:Rz,navigator:Az,...Lz},"range-bar":{...BN,axes:kz,series:wz,navigator:Az,...Lz},"range-area":{...BN,axes:kz,series:bz,navigator:Az,...Lz},donut:{...BN,series:IG,navigator:Az,...Lz},pie:{...BN,series:RG,navigator:Az,...Lz},"radar-line":{...BN,axes:Tz,series:vz,navigator:Az,...Lz},"radar-area":{...BN,axes:Tz,series:fz,navigator:Az,...Lz},"radial-bar":{...BN,axes:Tz,series:yz,navigator:Az,...Lz},"radial-column":{...BN,axes:Tz,series:Cz,navigator:Az,...Lz},nightingale:{...BN,axes:Tz,series:gz,navigator:Az,...Lz},sunburst:{...BN,series:xz,navigator:Az,...Lz},treemap:{...BN,series:Mz,navigator:Az,...Lz},"map-shape":{...BN,series:uz,navigator:Az,...Lz},"map-line":{...BN,series:cz,navigator:Az,...Lz},"map-marker":{...BN,series:dz,navigator:Az,...Lz},"map-shape-background":{...BN,series:pz,navigator:Az,...Lz},"map-line-background":{...BN,series:hz,navigator:Az,...Lz},sankey:{...BN,series:Sz,navigator:Az,...Lz},chord:{...BN,series:nz,navigator:Az,...Lz},pyramid:{...BN,series:mz,navigator:Az,...Lz},"radial-gauge":{...BN,...JN,targets:SS(qN,["value"]),tooltip:{...JN.tooltip,...BN.tooltip}},"linear-gauge":{...BN,...QN,targets:SS(ZN,["value"]),tooltip:{...QN.tooltip,...BN.tooltip}}},(function e(t,i){if(pC(i))return t;if(oC(t))return jC(t,gb,pC);if(rC(t))return jC(BC(Pz(t,DC in t?t=>rC(t)?Pz(t,e):t:e)),gb,pC);throw new Error(`Invalid theme override value: ${String(t)}`)})),Nz={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Oz={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Bz=class extends $F{getDefaultColors(){return{fills:Nz,fillsFallback:Object.values(Nz),strokes:Oz,sequentialColors:TF(Nz),divergingColors:[Nz.ORANGE,Nz.YELLOW,Nz.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[Nz.GREEN,Nz.YELLOW,Nz.RED],secondHierarchyColors:[],up:{fill:Nz.GREEN,stroke:Oz.GREEN},down:{fill:Nz.RED,stroke:Oz.RED},neutral:{fill:Nz.GRAY,stroke:Oz.GRAY},altUp:{fill:Nz.BLUE,stroke:Oz.BLUE},altDown:{fill:Nz.ORANGE,stroke:Oz.ORANGE},altNeutral:{fill:Nz.GRAY,stroke:Oz.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,Nz.BLUE),e.set(iF,Nz.BLUE),e}},Gz={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},zz={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},jz=class extends HF{getDefaultColors(){return{...super.getDefaultColors(),fills:Gz,fillsFallback:Object.values(Gz),strokes:zz,sequentialColors:TF(Gz),divergingColors:[Gz.ORANGE,Gz.YELLOW,Gz.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[Gz.GREEN,Gz.YELLOW,Gz.RED],secondHierarchyColors:[],up:{fill:Gz.GREEN,stroke:zz.GREEN},down:{fill:Gz.RED,stroke:zz.RED},neutral:{fill:Gz.GRAY,stroke:zz.GRAY},altUp:{fill:Gz.BLUE,stroke:zz.BLUE},altDown:{fill:Gz.ORANGE,stroke:zz.ORANGE},altNeutral:{fill:Gz.GRAY,stroke:zz.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(JP,Gz.BLUE),e.set(iF,Gz.BLUE),e}},Vz=pE((()=>new HF)),Hz=iS.create(!0,"perf"),Wz=(e,t,i)=>{Hz("[CACHE] ChartTheme",e,t.name,i)},_z={"ag-default-dark":pE((()=>new $F)),"ag-sheets-dark":pE((()=>new pN),Wz),"ag-polychroma-dark":pE((()=>new aN),Wz),"ag-vivid-dark":pE((()=>new Bz),Wz),"ag-material-dark":pE((()=>new tN),Wz),"ag-financial-dark":pE((()=>new ZF),Wz),"ag-default":Vz,"ag-sheets":pE((()=>new fN),Wz),"ag-polychroma":pE((()=>new hN),Wz),"ag-vivid":pE((()=>new jz),Wz),"ag-material":pE((()=>new nN),Wz),"ag-financial":pE((()=>new XF),Wz)},Uz=pE((function(e){if(e instanceof HF)return e;if(!function(e){const{invalid:t}=TC({theme:e},{theme:jC(Kz,ZC)});for(const i of t)xy.warnOnce(String(i));return 0===t.length}(e))return Vz();if(null==e||"string"===typeof e){const t=_z[e??"ag-default"];if(t)return t();throw new Error(`Cannot find theme \`${e}\`.`)}const{cleared:t,invalid:i}=TC(function(e){if(!rC(e)||!rC(e.baseTheme))return e;let t,i,s=e;const n=[];for(;"object"===typeof s;)t??(t=s.palette),i??(i=s.params),s.overrides&&n.push(s.overrides),s=s.baseTheme;return{baseTheme:s,overrides:yS(...n),params:i,palette:t}}(e),$z,"theme");for(const n of i)xy.warnOnce(String(n));const s=t?.baseTheme?Uz(t.baseTheme):Vz();return t?new s.constructor(t):s}),Wz);var $z={baseTheme:jC(qC,ZC),overrides:Fz,params:{accentColor:UC,axisColor:UC,backgroundColor:UC,borderColor:UC,borderRadius:YC,chartBackgroundColor:UC,chartPadding:YC,focusShadow:qC,foregroundColor:UC,fontFamily:Fb,fontSize:YC,fontWeight:jC(qC,YC),gridLineColor:UC,popupShadow:qC,subtleTextColor:UC,textColor:UC,chromeBackgroundColor:UC,chromeFontFamily:Fb,chromeFontSize:YC,chromeFontWeight:jC(qC,YC),chromeSubtleTextColor:UC,chromeTextColor:UC,buttonBackgroundColor:UC,buttonBorder:WC,buttonFontWeight:YC,buttonTextColor:UC,inputBackgroundColor:UC,inputBorder:WC,inputTextColor:UC,menuBackgroundColor:UC,menuBorder:WC,menuTextColor:UC,panelBackgroundColor:UC,panelSubtleTextColor:UC,tooltipBackgroundColor:UC,tooltipBorder:WC,tooltipTextColor:UC,tooltipSubtleTextColor:UC,crosshairLabelBackgroundColor:UC,crosshairLabelTextColor:UC},palette:{fills:lb(Db),strokes:lb(UC),up:{fill:jC(UC,Cb),stroke:UC},down:{fill:jC(UC,Cb),stroke:UC},neutral:{fill:jC(UC,Cb),stroke:UC}}},Kz=rb("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark");var Yz={isEnterprise:!1},Zz="path",qz="pathArray",Qz="default",Xz="override",Jz="user",ej="operation",tj="operationValue",ij="dependency",sj="autoEnable",nj="autoEnableValue";function oj(e){return dC(e)&&e>=0&&e<=1}function rj(e,t){let i=e;for(const s of t){if(!("string"===typeof s&&null!=i&&("object"===typeof i||Array.isArray(i))&&s in i))return!1;i=i[s]}return!0}function aj(e,t){let i=e;for(const s of t){if(!("string"===typeof s&&null!=i&&("object"===typeof i||Array.isArray(i))&&s in i))return;i=i[s]}return i}function lj(e,t,i){const s=t.length;if(0===s)return;let n=e;const o=s-1,r=t[o];for(let a=0;a<o;a++){const e=t[a],i=t[a+1];let s=n[e];null!=s&&aC(s)||(s=isNaN(Number(i))?{}:[],n[e]=s),n=s}n[r]=i}var cj=/^\d+$/;function hj(e){for(let t=e.length-1;t>=0;t--){const i=e[t];if(cj.test(i))return t}return-1}function dj(e){const t=hj(e);return Number(e[t])}function uj(e,t,i){const s=t.split("/");let n=[...e];t.startsWith("/")&&(n=[],s.shift());let o=!1;for(const r of s){if(".."===r)n.pop(),o||n.pop();else if("."===r)n.pop();else if("$index"===r){const t=dj(e);if(isNaN(t))return pj;n.push(`${t}`)}else if("$prevIndex"===r){const t=dj(e);if(isNaN(t)||Number(t)<=0)return pj;n.push(""+(Number(t)-1))}else if(r.startsWith("$")){const e=i?.[r.slice(1)];if(null==e)return pj;n.push(e)}else 0!==r.length&&n.push(r);o=".."===r}return n}var pj=Symbol("unresolvable-path"),gj=Symbol("resolved-to-branch");function mj(e,t){if(null==e||"object"!==typeof e||Array.isArray(e))return;if(t??(t=Object.keys(e)),0===t.length)return;const i=t[0];return Rj.has(i)?{operation:i,values:Array.isArray(e[i])?e[i]:[e[i]]}:void 0}var fj={$hasSeriesType:{dependencies:vj,resolve:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s),o=e.getResolvedPath(["series"]);if(!Array.isArray(o))return!1;for(const r of o)if(r.type===n)return!0;return!1}},$isChartType:{dependencies:vj,resolve:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s),o=e.getResolvedPath(["series","0","type"]);if("string"!==typeof o)return!1;switch(n){case"cartesian":return EA.isCartesian(o);case"polar":return EA.isPolar(o);case"standalone":return EA.isStandalone(o)}return!1}},$isSeriesType:{dependencies:vj,resolve:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s);return e.getResolvedPath(["series","0","type"])===n}}};function vj(e,t,i){const s=e.findVertexAtPath(["series","0","type"]);s&&e.addEdge(t,s,ij)}var yj={$foregroundBackgroundMix:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s),o=e.getParamValue("foregroundColor"),r=e.getParamValue("backgroundColor");if("string"===typeof o&&"string"===typeof r&&oj(n))return nx.mix(nx.fromString(o),nx.fromString(r),1-n).toString();iS.inDevelopmentMode((()=>xy.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(n)}}}] at [${e.getPathArray(t).join(".")}], expecting a number between 0 and 1.`)))},$foregroundOpacity:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s),o=e.getParamValue("foregroundColor");if("string"===typeof o&&oj(n)){const e=nx.fromString(o);return new nx(e.r,e.g,e.b,n).toString()}iS.inDevelopmentMode((()=>xy.warnOnce(`\`$foregroundOpacity\` json operation failed on [${String(n)}}}] at [${e.getPathArray(t).join(".")}], expecting a number between 0 and 1.`)))},$interpolate:function(e,t,i){const[s,n]=i,o=e.resolveVertexValue(t,s),r=e.resolveVertexValue(t,n);if(!iC(o)||!dC(r))return;return nx.interpolate(o.map((e=>nx.fromString(e))),r).map((e=>e.toString()))},$isGradient:function(e,t,i){const[s]=i;return qx(e.resolveVertexValue(t,s))},$isImage:function(e,t,i){const[s]=i;return Xx(e.resolveVertexValue(t,s))},$isPattern:function(e,t,i){const[s]=i;return Qx(e.resolveVertexValue(t,s))},$mix:function(e,t,i){const[s,n,o]=i,r=e.resolveVertexValue(t,s),a=e.resolveVertexValue(t,n),l=e.resolveVertexValue(t,o),c=e.getPathArray(t),h=`\`$mix\` json operation failed on [${String(r)}, ${String(a)}, ${String(l)}] at [${c.join(".")}], expecting`,d=`${h} two colors and a number between 0 and 1.`;if("string"!==typeof a||!oj(l))return void iS.inDevelopmentMode((()=>xy.warnOnce(d)));if("string"===typeof r)try{return nx.mix(nx.fromString(r),nx.fromString(a),l).toString()}catch{return void iS.inDevelopmentMode((()=>xy.warnOnce(d)))}if(!qx(r))return void iS.inDevelopmentMode((()=>xy.warnOnce(d)));let u=r.colorStops;try{u=u?.map((e=>{let t;return"string"===typeof e.color&&(t=nx.mix(nx.fromString(e.color),nx.fromString(a),l).toString()),{...e,color:t}}))}catch{return void iS.inDevelopmentMode((()=>xy.warnOnce(`${h} a gradient, a color and a number between 0 and 1.`)))}return{...r,colorStops:u}}};var Cj={$rem:function(e,t,i){const[s]=i,n=e.getVertexValue(s),o=e.getParamValue("fontSize");if("number"===typeof o&&"number"===typeof n)return Math.round(n*o);iS.inDevelopmentMode((()=>xy.warnOnce(`\`$rem\` json operation failed on [${String(n)}] at [${e.getPathArray(t).join(".")}], expecting a number.`)))}};var bj={$and:function(e,t,i){for(const s of i){if(!e.resolveVertexValue(t,s))return!1}return!0},$eq:function(e,t,i){let s,n=!0;for(const o of i){const i=e.resolveVertexValue(t,o);if(n)s=i,n=!1;else if(i!==s)return!1}return!0},$greaterThan:function(e,t,i){const[s,n]=i;return e.resolveVertexValue(t,s)>e.resolveVertexValue(t,n)},$if:function(e,t,i){const[s,n,o]=i,r=e.resolveVertexValue(t,s)?n:o,a=e.neighboursWithEdgeValue(r,Zz);if(a)for(const l of a)e.addEdge(t,l,Zz);return e.resolveVertexValue(t,r)},$lessThan:function(e,t,i){const[s,n]=i;return e.resolveVertexValue(t,s)<e.resolveVertexValue(t,n)},$not:function(e,t,i){for(const s of i)return!e.resolveVertexValue(t,s)},$or:function(e,t,i){for(const s of i){if(e.resolveVertexValue(t,s))return!0}return!1},$switch:function(e,t,i){const[s,n,...o]=i,r=e.resolveVertexValue(t,s);for(const a of o){const t=e.getVertexValue(a);if(!Array.isArray(t))continue;const[i,s]=t;if(r===i||Array.isArray(i)&&i.includes(r))return s}return e.getVertexValue(n)}};var wj={$isUserOption:function(e,t,i){const[s,n,o]=i,r=e.neighboursWithEdgeValue(s,Zz);if(r)for(const a of r){const i=e.findNeighbour(a,Qz);if(i&&Sj(e,t,i))return e.resolveVertexValue(t,n)}else if(Sj(e,t,s))return e.resolveVertexValue(t,n);return e.resolveVertexValue(t,o)},$isThemeOverride:function(e,t,i){const[s,n,o]=i,r=e.resolveVertexValue(t,s);if(!hC(r))throw new Error(`\`$isThemeOverride\` json operation failed on [${String(r)}], expecting a string.`);const a=uj(e.getPathArray(t),r);if(a===pj)return;if(e.hasThemeOverride(a))return e.resolveVertexValue(t,n);return e.resolveVertexValue(t,o)},$palette:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s);if(!hC(n))return;if(xj.has(n)){const i=dj(e.getPathArray(t));if(isNaN(i))return;switch(n){case"fill":return Wb(e.palette.fills,1,i)[0];case"fillFallback":return Wb(e.palette.fillsFallback,1,i)[0];case"stroke":return Wb(e.palette.strokes,1,i)[0];case"gradient":return Wb(e.palette.sequentialColors,1,i)[0];case"range2":return Wb(e.palette.fills,2,i)}return}if("gradients"===n)return e.palette.sequentialColors;const o=aj(e.palette,n.split("."));return Array.isArray(o)?[...o]:"object"===typeof o?{...o}:o},$mapPalette:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s);if(!hC(n))return;if(xj.has(n)){let i=dj(e.getPathArray(t)),s=0;const o=["series","0","type"];for(let t=0;t<i;t++){o[1]=`${t}`;const i=e.getResolvedPath(o);"map-shape-background"!==i&&"map-line-background"!==i||s++}if(i-=s,isNaN(i))return;switch(n){case"fill":return Wb(e.palette.fills,1,i)[0];case"fillFallback":return Wb(e.palette.fillsFallback,1,i)[0];case"stroke":return Wb(e.palette.strokes,1,i)[0];case"gradient":return Wb(e.palette.sequentialColors,1,i)[0];case"range2":return Wb(e.palette.fills,2,i)}return}if("gradients"===n)return e.palette.sequentialColors;const o=aj(e.palette,n.split("."));return Array.isArray(o)?[...o]:"object"===typeof o?{...o}:o},$path:{dependencies:Mj,resolve:function(e,t,i){const s=i.length>1,n=i.length>2,[o,r,a]=i,l=e.resolveVertexValue(t,o),c=n?e.resolveVertexValue(t,a):null;if(!hC(l))throw new Error(`\`$path\` json operation failed on [${String(l)}], expecting a string.`);const h=uj(e.getPathArray(t),l);if(h===pj)return;const d=c?aj(c,h):e.getResolvedPath(h);if(null!=d)return d;if(s)return e.resolveVertexValue(t,r)}},$pathString:{dependencies:Mj,resolve:function(e,t,i){const[s,n]=i,o=e.resolveVertexValue(t,s);if(!hC(o))throw new Error(`\`$path\` json operation failed on [${String(o)}], expecting a string.`);let r;n&&(r=e.graftAndResolveOrphan(t,n));const a=e.getPathArray(t),l=uj(a,o,r);if(l===pj)throw new Error(`Unresolvable path [${o}] at [${a.join(".")}]`);return l}},$ref:function(e,t,i){const[s]=i,n=e.getVertexValue(s);return e.getParamValue(n)}};function Sj(e,t,i){const s=e.resolveVertexValue(t,i);if(!hC(s))throw new Error(`\`$isUserOption\` json operation failed on [${String(s)}], expecting a string.`);const n=uj(e.getPathArray(t),s);return n!==pj&&e.hasUserOption(n)}var xj=new Set(["fill","fillFallback","stroke","gradient","range2"]);function Mj(e,t,i){const[s]=i,n=e.getVertexValue(s);if(hC(n)){const i=uj(e.getPathArray(t),n);if(i===pj)return;const s=e.findVertexAtPath(i);s&&e.addEdge(t,s,ij)}}var Dj={...fj,...yj,...Cj,...wj,...bj,...{$isEven:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s);return!isNaN(Number(n))&&Number(n)%2===0},$mul:function(e,t,i){let s;for(const n of i){const i=e.resolveVertexValue(t,n);null==s?s=Number(i):s*=Number(i)}return s},$round:function(e,t,i){for(const s of i)return Math.round(Number(e.resolveVertexValue(t,s)))}},...{$apply:function(e,t,i){const[s,n,o,r]=i,a=e.getVertexValue(s);if(!lC(a))return;const l=n?e.getVertexValue(n):void 0,c=e.neighboursWithEdgeValue(t,Zz),h=o?e.resolveVertexValue(t,o):void 0,d=r?e.resolveVertexValue(t,r):void 0;if((!c||0===c.length)&&null!=l)if(mj(l)){const i=e.resolveVertexValue(t,n);lC(i)&&e.graftObject(t,i,[h,d])}else e.graftObject(t,l,[h,d]);if(!c)return gj;for(const u of c){const t=e.neighboursWithEdgeValue(u,Zz);if(t&&0!==t.length)e.graftObject(u,a,[h,d]);else{const t=e.addVertex({});e.addEdge(u,t,Qz)}}return gj},$applyTheme:function(e,t,i){const[s,n,o]=i;let r=e.getVertexValue(s);"string"===typeof r&&(r=[r]);if(!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,Zz),l=o?e.getVertexValue(o):[],c=Array.isArray(l)?new Set(l):new Set;if(!a)return gj;for(const h of a){const t=e.graftAndResolveOrphan(h,n);for(const i of r){const s=uj([],i,t);s!==pj&&e.graftConfig(h,s,c)}}return gj},$findFirstSiblingNotOperation:function(e,t,i){const[s]=i,n=e.getPathArray(t),o=hj(n);if(o<0)return e.resolveVertexValue(t,s);const r=n.slice(0,o),a=e.findVertexAtPath(r);if(!a)return e.resolveVertexValue(t,s);const l=e.neighboursWithEdgeValue(a,Zz);if(l)for(let c=0;c<l.length;c++){if(`${c}`===n[o])continue;const t=r.concat([`${c}`,...n.slice(o+1)]),i=e.findVertexAtPath(t);if(!i)continue;const s=e.findNeighbourValue(i,Jz);if(null!=s)return s;const a=e.findNeighbourValue(i,Xz);if(null!=a)return a}return e.resolveVertexValue(t,s)},$map:function(e,t,i){const[s,n]=i,o=e.getVertexValue(s),r=e.resolveVertexValue(t,n);if(!Array.isArray(r))return;if(!mj(o))return r.map((()=>o));let a=0;for(const l of r)e.graftValue(t,`${a}`,o,l),a++;return gj},$merge:function(e,t,i){for(const s of i){const i=e.resolveVertexValue(t,s);lC(i)&&e.graftObject(t,i)}return gj},$omit:function(e,t,i){const[s,n]=i;let o=e.getVertexValue(s);if(!Array.isArray(o)){const i=function(e,t,i){const s=mj(e.getVertexValue(i));switch(s?.operation){case"$path":{const[i]=s.values,n=uj(e.getPathArray(t),i);if(n===pj)return;return e.findVertexAtPath(n)}case"$value":return t}}(e,t,n);if(!i)return;o=e.resolveVertexValue(i,s)}const r=e.resolveVertexValue(t,n);if(!Array.isArray(o)||!lC(r))return;return SS(r,o)},$size:function(e,t,i){const[s]=i,n=e.resolveVertexValue(t,s);return aC(n)?Object.keys(n).length:0},$shallow:function(e,t,i){const s=[];for(const n of i)s.push(e.getVertexValue(n));return s},$value:function(e,t,i){const[s]=i,n=e.getVertexValue(s),o=e.getPathArray(t);if("$index"===n)return dj(o);if("$1"===n)return e.resolveValue$1(o)}}},Rj=new Set(Object.keys(Dj));function Ej(e){return Rj.has(e)}var Ij=pE((function(e,t){return new kj(e.config,t,e.params,e.palette,e.overrides,e.getTemplateParameters())}));var Aj=class e extends xw{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Map;super(Zz,ej),this.config=t,this.userOptions=i,this.overrides=o,this.internalParams=r,this.resolvedParams={},this.resolvedAnnotations={},this.value$1={},this.cachedPathVertices=new Map,this.EMPTY_PATH_ARRAY_VERTEX=this.addVertex([]),this.root=this.addVertex("root"),this.params=this.addVertex("params"),this.annotations=this.addVertex("annotations"),this.config=t,this.overrides=o,this.internalParams=r,this.palette=n?TM(n):{},this.palette.type=rC(i?.theme)?kP(i.theme?.palette):"inbuilt";const a=i.series?.[0]?.type??"line",l=kA.cloneDefaultAxes(a);i.axes??(i.axes=l?.axes??[]),this.buildGraphFromObject(this.root,Jz,SS(i,["theme"])),this.buildGraphFromObject(this.root,Qz,SS(t[a],e.COMPLEX_KEYS));const c=o?SS(o[a],e.COMPLEX_KEYS):{};Object.keys(c).length>0&&this.buildGraphFromObject(this.root,Xz,c);const h=o?SS(o.common,e.COMPLEX_KEYS):{};Object.keys(h).length>0&&this.buildGraphFromObject(this.root,Xz,EA.isCartesian(a)?h:SS(h,["zoom","navigator"])),s&&this.buildGraphFromObject(this.params,Qz,s);const d=this.findNeighbourWithValue(this.root,"axes",Zz),u=this.findNeighbourWithValue(this.root,"series",Zz);d&&this.buildGraphFromObject(d,Qz,{$applyTheme:[["/$seriesType/axes/$axisType/$position","/$seriesType/axes/$axisType"],{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["./type","category"]},position:{$path:["./position"]}},["top","right","bottom","left"]]}),u&&this.buildGraphFromObject(u,Qz,{$applyTheme:["/$seriesType/series",{seriesType:{$path:["./type","line"]}}]});const p=SS(t[a]?.annotations??{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(p).length>0&&this.buildGraphFromObject(this.annotations,Qz,p);const g=SS(o?.common?.annotations??{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(g).length>0&&this.buildGraphFromObject(this.annotations,Xz,g);const m=xS(t[a]?.annotations??{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(m).length>0&&this.buildGraphFromObject(this.root,Qz,{annotations:m});const f=xS(o?.common?.annotations??{},e.ANNOTATIONS_OPTIONS_KEYS);Object.keys(f).length>0&&this.buildGraphFromObject(this.root,Xz,{annotations:f}),this.buildDependencyGraph()}clear(){super.clear(),this.cachedPathVertices.clear()}resolve(){return this.resolved={},this.resolvedParams={},this.resolvedAnnotations={},this.resolveVertex(this.params,this.resolvedParams),this.resolveVertex(this.annotations,this.resolvedAnnotations),this.resolveVertex(this.root),this.resolved}resolveParams(){return this.resolvedParams}resolveAnnotationThemes(){return this.resolvedAnnotations}findVertexAtPath(e){const t=e.join(".");if(this.cachedPathVertices.has(t))return this.cachedPathVertices.get(t);const i=this.findVertexAlongEdge(this.root,e,Zz);return i?(this.cachedPathVertices.set(t,i),i):void 0}hasUserOption(e){return rj(this.userOptions,e)}hasThemeOverride(e){if("axes"===e[0]&&e.length>1){const t=this.getResolvedPath(["axes",e[1],"type"]);if(rj(this.overrides,["common","axes",t,...e.slice(2)]))return!0;const i=this.getResolvedPath(["series","0","type"]);return rj(this.overrides,[i,"axes",t,...e.slice(2)])}if("series"===e[0]&&e.length>1){const t=this.getResolvedPath(["series",e[1],"type"]);return rj(this.overrides,[t,"series",...e.slice(2)])}return rj(this.overrides,e)}getParamValue(e){if(null!=this.resolvedParams[e])return this.resolvedParams[e];const t=this.findVertexAlongEdge(this.params,[e],Zz);if(!t)return;const i=this.findNeighbour(t,Qz);if(!i)return;const s=this.resolveVertexValue(t,i);return this.resolvedParams[e]=s,s}getPathArray(e){return this.findNeighbourValue(e,qz)??[]}getResolvedPath(e){return aj(this.resolved,e)}resolveVertexValue(e,t){this.resolveVertexDependencies(t);const i=this.findNeighbourValue(t,ej);if(i&&Ej(i)){const s=this.neighboursWithEdgeValue(t,tj),n=Dj[i],o="function"===typeof n?n:n.resolve,r=o?.(this,e,s??[]);return r===gj?void 0:r}let s=this.getVertexValue(t);if(Array.isArray(s)){const i={};this.resolveVertexChildren(t,i),s=aj(i,this.getPathArray(e))}return this.resolveValueOrSymbol(s)}resolveValue$1(e){return aj(this.value$1,e)}graftConfig(e,t,i){const s=aj(this.config,t),n=this.findNeighbour(e,qz);if(lC(s)&&this.buildGraphFromObject(e,Qz,s,n,void 0,i),this.overrides){const s=aj(this.overrides,t);lC(s)&&this.buildGraphFromObject(e,Xz,s,n,void 0,i);const o=aj(this.overrides,["common",...t.slice(1)]);lC(o)&&this.buildGraphFromObject(e,Xz,o,n,void 0,i)}this.buildDependencyGraph()}graftObject(e,t,i){const s=this.findNeighbour(e,qz);if(this.buildGraphFromObject(e,Qz,t,s),this.overrides&&i)for(const n of i){if(null==n)continue;const t=aj(this.overrides,n);t&&this.buildGraphFromObject(e,Xz,t,s)}this.buildDependencyGraph()}graftValue(e,t,i,s){const n=[...this.getPathArray(e),t];lj(this.value$1,n,s);const o=this.findVertexAtPath(n)??this.addVertex(t);this.buildGraphFromValue(e,o,Qz,n,i),this.buildDependencyGraph()}graftAndResolveOrphan(e,t){const i={},s=this.addVertex(i),n=this.getPathArray(e);return this.graftAndResolveChildren(t,s,n,[]),this.resolveVertex(s,i),aj(i,n)}buildGraphFromObject(t,i,s,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.SHALLOW_KEYS,r=arguments.length>5?arguments[5]:void 0;const a=Object.keys(s),l=mj(s,a);if(l){const e=this.addVertex(s);return this.addEdge(t,e,i),void this.buildGraphFromOperation(e,i,l,n)}if(0===a.length)return this.addEdge(t,this.addVertex(Array.isArray(s)?[]:{}),i),void this.buildGraphAutoEnable(t,i,s,void 0);const c=this.getVertexChildrenByKey(t),h=n?this.getVertexValue(n):[];let d;const u=[...h],p=h.length;for(const e of a){if(r?.has(e))continue;const n=c?.get(e)??this.addVertex(e);u[p]=e,o?.has(e)?this.buildShallowGraphFromValue(t,n,i,u,s[e]):this.buildGraphFromValue(t,n,i,u,s[e],o),"enabled"===e&&(d=n)}this.buildGraphAutoEnable(t,i,s,d)}buildGraphAutoEnable(e,t,i,s){if(t===Qz&&!s)return;if(t===Jz&&s)return;if(t!==Qz&&t!==Jz&&t!==Xz)return;let n=this.findNeighbour(e,sj);n||(n=this.addVertex(sj),this.addEdge(e,n,sj)),s&&this.addEdge(s,n,nj);const{enabled:o,_enabledFromTheme:r}=i;this.addEdge(n,this.addVertex({enabled:o,_enabledFromTheme:r,keys:Object.keys(i).length}),t)}getVertexChildrenByKey(e){const t=this.neighboursWithEdgeValue(e,Zz);if(!t)return;const i=new Map;for(const s of t)i.set(this.getVertexValue(s),s);return i}buildGraphFromValue(e,t,i,s,n,o){this.addEdge(e,t,Zz);let r=this.findNeighbour(t,qz);r||(r=this.addVertex([...s]),this.addEdge(t,r,qz));const a=mj(n);if(a){const e=this.addVertex(n);this.addEdge(t,e,i),this.addEdge(e,r,qz),this.buildGraphFromOperation(e,i,a,r)}else if(aC(n))this.buildGraphFromObject(t,i,n,r,o);else{const e=this.addVertex(n);this.addEdge(t,e,i)}}buildShallowGraphFromValue(e,t,i,s,n){this.addEdge(e,t,Zz);let o=this.findNeighbour(t,qz);o||(o=this.addVertex([...s]),this.addEdge(t,o,qz));const r=this.addVertex(n);this.addEdge(t,r,i)}buildGraphFromOperation(e,t,i,s){const n=this.addVertex(i.operation);this.addEdge(e,n,ej);for(const o of i.values)this.buildGraphFromOperationValue(e,o,t,s)}buildGraphFromOperationValue(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.EMPTY_PATH_ARRAY_VERTEX;const n=this.addVertex(t);this.addEdge(e,s,qz),this.addEdge(e,n,tj);const o=mj(t);o?this.buildGraphFromOperation(n,i,o,s):aC(t)&&this.buildGraphFromObject(n,i,t,s)}buildDependencyGraph(){for(let e=0;e<this.pendingProcessingEdgesFrom.length;e++){const t=this.pendingProcessingEdgesFrom[e],i=this.pendingProcessingEdgesTo[e],s=this.getVertexValue(i);if(!Ej(s))continue;const n=this.neighboursWithEdgeValue(t,tj),o=Dj[s],r="function"===typeof o?void 0:o.dependencies;r?.(this,t,n??[])}this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[]}resolveVertex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.resolved;const i=this.getPathArray(e);this.resolveVertexInEdgePriority(e,t,i),this.resolveVertexAutoEnable(e,t,i),this.resolveVertexChildren(e,t)}resolveVertexInEdgePriority(t,i,s){const n=this.neighboursWithEdgeValue(t,Zz),[o]=e.EDGE_PRIORITY;for(const r of e.EDGE_PRIORITY){const e=this.findNeighbour(t,r);if(null==e)continue;const a=this.resolveVertexValueInternal(t,e);if((null!=a||r===o)&&!(n&&n.length>0&&Array.isArray(a)&&r!==o)){if(0===s.length){if(null==a)continue;this.resolved=a}else lj(i,s,a);break}}}resolveVertexValueInternal(e,t){this.resolveVertexDependencies(t);const i=this.findNeighbourValue(t,ej);if(i&&Ej(i)){const s=this.neighboursWithEdgeValue(t,tj),n=Dj[i],o="function"===typeof n?n:n.resolve,r=o?.(this,e,s??[]);return r===gj?void 0:r}return this.resolveValueOrSymbol(this.getVertexValue(t))}resolveVertexAutoEnable(e,t,i){const s=this.neighboursWithEdgeValue(e,nj)?.[0];if(!s)return;const n=this.findNeighbourValue(s,Qz),o=this.findNeighbourValue(s,Xz),r=this.findNeighbourValue(s,Jz);!r||null!=r.enabled||n?._enabledFromTheme||o?._enabledFromTheme||lj(t,i,!0)}resolveVertexChildren(e,t){const i=this.neighboursWithEdgeValue(e,Zz);if(i)for(const s of i){const e=this.getVertexValue(s);i.length>1&&Ej(e)||"_enabledFromTheme"!==e&&this.resolveVertex(s,t)}}resolveVertexDependencies(e){const t=this.neighboursWithEdgeValue(e,ij);if(t)for(const i of t)this.resolveVertex(i)}graftAndResolveChildren(e,t,i,s){const n=this.neighboursWithEdgeValue(e,Zz);if(n)for(const o of n){const e=this.getVertexValue(o),n=[...i,e],r=[...s,e],a=this.addVertex(e),l=this.findNeighbourValue(o,Qz);this.addEdge(t,a,Zz);const c=this.addVertex(n);if(this.addEdge(a,c,qz),lC(l)){this.buildGraphFromObject(a,Qz,l,c);const e=this.findNeighbour(a,Qz);this.addEdge(e,this.addVertex(n),qz);const t=this.findNeighbourValue(e,ej);if(Ej(t)){const i=this.neighboursWithEdgeValue(e,tj),s=Dj[t],n="function"===typeof s?void 0:s.dependencies;n?.(this,e,i??[])}}this.graftAndResolveChildren(o,a,n,r)}}resolveValueOrSymbol(e){return"symbol"===typeof e&&this.internalParams?.has(e)?this.internalParams.get(e):e}};Aj.EDGE_PRIORITY=[Jz,Xz,Qz],Aj.SHALLOW_KEYS=new Set(["context","data","topology"]),Aj.COMPLEX_KEYS=["annotations","axes","series"],Aj.ANNOTATIONS_OPTIONS_KEYS=["axesButtons","data","enabled","optionsToolbar","snap","toolbar","xKey","volumeKey"];var kj=Aj,Tj=e=>`'${e}'`,Lj=class e{constructor(t,i,s,n,o,r){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7?arguments[7]:void 0;this.themeParameters={},this.optionMetadata=o??{},this.processedOverrides=s??{};let c,h,d,u,p,g,m=null;if(t instanceof e?(m=t,this.specialOverrides=m.specialOverrides,void 0===r&&(r=AM(m.userOptions,i,e.JSON_DIFF_OPTS)),this.userOptions=TM(CS(r,m.userOptions),{...e.OPTIONS_CLONE_OPTS_SLOW,seen:[]})):(this.userOptions=TM(t??i,{...e.OPTIONS_CLONE_OPTS_SLOW,seen:[]}),this.specialOverrides=this.specialOverridesDefaults({...n})),a&&this.removeLeftoverSymbols(this.userOptions),!a&&void 0!==r&&e.isFastPathDelta(r)&&null!=m?(({activeTheme:c,processedOptions:h,fastDelta:d}=this.fastSetup(r,m)),u=m.themeParameters,p=m.annotationThemes):(e.perfDebug("ChartOptions.slowSetup()"),({activeTheme:c,processedOptions:h,themeParameters:u,annotationThemes:p,googleFonts:g}=this.slowSetup(s,r,a))),this.activeTheme=c,this.processedOptions=h,this.fastDelta=d??void 0,this.themeParameters=u,this.annotationThemes=p,this.googleFonts=g,void 0!==l&&"number"===typeof l&&!isNaN(l)){const e=performance.now();this.optionsProcessingTime=e-l}iS.inDevelopmentMode((()=>IS(this)))}static isFastPathDelta(t){for(const i of Object.keys(t??{}))if(!this.FAST_PATH_OPTIONS.has(i))return e.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return e.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(t,i){const{activeTheme:s,processedOptions:n}=i,{presetType:o}=this.optionMetadata;if(null!=o&&null!=t?.data){const e=Fy.getPresetModule(o);if(e?.processData){const{series:i,data:s}=e.processData(t.data);t=yS({series:i,data:s},t)}}this.fastSeriesSetup(t,n);const r=yS(t,n);return e.debug("ChartOptions.fastSetup() - processed options",r),{activeTheme:s,processedOptions:r,fastDelta:t}}fastSeriesSetup(e,t){e?.series&&(e.series?.every(((e,i)=>kM(e,t.series?.[i]??{})))?delete e.series:e.series=e.series.map(((e,i)=>CS(e,t.series?.[i]??{}))))}slowSetup(t,i){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=TM(this.userOptions,e.OPTIONS_CLONE_OPTS_FAST);i&&(n=yS(i,n),s&&this.removeLeftoverSymbols(n));const{presetType:o}=this.optionMetadata;if(null!=o){const t=Fy.getPresetModule(o);if(t){const{validate:i=TC}=t,s=n,o=n.type,r=null!=o?Uz(n.theme).presets[o]:void 0,{cleared:a,invalid:l}=i(s,t.options,"");l.forEach((e=>xy.warn(e))),ub(l,"")?n={}:(e.debug(">>> AgCharts.createOrUpdate() - applying preset",a),n=t.create(a,r,(()=>this.activeTheme)))}}this.soloSeriesIntegrity(n),Yz.isEnterprise||AP(n);const r=Uz(n.theme);if(null!=o&&r.templateTheme(n,!1),this.validateSeriesOptions(n),this.chartDef=Fy.detectChartDefinition(n),!this.chartDef.placeholder){const{validate:e=TC}=this.chartDef,{cleared:t,invalid:i}=e(n,this.chartDef.options,"");i.forEach((e=>xy.warn(e))),n=t}this.validateAxesOptions(n),this.removeDisabledOptions(n);let a=this.processFonts(r.params);a=this.processFonts(n,a),this.processSeriesOptions(n);const l=Ij(r,n),c=l.resolve(),h=l.resolveParams(),d=l.resolveAnnotationThemes();l.clear();const u=yS(t,c);return function(e){const t="mode"in e&&"integrated"===e.mode;for(const i of Yw.byType("root","legend")){const s=e[i.optionsKey],n=null!=s&&!1===s.enabled,o=!("removable"in i)||!0===i.removable||"standalone-only"===i.removable&&!t;n&&o&&delete e[i.optionsKey]}}(u),Yz.isEnterprise||AP(u,!0),this.validateSeriesOptions(u),this.validateAxesOptions(u),this.validatePluginOptions(u),this.processMiniChartSeriesOptions(u),u.loadGoogleFonts||a.clear(),e.debug((()=>["ChartOptions.slowSetup() - processed options",TM(u)])),{activeTheme:r,processedOptions:u,themeParameters:h,annotationThemes:d,googleFonts:a}}validatePluginOptions(e){for(const t of Fy.listModulesByType(Ny.Plugin)){const i=t.name;if(i in e&&(!t.chartType||t.chartType===this.chartDef?.name)){const{cleared:s,invalid:n}=TC(e[i],t.options,t.name);n.forEach((e=>xy.warn(e))),e[i]=s}}}validateSeriesOptions(e){const t=this.chartDef?.name,i=[],s=e.series?.length??0;let n;for(let o=0;o<s;o++){const s=`series[${o}]`,r=e.series[o],a=Fy.getSeriesModule(r.type);if(null==a){n??(n=fC(Array.from(Fy.listModulesByType(Ny.Series)).filter((e=>!t||e.chartType===t)).map((e=>e.name)),"or",Tj)),xy.warn(null==r.type?`Option \`${s}.type\` is required and has not been provided; expecting ${n}, ignoring.`:`Unknown type \`${r.type}\` at \`${s}.type\`; expecting ${n}, ignoring.`);continue}if(t&&a.chartType!==t){xy.warn(`Series type \`${a.name}\` at \`${s}.type\` is not supported by chart type \`${t}\`, ignoring.`);continue}const{validate:l=TC}=a,{cleared:c,invalid:h}=l(r,a.options,s);h.forEach((e=>xy.warn(e))),ub(h,s)||i.push(c)}e.series=i}validateAxesOptions(e){if(!("axes"in e)||!e.axes)return;const t=this.chartDef?.name,i=[],s=e.axes.length??0;let n;for(let o=0;o<s;o++){const s=`axes[${o}]`,r=e.axes[o],a=Fy.getAxisModule(r.type);if(null==a){n??(n=fC(Array.from(Fy.listModulesByType(Ny.Axis)).filter((e=>e.chartType===t)).map((e=>e.name)),"or",Tj)),xy.warn(`Unknown type \`${r.type}\` at  \`${s}.type\`; expecting one of ${n}, ignoring all axes options.`),delete e.axes;break}if(a.chartType!==t){xy.warn(`Axis type \`${a.name}\` at  \`${s}.type\` is not supported by chart type \`${t}\`, ignoring.`);break}const{validate:l=TC}=a,{cleared:c,invalid:h}=l(r,a.options,s);h.forEach((e=>xy.warn(e))),ub(h,s)||i.push(c)}e.axes=i}diffOptions(t){return this===t?{}:null==t?this.processedOptions:this.fastDelta??AM(t.processedOptions,this.processedOptions,e.JSON_DIFF_OPTS)}optionsType(e){return e.series?.[0]?.type??"line"}processSeriesOptions(e){const t=e.series?.map((e=>{e.type??(e.type="line");const t=Fy.getSeriesModule(e.type),i=Boolean(t?.options.visible);return yS(this.getSeriesGroupingOptions(e),e,i&&{visible:!0})}));e.series=this.setSeriesGroupingOptions(t??[])}processMiniChartSeriesOptions(e){const t=e.navigator?.miniChart?.series;null!=t&&(e.navigator.miniChart.series=this.setSeriesGroupingOptions(t))}getSeriesGroupingOptions(e){const t=kA.isGroupable(e.type),i=kA.isStackable(e.type),s=kA.isStackedByDefault(e.type);e.grouped&&!t&&xy.warnOnce(`unsupported grouping of series type "${e.type}".`),!e.stacked&&!e.stackGroup||i||xy.warnOnce(`unsupported stacking of series type "${e.type}".`);let{grouped:n,stacked:o}=e;return o??(o=(s||null!=e.stackGroup)&&!(t&&n)),n??(n=!0),{stacked:i&&o,grouped:t&&n&&!(i&&o)}}setSeriesGroupingOptions(t){const i=this.getSeriesGrouping(t);e.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);const s={},n=i.reduce(((e,t)=>{var i;return"default"===t.groupType||(e[i=t.seriesType]??(e[i]=0),e[t.seriesType]+="stack"===t.groupType?1:t.series.length),e}),{});return i.flatMap((e=>{var t;switch(s[t=e.seriesType]??(s[t]=0),e.groupType){case"stack":{const t=s[e.seriesType]++;return e.series.map(((i,s)=>Object.assign(i,{seriesGrouping:{groupId:e.groupId,groupIndex:t,groupCount:n[e.seriesType],stackIndex:s,stackCount:e.series.length}})))}case"group":return e.series.map((t=>Object.assign(t,{seriesGrouping:{groupId:e.groupId,groupIndex:s[e.seriesType]++,groupCount:n[e.seriesType],stackIndex:0,stackCount:0}})))}return e.series})).map((e=>{let{stacked:t,grouped:i,...s}=e;return s}))}getSeriesGroupId(e){return[e.type,e.xKey,e.stacked?e.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const t=new Map;return e.reduce(((e,i)=>{const s=i.type;if(i.stacked||i.grouped){const n=this.getSeriesGroupId(i);if(!t.has(n)){const o={groupType:i.stacked?"stack":"group",seriesType:s,series:[],groupId:n};t.set(n,o),e.push(o)}t.get(n).series.push(i)}else e.push({groupType:"default",seriesType:s,series:[i],groupId:"__default__"});return e}),[])}soloSeriesIntegrity(e){if(!iC(e.series))return;const t=e.series;if(t&&t.length>1&&t.some((e=>kA.isSolo(e.type)))){const s=this.optionsType(e);if(kA.isSolo(s))xy.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),e.series=t.slice(0,1);else{const{solo:s,nonSolo:n}=Vb(t,(e=>kA.isSolo(e.type)?"solo":"nonSolo")),o=(i=s.map((e=>e.type)),Array.from(new Set(i))).join(", ");xy.warn(`Unable to mix these series types with the lead series type: ${o}`),e.series=n}}var i}static processFontOptions(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if("object"===typeof e&&"fontFamily"in e)if(Array.isArray(e.fontFamily)){const t=[];for(const i of e.fontFamily)"object"===typeof i&&"googleFont"in i?(t.push(i.googleFont),s?.add(i.googleFont)):t.push(i);e.fontFamily=t.join(", ")}else"object"===typeof e.fontFamily&&"googleFont"in e.fontFamily&&(e.fontFamily=e.fontFamily.googleFont,s?.add(e.fontFamily));return s}processFonts(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return PM(t,e.processFontOptions,new Set(["data","theme"]),void 0,void 0,i)}static removeDisabledOptionJson(e){"enabled"in e&&!1===e.enabled&&Object.keys(e).forEach((t=>{"enabled"!==t&&delete e[t]}))}removeDisabledOptions(t){PM(t,e.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(e){if(e&&rC(e))for(const t of Object.keys(e)){pC(e[t])&&delete e[t]}}removeLeftoverSymbols(t){PM(t,e.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(e){var t,i;if(null==e.window?e.window=Qy():(t=e.window,Zy.window=t),null==e.document?e.document=qy():(i=e.document,Zy.document=i),null==e.window)throw new Error("AG Charts - unable to resolve global window");if(null==e.document)throw new Error("AG Charts - unable to resolve global document");return e}};Lj.OPTIONS_CLONE_OPTS_SLOW={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])},Lj.OPTIONS_CLONE_OPTS_FAST={shallow:new Set(["container"]),assign:new Set(["data","context","theme"])},Lj.JSON_DIFF_OPTS=new Set(["data"]),Lj.perfDebug=iS.create(!0,"perf"),Lj.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]),Lj.debug=iS.create(!0,"opts");var Pj=Lj,Fj=iS.create(!0,"opts"),Nj="AG Charts - Chart was destroyed, cannot perform request.",Oj=class{constructor(e,t,i){this.factoryApi=t,this.licenseManager=i,this.chart=e}async update(e){if(!this.chart)throw new Error(Nj);return Fj.group("AgChartInstance.update()",(async()=>{const t=iS.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.update(e,this,void 0,t),await(this.chart?.waitForUpdate())}))}async updateDelta(e){if(!this.chart)throw new Error(Nj);return Fj.group("AgChartInstance.updateDelta()",(async()=>{const t=iS.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.updateUserDelta(this,e,t),await(this.chart?.waitForUpdate())}))}getOptions(){if(!this.chart)throw new Error(Nj);const e=TM(this.chart.getOptions(),Pj.OPTIONS_CLONE_OPTS_FAST);for(const t of Object.keys(e))t.startsWith("_")&&delete e[t];return e}waitForUpdate(){if(!this.chart)throw new Error(Nj);return this.chart.waitForUpdate()}async download(e){if(!this.chart)throw new Error(Nj);const t=await this.prepareResizedChart(this,this.chart,e);try{t.chart?.download(e?.fileName,e?.fileFormat)}finally{t.destroy()}}async __toSVG(e){if(!this.chart)throw new Error(Nj);const t=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...e});try{return t?.chart?.toSVG()}finally{t?.destroy()}}async getImageDataURL(e){if(!this.chart)throw new Error(Nj);const t=await this.prepareResizedChart(this,this.chart,e);try{return t.chart.getCanvasDataURL(e?.fileFormat)}finally{t.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(e){const{chart:t}=this;if(!t)return;const i=this.getEnabledOriginators();i.includes(t.ctx.legendManager)?(await this.setStateOriginators(e,i.filter((e=>e!==t.ctx.zoomManager))),await this.setStateOriginators(e,[t.ctx.zoomManager])):await this.setStateOriginators(e,i)}resetAnimations(){this.chart?.resetAnimations()}skipAnimations(){this.chart?.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=i.width??t.width??t.ctx.scene.canvas.width,n=i.height??t.height??t.ctx.scene.canvas.height,o=e.getState(),r=Yw.hasEnterpriseModules(),a={...t.chartOptions.processedOverrides,container:document.createElement("div"),width:s,height:n};null!=i.width&&null!=i.height&&(a.overrideDevicePixelRatio=1);const l=t.getOptions();r&&(a.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(a.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const c={...t.chartOptions.specialOverrides},h={...t.chartOptions.optionMetadata},d=await(this.chart?.ctx.dataService.getData()),u=this.factoryApi.create(l,a,c,h,d);await u.setState(o),u.chart?.ctx.zoomManager.updateZoom("chartProxy",t.ctx.zoomManager.getZoom()),u.chart?.ctx.legendManager.clearData(),u.chart?.ctx.legendManager.update(t.ctx.legendManager.getData()),t.series.forEach(((e,t)=>{u.chart.series[t].visible=e.visible}));const p=[];for(const g of t.modulesManager.legends())p.push(g.legend.pagination?.currentPage??0);for(const g of u.chart.modulesManager.legends()){const e=p.shift()??0;g.legend.pagination&&g.legend.pagination.setPage(e)}return u.chart?.update(0,{forceNodeDataRefresh:!0}),await u.waitForUpdate(),u}getEnabledOriginators(){if(!this.chart)return[];const{chartOptions:{processedOptions:e,optionMetadata:t},ctx:{annotationManager:i,chartTypeOriginator:s,zoomManager:n,legendManager:o}}=this.chart,r=[];"annotations"in e&&e.annotations?.enabled&&r.push(i);return"price-volume"===t.presetType&&r.push(s),(e.navigator?.enabled||e.zoom?.enabled)&&r.push(n),"legend"in this.chart&&r.push(o),r}async setStateOriginators(e,t){this.factoryApi.caretaker.restore(e,...t),this.chart?.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await(this.chart?.waitForUpdate())}};Oj.chartInstances=new WeakMap,$w([HM({oldValue(e){e.destroyed||(e.publicApi=void 0),Oj.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,Oj.chartInstances.set(e,this))}})],Oj.prototype,"chart",2);var Bj=Oj,Gj=class extends Kw{constructor(e){super(),this.ctx=e,this.localeText=void 0}};$w([WM((e=>{e.ctx.localeManager.setLocaleText(e.localeText)})),fx],Gj.prototype,"localeText",2),$w([WM((e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)})),fx],Gj.prototype,"getLocaleText",2);var zj={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new Gj(e)},jj=class extends Kw{constructor(e){super(),this.ctx=e,this.rectNode=new RD,this.textNode=new AD,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",(e=>this.onLayoutComplete(e))))}createNode(){return new gM({name:"background",zIndex:0})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};$w([fx,VM("node","visible")],jj.prototype,"visible",2),$w([fx,VM("rectNode","fill")],jj.prototype,"fill",2),$w([fx],jj.prototype,"image",2),$w([fx,VM("textNode")],jj.prototype,"text",2);var Vj={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new jj(e)},Hj=class extends vx{constructor(e){super(),this.node=e,this.enabled=!1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=1}};function Wj(e){let{orientation:t,bboxes:i,maxHeight:s,maxWidth:n,itemPaddingY:o=0,itemPaddingX:r=0,forceResult:a=!1}=e;const l="horizontal"===t,c={max:l?n:s,fn:l?e=>e.width:e=>e.height,padding:l?r:o},h={max:l?s:n,fn:l?e=>e.height:e=>e.width,padding:l?o:r};let d=0;const u=[];for(;d<i.length;){const e=_j(i.slice(d),d,c,h,a);if(!e)return;d+=e.processedBBoxCount,u.push(e.pageIndices)}return function(e,t,i,s,n){let o=0,r=0;const a=e.map((e=>{"horizontal"===t&&(e=function(e){const t=[];for(const i of e[0])t.push([]);return e.forEach(((e,i)=>{e.forEach(((e,s)=>{t[s][i]=e}))})),t}(e));let a=0;const l=e.map((e=>{const t=e.map((e=>(a=Math.max(e,a),i[e])));let o=0,r=0;return t.forEach((e=>{o+=e.height+s,r=Math.max(r,e.width+n)})),{indices:e,bboxes:t,columnHeight:Math.ceil(o),columnWidth:Math.ceil(r)}}));let c=0,h=0;return l.forEach((e=>{c+=e.columnWidth,h=Math.max(h,e.columnHeight)})),o=Math.max(c,o),r=Math.max(h,r),{columns:l,startIndex:e[0][0],endIndex:a,pageWidth:c,pageHeight:h}}));return{pages:a,maxPageWidth:o,maxPageHeight:r}}(u,t,i,o,r)}function _j(e,t,i,s,n){let o=function(e,t){const i=e.length;let s=0;for(let n=0;n<i;n++)if(s+=t.fn(e[n])+t.padding,s>t.max){return i/n<2?Math.ceil(i/2):n}return i}(e,i);if(o<1){if(!n)return;o=1}let r=o;for(;r>=1;){const o=Uj(e,t,r,i,s,n);if(null==o&&r<=1)return;if(null==o){r--;continue}if("number"===typeof o){if(o<=1)return;r=o<r&&o>1?o:r,r--;continue}return{processedBBoxCount:o.length*o[0].length,pageIndices:o}}}function Uj(e,t,i,s,n,o){const r=[];let a=0,l=0,c=[];const h=[];for(let d=0;d<e.length;d++){const u=(d+i)%i;0===u&&(a+=l,l=0,c.length>0&&r.push(c),c=[]);const p=s.fn(e[d])+s.padding;h[u]=Math.max(h[u]??0,p),l=Math.max(l,n.fn(e[d])+n.padding);const g=a+l,m=!o||r.length>0;if(g>n.max&&m){c=[];break}if(h.reduce(((e,t)=>e+t),0)>s.max&&!o)return h.length<i?h.length:void 0;c.push(d+t)}return c.length>0&&r.push(c),r.length>0?r:void 0}$w([HM({changeValue(e){this.node.strokeWidth=e?this.strokeWidth:0}}),fx],Hj.prototype,"enabled",2),$w([VM("node","stroke"),fx],Hj.prototype,"stroke",2),$w([VM("node","strokeOpacity"),fx],Hj.prototype,"strokeOpacity",2),$w([HM({changeValue(e){this.enabled?this.node.strokeWidth=e:this.node.strokeWidth=0}}),fx],Hj.prototype,"strokeWidth",2);var $j=class extends vx{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};$w([fx],$j.prototype,"color",2),$w([fx],$j.prototype,"fontStyle",2),$w([fx],$j.prototype,"fontWeight",2),$w([fx],$j.prototype,"fontSize",2),$w([fx],$j.prototype,"fontFamily",2);var Kj=class extends vx{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};$w([fx],Kj.prototype,"size",2),$w([fx],Kj.prototype,"fill",2),$w([fx],Kj.prototype,"fillOpacity",2),$w([fx],Kj.prototype,"stroke",2),$w([fx],Kj.prototype,"strokeWidth",2),$w([fx],Kj.prototype,"strokeOpacity",2);var Yj=class extends vx{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};$w([HM({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Yj.prototype,"shape",2),$w([fx],Yj.prototype,"size",2),$w([fx],Yj.prototype,"padding",2);var Zj=class extends vx{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=Ew(this),this.marker=new Yj(this),this.activeStyle=new Kj,this.inactiveStyle=new Kj,this.highlightStyle=new Kj,this.label=new $j,this.group=new vM({name:"pagination"}),this.labelNode=new AD,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new ZL,this.previousButton=new ZL,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){if(this._orientation=e,"horizontal"===e)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+2*(this.marker.size/2+this.marker.padding)}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=o,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:o,highlightStyle:r,highlightActive:a}=this,l=(e,t)=>t?o:e===a?r:n;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",s))}updateMarker(e,t){const{shape:i,size:s}=this.marker;e.shape=i,e.size=s,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=0===t,s=e===t-1,n=0===e;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}setPage(e){e=dw(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),"next"!==t||this.nextButtonDisabled?"previous"!==t||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(7)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(7)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:uM.toCanvas(this.previousButton),next:uM.toCanvas(this.nextButton)}}};Zj.className="Pagination",$w([fx],Zj.prototype,"marker",2),$w([fx],Zj.prototype,"activeStyle",2),$w([fx],Zj.prototype,"inactiveStyle",2),$w([fx],Zj.prototype,"highlightStyle",2),$w([fx],Zj.prototype,"label",2);var qj=class{constructor(e,t){this.dirty=!0,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"}}),this.itemDescription=Xy("p"),this.itemDescription.style.display="none",this.itemDescription.id=Iw(),this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:s,itemListener:n}=e,o=t.localeManager,r=i.length;i.each(((e,i,a)=>{e.proxyButton?.destroy(),e.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(o,s.getItemLabel(i),a,r),ariaChecked:!!e.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const l=e.proxyButton;l.addListener("click",(t=>n.onClick(t.sourceEvent,e.datum,l))),l.addListener("dblclick",(t=>n.onDoubleClick(t.sourceEvent,e.datum))),l.addListener("mouseenter",(t=>n.onHover(t.sourceEvent,e))),l.addListener("mouseleave",(()=>n.onLeave())),l.addListener("contextmenu",(t=>n.onContextClick(t,e))),l.addListener("blur",(()=>n.onLeave())),l.addListener("focus",(t=>n.onHover(t.sourceEvent,e))),l.addListener("drag-start",(()=>{}))})),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons(e){let{itemSelection:t,group:i,pagination:s,interactive:n}=e;const o=uM.toCanvas(i);this.itemList.setBounds(o);const r=Math.max(...t.nodes().map((e=>e.getBBox().height)));t.each(((e,t)=>{if(e.proxyButton){const t=e.pageIndex===s.currentPage,{x:i,y:a,height:l,width:c}=uM.toCanvas(e),h=(r-l)/2,d={x:i-o.x,y:a-h-o.y,height:r,width:c},u=n&&t;e.proxyButton.setCursor("pointer"),e.proxyButton.setEnabled(u),e.proxyButton.setPointerEvents(u?void 0:"none"),e.proxyButton.setBounds(d)}}))}updatePaginationProxyButtons(e,t){const{pagination:i}=e;if(this.paginationGroup.setHidden(!i.visible),t&&"ctx"in e){const{ctx:t,oldPages:s,newPages:n}=e,o=(s?.length??n.length)>1,r=n.length>1;o!==r&&(r?(this.prevButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",(t=>this.onPageButton(e,t,"previous"))),this.prevButton.addListener("mouseenter",(()=>i.onMouseHover("previous"))),this.prevButton.addListener("mouseleave",(()=>i.onMouseHover(void 0))),this.nextButton??(this.nextButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",(t=>this.onPageButton(e,t,"next"))),this.nextButton.addListener("mouseenter",(()=>i.onMouseHover("next"))),this.nextButton.addListener("mouseleave",(()=>i.onMouseHover(void 0)))):(this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0)),this.paginationGroup.setAriaHidden(!r||void 0)}if(this.prevButton&&this.nextButton){const{prev:e,next:t}=i.computeCSSBounds(),s=eS.merge([e,t]);e.x-=s.x,e.y-=s.y,t.x-=s.x,t.y-=s.y,this.paginationGroup.setBounds(s),this.prevButton.setBounds(e),this.nextButton.setBounds(t),this.prevButton.setEnabled(0!==i.currentPage),this.nextButton.setEnabled(i.currentPage!==i.totalPages-1),this.nextButton.setCursor(i.getCursor("next")),this.prevButton.setCursor(i.getCursor("previous"))}}onPageButton(e,t,i){e.pagination.onClick(t.sourceEvent,i),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some(((i,s,n)=>{const[o,r]=[t[s],e[s]];return o.id!==r.id}))}onLocaleChanged(e,t,i){const s=t.length;t.each(((t,n,o)=>{let{proxyButton:r}=t;const a=r?.getElement();if(null!=a){const t=i.getItemLabel(n);a.textContent=this.getItemAriaText(e,t,o,s)}})),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,i,s){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:s})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function Qj(e,t,i){let{itemId:s,seriesId:n,label:{text:o}}=t;const r={defaultPrevented:!1,apiEvent:{type:e,itemId:s,seriesId:n,text:o,event:i,preventDefault:()=>r.defaultPrevented=!0}};return r}var Xj=class extends vM{constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new gM({name:"legend-markerLabel-symbols"})),this.label=this.appendChild(new AD),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new ZL({zIndex:1})),this.line=this.symbolsGroup.appendChild(new HA({zIndex:0}));const{label:e,line:t,symbolsGroup:i}=this;t.visible=!1,i.renderToOffscreenCanvas=!0,i.optimizeForInfrequentRedraws=!0,e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(e){this.enabled=e,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),eS.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e}layout(){const{marker:e,line:t,length:i,isCustomMarker:s}=this;let n=0,o=0;if(e.visible){const{size:t}=e,r=ZL.anchor(e.shape);n=(r.x-.5)*t+i/2,o=(r.y-.5)*t,s?(e.x=0,e.y=0,e.translationX=n,e.translationY=o):(e.x=n,e.y=o,e.translationX=0,e.translationY=0)}t.visible&&(t.x1=0,t.x2=i,t.y1=0,t.y2=0)}preRender(e){const t=super.preRender(e);return this.layout(),t}layoutLabel(){const{length:e,spacing:t}=this;this.label.x=e+t}computeBBox(){return this.layout(),super.computeBBox()}};function Jj(e){const{placement:t="bottom",floating:i=!1,xOffset:s=0,yOffset:n=0}="string"===typeof e?{placement:e,floating:!1}:e;return{placement:t,floating:i,xOffset:s,yOffset:n}}Xj.className="MarkerLabel",$w([VM("label")],Xj.prototype,"text",2),$w([VM("label")],Xj.prototype,"fontStyle",2),$w([VM("label")],Xj.prototype,"fontWeight",2),$w([VM("label")],Xj.prototype,"fontSize",2),$w([VM("label")],Xj.prototype,"fontFamily",2),$w([VM("label","fill")],Xj.prototype,"color",2),$w([WM((e=>e.layoutLabel()))],Xj.prototype,"spacing",2),$w([WM((e=>e.layoutLabel()))],Xj.prototype,"length",2),$w([LS()],Xj.prototype,"isCustomMarker",2);var eV=class extends vx{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};$w([fx],eV.prototype,"maxLength",2),$w([fx],eV.prototype,"color",2),$w([fx],eV.prototype,"fontStyle",2),$w([fx],eV.prototype,"fontWeight",2),$w([fx],eV.prototype,"fontSize",2),$w([fx],eV.prototype,"fontFamily",2),$w([fx],eV.prototype,"formatter",2);var tV=class extends vx{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};$w([fx],tV.prototype,"shape",2),$w([fx],tV.prototype,"size",2),$w([fx],tV.prototype,"padding",2),$w([fx],tV.prototype,"strokeWidth",2),$w([fx],tV.prototype,"enabled",2);var iV=class extends vx{};$w([fx],iV.prototype,"strokeWidth",2),$w([fx],iV.prototype,"length",2);var sV=class extends vx{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new tV,this.label=new eV,this.line=new iV}};$w([fx],sV.prototype,"maxWidth",2),$w([fx],sV.prototype,"paddingX",2),$w([fx],sV.prototype,"paddingY",2),$w([fx],sV.prototype,"showSeriesStroke",2),$w([fx],sV.prototype,"marker",2),$w([fx],sV.prototype,"label",2),$w([fx],sV.prototype,"line",2);var nV=class extends vx{};$w([fx],nV.prototype,"legendItemClick",2),$w([fx],nV.prototype,"legendItemDoubleClick",2);var oV={type:"gradient",bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1},rV={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},aV={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8},lV=class extends vx{constructor(e){super(),this.ctx=e,this.id=Ew(this),this.group=new vM({name:"legend",zIndex:16}),this.itemSelection=VA.select(this.group,Xj),this.containerNode=this.group.appendChild(new RD({name:"legend-container"})),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new sV,this.listeners=new nV,this.enabled=!0,this.position="bottom",this.border=new Hj(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.spacing=20,this.cleanup=new hw,this.size=[0,0],this._visible=!0,this.pagination=new Zj((t=>e.updateService.update(t)),(e=>this.updatePageNumber(e))),this.pagination.attachPagination(this.group);const{items:t}=e.contextMenuRegistry.builtins;t["toggle-series-visibility"].action=e=>this.contextToggleVisibility(e),t["toggle-other-series"].action=e=>this.contextToggleOtherSeries(e),this.cleanup.register(e.eventsHub.on("legend:change",this.onLegendDataChange.bind(this)),e.layoutManager.registerElement(1,(e=>this.positionLegend(e))),e.eventsHub.on("locale:change",(()=>this.onLocaleChanged())),(()=>delete t["toggle-series-visibility"].action),(()=>delete t["toggle-other-series"].action),(()=>this.group.remove())),this.domProxy=new qj(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){fS(e,this._data)||(this.domProxy.onDataUpdate(this._data,e),this._data=e,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange(e){let{legendData:t=[]}=e;this.enabled&&(this.data=t.filter((e=>!e.hideInLegend)))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.cleanup.flush(),this.itemSelection.clear()}getOrientation(){return this.orientation??"horizontal"}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{formatter:t}=this.item.label;if(t){const i=e.datum;return this.cachedCallWithContext(t,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId,...i&&{datum:i}})}return e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:s,label:n,maxWidth:o,label:{maxLength:r=1/0,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:h}}=this.item,d=[...this.data];this.reverseOrder&&d.reverse(),this.itemSelection.update(d);const u=[],p=lD.getMeasurer({font:n}),g=o??.8*e,{markerWidth:m,anyLineEnabled:f}=this.calculateMarkerWidth();if(this.itemSelection.each(((e,t)=>{e.fontStyle=a,e.fontWeight=l,e.fontSize=c,e.fontFamily=h;const i=this.updateMarkerLabel(e,t,m,f),s=t.itemId??t.id,n=(this.getItemLabel(t)??"<unknown>").replace(/\r?\n/g," ");e.text=this.truncate(n,r,g,i,p,s),u.push(e.getTextMeasureBBox())})),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return{};[e,t]=this.updateContainer(e,t);const v=this.size,y=this.oldSize;v[0]=e,v[1]=t,v[0]===y[0]&&v[1]===y[1]||(y[0]=v[0],y[1]=v[1]);const{pages:C,maxPageHeight:b,maxPageWidth:w}=this.updatePagination(u,e,t),S=this.pages;this.pages=C,this.maxPageSize=[w-i,b-s];const x=this.pagination.currentPage,M=this.pages[x];return this.pages.length<1||!M?(this.visible=!1,{oldPages:S}):(this.visible=!0,this.updatePositions(x),this.update(),{oldPages:S})}isCustomMarker(e,t){return e&&void 0!==t&&"string"!==typeof t}calcSymbolsEnabled(e){const{showSeriesStroke:t,marker:i}=this.item,s=!!i.enabled||!t||(e.marker.enabled??!0);return{markerEnabled:s,lineEnabled:!(!e.line||!t),isCustomMarker:this.isCustomMarker(s,e.marker.shape)}}calcSymbolsLengths(e,t,i){const{marker:s,line:n}=this.item;let o;const{shape:r}=e.marker;if(this.isCustomMarker(t,r)){const e=new ZL;e.shape=r,e.updatePath();const t=e.getBBox();o=Math.max(t.width,t.height)}return{markerLength:t?s.size:0,lineLength:i?n.length??25:0,customMarkerSize:o}}calculateMarkerWidth(){let e=0,t=!1;return this.itemSelection.each(((i,s)=>{const{symbol:n}=s,{lineEnabled:o,markerEnabled:r}=this.calcSymbolsEnabled(n),{markerLength:a,lineLength:l,customMarkerSize:c=-1/0}=this.calcSymbolsLengths(n,r,o);e=Math.max(e,l,c,a),t||(t=o)})),{markerWidth:e,anyLineEnabled:t}}updateMarkerLabel(e,t,i,s){const{marker:n,paddingX:o}=this.item,{symbol:r}=t;let a=o;const{markerEnabled:l,isCustomMarker:c}=this.calcSymbolsEnabled(r),h=n.padding;(l||s)&&(a+=h+i);const{marker:d,line:u}=e;return d.visible=l,d.visible&&(d.shape=n.shape??r.marker.shape??"square",d.size=n.size,kL(d,this.getMarkerStyles(r))),u.visible=s,u.visible&&kL(u,this.getLineStyles(r)),e.length=i,e.spacing=h,e.isCustomMarker=c,a}updateContainer(e,t){const i=this.getContainerStyles();return this.containerNode.width=0,this.containerNode.height=0,kL(this.containerNode,i),this.containerNode.cornerRadius=i.cornerRadius,[e-=2*i.strokeWidth+i.padding.left+i.padding.right,t-=2*i.strokeWidth+i.padding.top+i.padding.bottom]}truncate(e,t,i,s,n,o){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=LD.truncateLine(e,n,i-s,r);return a.endsWith(hD.EllipsisChar)?this.truncatedItems.add(o):this.truncatedItems.delete(o),a}updatePagination(e,t,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(e,t,i),h=o.findIndex((e=>e.endIndex>=n));this.pagination.currentPage=dw(0,h,o.length-1);const{paddingX:d,paddingY:u}=this.item,p=a-d,g=r-u;let m=0,f=-l.y-this.item.marker.size/2;c?f+=g+8:(m+=-l.x+p+8,f+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=f,this.pagination.update(),this.pagination.updateMarkers();let v=0;return this.itemSelection.each(((e,t,i)=>{i>(o[v]?.endIndex??1/0)&&v++,e.pageIndex=v})),{maxPageHeight:r,maxPageWidth:a,pages:o}}calculatePagination(e,t,i){const{paddingX:s,paddingY:n}=this.item,{placement:o}=Jj(this.position),r=this.getOrientation(),a=["left","left-top","left-bottom","right","right-top","right-bottom"].includes(o);let l=this.pagination.getBBox(),c=new eS(0,0,0,0),h=[],d=0,u=0,p=0;const g=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(p++>10){xy.warn("unable to find stable legend layout.");break}l=c;const o=t-(a?0:l.width),m=Wj({orientation:r,bboxes:e,maxHeight:i-(a?l.height:0),maxWidth:o,itemPaddingY:n,itemPaddingX:s,forceResult:g});h=m?.pages??[],d=m?.maxPageWidth??0,u=m?.maxPageHeight??0;const f=h.length;if(this.pagination.visible=f>1,this.pagination.totalPages=f,this.pagination.update(),this.pagination.updateMarkers(),c=this.pagination.getBBox(),!this.pagination.visible)break}while((m=c).width!==l.width||m.height!==l.height);var m;return{maxPageWidth:d,maxPageHeight:u,pages:h,paginationBBox:c,paginationVertical:a}}updatePositions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;const{columns:n,startIndex:o,endIndex:r}=s[e];let a=0,l=0;const c=n.length,h=n[0].indices.length,d="horizontal"===this.getOrientation(),u=n[0].bboxes[0].height+t,p=[];i.each(((e,t,i)=>{if(i<o||i>r)return void(e.visible=!1);const s=i-o;let g,m;d?(g=s%c,m=Math.floor(s/c)):(g=Math.floor(s/h),m=s%h),e.visible=!0;const f=n[g];f&&(l=Math.floor(u*m),a=Math.floor(p[m]??0),p[m]=(p[m]??0)+f.columnWidth,e.translationX=a,e.translationY=l)}))}updatePageNumber(e){const{itemSelection:t,group:i,pagination:s,pages:n,toggleSeries:o}=this,{startIndex:r,endIndex:a}=n[e];0===r?this.paginationTrackingIndex=0:e===n.length-1?this.paginationTrackingIndex=a:this.paginationTrackingIndex=Math.floor((r+a)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:s,interactive:o}),this.ctx.updateService.update(7)}update(){const{label:{color:e}}=this.item;this.itemSelection.each(((t,i)=>{t.setEnabled(i.enabled),t.color=e})),this.updateContextMenu()}updateContextMenu(){this.ctx.contextMenuRegistry.setVisible("toggle-series-visibility",this.toggleSeries),this.ctx.contextMenuRegistry.setVisible("toggle-other-series",this.toggleSeries)}getLineStyles(e){const{stroke:t,strokeOpacity:i=1,strokeWidth:s,lineDash:n}=e.line??{},o=Math.min(2,s??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:n}}getMarkerStyles(e){let{marker:t}=e;const{fill:i,stroke:s,strokeOpacity:n=1,fillOpacity:o=1,strokeWidth:r,lineDash:a,lineDashOffset:l}=t,c=Math.min(2,r??1);return Qx(i)&&(i.width=8,i.height=8,i.padding=1,i.strokeWidth=Math.min(2,i.strokeWidth??2)),Xx(i)&&(i.fit="contain",i.width=void 0,i.height=void 0,i.repeat="no-repeat"),IL({fill:i,stroke:s,strokeOpacity:n,fillOpacity:o,strokeWidth:this.item.marker.strokeWidth??c,lineDash:a,lineDashOffset:l},oV,rV,aV)}getContainerStyles(){const{stroke:e,strokeOpacity:t,strokeWidth:i}=this.border,{cornerRadius:s,fill:n,fillOpacity:o,padding:r}=this,a="number"===typeof r;return IL({cornerRadius:s,fill:n,fillOpacity:o,padding:{top:a?r:r.top??0,right:a?r:r.right??0,bottom:a?r:r.bottom??0,left:a?r:r.left??0},stroke:e,strokeOpacity:t,strokeWidth:this.border.enabled?i:0},oV,rV,aV)}computePagedBBox(){const e=gM.computeChildrenBBox(this.group.excludeChildren({name:"legend-container"}));if(this.pages.length>1){const[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}const{strokeWidth:t,padding:i}=this.getContainerStyles();return e.grow(i).grow(t),e}findNode(e){const{datum:t,proxyButton:i}=this.itemSelection.select((t=>t.datum?.itemId===e.itemId))[0]??{};if(void 0===t||void 0===i)throw new Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${JSON.stringify(i)} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){const{sourceEvent:i}=e,s=t.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;const n=this.ctx.chartService.series.length>1&&!0!==this.ctx.chartService.series[0]?.getLegendData("category")[0]?.hideToggleOtherSeries;this.ctx.contextMenuRegistry.setVisible("toggle-other-series",n);const{offsetX:o,offsetY:r}=i,{x:a,y:l}=uM.toCanvasPoint(t,o,r);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:e,canvasX:a,canvasY:l},{legendItem:s})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap((e=>e.getLegendData("category"))).filter((e=>e.enabled)).length}doClick(e,t,i){const{listeners:{legendItemClick:s},ctx:{chartService:n,highlightManager:o},preventHidingAll:r,toggleSeries:a}=this;if(!t)return!1;const{legendType:l,seriesId:c,itemId:h,enabled:d,legendItemName:u}=t,p=n.series.find((e=>e.id===c));if(!p)return!1;let g=d;const m=Qj("click",t,e);if(s&&bM([p.properties,this.ctx.chartService],s,m.apiEvent),m.defaultPrevented)return!0;if(a){if(g=!d,r&&!g){this.getVisibleItemCount()<2&&(g=!0)}i.setChecked(g),this.ctx.eventsHub.emit("legend:item-click",{legendType:l,series:p,itemId:h,enabled:g,legendItemName:u})}return g?o.updateHighlight(this.id,{series:p,itemId:h,datum:void 0,datumIndex:void 0,legendItemName:u}):o.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:t.skipAnimations??!1}),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if(!t)return!1;const{legendType:o,id:r,itemId:a,seriesId:l}=t,c=s.series.find((e=>e.id===r));if(!c)return!1;const h=Qj("dblclick",t,e);if(i&&bM([c.properties,this.ctx.chartService],i,h.apiEvent),h.defaultPrevented)return!0;if(n){const e=s.series.flatMap((e=>e.getLegendData("category")));let t=0;const i=new Set;for(const s of e)s.enabled&&(t+=1,null!=s.legendItemName&&i.add(s.legendItemName));i.size>0&&(t=i.size);const n=e.find((e=>e.itemId===a&&e.seriesId===l));this.ctx.eventsHub.emit("legend:item-double-click",{legendType:o,series:c,itemId:a,numVisibleItems:t,enabled:n?.enabled??!1,legendItemName:n?.legendItemName})}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;return e instanceof FocusEvent?i=uM.toCanvas(t).computeCenter():(e.preventDefault(),i=uM.toCanvasPoint(t,e.offsetX,e.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(e,t){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const i=t.datum,s=i?this.ctx.chartService.series.find((e=>e.id===i?.id)):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const s=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,s,[{type:"structured",title:this.getItemLabel(i)}])}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&s?this.updateHighlight({series:s,itemId:i?.itemId,datum:void 0,datumIndex:void 0,legendItemName:i?.legendItemName}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,e):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop((()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)})))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{placement:t,floating:i,xOffset:s,yOffset:n}=Jj(this.position),o=i?new eS(0,0,e.width,e.height):e.layoutBox,{x:r,y:a,width:l,height:c}=o,[h,d]=this.calculateLegendDimensions(o),{oldPages:u}=this.calcLayout(h,d),p=this.computePagedBBox();if(this.visible){let e=function(e){};const h=this.spacing;let d,u;switch(t){case"top":d=(l-p.width)/2,u=0;break;case"bottom":d=(l-p.width)/2,u=c-p.height;break;case"right":d=l-p.width,u=(c-p.height)/2;break;case"left":d=0,u=(c-p.height)/2;break;case"top-right":case"right-top":d=l-p.width,u=0;break;case"top-left":case"left-top":d=0,u=0;break;case"bottom-right":case"right-bottom":d=l-p.width,u=c-p.height;break;case"bottom-left":case"left-bottom":d=0,u=c-p.height;break;default:e(t)}if(!i){let i,s;switch(t){case"top":case"top-right":case"top-left":i=p.height+h,s="top";break;case"bottom":case"bottom-right":case"bottom-left":i=p.height+h,s="bottom";break;case"left":case"left-top":case"left-bottom":i=p.width+h,s="left";break;case"right":case"right-top":case"right-bottom":i=p.width+h,s="right";break;default:e(t)}o.shrink(i,s)}d+=s,u+=n,this.group.translationX=Math.floor(r+d-p.x),this.group.translationY=Math.floor(a+u-p.y),this.containerNode.x=p.x,this.containerNode.y=p.y,this.containerNode.width=p.width,this.containerNode.height=p.height}return u}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:s,pages:n,toggleSeries:o,group:r,listeners:{legendItemClick:a,legendItemDoubleClick:l}}=this,c=this.visible&&this.enabled,h=o||null!=l||null!=a;this.domProxy.update({visible:c,interactive:h,ctx:t,itemSelection:i,group:r,pagination:s,oldPages:e,newPages:n,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,{placement:s}=Jj(this.position),n=t/i;let o,r;switch(s){case"top":case"top-left":case"top-right":case"bottom":case"bottom-left":case"bottom-right":{const e=n<1?Math.min(.5,1/n*.2):.2;o=this.maxWidth?Math.min(this.maxWidth,t):t,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*e);break}case"left":case"left-top":case"left-bottom":case"right":case"right-top":case"right-bottom":{const e=n>1?Math.min(.5,.25*n):.25;o=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*e),r=this.maxHeight?Math.min(this.maxHeight,i):i;break}}return[o,r]}cachedCallWithContext(e){const{callbackCache:t,chartService:i}=this.ctx;for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];return t.call([this,i],e,...n)}};lV.className="Legend",$w([fx],lV.prototype,"toggleSeries",2),$w([fx],lV.prototype,"pagination",2),$w([fx],lV.prototype,"item",2),$w([fx],lV.prototype,"listeners",2),$w([WM(((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:s,stateManager:n}}=e;!1===i&&!0===t&&n.restoreState(s)})),fx],lV.prototype,"enabled",2),$w([fx],lV.prototype,"position",2),$w([fx],lV.prototype,"maxWidth",2),$w([fx],lV.prototype,"maxHeight",2),$w([fx],lV.prototype,"reverseOrder",2),$w([fx],lV.prototype,"orientation",2),$w([fx],lV.prototype,"preventHidingAll",2),$w([fx],lV.prototype,"border",2),$w([fx],lV.prototype,"cornerRadius",2),$w([fx],lV.prototype,"fill",2),$w([fx],lV.prototype,"fillOpacity",2),$w([fx],lV.prototype,"padding",2),$w([fx],lV.prototype,"spacing",2),$w([fx],lV.prototype,"xOffset",2),$w([fx],lV.prototype,"yOffset",2);var cV={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new lV(e),packageType:"community",removable:"standalone-only"},hV=class extends vx{constructor(e){super(),this.ctx=e,this.rectNode=new RD,this.border=new Hj(this.rectNode),this.cornerRadius=0,this.padding=0,this.cleanup=new hw,this.node=this.createNode(),this.node.append([this.rectNode]),this.rectNode.fill=void 0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",(e=>this.onLayoutComplete(e))))}destroy(){this.cleanup.flush()}getPadding(){const{border:e,padding:t}=this,i=e.enabled?e.strokeWidth:0;if("number"===typeof t){const e=t+i;return{top:e,right:e,bottom:e,left:e}}return{top:(t.top??0)+i,right:(t.right??0)+i,bottom:(t.bottom??0)+i,left:(t.left??0)+i}}createNode(){return new gM({name:"series-area-container",zIndex:4})}onLayoutComplete(e){const{x:t,y:i,width:s,height:n}=e.series.paddedRect;this.rectNode.x=t,this.rectNode.y=i,this.rectNode.width=s,this.rectNode.height=n}};$w([fx],hV.prototype,"border",2),$w([fx],hV.prototype,"clip",2),$w([VM("rectNode","cornerRadius"),fx],hV.prototype,"cornerRadius",2),$w([fx],hV.prototype,"padding",2);var dV={type:"root",optionsKey:"seriesArea",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new hV(e)};function uV(e,t,i,s,n){const o=(s,n,o,r)=>{i.animate({id:`${e}_${t}_${n.id}_${s}`,groupId:e,from:o?1:0,to:1,ease:GE,collapsable:o,onUpdate(e,t){t&&"removed"!==s||(n.path.clear(!0),r(e,n),n.checkPathDirty())},onStop(){"added"===s&&(n.path.clear(!0),r(1,n),n.checkPathDirty())},phase:NA[s]})},r=new SD,a=e=>(r.resetPathDirty(),e(0,r),r.resetPathDirty(),e(1,r),r.checkPathDirty(),r.isPathDirty()),{addPhaseFn:l,updatePhaseFn:c,removePhaseFn:h}=n;for(const d of s)i.isSkipped()||(o("removed",d,!a(h),h),o("updated",d,!a(c),c)),o("added",d,!a(l),l)}function pV(e,t,i,s,n,o){if(s.itemStyler){const r={border:s.border,color:s.color,cornerRadius:s.cornerRadius,datum:t?.datum,enabled:s.enabled,fill:s.fill,fillOpacity:s.fillOpacity,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,itemId:void 0,seriesId:e.id,padding:s.padding,highlighted:n,highlightState:o};return yS(e.callWithContext(s.itemStyler,{...i,...r}),r)}return s}function gV(e,t,i,s,n,o,r){if(s.enabled&&n){const a=pV(e,n,i,s,o,r);t.visible=!0,t.x=n.x,t.y=n.y,t.text=n.text,t.fill=a.color,t.setAlign(n),t.setFont(a),t.setBoxing(a)}else t.visible=!1}var mV={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function fV(e){let{isUpward:t,isVertical:i,placement:s,spacing:n=0,rect:o}=e,r=o.x+o.width/2,a=o.y+o.height/2,l="center",c="middle";if("inside-center"!==s){const e=(t?1:-1)*(i?-1:1),{direction:h,textAlignment:d}=mV[s],u=.5*(h+1);if(i){a=(t?o.y+o.height:o.y)+o.height*e*u+n*d*e,c=d===e?"top":"bottom"}else{r=(t?o.x:o.x+o.width)+o.width*e*u+n*d*e,l=d===e?"left":"right"}}return{x:r,y:a,textAlign:l,textBaseline:c}}function vV(e,t,i){let{id:s}=e;for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];for(const a of o)a.cleanup();BA(s,t,i,o,{opacity:0},{opacity:1},{phase:"trailing"})}function yV(e,t,i){let{id:s}=e;for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];BA(s,t,i,o,{opacity:1},{opacity:0},{phase:"remove"})}function CV(e){return{opacity:1}}var bV=class extends vx{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(e){this.markDirty()}},wV=class extends bV{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};$w([fx,LS()],wV.prototype,"enabled",2),$w([fx,LS()],wV.prototype,"color",2),$w([fx,LS()],wV.prototype,"xOffset",2),$w([fx,LS()],wV.prototype,"yOffset",2),$w([fx,LS()],wV.prototype,"blur",2);var SV=class extends bV{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillGradientDefaults=new bL,this.fillPatternDefaults=new wL,this.fillImageDefaults=new SL,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}};$w([fx,LS()],SV.prototype,"enabled",2),$w([fx,FS({equals:TS})],SV.prototype,"shape",2),$w([fx,LS()],SV.prototype,"size",2),$w([fx,FS({equals:fS})],SV.prototype,"fill",2),$w([fx],SV.prototype,"fillGradientDefaults",2),$w([fx],SV.prototype,"fillPatternDefaults",2),$w([fx],SV.prototype,"fillImageDefaults",2),$w([fx,LS()],SV.prototype,"fillOpacity",2),$w([fx,LS()],SV.prototype,"stroke",2),$w([fx,LS()],SV.prototype,"strokeWidth",2),$w([fx,LS()],SV.prototype,"strokeOpacity",2),$w([fx],SV.prototype,"lineDash",2),$w([fx],SV.prototype,"lineDashOffset",2),$w([fx,FS({equals:TS})],SV.prototype,"itemStyler",2);var xV=class extends vx{constructor(){super(...arguments),this.enabled=!1}};$w([fx],xV.prototype,"enabled",2);var MV=class extends vx{constructor(){super(...arguments),this.interaction=new xV,this.position=new hP,this.range=void 0,this.class=void 0}formatTooltip(e,t,i){const s=null==this.renderer?void 0:bM(e,this.renderer,i);return"string"===typeof s?{type:"raw",rawHtmlString:s}:null!=s?{type:"structured",...t,...s}:{type:"structured",...t}}};function DV(){return new MV}$w([fx],MV.prototype,"enabled",2),$w([fx],MV.prototype,"showArrow",2),$w([fx],MV.prototype,"renderer",2),$w([fx],MV.prototype,"interaction",2),$w([fx],MV.prototype,"position",2),$w([fx],MV.prototype,"range",2),$w([fx],MV.prototype,"class",2);var RV=class{constructor(e,t,i){this.root=new AV(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(t,i)=>e.distanceSquared(t,i)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},EV=class{constructor(e,t,i,s){this.nw=e,this.ne=t,this.sw=i,this.se=s}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},IV=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??eS.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(void 0===this.subdivisions?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:s}=this.boundary,{capacity:n}=this,o=this.maxdepth-1,r=i/2,a=s/2,l=new eS(e,t,r,a),c=new eS(e+r,t,r,a),h=new eS(e,t+a,r,a),d=new eS(e+r,t+a,r,a);return new EV(this.child(n,o,l),this.child(n,o,c),this.child(n,o,h),this.child(n,o,d))}},AV=class e extends IV{addCondition(e){const{x:t,y:i}=e.hitTester.midPoint;return this.boundary.containsPoint(t,i)}findCondition(e,t,i){const{best:s}=i;return 0!==s.distanceSquared&&this.boundary.distanceSquared(e,t)<s.distanceSquared}findAction(e,t,i){const s=Qw(e,t,this.elems,i.best.distanceSquared);void 0!==s.nearest&&s.distanceSquared<i.best.distanceSquared&&(i.best=s)}child(t,i,s){return new e(t,i,s)}},kV=class extends OL{constructor(e){let{clipFocusBox:t,categoryKey:i,...s}=e;super(s),this.categoryKey=i,this.clipFocusBox=t??!0}dataCount(){return this.processedData?.dataSources?.get(this.id)?.length??0}getScaleInformation(e){let{xScale:t,yScale:i}=e;return{isContinuousX:MI.is(t),isContinuousY:MI.is(i),xScaleType:t?.type,yScaleType:i?.type}}getModulePropertyDefinitions(){const e=this.axes.x?.scale,t=this.axes.y?.scale;return this.moduleMap.mapModules((i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t})))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=await e.request(this.id,t??[],i);return this.dataModel=s,this.processedData=n,this.events.emit("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}isProcessedDataAnimatable(){const{processedData:e}=this;if(!e)return!1;const t=e.reduced?.animationValidation;if(!t)return!0;const{orderedKeys:i,uniqueKeys:s}=t;return i&&s}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(void 0===t||0===t.length)return;const i=this.computeFocusDatumIndex(e,t);if(void 0===i)return;const{clipFocusBox:s}=this,n=t[i],o={...e,datumIndex:i},r=this.computeFocusBounds(o);return void 0!==r?{bounds:r,clipFocusBox:s,datum:n,datumIndex:i}:void 0}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort(((e,t)=>e.datumIndex-t.datumIndex)),t}isDatumEnabled(e,t){const{missing:i=!1,enabled:s=!0,focusable:n=!0}=e[t];return!i&&s&&n}computeFocusDatumIndex(e,t){const i=(e,i)=>{for(;e>=0&&!this.isDatumEnabled(t,e);)e+=i;return-1===e?void 0:e},s=(e,i)=>{for(;e<t.length&&!this.isDatumEnabled(t,e);)e+=i;return e===t.length?void 0:e};let n;const o=dw(0,e.datumIndex,t.length-1);return n=e.datumIndexDelta<0?i(o,e.datumIndexDelta):e.datumIndexDelta>0?s(o,e.datumIndexDelta):s(o,1)??i(o,-1),void 0===n?0===e.datumIndexDelta?void 0:e.datumIndex-e.datumIndexDelta:n}dataModelPropertyIsKey(e){const{processedData:t}=this;return!!t&&t.defs.keys.some((t=>t.id===e&&!0===t.idsMap?.get(this.id)?.has(e)))}keysOrValues(e){const{dataModel:t,processedData:i}=this;return t&&i?this.dataModelPropertyIsKey(e)?t.resolveKeysById(this,e,i):t.resolveColumnById(this,e,i):[]}sortOrder(e){const{dataModel:t,processedData:i}=this;if(t&&i)return this.dataModelPropertyIsKey(e)?t.getKeySortOrder(this,e,i):t.getColumnSortOrder(this,e,i)}getCategoryKey(){return this.categoryKey}getCategoryValue(e){const{processedData:t,dataModel:i}=this,s=this.getCategoryKey();if(!t||!i||!s)return;return t.invalidData?.get(this.id)?.[e]??!1?void 0:this.keysOrValues(s)[e]}datumIndexForCategoryValue(e){const{processedData:t,dataModel:i}=this,s=this.getCategoryKey();if(!t||!i||!s)return;e=e.valueOf();const n=t.invalidData?.get(this.id),o=this.keysOrValues(s);for(let r=0;r<o.length;r+=1){if(!0===n?.[r])continue;const t=o[r]?.valueOf();if(fS(e,t))return r}}},TV={x:["xKey"],y:["yKey"]},LV={x:["xName"],y:["yName"]},PV=class extends LL{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},FV=class extends ML{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};$w([fx],FV.prototype,"legendItemName",2),$w([fx],FV.prototype,"pickOutsideVisibleMinorAxis",2);var NV=100,OV=class extends kV{constructor(e){let{pathsPerSeries:t=["path"],pathsZIndexSubOrderOffset:i=[],datumSelectionGarbageCollection:s=!0,animationAlwaysUpdateSelections:n=!1,animationResetFns:o,propertyKeys:r,propertyNames:a,...l}=e;if(super({propertyKeys:r,propertyNames:a,canHaveAxes:!0,...l}),this.NodeEvent=PV,this.dataNodeGroup=this.contentGroup.appendChild(new gM({name:`${this.id}-series-dataNodes`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new vM({name:`${this.id}-series-labels`})),this.labelSelection=VA.select(this.labelGroup,AD),this.highlightSelection=VA.select(this.highlightGroup,(()=>this.nodeFactory())),this.annotationSelections=new Set,this.debug=iS.create(),!r||!a)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,pathsZIndexSubOrderOffset:i,propertyKeys:r,propertyNames:a,animationResetFns:o,animationAlwaysUpdateSelections:n,datumSelectionGarbageCollection:s},this.paths=t.map((e=>new SD({name:`${this.id}-${e}`}))),this.datumSelection=VA.select(this.dataNodeGroup,(()=>this.nodeFactory()),s),this.animationState=new ZA("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:e=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(e):this.animateWaitingUpdateReady(e)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:e=>this.resetAllAnimation(e),reset:"empty"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(e){for(const t of e)this.contentGroup.appendChild(t)}detachPaths(e){for(const t of e)this.contentGroup.removeChild(t)}renderToOffscreenCanvas(){const e=this.getNodeData();return null!=e&&e.length>NV}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e?this.animationState.transition("skip"):"disabled"===e&&this.animationState.transition("disable")}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",(e=>this.onLegendItemClick(e))),this.ctx.eventsHub.on("legend:item-double-click",(e=>this.onLegendItemDoubleClick(e))))}destroy(){super.destroy(),this._contextNodeData=void 0}isSeriesHighlighted(e){const{series:t,legendItemName:i}=e??{},{legendItemName:s}=this.properties;return t===this||null!=s&&s===i}strokewidthChange(){const e=("strokeWidth"in this.properties&&this.properties.strokeWidth)??0,t=this.properties.highlight.highlightedSeries.strokeWidth??e,i=this.properties.highlight.highlightedItem?.strokeWidth??e;return e>i||t>i}update(e){let{seriesRect:t}=e;const{_contextNodeData:i}=this,s=this.checkResize(t),n=this.updateHighlightSelection();this.contentGroup.batchedUpdate((()=>{const e=this.updateSelections();this.updateNodes(n,s||e)}));const o=this.getAnimationData(t,i);o&&(s&&this.animationState.transition("resize",o),this.animationState.transition("update",o))}updateSelections(){var e;const t=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!this.visible&&t)return!1;const{nodeDataRefresh:i}=this;if(!i&&!this.isPathOrSelectionDirty())return!1;if(i){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=t));const{dataModel:i,processedData:s}=this;void 0!==i&&void 0!==s&&this.events.emit("data-update",{dataModel:i,processedData:s}),this.updateSeriesSelections()}return i}updateSeriesSelections(){const{datumSelection:e,labelSelection:t,paths:i}=this,s=this._contextNodeData;if(!s)return;const{nodeData:n,labelData:o,itemId:r}=s;this.updatePaths({itemId:r,contextData:s,paths:i}),this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:e}),this.labelGroup.batchedUpdate((()=>{this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:t})??t}))}getShapeFillBBox(){const{axes:e}=this,t=e.x,i=e.y,[s,n]=CI(t?.range??[0,1]),[o,r]=CI(i?.range??[0,1]),a=this.getSeriesDomain("x"),l=[t?.scale.convert(a.at(0)),t?.scale.convert(a.at(-1))],c=this.getSeriesDomain("y"),h=[i?.scale.convert(c.at(0)),i?.scale.convert(c.at(-1))],[d,u]=CI(l),[p,g]=CI(h);return{axis:new eS(s,o,n-s,r-o),series:new eS(d,p,u-d,g-p)}}updateNodes(e,t){const{highlightSelection:i,datumSelection:s}=this,n=!this.ctx.animationManager.isSkipped(),o=this.visible&&null!=this._contextNodeData;this.contentGroup.visible=n||o,this.highlightGroup.visible=(n||o)&&e,this.updateDatumNodes({datumSelection:i,isHighlight:!0}),this.animationState.transition("highlight",i);const{dataNodeGroup:r,labelSelection:a,paths:l,labelGroup:c}=this,{itemId:h}=this.contextNodeData??{};if(this.updatePathNodes({itemId:h,paths:l,visible:o,animationEnabled:n}),r.visible=n||o,c.visible=o,!r.visible)return;const d=this.strokewidthChange()||this.hasChangesOnHighlight;(t||d)&&(this.updateDatumNodes({datumSelection:s,isHighlight:!1}),this.usesPlacedLabels||this.labelGroup.batchedUpdate((()=>{this.updateLabelNodes({labelSelection:a,isHighlight:!1})})))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum&&e.itemId===t.itemId));return 0===i.length?void 0:i}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(){const{highlightSelection:e,_contextNodeData:t}=this;if(!t)return!1;const i=this.ctx.highlightManager?.getActiveHighlight(),s=this.isSeriesHighlighted(i)&&i?.datum?i:void 0;if(null==s)return!1;const{nodeData:n}=t,o=this.getHighlightData(n,s);return this.highlightSelection=this.updateHighlightSelectionItem({items:o,highlightSelection:e}),!0}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)!0!==e.datum.missing&&(yield e)}getQuadTree(){if(void 0===this.quadtree){const{width:e,height:t}=this.ctx.scene.canvas,i=new eS(0,0,e,t);this.quadtree=new RV(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);if(0!==t.length)return t;const{x:i,y:s}=e,{dataNodeGroup:n}=this,o=n.pickNodes(i,s).filter((e=>!0!==e.datum.missing));if(0!==o.length){return o.map((e=>e.datum))}for(const r of this.moduleMap.modules()){const{datum:t}=r.pickNodeExact(e)??{};if(null!=t&&!0!==t?.missing)return[t]}return[]}pickNodeClosestDatum(e){const{x:t,y:i}=e,{axes:s,_contextNodeData:n}=this;if(!n)return;const o=s.x,r=s.y,a=t,l=i;let c,h=1/0;for(const d of n.nodeData){const{point:{x:e=NaN,y:t=NaN}={}}=d;if(isNaN(e)||isNaN(t))continue;if(!(o?.inRange(e)&&r?.inRange(t)))continue;const i=Math.max((a-e)**2+(l-t)**2,0);i<h&&(h=i,c=d)}for(const d of this.moduleMap.modules()){const t=d.pickNodeNearest(e);if(void 0!==t&&t.distanceSquared<h){h=t.distanceSquared,c=t.datum;break}}if(c){return{datum:c,distance:Math.max(Math.sqrt(h)-(c.point?.size??0)/2,0)}}}pickNodeMainAxisFirst(e,t){const{x:i,y:s}=e,{axes:n,_contextNodeData:o}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!o)return;const a=n.x,l=n.y;if(null==a||null==l)return;const c=[a,l].filter((e=>e.isCategoryLike())).map((e=>e.direction));if(t&&0===c.length)return;const[h="x"]=c,d=[i,s];"x"!==h&&d.reverse();const u=[1/0,1/0];let p;for(const g of o.nodeData){const{x:e=NaN,y:t=NaN}=g.point??g.midPoint??{};if(isNaN(e)||isNaN(t)||!0===g.missing)continue;const i=[a?.inRange(e,1),l?.inRange(t,1)];if("x"!==h&&i.reverse(),!i[0]||!r&&!i[1])continue;const s=[e,t];"x"!==h&&s.reverse();let n=!0;for(let o=0;o<s.length;o++){const e=Math.abs(s[o]-d[o]);if(e>u[o]){n=!1;break}e<u[o]&&(u[o]=e,u.fill(1/0,o+1,u.length))}n&&(p=g)}if(p){let t=Math.max(u[0]**2+u[1]**2-(p.point?.size??0),0);for(const i of this.moduleMap.modules()){const s=i.pickNodeMainAxisFirst(e,h);if(void 0!==s&&s.distanceSquared<t){p=s.datum,t=s.distanceSquared;break}}return{datum:p,distance:Math.sqrt(t)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRangeIndices(e,t,i,s){let n;if(null==s){const{processedData:t,dataModel:i}=this;n=i.getColumnSortOrder(this,e,t)??1}else n=s.sortOrder;const o=this.keysOrValues(e),[r,a]=cI(n,i?.length??o.length,t,(e=>{const t=i?.[e]??e;return this.xCoordinateRange(o[t],0,t)}));return r<a?[r,a]:[a,r]}domainForVisibleRange(e,t,i,s,n){const{processedData:o,dataModel:r}=this,[a,l]=s,c=this.keysOrValues(i),h=this.sortOrder(i);if(null!=h){const e=this.visibleRangeIndices(i,s,n,{sortOrder:h});return r.getDomainBetweenRange(this,t,e,o)}const d=t.map((e=>this.keysOrValues(e)));let u=1/0,p=-1/0;return c.forEach(((e,i)=>{const[s,n]=this.xCoordinateRange(e,0,i);if(!(n<a||s>l))for(let o=0;o<t.length;o++){const e=d[o][i];u=Math.min(u,e),p=Math.max(p,e)}})),u>p?[NaN,NaN]:[u,p]}domainForClippedRange(e,t,i){const{processedData:s,dataModel:n,axes:o}=this,r=function(e){let t,i;(e instanceof BB||e instanceof jB)&&({min:t,max:i}=e);if(null==t&&null==i)return;return t??(t=-1/0),i??(i=1/0),[t,i]}(o["x"===e?"y":"x"]);if(!r)return t.flatMap((e=>n.getDomain(this,e,"value",s)));const a=this.keysOrValues(i),l=n.getColumnSortOrder(this,i,s);if(null!=l){const e=function(e,t,i,s){const n=i[0].valueOf(),o=i[1].valueOf();let r=lw(0,t-1,(i=>{const o=1===e?i:t-i,r=s(o)?.valueOf();return!Number.isFinite(r)||r>=n})),a=aw(0,t-1,(i=>{const n=1===e?i:t-i,r=s(n)?.valueOf();return!Number.isFinite(r)||r<=o}));if(null==r||null==a)return[0,0];-1===e&&([r,a]=[t-a,t-r]);return r=Math.max(r,0),a=Math.min(a+1,t),[r,a]}(l,a.length,r,(e=>a[e]));return n.getDomainBetweenRange(this,t,e,s)}const c=t.map((e=>this.keysOrValues(e))),h=r[0].valueOf(),d=r[1].valueOf(),u=[];return a.forEach(((e,t)=>{const i=e.valueOf();if(i<h||i>d)return;const s=c.map((e=>e[t]));i>=h&&u.push(...s),i<=d&&u.push(...s)})),u}countVisibleItems(e,t,i,s,n){const{dataModel:o,processedData:r}=this;if(!o||!r)return 1/0;const a=this.keysOrValues(e),l=t.map((e=>o.resolveColumnById(this,e,r))),c=this.axes.x,h=this.axes.y,d=this.shouldFlipXY();if(null==s){const t=this.sortOrder(e);if(null!=t){const s=c.scale,n=s.range;s.range=[0,1];let[o,r]=this.visibleRangeIndices(e,i,void 0,{sortOrder:t});const a=this.keysOrValues(e),l=0;this.xCoordinateRange(a[o],l,o)[0]<i[0]&&(o+=1),r<a.length&&this.xCoordinateRange(a[r],l,r)[1]>i[1]&&(r-=1);const h=Math.abs(r-o);return s.range=n,h}s=[0,1]}const u=(e,t,i)=>e[0]+(i-t[0])/(t[1]-t[0])*(e[1]-e[0]),p=c.range,g=h.range,m=u(p,c.visibleRange,i[0]),f=u(p,c.visibleRange,i[1]),v=u(g,h.visibleRange,d?s[0]:s[1]),y=u(g,h.visibleRange,d?s[1]:s[0]),C=Math.round((i[0]+(i[1]-i[0])/2)*a.length);return dI(0,a.length-1,C,n,(e=>{let[t,i]=this.xCoordinateRange(a[e],0,e),[s,n]=this.yCoordinateRange(l.map((t=>t[e])),0,e);return!!(uC(t)&&uC(i)&&uC(s)&&uC(n))&&(d&&([t,i,s,n]=[s,n,t,i]),t>=m&&i<=f&&s>=v&&n<=y)}))}minTimeInterval(){let e;try{e=this.keysOrValues("xValue")}catch{}if(null==e||e.length>1e3)return;let t,i=1/0,s=e[0];for(let n=1;n<e.length;n++){const o=e[n];if(null!=o&&null!=s){const e=o.valueOf()-s.valueOf(),n=Math.sign(e);if(0===n)continue;if(void 0!==t&&n!==t)return;i=Math.min(i,Math.abs(e)),t=n}s=o}return Number.isFinite(i)?i:void 0}updateHighlightSelectionItem(e){const{items:t,highlightSelection:i}=e,s=t??[];return this.updateDatumSelection({nodeData:s,datumSelection:i})}updateHighlightSelectionLabel(e){return this.updateLabelSelection({labelData:e.items??[],labelSelection:e.highlightLabelSelection})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updatePaths(e){e.paths.forEach((e=>e.visible=!1))}updatePathNodes(e){const{paths:t,visible:i}=e;for(const s of t)s.visible=i}resetPathAnimation(e){const{path:t}=this.opts?.animationResetFns??{};t&&e.paths.forEach((e=>{jA([e],t)}))}resetDatumAnimation(e){const{datum:t}=this.opts?.animationResetFns??{};t&&jA([e.datumSelection],t)}resetLabelAnimation(e){const{label:t}=this.opts?.animationResetFns??{};t&&jA([e.labelSelection],t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),!1===e.contextData?.animationValid&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){const{datum:t}=this.opts?.animationResetFns??{};t&&jA([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;if(!i)return;return{datumSelection:this.datumSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof NB){const{range:t,domain:i}=e;return{type:"log",convert:t=>e.convert(t),domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof MI){const{range:t,domain:i}=e;return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}if(e instanceof EI){return{type:"category",domain:e instanceof _T?e.bands:e.domain,inset:e.inset,step:e.step}}}calculateScaling(){const e={};for(const t of Object.values(WD)){const i=this.axes[t];if(!i)continue;const s=this.getScaling(i.scale);null!=s&&(e[t]=s)}return e}};var BV=class extends vx{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};$w([fx],BV.prototype,"type",2),$w([fx],BV.prototype,"tension",2),$w([fx],BV.prototype,"position",2);var GV=class extends FV{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillGradientDefaults=new bL,this.fillPatternDefaults=new wL,this.fillImageDefaults=new SL,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new BV,this.shadow=new wV,this.marker=new SV,this.label=new Ek,this.tooltip=DV(),this.connectMissingData=!1}};function zV(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function jV(e,t,i){const[s,n]=zV(e),o=n.x!==s.x?(i.x-t.x)/(n.x-s.x):0,r=n.y!==s.y?(i.y-t.y)/(n.y-s.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-s.x)*o,cp1y:i.y-(e.cp2y-s.y)*r,cp2x:i.x-(e.cp1x-s.x)*o,cp2y:i.y-(e.cp1y-s.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-s.x)*o}}}function VV(e,t,i){const{moveTo:s}=e,[n,o]=function(e){const t=zV(e);return t[0].x>t[1].x&&t.reverse(),t}(e),{x:r,y:a}=n,{x:l,y:c}=o;if(i<r)return jV(e,n,n);if(t>l)return jV(e,o,o);switch(e.type){case"linear":{const e=a===c?void 0:(c-a)/(l-r);return{type:"linear",moveTo:s,x0:t,y0:null==e?a:e*(t-r)+a,x1:i,y1:null==e?a:e*(i-r)+a}}case"step":if(i<=e.stepX){const n=e.y0;return{type:"step",moveTo:s,x0:t,y0:n,x1:i,y1:n,stepX:i}}if(t>=e.stepX){const n=e.y1;return{type:"step",moveTo:s,x0:t,y0:n,x1:i,y1:n,stepX:t}}{const{y0:n,y1:o,stepX:r}=e;return{type:"step",moveTo:s,x0:t,y0:n,x1:i,y1:o,stepX:r}}case"cubic":{const n=Bx(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[o,r]=Gx(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,n);const a=Bx(r[0].x,r[1].x,r[2].x,r[3].x,i);return[r,o]=Gx(r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y,a),{type:"cubic",moveTo:s,cp0x:r[0].x,cp0y:r[0].y,cp1x:r[1].x,cp1y:r[1].y,cp2x:r[2].x,cp2y:r[2].y,cp3x:r[3].x,cp3y:r[3].y}}}}$w([fx],GV.prototype,"xKey",2),$w([fx],GV.prototype,"xName",2),$w([fx],GV.prototype,"yKey",2),$w([fx],GV.prototype,"yName",2),$w([fx],GV.prototype,"yFilterKey",2),$w([fx],GV.prototype,"normalizedTo",2),$w([fx],GV.prototype,"fill",2),$w([fx],GV.prototype,"fillGradientDefaults",2),$w([fx],GV.prototype,"fillPatternDefaults",2),$w([fx],GV.prototype,"fillImageDefaults",2),$w([fx],GV.prototype,"fillOpacity",2),$w([fx],GV.prototype,"stroke",2),$w([fx],GV.prototype,"strokeWidth",2),$w([fx],GV.prototype,"strokeOpacity",2),$w([fx],GV.prototype,"lineDash",2),$w([fx],GV.prototype,"lineDashOffset",2),$w([fx],GV.prototype,"interpolation",2),$w([fx],GV.prototype,"shadow",2),$w([fx],GV.prototype,"marker",2),$w([fx],GV.prototype,"label",2),$w([fx],GV.prototype,"tooltip",2),$w([fx],GV.prototype,"connectMissingData",2);var HV={start:0,middle:.5,end:1};var WV=.05;function _V(e,t,i){return(t-e)*i+e}function UV(e,t){return"linear"===e.type?function(e,t){const{x0:i,y0:s,x1:n,y1:o}=e,r=(o-s)/(n-i)*(t-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:t,leftCp2y:r,stepX:t,stepY0:r,stepY1:r,rightCp1x:t,rightCp1y:r,rightCp2x:n,rightCp2y:o}}(e,t):"cubic"===e.type?function(e,t){const{cp0x:i,cp0y:s,cp1x:n,cp1y:o,cp2x:r,cp2y:a,cp3x:l,cp3y:c}=e,h=Bx(i,n,r,l,t),[d,u]=Gx(i,s,n,o,r,a,l,c,h),p=d[3].y;return{leftCp1x:d[1].x,leftCp1y:d[1].y,leftCp2x:d[2].x,leftCp2y:d[2].y,stepX:t,stepY0:p,stepY1:p,rightCp1x:u[1].x,rightCp1y:u[1].y,rightCp2x:u[2].x,rightCp2y:u[2].y}}(e,t):function(e){const{x0:t,y0:i,x1:s,y1:n,stepX:o}=e;return{leftCp1x:(t+o)/2,leftCp1y:i,leftCp2x:(t+o)/2,leftCp2y:i,stepX:o,stepY0:i,stepY1:n,rightCp1x:(o+s)/2,rightCp1y:n,rightCp2x:(o+s)/2,rightCp2y:n}}(e)}function $V(e,t,i,s,n,o,r){switch(t){case 0:r?e.moveTo(n,o):e.moveTo(i,s);break;case 1:r?e.lineTo(n,o):e.lineTo(i,s)}}function KV(e,t,i,s,n,o){o?e.lineTo(t,i):e.lineTo(s,n)}function YV(e,t,i,s,n,o,r,a,l,c){c?e.cubicCurveTo(o,r,s,n,t,i):e.cubicCurveTo(s,n,o,r,a,l)}function ZV(e,t,i,s,n,o,r){r?(e.lineTo(o,n),e.lineTo(o,i),e.lineTo(t,i)):(e.lineTo(o,i),e.lineTo(o,n),e.lineTo(s,n))}function qV(e,t,i,s){const[n,o]=zV(t);switch($V(e,i,n.x,n.y,o.x,o.y,s),t.type){case"linear":KV(e,t.x0,t.y0,t.x1,t.y1,s);break;case"cubic":YV(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,s);break;case"step":ZV(e,t.x0,t.y0,t.x1,t.y1,t.stepX,s)}}function QV(e,t,i){const[s,n]=zV(e),[o,r]=zV(t);return[{x:_V(s.x,o.x,i),y:_V(s.y,o.y,i)},{x:_V(n.x,r.x,i),y:_V(n.y,r.y,i)}]}function XV(e,t,i,s,n,o){const[{x:r,y:a},{x:l,y:c}]=QV(t,i,s);if($V(e,n,r,a,l,c,o),"cubic"===t.type&&"cubic"===i.type){YV(e,r,a,_V(t.cp1x,i.cp1x,s),_V(t.cp1y,i.cp1y,s),_V(t.cp2x,i.cp2x,s),_V(t.cp2y,i.cp2y,s),l,c,o)}else if("step"===t.type&&"step"===i.type){ZV(e,r,a,l,c,_V(t.stepX,i.stepX,s),o)}else if("linear"===t.type&&"linear"===i.type)KV(e,r,a,l,c,o);else{let n;n="step"===t.type?t.stepX:"step"===i.type?i.stepX:(r+l)/2;const h=UV(t,n),d=UV(i,n),u=_V(h.leftCp1x,d.leftCp1x,s),p=_V(h.leftCp1y,d.leftCp1y,s),g=_V(h.leftCp2x,d.leftCp2x,s),m=_V(h.leftCp2y,d.leftCp2y,s),f=_V(h.stepX,d.stepX,s),v=_V(h.stepY0,d.stepY0,s),y=_V(h.stepY1,d.stepY1,s),C=_V(h.rightCp1x,d.rightCp1x,s),b=_V(h.rightCp1y,d.rightCp1y,s),w=_V(h.rightCp2x,d.rightCp2x,s),S=_V(h.rightCp2y,d.rightCp2y,s);o?(e.cubicCurveTo(w,S,C,b,f,y),e.lineTo(f,v),e.cubicCurveTo(g,m,u,p,r,a)):(e.cubicCurveTo(u,p,g,m,f,v),e.lineTo(f,y),e.cubicCurveTo(C,b,w,S,l,c))}}var JV=1e3,eH=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(eH||{});function tH(e){return Pk(e).valueOf()}function iH(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),"continuous"===t.type&&"number"===typeof e){return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0]}if("log"===t.type&&"number"===typeof e)return t.convert(e);if("category"!==t.type)return NaN;const i=tH(e);let s=t.domain.findIndex((e=>tH(e)===i));return-1===s&&(s=t.domain.findIndex((t=>function(e,t){return null!=e&&null!=t&&"object"===typeof e&&"object"===typeof t&&("id"in e&&"id"in t?e.id===t.id:e.toString()===t.toString())}(e,t)))),s>=0?t.inset+t.step*s:NaN}function sH(e,t){let{data:i}=e;return i.map(((e,i)=>({xValue0Index:t.indexOf(tH(e.xValue0)),xValue1Index:t.indexOf(tH(e.xValue1)),datumIndex:i})))}function nH(e){return Object.values(e.scales).every((e=>"category"!==e.type||e.domain.length<JV))}function oH(e,t){const i=new Map;for(const{xValue0:l,xValue1:c}of e.data){const e=tH(l),t=tH(c);i.set(e,l).set(t,c)}const s=Array.from(i,(e=>{let[t,i]=e;return{axisValue:t,value:i}}));s.sort(((t,i)=>iH(t.value,e.scales.x)-iH(i.value,e.scales.x)));const n=[];for(const{xValue0:l,xValue1:c}of t.data){const e=tH(l),t=tH(c);i.has(e)||(i.set(e,l),n.push({axisValue:e,value:l})),i.has(t)||(i.set(t,c),n.push({axisValue:t,value:c}))}n.sort(((e,i)=>iH(e.value,t.scales.x)-iH(i.value,t.scales.x)));const o=s;let r=0;for(const l of n){for(let e=o.length-1;e>=r;e-=1){if(iH(l.value,t.scales.x)>iH(o[e].value,t.scales.x)){r=e+1;break}}o.splice(r,0,l),r+=1}if(!function(e,t){let i=-1/0;for(const s of e){const e=iH(s.value,t.scales.x);if(Number.isFinite(e)){if(e<i)return!1;i=e}}return!0}(o,t))return;const a=o.map((e=>e.axisValue));return{axisValues:a,oldDataAxisIndices:sH(t,a),newDataAxisIndices:sH(e,a)}}function rH(e,t,i){if(i.xValue1Index===i.xValue0Index+1)return e;const s=zV(e),n=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),o=s[0].x+(t-i.xValue0Index)*n;return VV(e,o,o+n)}function aH(e,t){const[i,s]=zV(e),n=iH(0,t.scales.y);return jV(e,{x:i.x,y:n},{x:s.x,y:n})}function lH(e){const[t,i]=zV(e);return function(e,t){const{x:i,y:s}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:s,x1:i,y1:s};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:s,x1:i,y1:s,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:s,cp1x:i,cp1y:s,cp2x:i,cp2y:s,cp3x:i,cp3y:s}}}(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function cH(e,t,i,s,n,o){let r,a;if(n.xValue0Index>=o.xValue1Index){const e=s.findLast((e=>e.xValue1Index<=o.xValue1Index))?.datumIndex,t=null!=e?i.data[e]:void 0;r=t?.xValue1,a=t?.yValue1}else if(n.xValue0Index<=o.xValue0Index){const e=s.find((e=>e.xValue0Index>=o.xValue0Index))?.datumIndex,t=null!=e?i.data[e]:void 0;r=t?.xValue0,a=t?.yValue0}if(null==r||null==a)switch(t){case 0:return aH(e,i);case 1:return lH(e)}const l={x:iH(r,i.scales.x),y:iH(a,i.scales.y)};return jV(e,l,l)}function hH(e,t){if(null==t)return;const i=tH(e.xValue0),s=tH(e.xValue1);return t.find((e=>tH(e.xValue0)===i&&tH(e.xValue1)===s))?.span}function dH(e,t,i,s,n,o,r){const a=e.data[s.datumIndex],l=a.span,c=hH(a,n);if(null!=c)r.removed.push({from:c,to:c}),r.moved.push({from:c,to:l}),r.added.push({from:l,to:l});else{const n=cH(l,t,e,i,s,o);r.added.push({from:n,to:l})}}function uH(e,t,i,s,n,o,r){const a=e.data[s.datumIndex],l=a.span,c=hH(a,n);if(null!=c)r.removed.push({from:l,to:l}),r.moved.push({from:l,to:c}),r.added.push({from:c,to:c});else{const n=cH(l,t,e,i,s,o);r.removed.push({from:l,to:n})}}function pH(e,t,i,s,n){const o=t[n.xValue0Index],r=i.data.find((e=>tH(e.xValue0)===o)),a=t[n.xValue1Index],l=i.data.find((e=>tH(e.xValue1)===a));if(null==r||null==l)return;const[{x:c},{x:h}]=zV(e),d=iH(r.xValue0,i.scales.x),u=iH(r.yValue0,i.scales.y),p=iH(l.xValue1,i.scales.x),g=iH(l.yValue1,i.scales.y);let m=s.data[n.datumIndex].span;return m=jV(m,{x:d,y:u},{x:p,y:g}),m=VV(m,c,h),m}function gH(e,t,i,s,n,o,r,a,l){const c=n+1,h=r.find((e=>e.xValue0Index<=n&&e.xValue1Index>=c)),d=o.find((e=>e.xValue0Index<=n&&e.xValue1Index>=c)),u=t.zeroData,p=e.zeroData;if(null==h&&null!=d)return void dH(e,i,o,d,u,a,l);if(null!=h&&null==d)return void uH(t,i,r,h,p,a,l);if(null==h||null==d)return;let g;g=h.xValue0Index===d.xValue0Index&&h.xValue1Index===d.xValue1Index?0:h.xValue0Index<=d.xValue0Index&&h.xValue1Index>=d.xValue1Index?-1:h.xValue0Index>=d.xValue0Index&&h.xValue1Index<=d.xValue1Index?1:0;const m=rH(t.data[h.datumIndex].span,n,h),f=rH(e.data[d.datumIndex].span,n,d);if(1===g){const n=pH(m,s,t,e,d);null!=n?(l.removed.push({from:m,to:n}),l.moved.push({from:n,to:f}),l.added.push({from:f,to:f})):uH(t,i,r,h,p,a,l)}else if(-1===g){const n=pH(f,s,e,t,h);null!=n?(l.removed.push({from:m,to:m}),l.moved.push({from:m,to:n}),l.added.push({from:n,to:f})):dH(e,i,o,d,u,a,l)}else l.removed.push({from:m,to:m}),l.moved.push({from:m,to:f}),l.added.push({from:f,to:f})}function mH(e,t,i){const{span:s}=t;switch(i){case 0:return hH(t,e.zeroData)??aH(s,e);case 1:return lH(s)}}function fH(e,t,i){if(!nH(e)||!nH(t))return;if(!function(e,t){const i=t.scales.x,s=e.scales.x;if("category"!==i?.type||"category"!==s?.type)return!0;let n=-1/0;for(const o of i.domain){const e=iH(o,s);if(Number.isFinite(e)){if(e<n)return!1;n=e}}return!0}(e,t))return;const s=oH(e,t);return null==s?function(e,t,i){const s=[],n=[];for(const o of t.data){const e=o.span,s=mH(t,o,i);n.push({from:e,to:s})}for(const o of e.data){const t=o.span,n=mH(e,o,i);s.push({from:n,to:t})}return{removed:n,moved:[],added:s}}(e,t,i):function(e,t,i,s){const n={removed:[],moved:[],added:[]},{axisValues:o,oldDataAxisIndices:r,newDataAxisIndices:a}=e,l={xValue0Index:Math.max(r.at(0)?.xValue0Index??-1/0,a.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(r.at(-1)?.xValue1Index??1/0,a.at(-1)?.xValue1Index??1/0)};for(let c=0;c<o.length-1;c+=1)gH(t,i,s,o,c,a,r,l,n);return n}(s,e,t,i)}function vH(e){return"continuous"===e.type||"log"===e.type}function yH(e){return"category"===e.type}function CH(e,t){return void 0===e||void 0===t?void 0!==e||void 0!==t:vH(e)&&vH(t)?e.type===t.type&&Hb(e.domain,t.domain)&&Hb(e.range,t.range):!(!yH(e)||!yH(t))&&(e.inset===t.inset&&e.step===t.step&&Hb(e.domain,t.domain))}function bH(e){return null!=e&&("category"===e.type?e.domain.every((e=>null!=e)):e.domain.every((e=>Number.isFinite(e)||e instanceof Date))&&e.range.every((e=>Number.isFinite(e))))}function wH(e,t){let i;const s=e.map((e=>e.point));switch(t.type){case"linear":i=function(e){const t=[];let i=0,s=NaN,n=NaN;for(const{x:o,y:r}of e){if(i>0){const e=1===i;t.push({type:"linear",moveTo:e,x0:s,y0:n,x1:o,y1:r})}i+=1,s=o,n=r}return t}(s);break;case"smooth":i=function(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const s=i.map(((e,t)=>{const s=0===t?e:i[t-1],n=t===i.length-1?e:i[t+1],o=0===t||t===i.length-1;if(Math.sign(s.y-e.y)===Math.sign(n.y-e.y))return 0;if(!o){const t=Math.abs(s.y-n.y),i=Math.abs(e.y-s.y)/t,o=Math.abs(e.y-n.y)/t;if(i<=WV||1-i<=WV||o<=WV||1-o<=WV)return 0}return(n.y-s.y)/(n.x-s.x)}));0===s[1]&&(s[0]*=2),0===s[s.length-2]&&(s[s.length-1]*=2);const n=[];for(let o=1;o<i.length;o+=1){const e=i[o-1],r=s[o-1],a=i[o],l=s[o],c=a.x-e.x,h=a.y-e.y;let d=c*t/3,u=c*r*t/3,p=c*t/3,g=c*l*t/3;0===l&&Math.abs(u)>Math.abs(h)&&(d*=Math.abs(h/u),u=Math.sign(u)*Math.abs(h)),0===r&&Math.abs(g)>Math.abs(h)&&(p*=Math.abs(h/g),g=Math.sign(g)*Math.abs(h)),n.push({type:"cubic",moveTo:1===o,cp0x:e.x,cp0y:e.y,cp1x:e.x+d,cp1y:e.y+u,cp2x:a.x-p,cp2y:a.y-g,cp3x:a.x,cp3y:a.y})}return n}(s,t.tension);break;case"step":i=function(e,t){const i=[];let s=0,n=NaN,o=NaN;const r="number"===typeof t?t:HV[t];for(const{x:a,y:l}of e){if(s>0){const e=1===s,t=n+(a-n)*r;i.push({type:"step",moveTo:e,x0:n,y0:o,x1:a,y1:l,stepX:t})}s+=1,n=a,o=l}return i}(s,t.position)}return i.map(((t,i)=>({span:t,xValue0:e[i].xDatum,yValue0:e[i].yDatum,xValue1:e[i+1].xDatum,yValue1:e[i+1].yDatum})))}function SH(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function xH(e,t){let i,{path:s}=e;for(const{span:n}of t){const[e,t]=zV(n);qV(s,n,null!=i&&SH(i,e)?1:0,!1),i=t}}function MH(e,t,i){let s;for(const n of i){const[i,o]=QV(n.from,n.to,e),r=null!=s&&SH(s,i)?1:0;XV(t.path,n.from,n.to,e,r,!1),s=o}}function DH(e,t,i){return{status:e,path:{addPhaseFn:(e,i)=>MH(e,i,t.added),updatePhaseFn:(e,i)=>MH(e,i,t.moved),removePhaseFn:(e,i)=>MH(e,i,t.removed)},pathProperties:RH(e,i)}}function RH(e,t){const i="none"===t?"updated":e,s={fromFn:t=>{let s;return s="removed"===e?{finish:{visible:!1}}:"added"===e?{start:{visible:!0}}:{},{phase:NA[i],...s}},toFn:e=>({phase:NA[i]})};return"fade"===t?{fromFn:t=>({opacity:"added"===e?0:t.opacity,...s.fromFn(t)}),toFn:t=>({opacity:"removed"===e?0:1,...s.toFn(t)})}:s}function EH(e,t,i){if("category"===e.scales.x?.type!==("category"===t.scales.x?.type)||!bH(e.scales.x)||!bH(t.scales.x))return;if(null==e.strokeData||null==t.strokeData)return;let s="updated";t.visible&&!e.visible?s="removed":!t.visible&&e.visible&&(s="added");const n=fH({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(null==n)return;return{status:s,stroke:DH(s,n,"fade"),hasMotion:(i?.changed??!0)||!CH(e.scales.x,t.scales.x)||!CH(e.scales.y,t.scales.y)||"updated"!==s}}function IH(e,t){let{path:i}=e,{spans:s,phantomSpans:n}=t,o=0,r={x:NaN,y:NaN},a={x:NaN,y:NaN};for(let l=0;l<s.length;l+=1){const{span:e}=s[l],{span:t}=n[l],{0:c,1:h}=zV(e),{0:d,1:u}=zV(t);if(SH(r,c)&&SH(a,d))qV(i,e,1,!1);else{for(let e=l-1;e>=o;e-=1)qV(i,n[e].span,1,!0);i.closePath(),qV(i,e,0,!1),o=l}r=h,a=u}for(let l=s.length-1;l>=o;l-=1)qV(i,n[l].span,1,!0);i.closePath()}function AH(e,t,i,s){let{path:n}=t;for(let o=0;o<i.length;o+=1){const t=i[o],r=s[o];XV(n,t.from,t.to,e,0,!1),XV(n,r.from,r.to,e,1,!0),n.closePath()}}function kH(e,t,i,s){return{status:e,path:{addPhaseFn:(e,s)=>AH(e,s,t.added,i.added),updatePhaseFn:(e,s)=>AH(e,s,t.moved,i.moved),removePhaseFn:(e,s)=>AH(e,s,t.removed,i.removed)},pathProperties:RH(e,s)}}function TH(e,t){if("category"===e.scales.x?.type!==("category"===t.scales.x?.type)||!bH(e.scales.x)||!bH(t.scales.x))return;let i="updated";t.visible&&!e.visible?i="removed":!t.visible&&e.visible&&(i="added");const s=fH({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(null==s)return;const n=fH({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(null==n)return;const o=fH({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(null==o)return;const r="none";return{status:i,fill:kH(i,s,n,r),stroke:DH(i,o,r)}}var LH=0,PH=1,FH=2,NH=3,OH=4;function BH(e){let t=Math.ceil(Math.log2(e.length))-1;return t=Math.min(Math.max(t,0),24),2**t|0}function GH(e,t){switch(e){case"category":return[NaN,NaN];case"number":case"time":case"ordinal-time":case"unit-time":{let e=1/0,i=-1/0;for(const s of t){const t=Number(s);e=Math.min(e,t),i=Math.max(i,t)}return[e,i]}case"color":case"log":case"mercator":return[0,0]}}function zH(e,t){return e/t}function jH(e,t,i){return(e.valueOf()-t)/(i-t)}function VH(e,t){return Math.min(Math.floor(e*t),t-1)*OH|0}function HH(e,t,i,s,n,o){const r=new Int32Array(o*OH).fill(-1),a=new Float64Array(o*OH).fill(NaN),l=Number.isFinite(s)&&Number.isFinite(n),c=e.length;for(let h=0;h<e.length;h+=1){const d=e[h];if(null==d)continue;const u=l?jH(d,s,n):zH(h,c),p=VH(u,o),g=t[h],m=i[h],f=null!=g?g.valueOf():NaN,v=null!=m?m.valueOf():NaN,y=-1===r[p+LH];(y||u<a[p+LH])&&(r[p+LH]=h,a[p+LH]=u),(y||u>a[p+PH])&&(r[p+PH]=h,a[p+PH]=u),!Number.isNaN(v)&&(y||v<a[p+FH])&&(r[p+FH]=h,a[p+FH]=v),!Number.isNaN(f)&&(y||f>a[p+NH])&&(r[p+NH]=h,a[p+NH]=f)}return{indexData:r,valueData:a}}function WH(e,t,i){let{inPlace:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=i/2|0,o=s?e:new Int32Array(n*OH),r=s?t:new Float64Array(n*OH);for(let a=0;a<n;a+=1){const i=a*OH|0,s=2*i|0,n=s+OH|0,l=-1===e[n+LH],c=l||t[s+LH]<t[n+LH]?s:n;o[i+LH]=e[c+LH],r[i+LH]=t[c+LH];const h=l||t[s+PH]>t[n+PH]?s:n;o[i+PH]=e[h+PH],r[i+PH]=t[h+PH];const d=l||t[s+FH]<t[n+FH]?s:n;o[i+FH]=e[d+FH],r[i+FH]=t[d+FH];const u=l||t[s+NH]>t[n+NH]?s:n;o[i+NH]=e[u+NH],r[i+NH]=t[u+NH]}return{maxRange:n,indexData:o,valueData:r}}function _H(e,t,i,s,n,o){const r=e[o];if(null==r)return!1;const a=VH(Number.isFinite(t)?jH(r,t,i):zH(o,e.length),n);return o===s[a+LH]||o===s[a+PH]||o===s[a+FH]||o===s[a+NH]}function UH(e,t,i,s){if(t.length<1e3)return;const[n,o]=GH(e,s);let r=BH(t);const{indexData:a,valueData:l}=HH(t,i,i,n,o,r);let c=[];for(let d=0;d<t.length;d+=1)_H(t,n,o,a,r,d)&&c.push(d);const h=[{maxRange:r,indices:c}];for(;c.length>10&&r>64;)({maxRange:r}=WH(a,l,r,{inPlace:!0})),c=c.filter(_H.bind(null,t,n,o,a,r)),h.push({maxRange:r,indices:c});return h.reverse(),h}function $H(e,t,i){let{id:s}=e;const n={phase:i?NA[i]:"trailing"};for(var o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];BA(s,"markers",t,r,{opacity:0},{opacity:1},n),r.forEach((e=>e.cleanup()))}function KH(e,t){let{id:i}=e;for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o];BA(i,"markers",t,n,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),n.forEach((e=>e.cleanup()))}function YH(e,t){let{id:i,nodeDataDependencies:s}=e;const n=s.seriesRectWidth;for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];OA(i,"markers",t,r,{fromFn:(e,t)=>{const i=t.midPoint?.x??n;let s=dw(0,WE(i/n),1);return isNaN(s)&&(s=0),{scalingX:0,scalingY:0,delay:s,duration:_E,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function ZH(e){return{opacity:1,scalingX:1,scalingY:1}}function qH(e,t){return{x:t.point?.x??NaN,y:t.point?.y??NaN,scalingCenterX:t.point?.x??NaN,scalingCenterY:t.point?.y??NaN}}function QH(e,t){let{datumIndex:i}=t;const s=e.getNodeData();if(void 0===s)return;const n=s[i],{point:o}=n??{};if(null==n||null==o)return;const r=e.getFormattedMarkerStyle(n),a=ZL.anchor(r.shape),l=o.focusSize??r.size,c=4+l,h=c/2,d=(a.x-.5)*l,u=(a.y-.5)*l,p=n.point.x-h-d,g=n.point.y-h-u;return uM.toCanvas(e.contentGroup,new eS(p,g,c,c))}function XH(e,t){let{id:i,visible:s,nodeDataDependencies:n}=e;const{seriesRectWidth:o,seriesRectHeight:r}=n;for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];BA(i,"path_properties",t,l,{clipX:0},{clipX:o},{phase:"initial",start:{clip:!0,clipY:r,visible:s},finish:{clip:!1,visible:s}})}function JH(e,t,i){let{id:s}=e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"add";for(var o=arguments.length,r=new Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];BA(s,t,i,r,{opacity:0},{opacity:1},{phase:n})}function eW(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function tW(e,t){let{nodeDataDependencies:i}=e;const s=e=>isFinite(e)?e:0;t.clipX=s(i.seriesRectWidth),t.clipY=s(i.seriesRectHeight)}var iW=uE(UH),sW=class extends OV{constructor(e){super({moduleCtx:e,propertyKeys:TV,propertyNames:LV,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],datumSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:eW({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:CV,datum:(e,t)=>({opacity:1,scalingX:1,scalingY:1,...qH(0,t)})},clipFocusBox:!1}),this.properties=new GV,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0,this.backgroundGroup=new gM({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||null!=this.contextNodeData&&(this.contextNodeData.fillData.spans.length>NV||this.contextNodeData.strokeData.spans.length>NV)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e?.removeChild(this.backgroundGroup)}attachPaths(e){let[t,i]=e;this.backgroundGroup.appendChild(t),this.contentGroup.appendChild(i),i.zIndex=-1}detachPaths(e){let[t,i]=e;this.backgroundGroup.removeChild(t),this.contentGroup.removeChild(i)}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}setSeriesIndex(e){const t=this.isStacked()===this._isStacked;return this._isStacked=t,super.setSeriesIndex(e,t)}setZIndex(e){super.setZIndex(e),this.isStacked()?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1])}async processData(e){if(null==this.data)return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,u=this.axes.y?.scale,{xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:d,yScale:u}),m=n>1||null!=c,f={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},v={invalidValue:null};(tC(c)||l)&&n>1&&(v.invalidValue=0),i||(v.forceValue=0);const y=[zO(o,p,{id:"xValue"}),jO(r,g,{id:"yValueRaw",...v}),...null!=a?[jO(a,g,{id:"yFilterRaw"})]:[],...YO(r,g,{id:"yValueStack",...v,groupId:f.stack}),jO(r,g,{id:"yValue",...v,groupId:f.value})];m&&y.push(...KO(r,"window","current",{id:"yValueEnd",...v,groupId:f.values},g),...KO(r,"normal","current",{id:"yValueCumulative",...v,groupId:f.marker},g)),tC(c)&&y.push(JO(Object.values(f),c)),h&&y.push(oB());const{dataModel:C,processedData:b}=await this.requestDataModel(e,t,{props:y,groupByKeys:m,groupByData:!m});this.dataAggregationFilters=this.aggregateData(C,b),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.x.scale.convert(e),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}yCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.y.scale.convert(e[0]),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}yCumulativeKey(e){return"grouped"===e.type?"yValueCumulative":"yValue"}getSeriesDomain(e){const{processedData:t,dataModel:i,axes:s}=this;if(!t||!i)return[];const n=s.y;if("x"===e){const e=i.resolveProcessedDataDefById(this,"xValue"),s=i.getDomain(this,"xValue","key",t);return"key"===e?.def.type&&"category"===e.def.valueType?s:dA(xO(s))}const o=this.domainForClippedRange("y",[this.yCumulativeKey(t)],"xValue");if(n instanceof GB||n instanceof jB)return dA(o);return dA(Number.isFinite(o[1]-o[0])?[o[0]>0?0:o[0],o[1]<0?0:o[1]]:[])}getSeriesRange(e,t){const[i,s]=this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",t);return[Math.min(i,0),Math.max(s,0)]}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if("grouped"===t.type)return;if(FO(t))return;const i=this.axes.x;if(null==i)return;const{scale:s}=i,n=e.resolveColumnById(this,"xValue",t),o=e.resolveColumnById(this,"yValueRaw",t),r=e.getDomain(this,"xValue","value",t);return iW(s.type,n,o,r)}createNodeData(){const{axes:e,data:t,processedData:i,dataModel:s,dataAggregationFilters:n}=this,o=e.x,r=e.y;if(!o||!r||!t||!s||!i)return;const{yKey:a,xKey:l,xName:c,yName:h,yFilterKey:d,marker:u,label:p,fill:g,stroke:m,connectMissingData:f,interpolation:v}=this.properties,{scale:y}=o,{scale:C}=r,b=this.getSeriesDomain("y"),{isContinuousY:w}=this.getScaleInformation({xScale:y,yScale:C}),S=(y.bandwidth??0)/2,x="grouped"===i.type,M=s.resolveKeysById(this,"xValue",i),D=s.resolveColumnById(this,"yValueRaw",i),R=x?s.resolveColumnById(this,"yValueCumulative",i):D,E=null!=d?s.resolveColumnById(this,"yFilterRaw",i):void 0,I="grouped"===i.type?s.resolveColumnById(this,"yValueStack",i):void 0,A=[],k=[],{visibleSameStackCount:T}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let L=!1;const{dataSources:P}=i,F=P.get(this.id)??[],[N,O]=y.range,B=Math.abs(O-N),G=n?.find((e=>e.maxRange>B));let z=0,j=0;const V=G?.indices;[z,j]=this.visibleRangeIndices("xValue",o.range,V),z=Math.max(z-1,0),j=Math.min(j+1,V?.length??M.length),i.input.count<1e3&&(z=0,j=i.input.count);const H=(e,t,i)=>{let s;return(tC(this.properties.normalizedTo)?w&&Lk(i):!isNaN(i))&&(s=t),{x:y.convert(e)+S,y:C.convert(s),size:u.size}},W=e=>{const t=M[e];if(null==t)return;const i=F[e],s=D[e],n=R[e],o=Number.isFinite(s),r=H(t,+n,s),d=null!=E?E[e]===s:void 0;if(!1===d&&(L=!0),o&&u&&k.push({series:this,itemId:a,datum:i,datumIndex:e,midPoint:{x:r.x,y:r.y},cumulativeValue:n,yValue:s,xValue:t,yKey:a,xKey:l,point:r,fill:u.fill??g,stroke:u.stroke??m,strokeWidth:u.strokeWidth??this.properties.strokeWidth,selected:d}),p.enabled&&o){const t=this.getLabelText(s,i,a,"y",b,p,{value:s,datum:i,xKey:l,yKey:a,xName:c,yName:h});A.push({series:this,itemId:a,datum:i,datumIndex:e,x:r.x,y:r.y,labelText:t})}};if("grouped"===i.type)for(const{datumIndex:X}of s.forEachGroupDatum(this,i))W(X);else for(let X=z;X<j;X+=1){const e=V?.[X]??X;null!=M[e]&&W(e)}const _=(e,t)=>({point:{x:y.convert(e)+S,y:C.convert(t)},xDatum:e,yDatum:t}),U=e=>{const t=[],n=(i,s,n)=>{const o=M[s],r=null!=I?I?.[s][e]:D[s];if(f&&!Number.isFinite(D[s]))return;const a=Number.isFinite(r);let l=0,c=!0,h=0,d=!0;if(null==I)c=null==i||Number.isFinite(D[i]),d=null==n||Number.isFinite(D[n]),l=null!=i&&Number.isFinite(D[i])?r:0,h=null!=n&&Number.isFinite(D[n])?r:0;else{const t=I[s],o=null!=i?I[i]:void 0,r=null!=n?I[n]:void 0;for(let i=0;i<=e;i+=1){const e=t[i];if(Number.isFinite(e)){null==o||Number.isFinite(o[i])?l+=e:c=!1,null==r||Number.isFinite(r[i])?h+=e:d=!1}}}const u=t[t.length-1];if(f||c&&d&&a&&l===h){const e=f?r:Math.max(l,h),i=_(o,e);Array.isArray(u)?u.push(i):null!=u?(u.skip+=1,t.push([i])):t.push([i])}else if(!a&&Array.isArray(u)&&1===u.length)t[t.length-1]={skip:1};else{const e=_(o,l),i=_(o,h);Array.isArray(u)?u.push(e):null!=u&&(u.skip+=1),t.push(a?[i]:{skip:0})}};if("grouped"===i.type)for(const{datumIndexes:[o,r,a]}of s.forEachGroupDatumTuple(this,i))n(o,r,a);else{let e,t;for(let i=z;i<j;i+=1){const s=V?.[i]??i;null!=M[s]&&(null!=t&&n(e,t,s),e=t,t=s)}null!=t&&n(e,t,void 0)}return(e=>e.flatMap((e=>Array.isArray(e)?wH(e,v):new Array(e.skip).fill(null))))(t)},$=this.seriesGrouping?.stackIndex??0,K=()=>{const e=e=>{const t=M[e],i=I?.[e][$]??D[e];if(!f||Number.isFinite(i))return _(t,0)};let t;if("grouped"===i.type)t=Array.from(s.forEachGroupDatum(this,i),(t=>{let{datumIndex:i}=t;return e(i)}));else{t=[];for(let i=z;i<j;i+=1){const s=V?.[i]??i;null!=M[s]&&t.push(e(s))}}return t=t.filter((e=>null!=e)),wH(t,v)},Y=U($),Z=Y.map((()=>null));for(let X=$-1;X>=-1;X-=1){let e;for(let t=0;t<Z.length;t+=1)null==Z[t]&&(e??(e=-1!==X?U(X):K()),Z[t]=e[t])}const q=Y.map(((e,t)=>e??Z[t])),Q=Y.filter((e=>null!=e));return{itemId:a,fillData:{itemId:a,spans:q,phantomSpans:Z},strokeData:{itemId:a,spans:Q},labelData:A,nodeData:k,scales:this.calculateScaling(),visible:this.visible,stackVisible:T>0,crossFiltering:L}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{visible:t,animationEnabled:i}=e,[s,n]=e.paths,o=!0===this.contextNodeData?.crossFiltering,{strokeWidth:r,stroke:a,strokeOpacity:l,lineDash:c,lineDashOffset:h,fill:d,fillOpacity:u,opacity:p}=yS(this.getHighlightStyle(),this.properties);n.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:a,strokeWidth:r,strokeOpacity:l*(o?.25:1),lineDash:c,lineDashOffset:h,opacity:p,visible:t||i});kL(s,{fill:EL(d,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),stroke:void 0,fillOpacity:u*(o?.125:1)},this.getShapeFillBBox()),s.setProperties({lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:p,visible:t||i}),tW(this,n),tW(this,s)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("AreaSeries")}updateFillPath(e,t){const[i]=e;i.path.clear(),IH(i,t.fillData),i.markDirty("AreaSeries")}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,s]=e;s.path.clear(),xH(s,i),s.markDirty("AreaSeries")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=this.properties.marker.enabled||!0===this.contextNodeData?.crossFiltering;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?t:[])}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,marker:o,stroke:r,strokeWidth:a,strokeOpacity:l}=this.properties,c=this.getSeriesDomain("x"),h=this.getSeriesDomain("y"),d=this.getShapeFillBBox();t.each(((e,t)=>{const{xValue:u,yValue:p}=t,g=lI(u,p,s,n,c,h),m=this.getMarkerStyle(o,t,g,i,void 0,{stroke:r,strokeWidth:a,strokeOpacity:l});this.applyMarkerStyle(m,e,t.point,d,{selected:t.selected})})),i||this.properties.marker.markClean(),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each(((e,s)=>{const{x:n,y:o,labelText:r}=s,a=t||this.isSeriesHighlighted(i),l=this.getHighlightStateString(i,a,s.datumIndex),c=pV(this,s,this.properties,this.properties.label,a,l),{enabled:h,fontStyle:d,fontWeight:u,fontSize:p,fontFamily:g,color:m}=c;r&&h&&this.visible?(e.fontStyle=d,e.fontWeight=u,e.fontSize=p,e.fontFamily=g,e.textAlign="center",e.textBaseline="bottom",e.text=r,e.x=n,e.y=o-10,e.fill=m,e.fillOpacity=this.getHighlightStyle(t,s.datumIndex).opacity??1,e.visible=!0,e.setBoxing(c)):e.visible=!1}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:o}=this,{xKey:r,xName:a,yKey:l,yName:c,tooltip:h,marker:d,legendItemName:u}=o,p=n.x,g=n.y;if(!i||!s||!p||!g)return;const m=s.dataSources.get(this.id)?.[e],f=i.resolveKeysById(this,"xValue",s)[e],v=i.resolveColumnById(this,"yValueRaw",s)[e],{xDomain:y,yDomain:C}=this.cachedDatumCallback("domain",(()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})));if(null==f)return;const b=this.getMarkerStyle(d,{datum:m,datumIndex:e},lI(f,v,r,l,y,C),!1);return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(p,"tooltip",f,m,r,u),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(g,"tooltip",v,m,l,u)}]},{seriesId:t,datum:m,title:c,xKey:r,xName:a,yKey:l,yName:c,...b,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:o,marker:r,fillGradientDefaults:a,fillPatternDefaults:l,fillImageDefaults:c}=this.properties,h=!r.enabled||void 0===r.fill,d=h?EL(e,a,l,c):EL(r.fill,r.fillGradientDefaults,r.fillPatternDefaults,r.fillImageDefaults);return{marker:{...this.getMarkerStyle(r,{},void 0,!1,{size:r.size,fill:d,fillOpacity:h?i:r.fillOpacity},void 0,!1),enabled:r.enabled||n<=0},line:{stroke:t,strokeOpacity:s,strokeWidth:n,lineDash:o}}}getLegendData(e){if("category"!==e)return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:o,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:e,id:t,itemId:n,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:r??o??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!a}]}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s,paths:n}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(n,s),XH(this,o,...n),jA([t],qH),YH(this,o,t),vV(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:s,contextData:n,paths:o,previousContextData:r}=e,[a,l]=o;if(!1===n.visible&&!1===r?.visible)return;if(null==a&&null==l)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(o,n)},h=()=>{t.skipCurrentBatch(),c()};if(null==n||null==r)return c(),$H(this,t,"added",i),JH(this,"fill_path_properties",t,"add",a),JH(this,"stroke_path_properties",t,"add",l),void vV(this,"labels",t,s);if(n.crossFiltering!==r.crossFiltering)return void h();const d=TH(n,r);void 0!==d?"no-op"!==d.status&&($H(this,t,void 0,i),OA(this.id,"fill_path_properties",t,[a],d.fill.pathProperties),uV(this.id,"fill_path_update",t,[a],d.fill.path),OA(this.id,"stroke_path_properties",t,[l],d.stroke.pathProperties),uV(this.id,"stroke_path_update",t,[l],d.stroke.path),vV(this,"labels",t,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,n)})):h()}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ZL}getFormattedMarkerStyle(e){const{xValue:t,yValue:i,xKey:s,yKey:n}=e,o=this.getSeriesDomain("x"),r=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,e,lI(t,i,s,n,o,r),!0)}computeFocusBounds(e){return QH(this,e)}hasItemStylers(){return null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};sW.className="AreaSeries",sW.type="area";var nW={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new sW(e),stackable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",fill:{$palette:"fill"},fillGradientDefaults:bF,fillPatternDefaults:IF,fillImageDefaults:kF,stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:OP,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:MF,fillPatternDefaults:IF},label:{...FF,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:NF()}}},oW={type:"series",name:"area",chartType:"cartesian",options:uG,create:e=>new sW(e)},rW=class extends RD{constructor(){super(...arguments),this.direction="x",this.featherRatio=0}get feathered(){return Math.abs(this.featherRatio)>1e-6}isPointInPath(e,t){if(!this.feathered)return super.isPointInPath(e,t);return this.getBBox().containsPoint(e,t)}updatePath(){if(!this.feathered)return void super.updatePath();const{path:e,x:t,y:i,width:s,height:n,direction:o,featherRatio:r}=this;if(e.clear(),"x"===o){const o=Math.abs(r)*s;r>0?(e.moveTo(t,i),e.lineTo(t+s-o,i),e.lineTo(t+s,i+n/2),e.lineTo(t+s-o,i+n),e.lineTo(t,i+n),e.closePath()):(e.moveTo(t+o,i),e.lineTo(t+s,i),e.lineTo(t+s,i+n),e.lineTo(t+o,i+n),e.lineTo(t,i+n/2),e.closePath())}else{const o=Math.abs(r)*n;r>0?(e.moveTo(t,i+o),e.lineTo(t+s/2,i),e.lineTo(t+s,i+o),e.lineTo(t+s,i+n),e.lineTo(t,i+n),e.closePath()):(e.moveTo(t,i),e.lineTo(t+s,i),e.lineTo(t+s,i+n-o),e.lineTo(t+s/2,i+n),e.lineTo(t,i+n-o),e.closePath())}}};function aW(e,t){for(const i of t){const t=i.datum;void 0===t?xy.error("undefined datum"):e.addValue(i,t)}}function lW(e,t){const{x:i,y:s}=t,{nearest:n,distanceSquared:o}=e.getQuadTree().find(i,s);if(void 0!==n)return{datum:n.value,distance:Math.sqrt(o)}}$w([LS()],rW.prototype,"direction",2),$w([LS()],rW.prototype,"featherRatio",2);var cW=class extends FV{constructor(){super(...arguments),this.direction="vertical"}};$w([fx],cW.prototype,"direction",2);var hW=class extends OV{constructor(){super(...arguments),this.groupScale=new pT,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){const i="boolean"===typeof t?1:.5,s=uC(this.smallestDataInterval)?this.smallestDataInterval*i:0,n=xO(e)??[NaN,NaN];return"boolean"===typeof t?n[t?0:1]-=(t?1:-1)*s:(n[0]-=s,n[1]+=s),dA(n)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e,t){return MI.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval,t):e.scale.bandwidth}xCoordinateRange(e){const t=this.axes[this.getCategoryDirection()],i=t.scale,s=this.getBandwidth(t,0)??0,n=MI.is(i)?-.5*s:0,o=i.convert(e)+n;return[o,o+s]}yCoordinateRange(e){const t=this.axes[this.getBarDirection()].scale,i=e.map((e=>t.convert(e)));if(1===i.length){const e=t.convert(0);return[Math.min(i[0],e),Math.max(i[0],e)]}return[Math.min(...i),Math.max(...i)]}updateGroupScale(e){const t=[],{groupScale:i}=this,s=this.getBandwidth(e),{index:n,visibleGroupCount:o}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let r=0;r<o;r++)t.push(String(r));i.domain=t,i.range=[0,s??0],e instanceof IB?i.paddingInner=e.groupPaddingInner:e instanceof wO?(i.paddingInner=e.groupPaddingInner,i.round=0!==i.padding):i.padding=0;return{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:n}}resolveKeyDirection(e){return"x"===this.getBarDirection()?"x"===e?"y":"x":e}initQuadTree(e){aW(e,this.datumNodesIter())}pickNodesExactShape(e){const t=lW(this,e);return null!=t&&t.distance<=0?[t.datum]:[]}pickNodeClosestDatum(e){return lW(this,e)}},dW=LH,uW=PH,pW=FH,gW=NH,mW=OH;function fW(e,t){return Array.from({length:e},((e,i)=>{const s=i*OH;return(t[s+LH]+t[s+PH])/2|0}))}var vW=class extends Ek{constructor(){super(...arguments),this.placement="inside-center",this.spacing=0}};$w([fx],vW.prototype,"placement",2),$w([fx],vW.prototype,"spacing",2);var yW=class extends cW{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new bL,this.fillPatternDefaults=new wL,this.fillImageDefaults=new SL,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new wV,this.label=new vW,this.tooltip=DV(),this.sparklineMode=!1}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,cornerRadius:a,opacity:1}}};function CW(e,t,i,s){if(null!=t){const[e,i]=t;if(0!==e||1!==i)return!1}if(MI.is(e)){const t=e.calcBandwidth(s)-e.calcBandwidth(i);if(t>0&&t<1)return!1}if(EI.is(e)){const{bandwidth:t,step:i}=e;if(t>0&&t<1)return!1;const s=i-t;if(s>0&&s<1)return!1}return!0}$w([fx],yW.prototype,"xKey",2),$w([fx],yW.prototype,"xName",2),$w([fx],yW.prototype,"yKey",2),$w([fx],yW.prototype,"yName",2),$w([fx],yW.prototype,"yFilterKey",2),$w([fx],yW.prototype,"stackGroup",2),$w([fx],yW.prototype,"normalizedTo",2),$w([fx],yW.prototype,"fill",2),$w([fx],yW.prototype,"fillGradientDefaults",2),$w([fx],yW.prototype,"fillPatternDefaults",2),$w([fx],yW.prototype,"fillImageDefaults",2),$w([fx],yW.prototype,"fillOpacity",2),$w([fx],yW.prototype,"stroke",2),$w([fx],yW.prototype,"strokeWidth",2),$w([fx],yW.prototype,"strokeOpacity",2),$w([fx],yW.prototype,"lineDash",2),$w([fx],yW.prototype,"lineDashOffset",2),$w([fx],yW.prototype,"cornerRadius",2),$w([fx],yW.prototype,"crisp",2),$w([fx],yW.prototype,"itemStyler",2),$w([fx],yW.prototype,"shadow",2),$w([fx],yW.prototype,"label",2),$w([fx],yW.prototype,"tooltip",2),$w([fx],yW.prototype,"sparklineMode",2);var bW=e=>pw(e.yValue??0);function wW(e,t,i){const{startingX:s,startingY:n}=function(e,t){const i=t[e?"y":"x"];let s=1/0,n=0;if(!i)return{startingX:s,startingY:n};e?n=i.scale.convert(MI.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(MI.is(i.scale)?0:Math.min(...i.range));return{startingX:s,startingY:n}}(e,t);return{isVertical:e,calculate:(t,i)=>{let o=e?t.x:s,r=e?n:t.y,a=e?t.width:0,l=e?0:t.height;const{opacity:c=1}=t;let h;return i&&(isNaN(o)||isNaN(r))&&(({x:o,y:r}=i),a=e?i.width:0,l=e?0:i.height,e&&!bW(i)?r+=i.height:!e&&bW(i)&&(o+=i.width)),h=null==t.clipBBox?void 0:bW(t)?e?new eS(o,r-l,a,l):new eS(o-a,r,a,l):new eS(o,r,a,l),{x:o,y:r,width:a,height:l,clipBBox:h,opacity:c}},mode:i}}function SW(e,t){return{isVertical:e,calculate:t=>({x:e?t.x:t.x+t.width/2,y:e?t.y+t.height/2:t.y,width:e?t.width:0,height:e?0:t.height,clipBBox:t.clipBBox,opacity:t.opacity??1}),mode:t}}function xW(e){const t=e=>null==e||isNaN(e.x)||isNaN(e.y);return{toFn:(i,s,n)=>"removed"===n&&null==i.datum&&"fade"===e.mode?{...MW(i,s),opacity:0}:"removed"===n||t(s)?e.calculate(s,i.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height,clipBBox:s.clipBBox,opacity:s.opacity??1},fromFn:(i,s,n)=>{let o;"updated"===n&&t(s)?n="removed":"updated"===n&&t(i.previousDatum)&&(n="added"),o="added"===n&&null==i.previousDatum&&"fade"===e.mode?{...MW(i,s),opacity:0}:"unknown"===n||"added"===n?e.calculate(s,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1};const r=NA[n];return{...o,phase:r}},applyFn:(e,t,i)=>{e.setProperties(t),e.crisp="end"===i&&(e.datum?.crisp??!1)}}}function MW(e,t){let{x:i,y:s,width:n,height:o,clipBBox:r,opacity:a=1}=t;return{x:i,y:s,width:n,height:o,clipBBox:r,opacity:a,crisp:e.datum?.crisp??!1}}function DW(e,t){if(void 0===t)return;const{x:i,y:s,width:n,height:o}=t;return uM.toCanvas(e.contentGroup,new eS(i,s,n,o))}function RW(e,t,i,s,n,o){let r=o?.reduced?.diff?.[e];if(r?.changed)return r;const a=function(e,t){if(!t)return!1;const i=e.scales,s=t.scales;if(!CH(i.x,s.x))return!0;if(!CH(i.y,s.y))return!0;if(!EW(e)||!EW(t))return!1;const n=e.groupScale,o=t.groupScale;return!CH(n,o)}(s,n);return null==r&&null!=o?.reduced?.diff?(r={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},a?r.updated=new Set(Array.from(t,(e=>{let{datum:t}=e;return i(t)}))):r.added=new Set(Array.from(t,(e=>{let{datum:t}=e;return i(t)})))):a&&(r={changed:!0,added:new Set,updated:new Set(Array.from(t,(e=>{let{datum:t}=e;return i(t)}))),removed:new Set,moved:new Set}),r}function EW(e){return"object"===typeof e&&null!==e&&"groupScale"in e}var IW=uE((function(e,t,i,s){if(t.length<1e3)return;const[n,o]=GH(e,s);let r=BH(t),{indexData:a,valueData:l}=HH(t,i,i,n,o,r),c=fW(r,a);const h=[{maxRange:r,indexData:a,indices:c}];for(;r>64;)({indexData:a,valueData:l,maxRange:r}=WH(a,l,r)),c=fW(r,a),h.push({maxRange:r,indexData:a,indices:c});return h.reverse(),h})),AW=class extends hW{constructor(e){super({moduleCtx:e,propertyKeys:TV,propertyNames:LV,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:MW,label:CV}}),this.properties=new yW,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(e){if(!this.data)return;const{xKey:t,yKey:i,yFilterKey:s,normalizedTo:n}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:r}=this,a=(this.seriesGrouping?.stackCount??0)>1||null!=n,l=a,c=!this.ctx.animationManager.isSkipped(),h=this.getCategoryAxis()?.scale,d=this.getValueAxis()?.scale,{isContinuousX:u,xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:h,yScale:d}),m=`bar-stack-${o}-yValues`,f=`${m}-trailing`,v=this.visible?{}:{forceValue:0},y=[zO(t,p,{id:"xValue"}),jO(i,g,{id:"yValue-raw",invalidValue:null,...v})];this.crossFilteringEnabled()&&y.push(jO(s,g,{id:"yFilterValue",invalidValue:null,...v})),a&&y.push(...KO(i,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:m,separateNegative:!0,...v},g),...KO(i,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0,...v},g)),u&&y.push(ZO,qO),uC(n)&&y.push(JO([m,f],Math.abs(n))),c&&this.processedData&&y.push(pB(this.id,this.processedData)),!c&&l||y.push(oB());const{dataModel:C,processedData:b}=await this.requestDataModel(e,r,{props:y,groupByKeys:l,groupByData:!l});this.dataAggregationFilters=this.aggregateData(C,b),this.smallestDataInterval=b.reduced?.smallestKeyInterval,this.largestDataInterval=b.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(null==i||null==t)return[];if(e===this.getCategoryDirection()){const e=i.resolveProcessedDataDefById(this,"xValue"),s=i.getDomain(this,"xValue","key",t);return"key"===e?.def.type&&"category"===e.def.valueType?s:this.padBandExtent(s)}const s=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";let n=this.domainForClippedRange(e,[s],"xValue");const o=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;if(null!=o&&(n=[Math.min(n[0],o[0]),Math.max(n[1],o[1])]),this.getValueAxis()instanceof GB)return dA(n);return dA(Number.isFinite(n[1]-n[0])?[Math.min(0,n[0]),Math.max(0,n[1])]:[])}getSeriesRange(e,t){const i=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",[s,n]=this.domainForVisibleRange("y",[i],"xValue",t);return[Math.min(s,0),Math.max(n,0)]}getVisibleItems(e,t,i){const s=this.dataModel?.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";return this.countVisibleItems("xValue",[s],e,t,i)}aggregateData(e,t){if("ungrouped"!==t.type)return;if(FO(t))return;const i=this.axes.x;if(null==i)return;const s=e.resolveKeysById(this,"xValue",t),n=e.resolveColumnById(this,"yValue-raw",t),{index:o}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[o];return IW(i.scale.type,s,n,r)}createNodeData(){var e=this;const{dataModel:t,processedData:i,groupScale:s,dataAggregationFilters:n}=this,o=this.getCategoryAxis(),r=this.getValueAxis();if(!t||!i||!o||!r)return;const a=i.dataSources?.get(this.id);if(null==a)return;const l=o.scale,c=r.scale,{xKey:h,yKey:d,xName:u,yName:p,legendItemName:g,label:m}=this.properties,f=this.getSeriesDomain("y"),v=r.isReversed(),{barWidth:y,groupIndex:C}=this.updateGroupScale(o),b=s.convert(String(C)),w=MI.is(l)?-.5*y:0,S=t.resolveKeysById(this,"xValue",i),x=t.resolveColumnById(this,"yValue-raw",i),M=this.crossFilteringEnabled()?t.resolveColumnById(this,"yFilterValue",i):void 0,D=!this.ctx.animationManager.isSkipped(),R=e=>l.convert(S[e])+b+w,E=this.properties.crisp??CW(o?.scale,o?.visibleRange,this.smallestDataInterval,this.largestDataInterval),I=c.convert(0),A=e=>{let{datum:t,datumIndex:i,xValue:s,yValue:n,cumulativeValue:o,phantom:r,currY:a,prevY:l,x:u,width:p,isPositive:g,yRange:f,labelText:y,opacity:C,featherRatio:b,crossScale:w=1}=e;const S=g!==v,x=c.convert(a),M=c.convert(l),D=c.convert(f),R="x"===this.getBarDirection(),A=.5*p*(1-w),k={x:R?Math.min(x,M):u+A,y:R?u+A:Math.min(x,M),width:R?Math.abs(M-x):p*w,height:R?p*w:Math.abs(M-x)},T=new eS(k.x,k.y,k.width,k.height),L={x:R?Math.min(I,D):u+A,y:R?u+A:Math.min(I,D),width:R?Math.abs(I-D):p*w,height:R?p*w:Math.abs(I-D)},P=this.shouldFlipXY()?k.height:k.width,F=m.spacing+("number"===typeof m.padding?m.padding:0);return{series:this,itemId:r?gB(d,r):d,datum:t,datumIndex:i,cumulativeValue:o,phantom:r,xValue:s,yValue:n,yKey:d,xKey:h,capDefaults:{lengthRatioMultiplier:P,lengthMax:P},x:L.x,y:L.y,width:L.width,height:L.height,midPoint:{x:k.x+k.width/2,y:k.y+k.height/2},opacity:C,featherRatio:b,topLeftCornerRadius:R!==S,topRightCornerRadius:S,bottomRightCornerRadius:R===S,bottomLeftCornerRadius:!S,clipBBox:T,crisp:E,label:null!=y?{text:y,...fV({isUpward:S,isVertical:!R,placement:m.placement,spacing:F,rect:k})}:void 0,missing:null==n,focusable:!r}},k=[],T=[],L=[],P=function(t,i,s,n,o,r){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;const v=S[t];if(null==v)return;const y=a[t],C=x[t],b=null!=M?Number(M[t]):void 0,w=C>=0&&!Object.is(C,-0);if(!Number.isFinite(o))return;if(null!=b&&!Number.isFinite(b))return;const D=m.enabled&&null!=C?e.getLabelText(b??C,y,d,"y",f,m,{datum:y,value:b??C,xKey:h,yKey:d,xName:u,yName:p,legendItemName:g}):void 0,R=null!=b&&b>C,E=A({datum:y,datumIndex:t,xValue:v,yValue:b??C,cumulativeValue:b??o,phantom:!1,currY:null!=b?n+b:o,prevY:n,x:i,width:s,isPositive:w,yRange:Math.max(n+(b??-1/0),r),labelText:D,opacity:c,featherRatio:l,crossScale:R?.6:void 0});if(T.push(E),L.push(E),null!=b){const e=A({datum:a[t],datumIndex:t,xValue:v,yValue:b,cumulativeValue:b,phantom:!0,currY:o,prevY:n,x:i,width:s,isPositive:w,yRange:r,labelText:void 0,opacity:c,featherRatio:l,crossScale:void 0});k.push(e)}},[F,N]=l.range,O=Math.abs(N-F),B=n?.find((e=>e.maxRange>O));if("grouped"===i.type){const e=y,s=t.hasColumnById(this,"yValue-start"),n=s?t.resolveColumnById(this,"yValue-start",i):void 0,o=s?t.resolveColumnById(this,"yValue-end",i):void 0,r=s?t.resolveProcessedDataIndexById(this,"yValue-range"):-1;for(const{datumIndex:a,group:{aggregation:l}}of t.forEachGroupDatum(this,i)){const t=R(a),i=x[a],c=i>=0&&!Object.is(i,-0),h=s?Number(n?.[a]):0,d=s?Number(o?.[a]):i;let u=d;s&&(u=l[r][c?1:0]),P(a,t,e,h,d,u)}}else if(null==B){const e=i.invalidData?.get(this.id),t=y;let[s,n]=this.visibleRangeIndices("xValue",o.range);i.input.count<1e3&&(s=0,n=i.input.count);for(let i=s;i<n;i+=1){if(!0===e?.[i])continue;const s=R(i),n=Number(x[i]);P(i,s,t,0,n,n)}}else{const{indexData:e,indices:t}=B,[i,s]=this.visibleRangeIndices("xValue",o.range,t),n=v?-1:1;for(let o=i;o<s;o+=1){const t=o*mW,i=e[t+dW],s=e[t+uW],r=e[t+pW],a=e[t+gW];if(-1===i)continue;const c=R((i+s)/2|0),h=Math.abs(R(s)-R(i))+y,d=Math.abs(s-i),u=EI.is(l)?l.bandwidth*Math.max(d-1,1)/(l.step*d):1,p=null!=S[a]?Number(x[a]):NaN,g=null!=S[r]?Number(x[r]):NaN;if(p>0){P(a,c,h,0,p,p,g>=0?n*(1-g/p):n,u)}if(g<0){P(r,c,h,0,g,g,p<=0?-n*(1-p/g):-n,u)}}}return{itemId:d,nodeData:k.length>0?[...k,...T]:T,labelData:L,scales:this.calculateScaling(),visible:this.visible||D,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new rW}getHighlightData(e,t){const i=e.find((e=>e.datum===t.datum&&!e.phantom));return null!=i?[i]:void 0}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>this.getDatumId(e)))}getItemStyle(e,t){const{id:i,properties:s}=this,{xKey:n,yKey:o,itemStyler:r,fillGradientDefaults:a,fillPatternDefaults:l,fillImageDefaults:c}=s,{xValue:h,yValue:d,datum:u,datumIndex:p}=e;let g=IL(yS(this.getHighlightStyle(t,p),s.getStyle()),a,l,c);if(r&&null!=e){const{xDomain:s,yDomain:m}=this.cachedDatumCallback("domain",(()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}))),f=this.cachedDatumCallback(gB(this.getDatumId(e),t?"highlight":"node"),(()=>{const e=this.ctx.highlightManager?.getActiveHighlight(),a=this.getHighlightStateString(e,t,p);return this.callWithContext(r,{seriesId:i,...lI(h,d,n,o,s,m),datum:u,xValue:h,yValue:d,highlighted:t,highlightState:a,...g})}));f&&(g=IL(yS(f,g),a,l,c))}return g}updateDatumNodes(e){const{shadow:t}=this.properties,i="x"===this.getCategoryDirection(),s=this.getShapeFillBBox(),n=this.getBarDirection();e.datumSelection.each(((o,r)=>{const a=this.getItemStyle(r,e.isHighlight);kL(o,a,s);const l=a.cornerRadius??0;o.topLeftCornerRadius=r.topLeftCornerRadius?l:0,o.topRightCornerRadius=r.topRightCornerRadius?l:0,o.bottomRightCornerRadius=r.bottomRightCornerRadius?l:0,o.bottomLeftCornerRadius=r.bottomLeftCornerRadius?l:0,o.visible=i?(r.clipBBox?.width??r.width)>0:(r.clipBBox?.height??r.height)>0,o.direction=n,o.featherRatio=r.featherRatio,o.crisp=r.crisp,o.fillShadow=t}))}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=1}))}updateLabelNodes(e){const{isHighlight:t=!1}=e,i={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yKey,legendItemName:this.properties.legendItemName??this.properties.xName??this.properties.xKey};e.labelSelection.each(((e,s)=>{e.fillOpacity=this.getHighlightStyle(t,s?.datumIndex).opacity??1;const n=this.ctx.highlightManager?.getActiveHighlight(),o=this.getHighlightStateString(n,t,s.datumIndex);gV(this,e,i,this.properties.label,s.label,t,o)}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:n}=this,{xKey:o,xName:r,yKey:a,yName:l,legendItemName:c,stackGroup:h,tooltip:d}=n,u=this.getCategoryAxis(),p=this.getValueAxis(),g=this.contextNodeData?.nodeData?.[e];if(!i||!s||!u||!p||!g)return;const m=s.dataSources.get(this.id)?.[e],f=i.resolveKeysById(this,"xValue",s)[e],v=i.resolveColumnById(this,"yValue-raw",s)[e];if(null==f)return;const y=this.getItemStyle(g,!1);return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(u,"tooltip",f,m,o,c),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:a,value:this.getAxisValueText(p,"tooltip",v,m,a,c)}]},{seriesId:t,datum:m,title:l,xKey:o,xName:r,yKey:a,yName:l,legendItemName:c,stackGroup:h,...y,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,fillGradientDefaults:a,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:IL({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:n,strokeWidth:i,lineDash:o,lineDashOffset:r},a,l,c)}}getLegendData(e){const{showInLegend:t}=this.properties;if("category"!==e)return[];const{id:i,ctx:{legendManager:s},visible:n}=this,{yKey:o,yName:r,legendItemName:a}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:n&&s.getItemEnabled({seriesId:i,itemId:o}),label:{text:a??r??o},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!t}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i,annotationSelections:s}=e;const n=xW(wW(this.isVertical(),this.axes,"normal"));OA(this.id,"nodes",this.ctx.animationManager,[t],n),vV(this,"labels",this.ctx.animationManager,i),vV(this,"annotations",this.ctx.animationManager,...s)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:s,contextData:n,previousContextData:o}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=RW(this.id,t,this.getDatumId.bind(this),e.contextData,o,this.processedData),a=null==o?"fade":"normal",l=xW(wW(this.isVertical(),this.axes,a));OA(this.id,"nodes",this.ctx.animationManager,[t],l,((e,t)=>this.getDatumId(t)),r),!r?.changed&&CH(n.groupScale,o?.groupScale)||(vV(this,"labels",this.ctx.animationManager,i),vV(this,"annotations",this.ctx.animationManager,...s))}getDatumId(e){return gB(e.xValue,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){let{datumIndex:t}=e;const i=this.contextNodeData?.nodeData[t].clipBBox;return DW(this,i)}hasItemStylers(){return null!=this.properties.itemStyler||null!=this.properties.label.itemStyler}};AW.className="BarSeries",AW.type="bar";var kW={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new AW(e),stackable:!0,groupable:!0,defaultAxes:mF,themeTemplate:{series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:bF,fillPatternDefaults:IF,fillImageDefaults:kF,fillOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,label:{...FF,padding:{$isUserOption:["./spacing",0,8]},enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"chartBackgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:OP,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}},highlight:NF()}}},TW={type:"series",name:"bar",chartType:"cartesian",options:mG,create:e=>new AW(e)},LW=5;function PW(e,t,i,s,n,o,r,a,l,c,h){let d=0,u=1/0;const p=(a+c)/2,g=(l+h)/2;for(const m of r){const r=e[m],a=t[m];if(null==r||null==a)continue;const l=(jH(r,i,n)-p)**2+(jH(a,s,o)-g)**2;l<u&&(u=l,d=m)}return d}function FW(e,t,i,s,n,o,r,a,l,c,h){let d=0;for(const u of r){const r=e[u],p=t[u];if(null==r||null==p)continue;const g=jH(r,i,n),m=jH(p,s,o);g>=a&&g<=c&&m>=l&&m<=h&&(d+=1)}return d}function NW(e,t,i,s,n,o,r,a,l,c,h){if(r.length<LW)return;if(a===c&&l===h){return{scale:0,x0:a,y0:l,x1:c,y1:h,indices:r,primaryDatumIndex:PW(e,t,i,s,n,o,r,a,l,c,h),children:null}}const d=[{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]}],u=(a+c)/2,p=(l+h)/2;for(const m of r){const r=e[m],a=t[m];if(null==r||null==a)continue;const l=jH(r,i,n),c=jH(a,s,o),h=d[(l>u?1:0)+(c>p?2:0)];h.indices.push(m),h.x0=Math.min(h.x0,l),h.y0=Math.min(h.y0,c),h.x1=Math.max(h.x1,l),h.y1=Math.max(h.y1,c)}let g=[];for(const m of d){const{indices:r,x0:a,x1:l,y0:c,y1:h}=m,d=NW(e,t,i,s,n,o,r,a,c,l,h);null!=d&&g.push(d)}if(1===g.length)return g[0];0===g.length&&(g=null);return{scale:Math.hypot(c-a,h-l),x0:a,y0:l,x1:c,y1:h,indices:r,primaryDatumIndex:PW(e,t,i,s,n,o,r,a,l,c,h),children:g}}function OW(e,t,i,s,n,o){const{xRange:r,yRange:a,xVisibleRange:[l,c],yVisibleRange:[h,d],minSize:u,maxSize:p}=i,{xValues:g,yValues:m,xd0:f,xd1:v,yd0:y,yd1:C}=t,b=1/Math.min(r/(c-l),a/(d-h));for(const{sizeRatio:w,node:S}of t.filters){const t=.5*(u+w*(p-u)),i=t*b,x=e*i,M=l-t/r,D=c+t/r,R=h-t/a,E=d+t/a,I=[S];for(;I.length>0;){const t=I.pop();if(!(t.x1<M||t.x0>D||t.y1<R||t.y0>E))if(t.scale<=x)null!=s&&(s.count+=1),n?.push({datumIndex:t.primaryDatumIndex,count:t.indices.length,dilation:dw(1,t.scale/i,e)});else if(null==t.children){const{indices:e}=t;if(null!=s){const i=t.x0>=l&&t.x1<=c&&t.y0>=h&&t.y1<=d?e.length:FW(g,m,f,y,v,C,e,l,h,c,d);s.count+=i}o?.push(...e)}else I.push(...t.children)}}}function BW(e,t,i){const s={count:0};return OW(e,t,i,s,void 0,void 0),s.count}var GW=class extends SV{constructor(){super(...arguments),this.maxSize=30}};$w([fx,LS()],GW.prototype,"maxSize",2),$w([fx,NS()],GW.prototype,"domain",2);var zW=class extends Ek{constructor(){super(...arguments),this.placement="top"}};$w([fx],zW.prototype,"placement",2);var jW=class extends FV{constructor(){super(...arguments),this.label=new zW,this.tooltip=DV(),this.maxRenderedItems=1/0,this.marker=new GW}};$w([fx],jW.prototype,"xKey",2),$w([fx],jW.prototype,"yKey",2),$w([fx],jW.prototype,"sizeKey",2),$w([fx],jW.prototype,"labelKey",2),$w([fx],jW.prototype,"xFilterKey",2),$w([fx],jW.prototype,"yFilterKey",2),$w([fx],jW.prototype,"sizeFilterKey",2),$w([fx],jW.prototype,"xName",2),$w([fx],jW.prototype,"yName",2),$w([fx],jW.prototype,"sizeName",2),$w([fx],jW.prototype,"labelName",2),$w([fx],jW.prototype,"title",2),$w([zM("marker.shape")],jW.prototype,"shape",2),$w([zM("marker.size")],jW.prototype,"size",2),$w([zM("marker.maxSize")],jW.prototype,"maxSize",2),$w([zM("marker.domain")],jW.prototype,"domain",2),$w([zM("marker.fillGradientDefaults")],jW.prototype,"fillGradientDefaults",2),$w([zM("marker.fillPatternDefaults")],jW.prototype,"fillPatternDefaults",2),$w([zM("marker.fillImageDefaults")],jW.prototype,"fillImageDefaults",2),$w([zM("marker.fill")],jW.prototype,"fill",2),$w([zM("marker.fillOpacity")],jW.prototype,"fillOpacity",2),$w([zM("marker.stroke")],jW.prototype,"stroke",2),$w([zM("marker.strokeWidth")],jW.prototype,"strokeWidth",2),$w([zM("marker.strokeOpacity")],jW.prototype,"strokeOpacity",2),$w([zM("marker.lineDash")],jW.prototype,"lineDash",2),$w([zM("marker.lineDashOffset")],jW.prototype,"lineDashOffset",2),$w([zM("marker.itemStyler")],jW.prototype,"itemStyler",2),$w([fx],jW.prototype,"label",2),$w([fx],jW.prototype,"tooltip",2),$w([fx],jW.prototype,"maxRenderedItems",2);var VW=class extends PV{constructor(e,t,i,s){super(e,t,i,s),this.sizeKey=s.properties.sizeKey}},HW=class extends OV{constructor(e){super({moduleCtx:e,propertyKeys:{...TV,label:["labelKey"],size:["sizeKey"]},propertyNames:{...LV,label:["labelName"],size:["sizeName"]},categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationResetFns:{label:CV,datum:ZH},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=VW,this.properties=new jW,this.dataAggregation=void 0,this.sizeScale=new OB}get pickModeAxis(){return"main-category"}async processData(e){if(null==this.data||!this.visible)return;const t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),o=this.sizeScale.type,{xKey:r,yKey:a,sizeKey:l,xFilterKey:c,yFilterKey:h,sizeFilterKey:d,labelKey:u,marker:p}=this.properties,{dataModel:g,processedData:m}=await this.requestDataModel(e,this.data,{props:[jO(r,s,{id:"xValue"}),jO(a,n,{id:"yValue"}),...null!=c?[jO(c,s,{id:"xFilterValue"})]:[],...null!=h?[jO(h,n,{id:"yFilterValue"})]:[],...null!=d?[jO(d,o,{id:"sizeFilterValue"})]:[],...l?[jO(l,o,{id:"sizeValue"})]:[],...u?[jO(u,"category",{id:"labelValue"})]:[]]});this.dataAggregation=this.aggregateData(g,m);const f=l?g.resolveProcessedDataIndexById(this,"sizeValue"):void 0,v=p.domain?[p.domain[0],p.domain[1]]:void 0;this.sizeScale.domain=v??(null==f?void 0:m.domain.values[f])??[],this.animationState.transition("updateData")}xCoordinateRange(e,t,i){const{properties:s,sizeScale:n}=this,{size:o,sizeKey:r}=s,a=this.axes.x.scale.convert(e),l=null!=r?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,c=.5*(null!=l?n.convert(l[i]):o)*t;return[a-c,a+c]}yCoordinateRange(e,t,i){const{properties:s,sizeScale:n}=this,{size:o,sizeKey:r}=s,a=this.axes.y.scale.convert(e[0]),l=null!=r?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,c=.5*(null!=l?n.convert(l[i]):o)*t;return[a-c,a+c]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s={x:"xValue",y:"yValue"},n=s[e],o=t.resolveProcessedDataDefById(this,n),r=t.getDomain(this,n,"value",i);if("value"===o?.def.type&&"category"===o?.def.valueType)return r;const a=s["x"===e?"y":"x"];return dA(xO(this.domainForClippedRange(e,[n],a)))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t)}getVisibleItems(e,t,i){const{dataAggregation:s,axes:n}=this,o=n.x,r=n.y;if(null==s||null==o||null==r)return this.countVisibleItems("xValue",["yValue"],e,t,i);return BW(0,s,this.aggregationOptions(o,r,e,t??[0,1]))}aggregateData(e,t){if("grouped"===t.type)return;if(t.input.count<=this.properties.maxRenderedItems)return;const i=this.axes.x,s=this.axes.y;if(null==i||null==s)return;const n=i.scale,o=s.scale;if(!MI.is(n)||!MI.is(o))return;const{sizeScale:r,properties:a}=this,{sizeKey:l}=a,c=e.resolveColumnById(this,"xValue",t),h=e.resolveColumnById(this,"yValue",t),d=l?e.resolveColumnById(this,"sizeValue",t):void 0,u=e.getDomain(this,"xValue","value",t),p=e.getDomain(this,"yValue","value",t),g=l?r.domain:[0,0];return function(e,t,i,s,n,o,r,a){const[l,c]=GH(e,o),[h,d]=GH(t,r),[u,p]=a,g=[];if(null!=n&&p>u){const e=Array.from({length:3},(()=>[]));for(let t=0;t<n.length;t+=1){const i=(n[t]-u)/(p-u)*3|0;i>=0&&i<3&&e[i].push(t)}for(let t=0;t<e.length;t+=1){const n=NW(i,s,l,h,c,d,e[t],0,0,1,1);if(null!=n){const e=t/3;g.push({sizeRatio:e,node:n})}}}else{const e=i.map(((e,t)=>t)),t=NW(i,s,l,h,c,d,e,0,0,1,1);null!=t&&g.push({sizeRatio:0,node:t})}return g.length>0?{xValues:i,yValues:s,xd0:l,xd1:c,yd0:h,yd1:d,filters:g}:void 0}(n.type,o.type,c,h,d,u,p,g)}aggregationOptions(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.visibleRange,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.visibleRange;const{sizeKey:n,marker:o}=this.properties,r=Math.abs(e.range[1]-e.range[0]),a=Math.abs(t.range[1]-t.range[0]),l=o.size;return{xRange:r,yRange:a,minSize:l,maxSize:n?o.maxSize:l,xVisibleRange:i,yVisibleRange:s}}createNodeData(){const{axes:e,dataModel:t,processedData:i,sizeScale:s,visible:n}=this,{xKey:o,yKey:r,sizeKey:a,xFilterKey:l,yFilterKey:c,sizeFilterKey:h,labelKey:d,xName:u,yName:p,sizeName:g,labelName:m,label:f,marker:v,maxRenderedItems:y}=this.properties,{enabled:C,placement:b}=f,w=ZL.anchor(v.shape),S=e.x,x=e.y;if(!(t&&i&&n&&S&&x))return;const M=t.resolveColumnById(this,"xValue",i),D=t.resolveColumnById(this,"yValue",i),R=null!=a?t.resolveColumnById(this,"sizeValue",i):void 0,E=null!=d?t.resolveColumnById(this,"labelValue",i):void 0,I=null!=l?t.resolveColumnById(this,"xFilterValue",i):void 0,A=null!=c?t.resolveColumnById(this,"yFilterValue",i):void 0,k=null!=h?t.resolveColumnById(this,"sizeFilterValue",i):void 0;let T;T=d?[]:a?t.getDomain(this,"sizeValue","value",i):[];const L=S.scale,P=x.scale,F=(L.bandwidth??0)/2,N=(P.bandwidth??0)/2,O=[];s.range=[v.size,v.maxSize];const B=lD.getMeasurer({font:f}),G=i.dataSources.get(this.id);if(null==G)return;const z=Ik(f),j=(e,t,i)=>{const n=G[e],l=M[e],c=D[e],h=R?.[e],y=L.convert(l)+F,S=P.convert(c)+N;let x,j;if(null!=I&&null!=A&&(x=I[e]===l&&A[e]===c,null!=k&&x&&(x=k[e]===h)),C){let t,i,s;d&&E?(t=E[e],i=d,s="label"):a?(t=h,i=a,s="size"):(t=c,i=r,s="y");const l=this.getLabelText(t,n,i,s,T,f,{value:t,datum:n,xKey:o,yKey:r,sizeKey:a,labelKey:d,xName:u,yName:p,sizeName:g,labelName:m}),v=B.measureText(String(l));v.width+=z.left+z.right,v.height+=z.bottom+z.top,j={text:l,...v}}else j={text:"",width:0,height:0};const V=null!=h?s.convert(h):v.size;O.push({series:this,itemId:r,yKey:r,xKey:o,datum:n,datumIndex:e,xValue:l,yValue:c,sizeValue:h,capDefaults:{lengthRatioMultiplier:v.getDiameter(),lengthMax:1/0},point:{x:y,y:S,size:Math.sqrt(i)*V},midPoint:{x:y,y:S},label:j,anchor:w,placement:b,count:t,dilation:i,selected:x})},{dataAggregation:V}=this;if(null==V)for(let H=0;H<G.length;H++)j(H,1,1);else{const e=this.aggregationOptions(S,x),t=function(e,t,i){let s=1,n=2;for(;BW(n,e,t)>i&&n<100;)s*=2,n*=2;for(let o=0;o<12;o+=1){const o=(n+s)/2;BW(o,e,t)>i?s=o:n=o}return s}(V,e,y),{groupedAggregation:i,singleDatumIndices:s}=function(e,t,i){const s=[],n=[];return OW(e,t,i,void 0,s,n),{groupedAggregation:s,singleDatumIndices:n}}(t,V,e);for(const{datumIndex:n,count:o,dilation:r}of i)j(n,o,r);for(const n of s)j(n,1,1)}return{itemId:r,nodeData:O,labelData:C?O:[],scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{sizeKey:s}=this.properties;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const n=this.properties.marker.enabled?t:[];let o;return s&&(o=e=>gB([e.xValue,e.yValue,e.sizeValue,e.label.text])),i.update(n,void 0,o)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,sizeKey:o,labelKey:r,marker:a}=this.properties;this.sizeScale.range=[a.size,a.maxSize];const l=this.getShapeFillBBox(),c=null!=this.dataAggregation,h={xKey:s,yKey:n,sizeKey:o,labelKey:r};t.each(((e,t,s)=>{const{count:n,dilation:o}=t,r=this.getMarkerStyle(a,t,h,i);r.fillOpacity=(1-(1-(r.fillOpacity??1))**n)/Math.sqrt(o),this.applyMarkerStyle(r,e,t.point,l,{selected:t.selected}),e.zIndex=c?[-n,s]:0})),i||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map((e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}}))),(e=>{e.pointerEvents=1})),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each(((e,s)=>{const n=t||this.isSeriesHighlighted(i),o=this.getHighlightStateString(i,n,s.datumIndex),r=pV(this,s,this.properties,this.properties.label,n,o);e.text=s.label.text,e.fill=r.color,e.x=s.point?.x??0,e.y=s.point?.y??0,e.fontStyle=r.fontStyle,e.fontWeight=r.fontWeight,e.fontSize=r.fontSize,e.fontFamily=r.fontFamily,e.textAlign="left",e.textBaseline="top",e.fillOpacity=this.getHighlightStyle(t,s.datumIndex).opacity??1,e.setBoxing(r)}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:o,ctx:r}=this,{formatManager:a}=r,{xKey:l,xName:c,yKey:h,yName:d,sizeKey:u,sizeName:p,labelKey:g,labelName:m,title:f,tooltip:v,marker:y,legendItemName:C}=o,b=n.x,w=n.y;if(!i||!s||!b||!w)return;const S=s.dataSources.get(this.id)?.[e],x=i.resolveColumnById(this,"xValue",s)[e],M=i.resolveColumnById(this,"yValue",s)[e],D=this.contextNodeData?.nodeData[e];if(null==x||null==D)return;const R=[];if(this.isLabelEnabled()&&null!=g){const n=i.resolveColumnById(this,"labelValue",s)[e],o=a.format(this.callWithContext.bind(this),{type:"category",value:n,datum:S,seriesId:t,legendItemName:C,key:g,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});R.push({label:m,fallbackLabel:g,value:o??BR(n)})}if(R.push({label:c,fallbackLabel:l,value:this.getAxisValueText(b,"tooltip",x,S,l,C)},{label:d,fallbackLabel:h,value:this.getAxisValueText(w,"tooltip",M,S,h,C)}),null!=u){const n=i.resolveColumnById(this,"sizeValue",s)[e],o=i.getDomain(this,"sizeValue","value",s),r=a.format(this.callWithContext.bind(this),{type:"number",value:n,datum:S,seriesId:t,legendItemName:C,key:u,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:o,fractionDigits:void 0});R.push({label:p,fallbackLabel:u,value:r??BR(n)})}const E=this.getMarkerStyle(y,{datum:S,datumIndex:e},{xKey:l,yKey:h,sizeKey:u,labelKey:g,highlighted:!0},!1);return this.formatTooltipWithContext(v,{title:f,symbol:this.legendItemSymbol(),data:R},{seriesId:t,datum:S,title:h,xKey:l,xName:c,yKey:h,yName:d,sizeKey:u,sizeName:p,labelKey:g,labelName:m,...E,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker,{},void 0,!1,void 0,void 0,!1)}}getLegendData(){const{id:e,ctx:{legendManager:t},visible:i}=this,{yKey:s,yName:n,title:o}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i&&t.getItemEnabled({seriesId:e,itemId:s}),label:{text:o??n??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;KH(this,this.ctx.animationManager,t),vV(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ZL}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:s,labelKey:n,marker:o}=this.properties;return this.getMarkerStyle(o,e,{xKey:t,yKey:i,sizeKey:s,labelKey:n},!1)}computeFocusBounds(e){return QH(this,e)}hasItemStylers(){const{itemStyler:e,marker:t,label:i}=this.properties;return!!(e??t.itemStyler??i.itemStyler)}};HW.className="BubbleSeries",HW.type="bubble";var WW={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new HW(e),defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:MF,fillPatternDefaults:IF,fillImageDefaults:kF,fillOpacity:.8,maxRenderedItems:1e4,label:{...FF,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:NF()}}},_W={type:"series",name:"bubble",chartType:"cartesian",options:vG,create:e=>new HW(e)},UW=class extends FV{constructor(){super(...arguments),this.fillGradientDefaults=new bL,this.fillPatternDefaults=new wL,this.fillImageDefaults=new SL,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new wV,this.label=new Ek,this.tooltip=DV()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,cornerRadius:a,opacity:1}}};$w([fx],UW.prototype,"xKey",2),$w([fx],UW.prototype,"yKey",2),$w([fx],UW.prototype,"xName",2),$w([fx],UW.prototype,"yName",2),$w([fx],UW.prototype,"fill",2),$w([fx],UW.prototype,"fillGradientDefaults",2),$w([fx],UW.prototype,"fillPatternDefaults",2),$w([fx],UW.prototype,"fillImageDefaults",2),$w([fx],UW.prototype,"fillOpacity",2),$w([fx],UW.prototype,"stroke",2),$w([fx],UW.prototype,"strokeWidth",2),$w([fx],UW.prototype,"strokeOpacity",2),$w([fx],UW.prototype,"lineDash",2),$w([fx],UW.prototype,"lineDashOffset",2),$w([fx],UW.prototype,"cornerRadius",2),$w([fx],UW.prototype,"areaPlot",2),$w([fx],UW.prototype,"bins",2),$w([fx],UW.prototype,"aggregation",2),$w([fx],UW.prototype,"binCount",2),$w([fx],UW.prototype,"shadow",2),$w([fx],UW.prototype,"label",2),$w([fx],UW.prototype,"tooltip",2);var $W=class extends OV{constructor(e){super({moduleCtx:e,propertyKeys:TV,propertyNames:LV,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!0,animationResetFns:{datum:MW,label:CV}}),this.properties=new UW,this.calculatedBins=[]}deriveBins(e){const t=MT(e[0],e[1],10).ticks,i=AT(e[0],e[1],10),[s]=t;return[[s-i,s],...t.map((e=>[e,e+i]))]}calculateNiceBins(e,t){const i=Math.floor(e[0]),s=e[1],n=t||1,{start:o,binSize:r}=this.calculateNiceStart(i,s,n);return this.getBins(o,s,r,n)}getBins(e,t,i,s){const n=[],o=this.calculatePrecision(i);for(let r=0;r<s;r++){const a=Math.round((e+r*i)*o)/o;let l=Math.round((e+(r+1)*i)*o)/o;r===s-1&&(l=Math.max(l,t)),n[r]=[a,l]}return n}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const s=Math.abs(t-e)/i,n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return{start:Math.floor(e/o)*o,binSize:s}}async processData(e){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:t,yKey:i,areaPlot:s,aggregation:n}=this.properties,o=this.axes.x?.scale,r=this.axes.y?.scale,{xScaleType:a,yScaleType:l}=this.getScaleInformation({yScale:r,xScale:o}),c=[zO(t,a),QO];if(i){let e=IO("groupAgg");"count"===n||("sum"===n?e=EO("groupAgg"):"mean"===n&&(e=AO("groupAgg"))),s&&(e=kO("groupAgg",e)),c.push(jO(i,l,{invalidValue:void 0}),e)}else{c.push(VO("count"));let e=IO("groupAgg");s&&(e=kO("groupAgg",e)),c.push(e)}!this.ctx.animationManager.isSkipped()&&this.processedData&&c.push(pB(this.id,this.processedData,!1)),await this.requestDataModel(e,this.data,{props:c,groupByFn:e=>{const t=dA(e.domain.keys[0]);if(0===t.length)return e.domain.groups=[],()=>[];const i=dC(this.properties.binCount)?this.calculateNiceBins(t,this.properties.binCount):this.properties.bins??this.deriveBins(t),s=i.length;return this.calculatedBins=[...i],e=>{let t=e[0];if(sC(t)&&(t=t.getTime()),!dC(t))return[];for(let n=0;n<s;n++){const e=i[n];if(t>=e[0]&&t<e[1])return e;if(n===s-1&&t<=e[1])return e}return[]}}}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];const s=i.getDomain(this,"groupAgg","aggregate",t),n=this.calculatedBins?.[0][0],o=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return dA("x"===e?[n,o]:s)}getSeriesRange(e,t){let[i,s]=t;const{dataModel:n,processedData:o}=this;if(!n||"grouped"!==o?.type)return[NaN,NaN];const r=this.axes.x.scale;let a=-1/0;return o.groups.forEach((e=>{let{keys:t,aggregation:n}=e;const[[o,l]=[0,0]]=n,[c,h]=t,[d,u]=CI([r.convert(c),r.convert(h)]);if(u>=i&&d<=s){const e=o+l;a=Math.max(a,e)}})),0>a?[NaN,NaN]:[0,a]}frequency(e){return e.datumIndices.reduce(((e,t)=>e+t.length),0)}createNodeData(){const{axes:e,processedData:t,dataModel:i}=this,s=e.x,n=e.y;if(!s||!n||!i)return;const{scale:o}=s,{scale:r}=n,{xKey:a,yKey:l,xName:c,yName:h,label:d}=this.properties,u=[],p={itemId:this.properties.yKey??this.id,nodeData:u,labelData:u,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return this.visible&&null!=t&&"grouped"===t.type?(t.groups.forEach(((e,s)=>{const{keys:p,aggregation:g}=e,[[m,f]=[0,0]]=g,v=this.frequency(e),y=p,[C,b]=y,w=[...i.forEachDatum(this,t,e)],S=o.convert(C),x=o.convert(b),M=m+f,D=r.convert(0),R=r.convert(M),E=Math.abs(x-S),I=Math.abs(R-D),A=Math.min(S,x),k=Math.min(D,R);let T;d.enabled&&0!==M&&(T={x:A+E/2,y:k+I/2,text:this.getLabelText(M,w,l,"y",[],d,{value:M,datum:w,xKey:a,yKey:l,xName:c,yName:h})});const L={x:A+E/2,y:k+I/2},P=n.isReversed();u.push({series:this,datumIndex:s,datum:w,aggregatedValue:M,frequency:v,domain:y,yKey:l,xKey:a,x:A,y:k,xValue:S,yValue:R,width:E,height:I,midPoint:L,topLeftCornerRadius:!P,topRightCornerRadius:!P,bottomRightCornerRadius:P,bottomLeftCornerRadius:P,label:T,crisp:!0})})),u.sort(((e,t)=>e.x-t.x)),p):p}nodeFactory(){return new RD}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,void 0,(e=>e.domain.join("_")))}getItemStyle(e,t){const{properties:i}=this;return IL(yS(this.getHighlightStyle(e,t?.datumIndex),i.getStyle()),i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}updateDatumNodes(e){const{isHighlight:t}=e,{shadow:i}=this.properties,s=this.getShapeFillBBox();e.datumSelection.each(((e,n)=>{const o=this.getItemStyle(t,n),{cornerRadius:r=0}=o,{topLeftCornerRadius:a,topRightCornerRadius:l,bottomRightCornerRadius:c,bottomLeftCornerRadius:h}=n;kL(e,o,s),e.topLeftCornerRadius=a?r:0,e.topRightCornerRadius=l?r:0,e.bottomRightCornerRadius=c?r:0,e.bottomLeftCornerRadius=h?r:0,e.crisp=n.crisp,e.fillShadow=i,e.visible=n.height>0}))}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,(e=>{e.pointerEvents=1,e.textAlign="center",e.textBaseline="middle"}))}updateLabelNodes(e){const t=this.isLabelEnabled();e.labelSelection.each(((e,i)=>{const s=pV(this,i,this.properties,this.properties.label),{enabled:n,fontStyle:o,fontWeight:r,fontSize:a,fontFamily:l,color:c}=s;n&&t&&i?.label?(e.text=i.label.text,e.x=i.label.x,e.y=i.label.y,e.fontStyle=o,e.fontWeight=r,e.fontFamily=l,e.fontSize=a,e.fill=c,e.visible=!0,e.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,e.setBoxing(s)):e.visible=!1}))}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t instanceof gM&&aW(e,t.children())}pickNodeClosestDatum(e){return lW(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:o,ctx:{localeManager:r}}=this,{xKey:a,xName:l,yKey:c,yName:h,tooltip:d,legendItemName:u}=o,p=n.x,g=n.y;if(!i||"grouped"!==s?.type||!p||!g)return;const m=s.groups[e],{aggregation:f,keys:v}=m,[[y,C]=[0,0]]=f,b=this.frequency(m),w=v,[S,x]=w,M=y+C,D={data:[...i.forEachDatum(this,s,m)],aggregatedValue:M,frequency:b,domain:w},R=[{label:l,fallbackLabel:a,value:`${this.getAxisValueText(p,"tooltip",S,D,a,u)} - ${this.getAxisValueText(p,"tooltip",x,D,a,u)}`},{label:r.t("seriesHistogramTooltipFrequency"),value:this.getAxisValueText(g,"tooltip",b,D,c,u)}];if(null!=c){let e;switch(o.aggregation){case"sum":e=r.t("seriesHistogramTooltipSum",{yName:h??c});break;case"mean":e=r.t("seriesHistogramTooltipMean",{yName:h??c});break;case"count":e=r.t("seriesHistogramTooltipCount",{yName:h??c})}R.push({label:e,value:this.getAxisValueText(g,"tooltip",M,D,c,u)})}return this.formatTooltipWithContext(d,{symbol:this.legendItemSymbol(),data:R},{seriesId:t,datum:D,title:h,xKey:a,xName:l,yKey:c,yName:h,xRange:[S,x],frequency:b,...this.getItemStyle(!1)})}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,fillGradientDefaults:a,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:IL({fill:e??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:n,strokeWidth:s,lineDash:o,lineDashOffset:r},a,l,c)}}getLegendData(e){if("category"!==e)return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{xKey:n,yName:o,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:o??n??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!r}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const s=xW(wW(!0,this.axes,"normal"));OA(this.id,"datums",this.ctx.animationManager,[t],s),vV(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetDatumAnimation(e)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){let{datumIndex:t}=e;return DW(this,this.contextNodeData?.nodeData[t])}hasItemStylers(){return null!=this.properties.label.itemStyler}};$W.className="HistogramSeries",$W.type="histogram";var KW={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new $W(e),defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:bF,fillPatternDefaults:IF,fillImageDefaults:kF,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{...FF,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},shadow:{enabled:!1,color:OP,xOffset:3,yOffset:3,blur:5},highlight:NF()}}},YW={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:CG,create:e=>new $W(e)},ZW=class extends FV{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new BV,this.marker=new SV,this.label=new Ek,this.tooltip=DV(),this.connectMissingData=!1,this.sparklineMode=!1}};$w([fx],ZW.prototype,"xKey",2),$w([fx],ZW.prototype,"yKey",2),$w([fx],ZW.prototype,"xName",2),$w([fx],ZW.prototype,"yName",2),$w([fx],ZW.prototype,"yFilterKey",2),$w([fx],ZW.prototype,"stackGroup",2),$w([fx],ZW.prototype,"normalizedTo",2),$w([fx],ZW.prototype,"title",2),$w([fx],ZW.prototype,"stroke",2),$w([fx],ZW.prototype,"strokeWidth",2),$w([fx],ZW.prototype,"strokeOpacity",2),$w([fx],ZW.prototype,"lineDash",2),$w([fx],ZW.prototype,"lineDashOffset",2),$w([fx],ZW.prototype,"interpolation",2),$w([fx],ZW.prototype,"marker",2),$w([fx],ZW.prototype,"label",2),$w([fx],ZW.prototype,"tooltip",2),$w([fx],ZW.prototype,"connectMissingData",2),$w([fx],ZW.prototype,"sparklineMode",2);var qW=uE(UH),QW=class extends OV{constructor(e){super({moduleCtx:e,propertyKeys:TV,propertyNames:LV,categoryKey:"xValue",pickModes:[2,1,0],datumSelectionGarbageCollection:!1,animationResetFns:{path:eW({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:CV,datum:(e,t)=>({opacity:1,scalingX:1,scalingY:1,...qH(0,t)})},clipFocusBox:!1}),this.properties=new ZW,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(e){if(null==this.data)return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=0}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,u=this.axes.y?.scale,{isContinuousX:p,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:u}),f=n>1||null!=c,v={invalidValue:null};l&&f&&(v.invalidValue=0),f&&!i&&(v.forceValue=0);const y=[];if(p&&!f||y.push(zO(o,g,{id:"xKey"})),y.push(jO(o,g,{id:"xValue"}),jO(r,m,{id:"yValueRaw",...v,invalidValue:void 0})),null!=a&&y.push(jO(a,m,{id:"yFilterRaw"})),f){const e=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];y.push(...KO(r,"window","current",{id:"yValueEnd",...v,groupId:e[0]},m),...KO(r,"window-trailing","current",{id:"yValueStart",...v,groupId:e[1]},m),...KO(r,"normal","current",{id:"yValueCumulative",...v,groupId:e[2]},m)),tC(c)&&y.push(JO([e[0],e[1],e[2]],c))}h&&(y.push(oB(p?["xValue"]:void 0)),this.processedData&&y.push(pB(this.id,this.processedData)));const{dataModel:C,processedData:b}=await this.requestDataModel(e,t,{props:y,groupByKeys:f,groupByData:!f});this.dataAggregationFilters=this.aggregateData(C,b),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.x.scale.convert(e),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}yCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.y.scale.convert(e[0]),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!t||!i)return[];if("x"===e){const e=t.resolveProcessedDataDefById(this,"xValue"),s=t.getDomain(this,"xValue","value",i);return"value"===e?.def.type&&"category"===e.def.valueType?s:dA(xO(s))}const s=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return dA(this.domainForClippedRange("y",[s],"xValue"))}getSeriesRange(e,t){const i=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.domainForVisibleRange("y",[i],"xValue",t)}getVisibleItems(e,t,i){const s=this.dataModel?.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.countVisibleItems("xValue",[s],e,t,i)}aggregateData(e,t){if("ungrouped"!==t.type)return;if(FO(t))return;const i=this.axes.x;if(null==i)return;const{scale:s}=i,n=e.resolveColumnById(this,"xValue",t),o=e.resolveColumnById(this,"yValueRaw",t),r=e.getDomain(this,"xValue","value",t);return qW(s.type,n,o,r)}createNodeData(){const{dataModel:e,processedData:t,axes:i,dataAggregationFilters:s}=this,n=i.x,o=i.y;if(!e||!t||!n||!o)return;const{xKey:r,yKey:a,yFilterKey:l,xName:c,yName:h,marker:d,label:u,connectMissingData:p,interpolation:g,legendItemName:m}=this.properties,f=this.dataModel?.hasColumnById(this,"yValueEnd"),v=n.scale,y=o.scale,C=(v.bandwidth??0)/2,b=(y.bandwidth??0)/2,w=d.enabled?d.size:0,S=t.dataSources.get(this.id)??[],x=e.resolveColumnById(this,"xValue",t),M=e.resolveColumnById(this,"yValueRaw",t),D=f?e.resolveColumnById(this,"yValueEnd",t):void 0,R=f?e.resolveColumnById(this,"yValueCumulative",t):M,E=null!=l?e.resolveColumnById(this,"yFilterRaw",t):void 0,I=this.getSeriesDomain("y"),A={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},k=[],T=[],L=e=>{const t=S[e],i=x[e],s=M[e],n=D?.[e],o=E?.[e],l=v.convert(i)+C,d=y.convert(R[e])+b;if(!Number.isFinite(l))return;if(null!=s){const p=u.enabled?this.getLabelText(s,t,a,"y",I,u,{value:s,datum:t,xKey:r,yKey:a,xName:c,yName:h,legendItemName:m}):void 0;k.push({series:this,datum:t,datumIndex:e,yKey:a,xKey:r,point:{x:l,y:d,size:w},midPoint:{x:l,y:d},cumulativeValue:n,yValue:s,xValue:i,capDefaults:A,labelText:p,selected:o})}const g=T[T.length-1];if(null!=s){const e={point:{x:l,y:d},xDatum:i,yDatum:s};Array.isArray(g)?g.push(e):null!=g?(g.skip+=1,T.push([e])):T.push([e])}else p||(Array.isArray(g)||null==g?T.push({skip:0}):g.skip+=1)},[P,F]=v.range,N=Math.abs(F-P),O=s?.find((e=>e.maxRange>N)),B=O?.indices;let[G,z]=this.visibleRangeIndices("xValue",n.range,B);G=Math.max(G-1,0),z=Math.min(z+1,B?.length??x.length),t.input.count<1e3&&(G=0,z=t.input.count);for(let W=G;W<z;W+=1)L(B?.[W]??W);const j=T.flatMap((e=>Array.isArray(e)?wH(e,g):[])),V={itemId:a,spans:j},H=E?.some(((e,t)=>e===M[t]))??!1;return{itemId:a,nodeData:k,labelData:k,strokeData:V,scales:this.calculateScaling(),visible:this.visible,crossFiltering:H}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{paths:[t],visible:i,animationEnabled:s}=e,n=!0===this.contextNodeData?.crossFiltering,{strokeWidth:o,stroke:r,strokeOpacity:a,lineDash:l,lineDashOffset:c,opacity:h}=yS(this.getHighlightStyle(),this.properties);t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:h,stroke:r,strokeWidth:o,strokeOpacity:a*(n?.25:1),lineDash:l,lineDashOffset:c}),s||(t.visible=i),tW(this,t)}updateDatumSelection(e){let{nodeData:t}=e;const{datumSelection:i}=e;return t=this.properties.marker.enabled||!0===this.contextNodeData?.crossFiltering?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,(e=>gB(e.xValue)))}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,marker:o,stroke:r,strokeWidth:a,strokeOpacity:l}=this.properties,c=this.getSeriesDomain("x"),h=this.getSeriesDomain("y"),d=this.ctx.animationManager.isSkipped(),u=this.getShapeFillBBox();t.each(((e,t)=>{const{xValue:p,yValue:g}=t,m=lI(p,g,s,n,c,h),f=this.getMarkerStyle(o,t,m,i,void 0,{stroke:r,strokeWidth:a,strokeOpacity:l});this.applyMarkerStyle(f,e,t.point,u,{applyTranslation:d,selected:t.selected})})),i||o.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each(((e,s)=>{const n=t||this.isSeriesHighlighted(i),o=this.getHighlightStateString(i,n,s.datumIndex),r=pV(this,s,this.properties,this.properties.label,n,o),{enabled:a,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:d,color:u}=r;a&&s?.labelText?(e.fontStyle=l,e.fontWeight=c,e.fontSize=h,e.fontFamily=d,e.textAlign="center",e.textBaseline="bottom",e.text=s.labelText,e.x=s.point.x,e.y=s.point.y-10,e.fill=u,e.visible=!0,e.fillOpacity=this.getHighlightStyle(t,s.datumIndex).opacity??1,e.setBoxing(r)):e.visible=!1}))}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:o}=this,{xKey:r,xName:a,yKey:l,yName:c,tooltip:h,legendItemName:d}=o,u=n.x,p=n.y;if(!i||!s||!u||!p)return;const g=s.dataSources.get(this.id)?.[e],m=i.resolveColumnById(this,"xValue",s)[e],f=i.resolveColumnById(this,"yValueRaw",s)[e];if(null==m)return;const v=lI(m,f,r,l,this.getSeriesDomain("x"),this.getSeriesDomain("y")),y=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:g},v,!1);return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(u,"tooltip",m,g,r,d),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(p,"tooltip",f,g,l,d)}]},{seriesId:t,datum:g,title:c,xKey:r,xName:a,yKey:l,yName:c,...y,...this.getModuleTooltipParams()})}legendItemSymbol(){const e="rgba(0, 0, 0, 0)",{stroke:t,strokeOpacity:i,strokeWidth:s,lineDash:n,marker:o}=this.properties;return{marker:{...this.getMarkerStyle(o,{},void 0,!1,{size:o.size,fill:o.fill??e,stroke:o.stroke??t??e},void 0,!1),enabled:o.enabled},line:{stroke:t??e,strokeOpacity:i,strokeWidth:s,lineDash:n}}}getLegendData(e){if("category"!==e)return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:o,title:r,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:"category",id:t,itemId:n,legendItemName:a,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:a??r??o??n},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}updateLinePaths(e,t){const i=t.strokeData.spans,[s]=e;s.path.clear(),xH(s,i),s.markDirty("LineSeries")}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:s,contextData:n,paths:o}=e,{animationManager:r}=this.ctx;this.updateLinePaths(o,n),XH(this,r,...o),jA([t],qH),YH(this,r,t),vV(this,"labels",r,i),vV(this,"annotations",r,...s)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:s,annotationSelections:n,contextData:o,paths:r,previousContextData:a}=e,[l]=r;if(!1===o.visible&&!1===a?.visible)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(r,o)},h=()=>{t.skipCurrentBatch(),c()};if(null==o||null==a)return c(),$H(this,t,"added",i),JH(this,"path_properties",t,"add",l),vV(this,"labels",t,s),void vV(this,"annotations",t,...n);if(o.crossFiltering!==a.crossFiltering)return void h();const d=EH(o,a,this.processedData?.reduced?.diff?.[this.id]);void 0!==d?"no-op"!==d.status&&(OA(this.id,"path_properties",t,[l],d.stroke.pathProperties),"added"===d.status?this.updateLinePaths(r,o):"removed"===d.status?this.updateLinePaths(r,a):uV(this.id,"path_update",t,[l],d.stroke.path),d.hasMotion&&($H(this,t,void 0,i),vV(this,"labels",t,s),vV(this,"annotations",t,...n))):h()}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ZL}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=this.properties,{xValue:s,yValue:n}=e,o=this.getSeriesDomain("x"),r=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,e,lI(s,n,t,i,o,r),!0)}computeFocusBounds(e){return QH(this,e)}hasItemStylers(){return null!=this.properties.marker.itemStyler||null!=this.properties.label.itemStyler}};QW.className="LineSeries",QW.type="line";var XW={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new QW(e),stackable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{stroke:yF,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:MF,fillPatternDefaults:IF,fillImageDefaults:kF},label:{...FF,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:NF()}}},JW={type:"series",name:"line",chartType:"cartesian",options:SG,create:e=>new QW(e)},e_=class extends HW{};e_.className="ScatterSeries",e_.type="scatter";var t_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new e_(e),defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:MF,fillPatternDefaults:IF,fillImageDefaults:kF,fillOpacity:.8,maxRenderedItems:1e4,label:{...FF,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:NF()}}},i_={type:"series",name:"scatter",chartType:"cartesian",options:MG,create:e=>new e_(e)},s_=class e{constructor(e,t,i,s){this.startAngle=e,this.endAngle=t,this.innerRadius=i,this.outerRadius=s}clone(){const{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=this;return new e(t,i,s,n)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[Zw](t,i){return new e(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function n_(e){let{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=e,o=1/0,r=1/0,a=-1/0,l=-1/0;const c=(e,t)=>{o=Math.min(e,o),r=Math.min(t,r),a=Math.max(e,a),l=Math.max(t,l)};return c(s*Math.cos(t),s*Math.sin(t)),c(s*Math.cos(i),s*Math.sin(i)),c(n*Math.cos(t),n*Math.sin(t)),c(n*Math.cos(i),n*Math.sin(i)),KS(0,t,i)&&c(n,0),KS(.5*Math.PI,t,i)&&c(0,n),KS(Math.PI,t,i)&&c(-n,0),KS(1.5*Math.PI,t,i)&&c(0,-n),new eS(o,r,a-o,l-r)}function o_(e,t,i){const s=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:o}=i;if(i.startAngle===i.endAngle||s<Math.min(n,o)||s>Math.max(n,o))return!1;const r=$S(i.startAngle),a=$S(i.endAngle),l=Math.atan2(t,e);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function r_(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:o}=t,r={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(s),y:o*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Px(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)||Px(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,c.x,c.y)||function(e,t,i,s,n,o,r,a,l,c){if(isNaN(e)||isNaN(t))return 0;o&&([n,s]=[s,n]);const h=(c-a)/(l-r),d=a-h*r,u=Math.pow(h,2)+1,p=2*(h*(d-t)-e),g=Math.pow(e,2)+Math.pow(d-t,2)-Math.pow(i,2),m=Math.pow(p,2)-4*u*g;if(m<0)return 0;const f=(-p+Math.sqrt(m))/2/u,v=(-p-Math.sqrt(m))/2/u;let y=0;return[f,v].forEach((i=>{if(!(i>=Math.min(r,l)&&i<=Math.max(r,l)))return;const o=i-e,a=h*i+d-t;KS(Math.atan2(a,o),s,n)&&y++})),y}(0,0,o,i,s,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function a_(e,t,i,s){if(0===i&&0===s)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*s)/(e+1*s))-t<0)return 1;let n=0,o=1;for(let r=0;r<8;r+=1){const r=(n+o)/2;Math.asin(Math.abs(r*i)/(e+r*i))+Math.asin(Math.abs(r*s)/(e+r*s))-t<0?n=r:o=r}return n}var l_=1e-6;function c_(e,t){return qS(e,t)<l_?t:_S(e-t)+t}function h_(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=Math.abs(t-e)>=2*Math.PI?2*Math.PI:_S(t-e);return{startAngle:e=c_(e,i),endAngle:t=e+s}}function d_(e,t,i,s,n,o){const r=Math.sin(o),a=Math.cos(o),l=e**2+t**2-i**2;let c,h,d,u;if(a>.5){const i=r/a,s=1+i**2,n=-2*(e+t*i),o=n**2-4*s*l;if(o<0)return;const p=(-n+Math.sqrt(o))/(2*s),g=(-n-Math.sqrt(o))/(2*s);c=p,h=p*i,d=g,u=g*i}else{const i=a/r,s=1+i**2,n=-2*(t+e*i),o=n**2-4*s*l;if(o<0)return;const p=(-n+Math.sqrt(o))/(2*s),g=(-n-Math.sqrt(o))/(2*s);c=p*i,h=p,d=g*i,u=g}const p=d*a+u*r,g=c*a+h*r>0?c_(Math.atan2(h-t,c-e),s):NaN,m=p>0?c_(Math.atan2(u-t,d-e),s):NaN;return g>=s&&g<=n?g:m>=s&&m<=n?m:void 0}function u_(e,t,i,s,n,o){const r=Math.hypot(e,t),a=r-(r**2-i**2+o**2)/(2*r),l=Math.atan2(t,e),c=Math.acos(-a/i),h=c_(l+c,s),d=c_(l-c,s);return h>=s&&h<=n?h:d>=s&&d<=n?d:void 0}var p_=class{constructor(e,t,i,s,n){this.cx=e,this.cy=t,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){null==e||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){null==e||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},g_=class extends SD{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return n_(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(null==e)return;const{startAngle:t,endAngle:i}=h_(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),o=h_(e.startAngle,e.endAngle,t);return new s_(Math.max(t,o.startAngle),Math.min(i,o.endAngle),Math.max(s,e.innerRadius),Math.min(n,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,s,n,o,r,a){if(e<=0)return;const{startAngle:l,endAngle:c}=h_(this.startAngle,this.endAngle),{innerRadius:h,outerRadius:d}=this.normalizedRadii(),u=this.normalizedClipSector();if(a&&h<=0)return;const p=a?this.getAngleOffset(h+e):this.getAngleOffset(d-e),g=r?l+p+t:c-p-t,m=a?h+e:d-e,f=m*Math.cos(g),v=m*Math.sin(g);if(null!=u){const e=1e-6;if(!r&&!(g>=l-e&&g<=u.endAngle-e))return;if(r&&!(g>=u.startAngle+e&&g<=c-e))return;if(a&&m<u.innerRadius-e)return;if(!a&&m>u.outerRadius+e)return}const y=new p_(f,v,e,i,s);if(null!=u){let t,c;if(a?(y.clipStart(d_(f,v,e,i,s,u.endAngle)),y.clipEnd(d_(f,v,e,i,s,u.startAngle))):(y.clipStart(d_(f,v,e,i,s,u.startAngle)),y.clipEnd(d_(f,v,e,i,s,u.endAngle))),r?(t=u_(f,v,e,i,s,u.innerRadius),c=u_(f,v,e,i,s,u.outerRadius)):(t=u_(f,v,e,i,s,u.outerRadius),c=u_(f,v,e,i,s,u.innerRadius)),y.clipStart(t),y.clipEnd(c),null!=t){const{x:e,y:i}=y.pointAt(t),s=c_(Math.atan2(i,e),l);r?o?.clipStart(s):n.clipEnd(s)}if(null!=c){const{x:e,y:t}=y.pointAt(c),i=c_(Math.atan2(t,e),l);r?n.clipStart(i):o?.clipEnd(i)}}if(null!=u){const{x:e,y:t}=y.pointAt((y.a0+y.a1)/2);if(!o_(e,t,u))return}const{x:C,y:b}=y.pointAt(r===a?y.a0:y.a1),w=c_(Math.atan2(b,C),l),S=a?o:n;return r?S?.clipStart(w):S?.clipEnd(w),y}updatePath(){const e=1e-6,{path:t,centerX:i,centerY:s,concentricEdgeInset:n,radialEdgeInset:o}=this;let{startOuterCornerRadius:r,endOuterCornerRadius:a,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:h,endAngle:d}=h_(this.startAngle,this.endAngle),{innerRadius:u,outerRadius:p}=this.normalizedRadii(),g=this.normalizedClipSector(),m=d-h,f=m>=2*Math.PI-e;if(t.clear(),0===u&&0===p||u>p)return;if((g?.startAngle??h)===(g?.endAngle??d))return;if(f&&null==this.clipSector&&0===r&&0===a&&0===l&&0===c)return t.moveTo(i+p*Math.cos(h),s+p*Math.sin(h)),t.arc(i,s,p,h,d),u>n&&(t.moveTo(i+u*Math.cos(d),s+u*Math.sin(d)),t.arc(i,s,u,d,h,!0)),void t.closePath();if(null==this.clipSector&&Math.abs(u-p)<1e-6)return t.arc(i,s,p,h,d,!1),t.arc(i,s,p,d,h,!0),void t.closePath();const v=this.getAngleOffset(u),y=this.getAngleOffset(p);if(m<2*y)return;const C=(g?.innerRadius??u)>n,b=u<n||m<2*v,w=p-u,S=Math.max(r,l,a,c),x=S>0?Math.min(w/S,1):1;r*=x,a*=x,l*=x,c*=x;const M=a_(p,m-2*y,-r,-a);if(r*=M,a*=M,!b&&C){const e=a_(u,m-2*v,l,c);l*=e,c*=e}else l=0,c=0;const D=Math.max(r+l,a+c),R=D>0?Math.min(w/D,1):1;r*=R,a*=R,l*=R,c*=R;let E=0,I=0;const A=r/(p-r),k=a/(p-a);if(A>=0&&A<.999999)E=Math.asin(A);else{E=m/2;const e=p/(1/Math.sin(E)+1);r=Math.min(e,r)}if(k>=0&&k<.999999)I=Math.asin(k);else{I=m/2;const e=p/(1/Math.sin(I)+1);a=Math.min(e,a)}const T=Math.asin(l/(u+l)),L=Math.asin(c/(u+c)),P=g?.outerRadius??p,F=this.getAngleOffset(P),N=new p_(0,0,P,h+F,d-F),O=g?.innerRadius??u,B=this.getAngleOffset(O),G=C?new p_(0,0,O,h+B,d-B):void 0;null!=g&&(N.clipStart(g.startAngle),N.clipEnd(g.endAngle),G?.clipStart(g.startAngle),G?.clipEnd(g.endAngle));const z=this.arc(r,E,h-.5*Math.PI,h+E,N,G,!0,!1),j=this.arc(a,I,d-I,d+.5*Math.PI,N,G,!1,!1),V=this.arc(c,L,d+.5*Math.PI,d+Math.PI-L,N,G,!1,!0),H=this.arc(l,T,h+Math.PI+T,h+1.5*Math.PI,N,G,!0,!0);if(b){const e=m<.5*Math.PI?o*(1+Math.cos(m))/Math.sin(m):NaN;let n;n=e>0&&e<p?Math.max(Math.hypot(o,e),u):o,n=Math.max(n,u);const r=h+.5*m;t.moveTo(i+n*Math.cos(r),s+n*Math.sin(r))}else if(!0===H?.isValid()||!0===G?.isValid());else{const e=h+m/2,n=u*Math.cos(e),o=u*Math.sin(e);t.moveTo(i+n,s+o)}if(!0===z?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=z;t.arc(i+e,s+n,o,r,a)}if(N.isValid()){const{r:e,a0:n,a1:o}=N;t.arc(i,s,e,n,o)}if(!0===j?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=j;t.arc(i+e,s+n,o,r,a)}if(!b){if(!0===V?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=V;t.arc(i+e,s+n,o,r,a)}if(!0===G?.isValid()){const{r:e,a0:n,a1:o}=G;t.arc(i,s,e,o,n,!0)}if(!0===H?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=H;t.arc(i+e,s+n,o,r,a)}}t.closePath()}isPointInPath(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:o}=this.clipSector??this;return o_(e-this.centerX,t-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(n,o),outerRadius:Math.max(n,o)})}};g_.className="Sector",$w([LS()],g_.prototype,"centerX",2),$w([LS()],g_.prototype,"centerY",2),$w([LS()],g_.prototype,"innerRadius",2),$w([LS()],g_.prototype,"outerRadius",2),$w([LS()],g_.prototype,"startAngle",2),$w([LS()],g_.prototype,"endAngle",2),$w([FS({equals:(e,t)=>e.equals(t)})],g_.prototype,"clipSector",2),$w([LS()],g_.prototype,"concentricEdgeInset",2),$w([LS()],g_.prototype,"radialEdgeInset",2),$w([LS()],g_.prototype,"startOuterCornerRadius",2),$w([LS()],g_.prototype,"endOuterCornerRadius",2),$w([LS()],g_.prototype,"startInnerCornerRadius",2),$w([LS()],g_.prototype,"endInnerCornerRadius",2);var m_=class extends HD{constructor(){super(...arguments),this.showInLegend=!1}};$w([fx],m_.prototype,"showInLegend",2);var f_=class extends Ek{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};$w([fx],f_.prototype,"text",2),$w([fx],f_.prototype,"spacing",2);var v_=class extends vx{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};$w([fx],v_.prototype,"fill",2),$w([fx],v_.prototype,"fillOpacity",2);var y_=class extends Ek{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};$w([fx],y_.prototype,"offset",2),$w([fx],y_.prototype,"minAngle",2),$w([fx],y_.prototype,"minSpacing",2),$w([fx],y_.prototype,"maxCollisionOffset",2),$w([fx],y_.prototype,"avoidCollisions",2);var C_=class extends Ek{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};$w([fx],C_.prototype,"positionOffset",2),$w([fx],C_.prototype,"positionRatio",2);var b_=class extends vx{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};$w([fx],b_.prototype,"colors",2),$w([fx],b_.prototype,"length",2),$w([fx],b_.prototype,"strokeWidth",2);var w_=class extends ML{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(TP),this.strokes=Object.values(LP),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new yx(f_),this.title=new m_,this.innerCircle=new v_,this.shadow=new wV,this.calloutLabel=new y_,this.sectorLabel=new C_,this.calloutLine=new b_,this.tooltip=DV()}};function S_(e,t,i,s){const n=[i.convert(0),i.convert(1)],o=[s.convert(0),s.convert(1)],r=Math.PI/-2+YS(t),a=e?"initial":"update";return{nodes:{toFn:(e,t,i,s)=>{let{prevLive:o}=s,{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h}=t;const{stroke:d,fill:u}=t.sectorFormat;if("removed"===i&&o?(a=o.datum?.endAngle,l=o.datum?.endAngle):"removed"!==i||o||(a=r,l=r),"removed"===i){const e=(e=>{let{radius:t}=e;return{innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*t}})(t);c=e.innerRadius,h=e.outerRadius}return{startAngle:a,endAngle:l,outerRadius:h,innerRadius:c,stroke:d,fill:u}},fromFn:(t,i,s,n)=>{let{prevFromProps:l}=n,{startAngle:c,endAngle:h,innerRadius:d,outerRadius:u}=t,{fill:p,stroke:g}=i.sectorFormat;if("updated"===s&&null==t.previousDatum&&(s="added"),"unknown"===s||"added"===s&&!l?(c=r,h=r,d=i.innerRadius,u=i.outerRadius):"added"===s&&l&&(c=l.endAngle??r,h=l.endAngle??r,d=l.innerRadius??i.innerRadius,u=l.outerRadius??i.outerRadius),"added"===s&&!e){const e=(e=>{let{radius:t}=e;return{innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*t}})(i);d=e.innerRadius,u=e.outerRadius}return"updated"===s&&(p=t.fill??p,g=("string"===typeof t.stroke?t.stroke:void 0)??g),{startAngle:c,endAngle:h,innerRadius:d,outerRadius:u,fill:p,stroke:g,phase:a}}},innerCircle:{fromFn:(e,t)=>({size:e.previousDatum?.radius??e.size??0,phase:a}),toFn:(e,t)=>({size:t.radius??0})}}}function x_(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,stroke:t.sectorFormat.stroke}}function M_(e,t){const i=t.y-e.centerY,s=t.x-e.centerX,n=Math.atan2(i,s),o=e.getItemNodes();for(const r of o)if(!0!==r.datum.missing&&KS(n,r.startAngle,r.endAngle)){const e=Math.sqrt(s*s+i*i);let t=0;return e<r.innerRadius?t=r.innerRadius-e:e>r.outerRadius&&(t=e-r.outerRadius),{datum:r.datum,distance:t}}}$w([fx],w_.prototype,"angleKey",2),$w([fx],w_.prototype,"angleName",2),$w([fx],w_.prototype,"angleFilterKey",2),$w([fx],w_.prototype,"radiusKey",2),$w([fx],w_.prototype,"radiusName",2),$w([fx],w_.prototype,"radiusMin",2),$w([fx],w_.prototype,"radiusMax",2),$w([fx],w_.prototype,"calloutLabelKey",2),$w([fx],w_.prototype,"calloutLabelName",2),$w([fx],w_.prototype,"sectorLabelKey",2),$w([fx],w_.prototype,"sectorLabelName",2),$w([fx],w_.prototype,"legendItemKey",2),$w([fx],w_.prototype,"defaultColorRange",2),$w([fx],w_.prototype,"defaultPatternFills",2),$w([fx],w_.prototype,"fills",2),$w([fx],w_.prototype,"strokes",2),$w([fx],w_.prototype,"fillOpacity",2),$w([fx],w_.prototype,"strokeOpacity",2),$w([fx],w_.prototype,"lineDash",2),$w([fx],w_.prototype,"lineDashOffset",2),$w([fx],w_.prototype,"cornerRadius",2),$w([fx],w_.prototype,"itemStyler",2),$w([fx],w_.prototype,"rotation",2),$w([fx],w_.prototype,"outerRadiusOffset",2),$w([fx],w_.prototype,"outerRadiusRatio",2),$w([fx],w_.prototype,"innerRadiusOffset",2),$w([fx],w_.prototype,"innerRadiusRatio",2),$w([fx],w_.prototype,"strokeWidth",2),$w([fx],w_.prototype,"sectorSpacing",2),$w([fx],w_.prototype,"hideZeroValueSectorsInLegend",2),$w([fx],w_.prototype,"innerLabels",2),$w([fx],w_.prototype,"title",2),$w([fx],w_.prototype,"innerCircle",2),$w([fx],w_.prototype,"shadow",2),$w([fx],w_.prototype,"calloutLabel",2),$w([fx],w_.prototype,"sectorLabel",2),$w([fx],w_.prototype,"calloutLine",2),$w([fx],w_.prototype,"tooltip",2);var D_=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(D_||{}),R_={angle:["angleKey"],radius:["radiusKey"]},E_={angle:["angleName"],radius:["radiusName"]},I_=class extends kV{constructor(e){let{categoryKey:t,pickModes:i=[1,0],canHaveAxes:s=!1,animationResetFns:n,...o}=e;super({...o,categoryKey:t,pickModes:i,canHaveAxes:s}),this.directions=["angle","radius"],this.itemGroup=this.contentGroup.appendChild(new gM),this.nodeData=[],this.itemSelection=VA.select(this.itemGroup,(()=>this.nodeFactory()),!1),this.labelSelection=VA.select(this.labelGroup,(()=>this.labelFactory()),!1),this.highlightSelection=VA.select(this.highlightGroup,(()=>this.nodeFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=n,this.animationState=new ZA("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setZIndex(e){super.setZIndex(e),this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3]}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}labelFactory(){const e=new AD;return e.pointerEvents=1,e}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",(e=>this.onLegendItemClick(e))),this.ctx.eventsHub.on("legend:item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}getShapeFillBBox(){const e=this.radius;return{series:new eS(-e,-e,2*e,2*e),axis:new eS(-e,-e,2*e,2*e)}}resetAllAnimation(){const{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&jA([this.itemSelection,this.highlightSelection],e),t&&jA([this.labelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){const{item:t}=this.animationResetFns??{};t&&jA([this.highlightSelection],t)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(void 0!==t)return this.itemSelection.select((e=>e instanceof SD&&e.datum===t))[0]}getSeriesRange(e,t){return[NaN,NaN]}isSeriesHighlighted(e,t){const{series:i,legendItemName:s,itemId:n}=e??{},o=t?.[n];return i===this||null!=o&&o===s}},A_=class extends LL{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},k_=class extends I_{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{...R_,sectorLabel:["sectorLabelKey"],calloutLabel:["calloutLabelKey"]},propertyNames:{...E_,sectorLabel:["sectorLabelName"],calloutLabel:["calloutLabelName"]},pickModes:[1,0],animationResetFns:{item:x_,label:CV}}),this.properties=new w_,this.phantomNodeData=void 0,this.backgroundGroup=new vM({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new OB,this.radiusScale=new OB,this.phantomGroup=this.backgroundGroup.appendChild(new gM({name:"phantom"})),this.phantomSelection=VA.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new gM({name:"pieCalloutLabels"})),this.calloutLabelSelection=new VA(this.calloutLabelGroup,gM),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new gM({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new ZL({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new ZL({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new gM({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new gM({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=VA.select(this.innerLabelsGroup,AD),this.innerCircleSelection=VA.select(this.innerCircleGroup,(()=>new ZL({shape:"circle"}))),this.surroundingRadius=void 0,this.NodeEvent=A_,this.angleScale=new OB,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((e=>e+Math.PI/2)),this.phantomGroup.opacity=.2,this.innerLabelsGroup.pointerEvents=1}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e?.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e?.removeChild(this.backgroundGroup)}setZIndex(e){super.setZIndex(e),this.backgroundGroup.zIndex=[0,e]}nodeFactory(){const e=new g_;return e.miterLimit=1e9,e}getSeriesDomain(e){return"angle"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(null==this.data)return;const{visible:t,id:i,ctx:{legendManager:s}}=this,{angleKey:n,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,h=()=>(e,n)=>t&&s.getItemEnabled({seriesId:i,itemId:n})?e:0,d=!this.ctx.animationManager.isSkipped(),u=[],p=[];c?u.push(zO(c,"category",{id:"legendItemKey"})):a?u.push(zO(a,"category",{id:"calloutLabelKey"})):l&&u.push(zO(l,"category",{id:"sectorLabelKey"}));const g=this.radiusScale.type,m=this.angleScale.type;r&&p.push(_O(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:h}),jO(r,g,{id:"radiusRaw",processor:h}),tB("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&p.push(jO(a,"category",{id:"calloutLabelValue"})),l&&p.push(jO(l,"category",{id:"sectorLabelValue"})),c&&p.push(jO(c,"category",{id:"legendItemValue"})),o&&p.push(UO(o,m,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:h}),jO(o,m,{id:"angleFilterRaw"}),tB("angleFilterValue",[0,1],0,0)),d&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&u.length>0&&p.push(pB(this.id,this.processedData)),p.push(oB()),await this.requestDataModel(e,this.data,{props:[...u,UO(n,m,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:h}),jO(n,m,{id:"angleRaw"}),tB("angleValue",[0,1],0,0),...p]});for(const f of this.processedData?.defs?.values??[]){const{id:e,missing:t,property:i}=f,s=uA(this,t);"angleRaw"!==e&&s>0&&xy.warnOnce(`no value was found for the key '${String(i)}' on ${s} data element${s>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){return{angleValues:e.resolveColumnById(this,"angleValue",t),angleRawValues:e.resolveColumnById(this,"angleRaw",t),angleFilterValues:null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterValue",t):void 0,angleFilterRawValues:null!=this.properties.angleFilterKey?e.resolveColumnById(this,"angleFilterRaw",t):void 0,radiusValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,radiusRawValues:this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,calloutLabelValues:this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,sectorLabelValues:this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,legendItemValues:this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0}}createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:o}=this,{rotation:r,innerRadiusRatio:a}=this.properties;if(!i||"ungrouped"!==t?.type)return;const l=this.getProcessedDataValues(i,t),{angleValues:c,angleRawValues:h,angleFilterValues:d,angleFilterRawValues:u,radiusValues:p,radiusRawValues:g,legendItemValues:m}=l,f=u?.some(((e,t)=>e>h[t]))??!1;let v=0,y=0;const C=[],b=null!=u?[]:void 0,w=t.dataSources.get(this.id)??[],S=t.invalidData?.get(this.id);return w.forEach(((t,i)=>{if(!0===S?.[i])return;const a=f?d[i]:c[i],w=null==u||f?1:Math.sqrt(u[i]/h[i]),x=s.convert(v)+YS(r);v=a,y+=a;const M=s.convert(v)+YS(r),D=Math.abs(M-x),R=x+D/2,E=h[i],I=(p?.[i]??1)*w,A=g?.[i],k=m?.[i],T=this.getLabels(i,t,R,D,l),L=this.getSectorFormat(t,i,!1),P={itemId:i,series:this,datum:t,datumIndex:i,angleValue:E,midAngle:R,midCos:Math.cos(R),midSin:Math.sin(R),startAngle:x,endAngle:M,radius:I,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(I),0),sectorFormat:L,radiusValue:A,legendItemValue:k,enabled:o&&n.getItemEnabled({seriesId:e,itemId:i}),focusable:!0,...T};C.push(P),null!=b&&b.push({...P,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})})),this.zerosumOuterRing.visible=0===y,this.zerosumInnerRing.visible=0===y&&null!=a&&1!==a&&a>0,{itemId:e,nodeData:C,labelData:C,phantomNodeData:b}}getLabelContent(e,t,i){const{id:s,ctx:n,properties:o}=this,{formatManager:r}=n,{calloutLabel:a,sectorLabel:l,calloutLabelKey:c,sectorLabelKey:h,legendItemKey:d}=o,u=i.calloutLabelValues?.[e],p=i.sectorLabelValues?.[e],g=i.legendItemValues?.[e],m={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},f={callout:void 0,sector:void 0,legendItem:void 0};return c&&(f.callout=this.getLabelText(u,t,c,"calloutLabel",[],a,{...m,value:u})),h&&(f.sector=this.getLabelText(p,t,h,"sectorLabel",[],l,{...m,value:p})),null!=d&&null!=g&&(f.legendItem=r.format(this.callWithContext.bind(this),{type:"category",value:g,datum:t,seriesId:s,legendItemName:void 0,key:d,source:"legend-label",property:"legendItem",domain:[],boundSeries:this.getFormatterContext("legendItem")})??g),f}getLabels(e,t,i,s,n){const{properties:o}=this,{calloutLabel:r,sectorLabel:a,legendItemKey:l}=o,c=this.getLabelContent(e,t,n),h={};return r.enabled&&c.callout&&s>=YS(r.minAngle)&&(h.calloutLabel={...this.getTextAlignment(i),text:c.callout,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),a.enabled&&c.sector&&(h.sectorLabel={text:c.sector}),l&&c.legendItem&&(h.legendItem={key:l,text:c.legendItem}),h}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"top"},{textAlign:"right",textBaseline:"middle"}],i=$S(e)- -.75*Math.PI,s=function(e,t){return Math.floor(e%t+(e<0?Math.abs(t):0))}(Math.floor(i/(Math.PI/2)),t.length);return t[s]}getNodeFill(e,t,i){return EL(e,{type:"gradient",bounds:"series",colorStops:t.map((e=>({color:e}))),gradient:"radial",rotation:0,reverse:!0},{type:"pattern",pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"none",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0},{type:"image",backgroundFill:i,backgroundFillOpacity:1,fit:"contain",repeat:"no-repeat",rotation:0})}getFillParams(e,t,i){if(qx(e)&&"item"!==e.bounds)return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getSectorFormat(e,t,i,s,n,o){const{angleKey:r,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:h,fills:d,strokes:u,defaultColorRange:p,defaultPatternFills:g,itemStyler:m}=this.properties,f=u[t%u.length],v=d[t%d.length],{fill:y,fillOpacity:C,stroke:b,strokeWidth:w,strokeOpacity:S,lineDash:x,lineDashOffset:M,cornerRadius:D,opacity:R}=yS(this.getHighlightStyle(i,s?.datumIndex,n),{fill:v,stroke:f},this.properties),E=p[t%p.length],I=g[t%g.length],A=y??"black";let k;return m&&(k=this.cachedDatumCallback(this.getDatumId(t)+(i?"-highlight":"-hide"),(()=>this.callWithContext(m,{datum:e,angleKey:r,radiusKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:h,fill:this.getNodeFill(A,E,I),fillOpacity:C,stroke:b,strokeWidth:w,strokeOpacity:S,lineDash:x,lineDashOffset:M,cornerRadius:D,highlighted:i,highlightState:this.getHighlightStateString(o??this.ctx.highlightManager?.getActiveHighlight(),i,t),seriesId:this.id})))),{fill:this.getNodeFill(k?.fill??A,E,I),fillOpacity:k?.fillOpacity??C,stroke:k?.stroke??b,strokeWidth:k?.strokeWidth??w,strokeOpacity:k?.strokeOpacity??S,lineDash:k?.lineDash??x,lineDashOffset:k?.lineDashOffset??M,cornerRadius:k?.cornerRadius??D,opacity:R}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=e=>({...e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;return-e-(2+(this.properties.title?.spacing??0))-Math.max(0,-e)}update(e){let{seriesRect:t}=e;const{title:i}=this.properties,s={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=null!=AM(this.nodeDataDependencies,s);if(n&&(this._nodeDataDependencies=s),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const e=this.getTitleTranslationY();i.node.y=isFinite(e)?e:0;const t=i.node.getBBox(!1);i.node.visible=i.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(t)}for(const o of[this.zerosumInnerRing,this.zerosumOuterRing])o.fillOpacity=0,o.stroke=this.properties.calloutLabel.color,o.strokeWidth=1,o.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(t)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&this.labelGroup?.removeChild(e.node),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){const e=e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(e),this.phantomNodeData?.forEach(e)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,calloutLabelSelection:s,labelSelection:n,innerLabelsSelection:o}=this,r=this.nodeData.map((e=>({...e,sectorFormat:{...e.sectorFormat}}))),a=(e,t)=>{e.update(t,void 0,(e=>this.getDatumId(e.datumIndex))),this.ctx.animationManager.isSkipped()&&e.cleanup()};a(e,this.nodeData),a(t,r),a(i,this.phantomNodeData??[]),s.update(this.calloutNodeData,(e=>{const t=new HA;t.tag=0,t.pointerEvents=1,e.appendChild(t);const i=new AD;i.tag=1,i.pointerEvents=1,e.appendChild(i)})),n.update(this.nodeData),o.update(this.properties.innerLabels,(e=>{e.pointerEvents=1}))}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const e=Math.min(i,this.getOuterRadius()),s=1;t=Math.ceil(2*e+s)}const s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i,dataModel:s,processedData:n}=this;if(this.backgroundGroup.visible=i,this.contentGroup.visible=i,!s||!n)return;const{legendItemValues:o}=this.getProcessedDataValues(s,n),r=this.isSeriesHighlighted(t,o);this.highlightGroup.visible=i&&r,this.labelGroup.visible=i,this.innerCircleSelection.each(((e,t)=>{let{radius:i}=t;e.setProperties({fill:this.getNodeFill(this.properties.innerCircle?.fill,["black"],"black"),opacity:this.properties.innerCircle?.fillOpacity,size:i})}));const a=this.radiusScale.range[0],l=this.radiusScale.range[1],c=this.getShapeFillBBox(),h=this.ctx.animationManager.isSkipped(),d=(e,i,s,n)=>{const r=this.getSectorFormat(i.datum,i.itemId,n,i,o,t);i.sectorFormat.fill=r.fill,i.sectorFormat.stroke=r.stroke,h&&(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.innerRadius=i.innerRadius,e.outerRadius=i.outerRadius),(n||h)&&(e.fill=r.fill,e.stroke=r.stroke);const d=this.getFillParams(r.fill,a,l);kL(e,r,c,d),e.cornerRadius=r.cornerRadius,e.fillShadow=this.properties.shadow;const u=Math.max((this.properties.sectorSpacing+(null!=r.stroke?r.strokeWidth:0))/2,0);e.inset=u,e.lineJoin=this.properties.sectorSpacing>=0||u>0?"miter":"round"};this.itemSelection.each(((e,t,i)=>d(e,t,0,!1))),this.highlightSelection.each(((e,i,s)=>{d(e,i,0,!0),e.visible=i.itemId===t?.itemId})),this.phantomSelection.each(((e,t,i)=>d(e,t,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:{length:e,strokeWidth:t,colors:i},strokes:s}=this.properties,n=t,o=iC(r=i)&&r.every((e=>"string"===typeof e))?i??this.properties.strokes:s;var r;const{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((t=>{const i=t.closestDatum(),{calloutLabel:s,outerRadius:r,datumIndex:l}=i;if(s?.text&&!s.hidden&&0!==r){t.visible=!0,t.strokeWidth=n,t.stroke=o[l%o.length],t.strokeOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,t.fill=void 0;const c=i.midCos*r,h=i.midSin*r;let d=i.midCos*(r+e),u=i.midSin*(r+e);if((s.collisionTextAlign??0!==s.collisionOffsetY)&&null!=s.box){const e=s.box;let t=d,i=u;d<e.x?t=e.x:d>e.x+e.width&&(t=e.x+e.width),u<e.y?i=e.y:u>e.y+e.height&&(i=e.y+e.height);const n=t-d,o=i-u,r=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),l=r-a;l>0&&(d+=n*l/r,u+=o*l/r)}t.x1=c,t.y1=h,t.x2=d,t.y2=u}else t.visible=!1}))}getLabelOverflow(e,t,i){const s=-this.centerX,n=s+i.width,o=-this.centerY,r=o+i.height;let a=1;t.x+1<s?a=(t.x+t.width-s)/t.width:t.x+t.width-1>n&&(a=(n-t.x)/t.width);const l=t.y+1<o||t.y+t.height-1>r;return{textLength:1===a?e.length:Math.floor(e.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(null==t)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some((e=>e.x**2+e.y**2>s))}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,o=e.convert(0),r=this.calloutNodeData,a=r.filter((e=>{return!(!(t=e).calloutLabel||0===t.outerRadius);var t}));if(a.forEach((e=>{const t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((e=>e.midCos<0)).sort(((e,t)=>e.midSin-t.midSin)),c=a.filter((e=>e.midCos>=0)).sort(((e,t)=>e.midSin-t.midSin)),h=a.filter((e=>e.midSin<0&&"center"===e.calloutLabel?.textAlign)).sort(((e,t)=>e.midCos-t.midCos)),d=a.filter((e=>e.midSin>=0&&"center"===e.calloutLabel?.textAlign)).sort(((e,t)=>e.midCos-t.midCos)),u={angleKey:this.properties.angleKey},p=e=>{const n=e.calloutLabel;if(null==n)return eS.zero.clone();const o=Ik(pV(this,e,u,t)),r=e.outerRadius+i.length+s,a=e.midCos*r,l=e.midSin*r+n.collisionOffsetY,c=n.collisionTextAlign??n.textAlign,h=n.textBaseline;return AD.computeBBox(n.text,a,l,{font:this.properties.calloutLabel,textAlign:c,textBaseline:h},!1).grow(o)},g=(e,t,i)=>{const s=p(e).grow(n/2),o=p(t).grow(n/2);s.x<o.x+o.width&&s.x+s.width>o.x&&("to-top"===i?s.y<o.y+o.height:s.y+s.height>o.y)&&(t.calloutLabel.collisionOffsetY="to-top"===i?s.y-o.y-o.height:s.y+s.height-o.y)},m=e=>{const t=e.slice().sort(((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin)))[0],i=e.indexOf(t);for(let s=i-1;s>=0;s--){const t=e[s+1],i=e[s];g(t,i,"to-top")}for(let s=i+1;s<e.length;s++){const t=e[s-1],i=e[s];g(t,i,"to-bottom")}},f=e=>{const t=a.some((e=>0!==e.calloutLabel.collisionOffsetY)),i=e.map((e=>p(e))),s=i.map((e=>e.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const t=s[n];for(let i=n+1;i<e.length;i++){const e=s[i];if(t.collidesBBox(e)){l=!0;break}}}const c=r.map((e=>{const{startAngle:t,endAngle:i,outerRadius:s}=e;return{startAngle:t,endAngle:i,innerRadius:o,outerRadius:s}})),h=i.some((e=>c.some((t=>function(e,t){const i={x:e.x,y:e.y},s={x:e.x+e.width,y:e.y},n={x:e.x,y:e.y+e.height},o={x:e.x+e.width,y:e.y+e.height};return r_({start:i,end:s},t)||r_({start:n,end:o},t)}(e,t)))));(l||t||h)&&e.filter((e=>"center"===e.calloutLabel.textAlign)).forEach((e=>{const t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"}))};m(l),m(c),f(h),f(d)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=new AD;this.calloutLabelSelection.selectByTag(1).forEach((o=>{const r=o.closestDatum(),a=r.calloutLabel,l=t.convert(r.radius),c=Math.max(0,l);if(!a?.text||0===c||a.hidden)return void(o.visible=!1);const h=this.ctx.highlightManager?.getActiveHighlight(),d=this.getHighlightStateString(h,false,r.datumIndex),u=pV(this,r,this.properties,i,false,d),p=c+s.length+i.offset,g=r.midCos*p,m=r.midSin*p+a.collisionOffsetY,f={textAlign:a.collisionTextAlign??a.textAlign,textBaseline:a.textBaseline};n.text=a.text,n.x=g,n.y=m,n.setFont(u),n.setAlign(f),n.setBoxing(u);const v=n.getBBox(!1);let y=a.text,C=!0;if(i.avoidCollisions){const{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(a.text,v,e);y=a.text.length===t?a.text:`${a.text.substring(0,t)}\u2026`,C=!i}o.text=y,o.x=g,o.y=m,o.setFont(u),o.setAlign(f),o.setBoxing(u),o.fill=u.color,o.fillOpacity=this.getHighlightStyle(!1,r.datumIndex).opacity??1,o.visible=C}))}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new AD;let h;const{title:d}=this.properties;if(d?.text&&d.enabled){const e=this.getTitleTranslationY();isFinite(e)&&(c.text=d.text,c.x=0,c.y=e,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(!1),l.push(h))}const u={angleKey:this.properties.angleKey};return this.calloutNodeData.forEach((s=>{const d=s.calloutLabel;if(!d||0===s.outerRadius)return null;const p=pV(this,s,u,i),g=s.outerRadius+n+o,m=s.midCos*g,f=s.midSin*g+d.collisionOffsetY;c.text=d.text,c.x=m,c.y=f,c.setFont(p),c.setAlign({textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline}),c.setBoxing(p);const v=c.getBBox(!1);if(d.box=v,Math.abs(d.collisionOffsetY)>r)d.hidden=!0;else{if(h){const e=-this.centerY,t=new eS(h.x-a,e,h.width+2*a,h.y+h.height+a-e);if(v.collidesBBox(t))return void(d.hidden=!0)}if(e.hideWhenNecessary){const{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(d.text,v,t),n=d.text.length>2&&e<2;if(i||n||s)return void(d.hidden=!0)}d.hidden=!1,l.push(v)}})),0===l.length?null:eS.merge(l)}updateSectorLabelNodes(){const{properties:e}=this,{positionOffset:t,positionRatio:i}=this.properties.sectorLabel,s=this.radiusScale.convert(0),n=s<=0&&1===this.ctx.legendManager.getData(this.id)?.filter((e=>e.enabled)).length,o={textAlign:"center",textBaseline:"middle"};this.labelSelection.each(((r,a)=>{const{outerRadius:l,startAngle:c,endAngle:h}=a;let d=!1;if(a.sectorLabel&&0!==l){const u=this.ctx.highlightManager?.getActiveHighlight(),p=!1,g=this.getHighlightStateString(u,p,a.datumIndex),m=pV(this,a,e,e.sectorLabel,p,g),f=s*(1-i)+l*i+t;r.fill=m.color,r.fillOpacity=this.getHighlightStyle(!1,a.datumIndex).opacity??1,r.text=a.sectorLabel.text,n?(r.x=0,r.y=0):(r.x=a.midCos*f,r.y=a.midSin*f),r.setFont(m),r.setAlign(o),r.setBoxing(m);const v=r.getBBox(!1),y=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],C={startAngle:c,endAngle:h,innerRadius:s,outerRadius:l};y.every((e=>{let[t,i]=e;return o_(t,i,C)}))&&(d=!0)}r.visible=d}))}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each(((i,s)=>{const{fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a,color:l}=s;i.fontStyle=n,i.fontWeight=o,i.fontSize=r,i.fontFamily=a,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",e.push(i.getBBox()),t.push(s.spacing)}));const i=e=>0===e?0:t[e],s=e=>e===t.length-1?0:t[e],n=e.reduce(((e,t)=>e<t.width?t.width:e),0),o=e.reduce(((e,t,n)=>e+t.height+i(n)+s(n)),0),r=this.getInnerRadius(),a=Math.sqrt(Math.pow(n/2,2)+Math.pow(o/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let c=0,h=-o/2;c<e.length;c++){const t=e[c].height+h+i(c);l.push(t),h=t+s(c)}this.innerLabelsSelection.each(((t,i,s)=>{t.visible=a,Array.isArray(t.text)?t.y=l[s]-e[s].height:t.y=l[s]}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}pickNodeClosestDatum(e){return M_(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:n,ctx:{formatManager:o}}=this,{legendItemKey:r,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:p,radiusName:g,tooltip:m}=n,f=this.properties.title.node.getPlainText();if(!i||!s)return;const v=s.dataSources.get(this.id)?.[e],y=this.getProcessedDataValues(i,s),{angleRawValues:C}=y,b=C[e],w=this.getLabelContent(e,v,y),S=w.legendItem??w.callout??w.sector??u,x=i.getDomain(this,"angleRaw","value",s),M=o.format(this.callWithContext.bind(this),{type:"number",value:b,datum:v,seriesId:t,legendItemName:void 0,key:d,source:"tooltip",property:"angle",domain:x,boundSeries:this.getFormatterContext("angle"),fractionDigits:void 0})??BR(b,3);return this.formatTooltipWithContext(m,{title:f,symbol:this.legendItemSymbol(e),data:[{label:S,fallbackLabel:d,value:M}]},{seriesId:t,datum:v,title:u,legendItemKey:r,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:u,radiusKey:p,radiusName:g,...this.getSectorFormat(v,e,!1)})}legendItemSymbol(e){const t=this.processedData?.dataSources.get(this.id)?.[e],i=this.getSectorFormat(t,e,!1),{fillOpacity:s,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:a}=this.properties;let{fill:l}=i;const{stroke:c}=i;return qx(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:c,fillOpacity:s,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){const{visible:t,processedData:i,dataModel:s,id:n,ctx:{legendManager:o}}=this;if(!s||!i||"category"!==e)return[];const{angleKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c,showInLegend:h}=this.properties;if(!c&&(!a||a===r)&&(!l||l===r))return[];const d=this.getProcessedDataValues(s,i),{angleRawValues:u}=d,p=this.properties.title?.showInLegend&&this.properties.title.text,g=[],m=this.properties.hideZeroValueSectorsInLegend,f=i.dataSources.get(this.id),v=i.invalidData?.get(this.id);for(let y=0;y<i.input.count;y++){const e=f?.[y],i=u[y];if(!0===v?.[y]||m&&0===i)continue;const s=[];p&&s.push(p);const C=this.getLabelContent(y,e,d);c&&void 0!==C.legendItem?s.push(C.legendItem):a&&a!==r&&void 0!==C.callout?s.push(C.callout):l&&l!==r&&void 0!==C.sector&&s.push(C.sector),0!==s.length&&g.push({legendType:"category",id:n,datum:e,itemId:y,seriesId:n,hideToggleOtherSeries:!0,enabled:t&&o.getItemEnabled({seriesId:n,itemId:y}),label:{text:s.join(" - ")},symbol:this.legendItemSymbol(y),legendItemName:null!=c?e[c]:void 0,hideInLegend:!h})}return g}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:s}}=this;e.forEach(((e,s)=>i.toggleItem(e,t,s))),i.update(),s.update(5)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=S_(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);OA(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((e,t)=>this.getDatumId(t.datumIndex))),OA(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),vV(this,"callout",t,this.calloutLabelSelection),vV(this,"sector",t,this.labelSelection),vV(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=s?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=0===(a?.moved.size??0),c=(s?.defs.keys.length??0)>0;l&&c&&(s?.reduced?.animationValidation?.uniqueKeys??!0)||this.ctx.animationManager.skipCurrentBatch();const h=!this.nodeData.some((e=>e.enabled)),d=S_(!1,this.properties.rotation,n,o);OA(this.id,"nodes",r,[e,t,i],d.nodes,((e,t)=>this.getDatumId(t.datumIndex)),a),OA(this.id,"innerCircle",r,[this.innerCircleSelection],d.innerCircle),vV(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),vV(this,"sector",this.ctx.animationManager,this.labelSelection),this.noVisibleData!==h&&(this.noVisibleData=h,vV(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=S_(!1,this.properties.rotation,s,n);OA(this.id,"nodes",o,[e,t,i],r.nodes,((e,t)=>this.getDatumId(t.datumIndex))),OA(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),yV(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),yV(this,"sector",this.ctx.animationManager,this.labelSelection),yV(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e){return`${e}`}hasItemStylers(){const{itemStyler:e,calloutLabel:t,sectorLabel:i}=this.properties;return null!=(e??t.itemStyler??i.itemStyler)}};k_.className="DonutSeries",k_.type="donut";var T_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new k_(e),themeTemplate:{series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:BD.LARGE},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{...FF,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{...FF,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"chartBackgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:{$value:"$1"}},{$isPattern:{$value:"$1"}},{$isImage:{$value:"$1"}}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:vF,fillOpacity:1,strokeOpacity:1,strokeWidth:{$isUserOption:["./strokes/0",2,0]},lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},shadow:{enabled:!1,color:OP,xOffset:3,yOffset:3,blur:5},innerLabels:{$apply:{...FF,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},highlight:OF()},legend:{enabled:!0}}},L_={type:"series",name:"donut",chartType:"polar",options:AG,create:e=>new k_(e)},P_=class extends k_{};P_.className="PieSeries",P_.type="pie";var F_={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new P_(e),themeTemplate:{series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:BD.LARGE},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{...FF,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{...FF,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"chartBackgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:{$value:"$1"}},{$isPattern:{$value:"$1"}},{$isImage:{$value:"$1"}}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:vF,fillOpacity:1,strokeOpacity:1,strokeWidth:{$isUserOption:["./strokes/0",2,0]},lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:OP,xOffset:3,yOffset:3,blur:5},highlight:NF()},legend:{enabled:!0}}},N_={type:"series",name:"pie",chartType:"polar",options:EG,create:e=>new P_(e)};function O_(){Yw.register(Vj,dV,cV,zj,nW,kW,WW,XW,t_,T_,F_,KW);for(const e of[BB,wO,jB,IB,GB,UB])bA.register(e.type,{moduleFactory:t=>new e(t)})}function B_(){for(const e of Yw.modules){if("enterprise"!==e.packageType||xA(e)||xy.errorOnce("Unexpected enterprise module registered: "+e.identifier),"root"===e.type&&e.themeTemplate)for(const t of e.chartTypes)AA.set(t,e.themeTemplate);if("series"===e.type){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);kA.register(e.identifier,e)}if("series-option"===e.type&&e.themeTemplate)for(const t of e.seriesTypes)kA.setThemeTemplate(t,e.themeTemplate);if("axis-option"===e.type&&e.themeTemplate)for(const t of e.axisTypes){const i=bA.getThemeTemplate(t),s=yS(e.themeTemplate,i);bA.setThemeTemplate(t,s)}"axis"===e.type&&bA.register(e.identifier,e),"legend"===e.type&&MA.register(e.identifier,e)}if(Yw.hasEnterpriseModules()){const e=wA.filter((e=>{let{useCount:t}=e;return null==t||0===t}));e.length>0&&xy.errorOnce("Enterprise modules expected but not registered: ",e)}}var G_=Symbol("IGNORED_PROP");function z_(e,t){const i={};for(const s of Object.keys(t)){const n=t[s];n!==G_&&Object.hasOwn(e,s)&&(i[s]=n)}return i}function j_(e){const{enabled:t,mode:i,showArrow:s,range:n,position:o,pagination:r,delay:a,wrapping:l,interaction:c,renderer:h,...d}=e,u=z_(e,{enabled:t,showArrow:s,range:n,position:o,interaction:c,renderer:h,...d});return{chartTooltipOptions:z_(e,{enabled:G_,showArrow:G_,range:G_,position:G_,mode:i,pagination:r,delay:a,wrapping:l,...d}),seriesTooltipOptions:u}}function V_(e,t){if(null==t)return e;const{targets:i,...s}=t;return null!=(e=yS(e,s)).targets&&null!=i&&(e.targets=bS(e.targets,i)),e}var H_={stroke:JP},W_={fill:sF},__={color:"white",fill:JP},U_={color:JP},$_={color:tF,fontSize:{$rem:BD.LARGE},fontFamily:{$ref:"fontFamily"}},K_={...$_,fontSize:{$ref:"fontSize"},color:rF,fill:nF,stroke:oF,strokeWidth:1,divider:{stroke:aF,strokeWidth:1,strokeOpacity:.5}},Y_={...H_,background:{fill:iF,fillOpacity:.2},handle:{...W_},text:{...U_},statistics:{...K_}},Z_={line:{...H_,handle:{...W_},text:{...U_}},"horizontal-line":{...H_,handle:{...W_},axisLabel:{...__},text:{...U_}},"vertical-line":{...H_,handle:{...W_},axisLabel:{...__},text:{...U_}},"disjoint-channel":{...H_,background:{fill:iF,fillOpacity:.2},handle:{...W_},text:{...U_}},"parallel-channel":{...H_,background:{fill:iF,fillOpacity:.2},handle:{...W_},text:{...U_}},"fibonacci-retracement":{...H_,strokes:eF,rangeStroke:JP,handle:{...W_},text:{...U_,position:"center"},label:{...$_,color:void 0,fontSize:{$rem:BD.SMALLER}}},"fibonacci-retracement-trend-based":{...H_,strokes:eF,rangeStroke:JP,handle:{...W_},text:{...U_,position:"center"},label:{...$_,color:void 0,fontSize:{$rem:BD.SMALLER}}},callout:{...H_,...$_,color:{$ref:"textColor"},handle:{...W_},fill:iF,fillOpacity:.2},comment:{...$_,color:"white",fontWeight:700,handle:{...W_},fill:JP},note:{...$_,color:uF,fill:JP,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...W_},background:{fill:hF,stroke:dF,strokeWidth:1}},text:{...$_,handle:{...W_}},arrow:{...H_,handle:{...W_},text:{...U_}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...W_,stroke:JP}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...W_,stroke:JP}},"date-range":{...Y_},"price-range":{...Y_},"date-price-range":{...Y_},"quick-date-price-range":{up:{...H_,fill:iF,fillOpacity:.2,handle:{...W_},statistics:{...K_,color:"#fff",fill:iF,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...H_,stroke:cF,fill:lF,fillOpacity:.2,handle:{...W_,stroke:cF},statistics:{...K_,color:"#fff",fill:lF,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}},q_=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],Q_=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];var X_="range-area";function J_(e,t){return[{type:"candlestick",focusPriority:0,...e,...t}]}function eU(e,t){return t[e]??t.default}var tU={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:XP,lineDash:[0],label:{enabled:!1}}},iU={...tU,nice:!1},sU={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},nU={style:[{stroke:{$ref:"gridLineColor"}}],width:2},oU={number:{gridLine:nU},time:{gridLine:nU},category:{gridLine:nU}},rU={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...iU,interval:{values:[0]}},log:{...iU},time:{...iU},category:{...tU}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...sU,position:{...sU.position,anchorTo:"pointer"},range:"nearest"},axes:oU},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:sU},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:sU}}},aU=pE((function(e,t){if("string"===typeof e)return{...t,baseTheme:e};if(null!=e)return{...e,baseTheme:aU(e.baseTheme,t)};return t}));function lU(e){if(Array.isArray(e)&&0!==e.length){const t=e.find((e=>null!=e));if("number"===typeof t){const t=e.map(((e,t)=>({x:t,y:e})));return{data:t,series:[{xKey:"x",yKey:"y"}],datumKey:"y"}}if(Array.isArray(t)){return{data:e.map((e=>({x:e?.[0],y:e?.[1],datum:e}))),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}}else if(0===e?.length)return{data:e,series:[{xKey:"x",yKey:"y"}],datumKey:"y"};return{data:e}}function cU(e){switch(e?.type){case"number":{const{type:t,min:i,max:s,reverse:n}=e;return z_(e,{type:t,reverse:n,min:i,max:s})}case"time":{const{type:t,min:i,max:s,reverse:n}=e;return z_(e,{type:t,reverse:n,min:i,max:s})}default:{const{paddingInner:t,paddingOuter:i,reverse:s}=e??{};return z_({...e,type:"category"},{type:"category",reverse:s,paddingInner:t,paddingOuter:i})}}}function hU(e,t,i){const s={};return null!=e?.stroke&&(s.style=[{stroke:e?.stroke}],s.enabled??(s.enabled=!0)),null!=e?.strokeWidth&&(s.width=e?.strokeWidth,s.enabled??(s.enabled=!0)),"bar"===i.type&&"horizontal"!==i.direction&&(s.enabled??(s.enabled=!0)),null!=e?.visible&&(s.enabled=e.visible),s.enabled??(s.enabled=t),s}var dU=pE(((e,t,i)=>s=>{const n=s.datum[s.xKey],o=s.datum[s.yKey],r=null!=i?s.datum[i]:s.datum,a=t?.renderer?.({context:e,datum:r,xValue:n,yValue:o});if("string"===typeof a)return a;const l=a?.content??o.toFixed(2);return a?.title?{heading:void 0,title:void 0,data:[{label:a.title,value:l}]}:{heading:void 0,title:l,data:[]}}));var uU={chartType:rb("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:qC,openKey:qC,highKey:qC,lowKey:qC,closeKey:qC,volumeKey:qC,navigator:WC,volume:WC,rangeButtons:WC,statusBar:WC,toolbar:WC,zoom:WC,sync:WC,theme:KC,container:KC,width:KC,height:KC,minWidth:KC,minHeight:KC,listeners:KC,initialState:KC,title:KC,data:HC,formatter:KC},pU={theme:KC,container:KC,animation:KC,background:KC,contextMenu:KC,context:()=>!0,listeners:KC,locale:KC,width:KC,height:KC,minWidth:KC,minHeight:KC,title:KC,subtitle:KC,footnote:KC,padding:KC,tooltip:{...UN,...BN.tooltip}};pU.overrideDevicePixelRatio=FC(tb);var gU=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],mU={visible:WC,reverse:WC,stroke:UC,strokeWidth:tb},fU={context:()=>!0,tooltip:KC,theme:KC,background:KC,container:KC,width:KC,height:KC,minWidth:KC,minHeight:KC,padding:KC,listeners:KC,locale:KC,data:KC,styleNonce:qC,axis:GC({number:{...mU,min:zC(YC,nb("max")),max:zC(YC,ob("min"))},category:{...mU,paddingInner:sb,paddingOuter:sb},time:{...mU,min:zC(jC(YC,$C),nb("max")),max:zC(jC(YC,$C),ob("min"))}},"axis options","category"),min:zC(YC,nb("max")),max:zC(YC,ob("min")),crosshair:{enabled:WC,snap:WC,...bb,...Eb},xKey:qC,yKey:qC},vU={type:"preset",name:"price-volume",enterprise:!0,options:uU,create:function(e,t,i){const{dateKey:s="date",highKey:n="high",openKey:o="open",lowKey:r="low",closeKey:a="close",volumeKey:l="volume",chartType:c="candlestick",navigator:h=!1,volume:d=!0,rangeButtons:u=!0,statusBar:p=!0,toolbar:g=!0,zoom:m=!0,sync:f=!1,theme:v,data:y,formatter:C,...b}=e,w=function(e,t,i,s,n,o){const r={xKey:t,openKey:n,closeKey:o,highKey:i,lowKey:s},a={xKey:t,yKey:o},l={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return function(e,t){return[{type:"ohlc",focusPriority:0,...e,...t}]}(l,r);case"line":case"step-line":return function(e,t){return[{type:"line",focusPriority:0,...e,...t}]}(l,a);case"hlc":return function(e,t,i){let{xKey:s,highKey:n,closeKey:o,lowKey:r}=i;return[{type:X_,focusPriority:0,...e,xKey:s,yHighKey:n,yLowKey:o,fill:VP,stroke:zP},{type:X_,focusPriority:0,...e,xKey:s,yHighKey:o,yLowKey:r,fill:HP,stroke:jP},{type:"line",...e,...t}]}(l,a,r);case"high-low":return function(e,t){let{xKey:i,highKey:s,lowKey:n}=t;return[{type:"range-bar",...e,xKey:i,yHighKey:s,yLowKey:n,fill:_P,stroke:WP,tooltip:{range:"nearest"},focusPriority:0}]}(l,r);case"candlestick":case"hollow-candlestick":return J_(l,r);default:return xy.warnOnce(`unknown chart type: ${e}; expected one of: ${q_.join(", ")}`),J_(l,r)}}(c,s,n,r,o,a),S=function(e,t,i,s,n){return s?[{type:"bar",xKey:"date",yKey:n,tooltip:{enabled:!1},itemStyler(s){let{datum:n}=s;const{up:o,down:r}=e().palette;return{fill:n[t]<n[i]?o?.fill:r?.fill}},focusPriority:1,highlight:{enabled:!1}}]:[]}(i,o,a,d,l),x={navigator:{enabled:h,...d?{miniChart:{enabled:h,series:[{type:"line",xKey:s,yKey:l,stroke:yF,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},M={annotations:{enabled:g,optionsToolbar:{enabled:g},snap:!0,toolbar:{enabled:g,buttons:Q_,padding:0},data:y,xKey:s,volumeKey:d?l:void 0}},D=p?{statusBar:{enabled:!0,data:y,highKey:n,openKey:o,lowKey:r,closeKey:a,volumeKey:d?l:void 0}}:null,R={zoom:{enabled:m,autoScaling:{enabled:!0},enableIndependentAxes:!0}},E={ranges:{enabled:u}},I=f?{sync:{enabled:f,nodeInteraction:!0,zoom:!0}}:null,A=d?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:"string"===typeof v?v:"ag-financial",...yS("object"===typeof v?v:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:6},chartToolbar:{enabled:g},annotations:{...Z_},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...eU(c,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}})}},candlestick:{series:{...eU(c,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...S,...w],axes:[{type:"number",position:"right",keys:[o,a,n,r],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...A,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:y,formatter:C,...M,...x,...D,...R,...E,...I,...b}}},yU={type:"preset",name:"gauge-preset",enterprise:!0,options:GC({"linear-gauge":{...SS(XN,["type"]),...pU},"radial-gauge":{...SS(eO,["type"]),...pU}},"gauge options"),create:function(e,t){switch(e.type){case"radial-gauge":return function(e){const{animation:t,background:i,container:s,contextMenu:n,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:u,padding:p,subtitle:g,theme:m,title:f,width:v,type:y,cursor:C,nodeClickRange:b,tooltip:w={},value:S,scale:x={},startAngle:M,endAngle:D,highlightStyle:R,highlight:E,segmentation:I,bar:A,needle:k,targets:T,outerRadius:L,innerRadius:P,outerRadiusRatio:F,innerRadiusRatio:N,cornerRadius:O,cornerMode:B,label:G,secondaryLabel:z,spacing:j,...V}=e,{chartTooltipOptions:H,seriesTooltipOptions:W}=j_(w);return{...z_(e,{animation:t,background:i,container:s,contextMenu:n,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:u,padding:p,subtitle:g,theme:m,title:f,tooltip:H,width:v}),series:[z_(e,{needle:null!=k?{enabled:!0,...k}:G_,startAngle:M,endAngle:D,scale:x,type:y,cursor:C,context:o,nodeClickRange:b,tooltip:W,value:S,highlightStyle:R,highlight:E,segmentation:I,bar:A,targets:T,outerRadius:L,innerRadius:P,outerRadiusRatio:F,innerRadiusRatio:N,cornerRadius:O,cornerMode:B,label:G,secondaryLabel:z,spacing:j,...V})]}}(V_(e,t));case"linear-gauge":return function(e){const{animation:t,background:i,container:s,contextMenu:n,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:u,padding:p,subtitle:g,theme:m,title:f,width:v,type:y,cursor:C,nodeClickRange:b,tooltip:w={},value:S,scale:x={},direction:M="vertical",thickness:D,highlightStyle:R,highlight:E,segmentation:I,bar:A,targets:k,cornerRadius:T,cornerMode:L,label:P,...F}=e,{chartTooltipOptions:N,seriesTooltipOptions:O}=j_(w);return{...z_(e,{animation:t,background:i,container:s,contextMenu:n,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:u,padding:p,subtitle:g,theme:m,title:f,tooltip:N,width:v}),series:[z_(e,{scale:x,type:y,cursor:C,context:o,nodeClickRange:b,tooltip:O,value:S,direction:M,thickness:D,highlightStyle:R,highlight:E,segmentation:I,bar:A,targets:k,cornerRadius:T,cornerMode:L,label:P,...F})]}}(V_(e,t));default:return{}}}},CU={type:"preset",name:"sparkline",options:GC({area:{...fU,...SS(uG,gU)},bar:{...fU,...SS(mG,gU)},line:{...fU,...SS(SG,gU)}},"sparkline options"),create:function(e){const{background:t,container:i,height:s,listeners:n,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:h,theme:d,data:u,crosshair:p,axis:g,min:m,max:f,tooltip:v,context:y,styleNonce:C,...b}=e,w=z_(e,{background:t,container:i,height:s,listeners:n,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:h,styleNonce:C,tooltip:G_,context:G_,data:G_,crosshair:G_,axis:G_,min:G_,max:G_,theme:G_}),{data:S,series:[x]=[],datumKey:M}=lU(u),D=b;null!=x&&Object.assign(D,x),D.tooltip={...v,renderer:dU(y,v,M)},w.theme=aU(d,rU),w.data=S,w.series=[D];const R="bar"!==D.type||"horizontal"!==D.direction,[E,I]=R?["bottom","left"]:["left","bottom"],A={...cU(g),position:E,...z_(e,{crosshair:p})},k={type:"number",gridLine:hU(g,!1,e),position:I,...z_(e,{min:m,max:f})};return w.axes=R?[k,A]:[A,k],w},processData:lU},bU=["top","right","bottom","left"],wU=class e extends IP{constructor(e,t){super(e,t),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(e,t){super.onAxisChange(e,t),this.syncAxisChanges(e,t),null!=this.ctx&&this.ctx.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(e){const{seriesRoot:t,annotationRoot:i}=this;t.setClipRect(e),i.setClipRect(e)}async processData(){await super.processData(),"init"===this.syncStatus&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){await super.processDomains();for(const e of this.axes){const t=await this.getSyncedDomain(e);null!=t&&e.setDomains(t)}}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{clipSeries:s,seriesRect:n,visible:o}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=o,this.seriesRect=n,this.animationRect=e.layoutBox;const{x:r,y:a}=n;if(e.width!==this.lastLayoutWidth||e.height!==this.lastLayoutHeight)for(const u of[t,i])u.translationX=Math.floor(r),u.translationY=Math.floor(a);else{const{translationX:e,translationY:s}=t;BA(this.id,"seriesRect",this.ctx.animationManager,[t,i],{translationX:e,translationY:s},{translationX:Math.floor(r),translationY:Math.floor(a)},{phase:"update"})}this.lastLayoutWidth=e.width,this.lastLayoutHeight=e.height;const l=this.modulesManager.getModule("seriesArea"),c=n.clone().grow(l.getPadding()),h=l.clip||s?c:void 0,{lastUpdateClipRect:d}=this;this.lastUpdateClipRect=h,this.ctx.animationManager.isActive()&&null!=d?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:d,to:c,onUpdate:e=>this.setRootClipRects(e),onComplete:()=>this.setRootClipRects(h)}):this.setRootClipRects(h),this.ctx.layoutManager.emitLayoutComplete(e,{axes:this.axes.map((e=>e.getLayoutState())),series:{visible:o,rect:n,paddedRect:c},clipSeries:s})}updateAxes(e){const{clipSeries:t,seriesRect:i,overflows:s}=this.resolveAxesLayout(e);for(const n of this.axes)n.update(),n.setCrossLinesVisible(!s),this.clipAxis(n,i,e);return{clipSeries:t,seriesRect:i,visible:!s}}resolveAxesLayout(e){let t,i,s=0;do{if(i=t??this.getDefaultState(),t=this.updateAxesPass(new Map(i.axisAreaWidths),e.clone()),s++>10){xy.warn("Max iterations reached. Unable to stabilize axes layout.");break}}while(!this.isLayoutStable(t,i));return this.lastAreaWidths=t.axisAreaWidths,t}updateAxesPass(t,i){const s=new Map,n={};let o=!1,r=!1;for(const e of bU){const t=this.modulesManager.getModule("seriesArea").getPadding()[e],s=this.axes.findLast((t=>t.position===e));s?s.seriesAreaPadding=t:i.shrink(t,e)}const a=(t.get("left")??0)+(t.get("right")??0),l=(t.get("top")??0)+(t.get("bottom")??0),c=this.buildCrossLinePadding(t),h=c.left+c.right,d=c.top+c.bottom;i.width<=a+h||i.height<=l+d?o=!0:i.shrink(c);const{scene:u}=this.ctx,p=i.clone().shrink(Object.fromEntries(t));for(const e of this.axes){const{position:t="left",direction:i}=e,o="y"===i;let a;if(this.sizeAxis(e,p,t),null==e.thickness){a=xU(o,u)*(e.maxThicknessRatio??1)}else a=e.thickness;const{primaryTickCount:l,bbox:c}=e.calculateLayout(e.nice?n[i]:void 0,{sizeLimit:a,padding:this.padding});n[i]??(n[i]=l),r||(r=e.dataDomain.clipped||e.visibleRange[0]>0||e.visibleRange[1]<1),null==e.thickness&&(a=Math.min(xU(o,c)??0,a)),s.set(e.id,Math.ceil(a))}const g=Vb(this.axes,(e=>e.position??"left")),m=new Map,f=new Map;for(const[v,y]of qb(g)){let t=xU("left"!==v&&"right"!==v,u)%u.pixelRatio,i=0;for(const n of y??[]){f.set(n.id,t);const o=s.get(n.id)??0;i=Math.max(i,t+o),n.layoutConstraints.stacked&&(t+=o+e.AxesPadding)}m.set(v,Math.ceil(i))}for(const[e,v]of qb(g))this.positionAxes({axes:v??[],position:e,axisWidths:s,axisOffsets:f,axisAreaWidths:m,axisBound:i,seriesRect:p});return{clipSeries:r,seriesRect:p,axisAreaWidths:m,overflows:o}}buildCrossLinePadding(e){const t={top:0,right:0,bottom:0,left:0};this.axes.forEach((e=>{const{position:i,label:s}=e;e.crossLines?.forEach((e=>{var n;e instanceof Vk&&(e.position=i??"top",(n=e.label).parallel??(n.parallel=s.parallel)),e.calculatePadding?.(t)}))}));for(const[i,s=0]of qb(t))t[i]=Math.max(s-(e.get(i)??0),0);return t}clampToOutsideSeriesRect(e,t,i,s){const n="x"===i?e.x:e.y,o="x"===i?e.width:e.height;return 1===s?Math.min(t,n+o):Math.max(t,n)}async getSyncedDomain(e){const t=this.modulesManager.getModule("sync");if(t?.enabled)return await t.getSyncedDomain(e)}syncAxisChanges(e,t){const i=this.modulesManager.getModule("sync");if(!i?.enabled)return;const s=new Set(t??[]);for(const n of e)s.delete(n);for(const n of s)i.removeAxis(n)}sizeAxis(e,t,i){const s=e instanceof BB,n="left"===i||"right"===i,{width:o,height:r}=t,a=n?r:o;let l=0,c=a,{min:h,max:d}=this.ctx.zoomManager.getAxisZoom(e.id);const{width:u,unit:p,align:g}=e.layoutConstraints;c="px"===p?l+u:c*u/100,"end"===g&&(l=a-(c-l),c=a),n&&(s?[l,c]=[c,l]:[h,d]=[1-d,1-h]),e.range=[l,c],e.visibleRange=[h,d],e.gridLength=n?o:r}positionAxes(e){const{axes:t,axisBound:i,axisWidths:s,axisOffsets:n,axisAreaWidths:o,seriesRect:r,position:a}=e,l=o.get(a)??0;let c="x",h="y",d=1;"top"!==a&&"bottom"!==a||(c="y",h="x");let u=i[c];"right"!==a&&"bottom"!==a||(d=-1,u+="x"===c?i.width:i.height);for(const p of t){const e=o.get("x"===h?"left":"top")??0,t=s.get(p.id)??0,a=n.get(p.id)??0;p.gridPadding=l-a-t,p.translation[h]=i[h]+e,p.translation[c]=this.clampToOutsideSeriesRect(r,u+d*(a+t),c,d)}}shouldFlipXY(){return this.series.every((e=>e instanceof OV&&e.shouldFlipXY()))}getDefaultState(){const e=new Map;if(this.lastAreaWidths)for(const{position:t="left"}of this.axes){const i=this.lastAreaWidths.get(t);null!=i&&e.set(t,i)}return{axisAreaWidths:e,clipSeries:!1,overflows:!1}}isLayoutStable(e,t){if(t.overflows!==e.overflows||t.clipSeries!==e.clipSeries)return!1;for(const i of e.axisAreaWidths.keys())if(!t.axisAreaWidths.has(i))return!1;for(const[i,s]of t.axisAreaWidths.entries()){const t=e.axisAreaWidths.get(i);if((null!=s||null!=t)&&s!==t)return!1}return!0}clipAxis(e,t,i){const s=Math.ceil(e.gridLine?.width??0),n=Math.ceil(e.line?.width??0);let{width:o,height:r}=t;switch(o+="x"===e.direction?s:n,r+="y"===e.direction?s:n,e.clipGrid(t.x,t.y,o,r),e.position){case"left":case"right":e.clipTickLines(i.x,t.y-s,i.width+s,t.height+2*s);break;case"top":case"bottom":e.clipTickLines(t.x-s,i.y,t.width+2*s,i.height+s)}}};wU.className="CartesianChart",wU.type="cartesian",wU.AxesPadding=15;var SU=wU;function xU(e,t){return e?t?.width:t?.height}var MU={mode:FC(rb("integrated","standalone")),container:QC,context:()=>!0,theme:KC,series:HC,annotations:KC,navigator:KC,initialState:{chartType:qC,annotations:KC,legend:cb({visible:WC,seriesId:qC,itemId:qC,legendItemName:qC},"legend state array"),zoom:KC}},DU={...BN,...MU,axes:XC(2),data:HC},RU={...BN,...MU,axes:XC(2),data:HC},EU={...BN,...MU,data:HC,topology:Sw},IU={...BN,...MU,data:HC},AU=new Set(["number","log","time"]),kU=e=>rC(e)&&!AU.has(e.type),TU={type:"chart",name:"cartesian",options:DU,detect:aL,create:(e,t)=>new SU(e,t),validate(e,t,i){const s=[];"histogram"===e?.series?.[0]?.type&&e?.axes?.some(kU)&&(s.push(new AC("invalid","only continuous axis types when histogram series is used",e.axes,i,"axes")),e=SS(e,["axes"]));const n=TC(e,t,i);return n.invalid.push(...s),n}},LU=()=>{throw new Error("Enterprise module placeholder cannot be initialised")},PU={type:"chart",name:"standalone",placeholder:!0,options:{},detect:cL,create:LU},FU={type:"chart",name:"topology",placeholder:!0,options:{},detect:lL,create:LU},NU=class extends rT{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}layoutCrossLines(){const e=this.label.getSideFlag(),t=this.hasDefinedDomain()||this.hasVisibleSeries(),{rotation:i,parallelFlipRotation:s,regularFlipRotation:n}=this.calculateRotations();this.crossLines.forEach((o=>{o.sideFlag=-e,o.direction=i===-Math.PI/2?"angle":"radius",o.parallelFlipRotation=s,o.regularFlipRotation=n,o.calculateLayout?.(t,this.reverse)}))}updatePosition(){super.updatePosition();const e=Math.floor(this.translation.x),t=Math.floor(this.translation.y);this.tickLineGroup.translationX=e,this.tickLineGroup.translationY=t,this.tickLabelGroup.translationX=e,this.tickLabelGroup.translationY=t,this.crossLineRangeGroup.translationX=e,this.crossLineRangeGroup.translationY=t,this.crossLineLineGroup.translationX=e,this.crossLineLineGroup.translationY=t,this.crossLineLabelGroup.translationX=e,this.crossLineLabelGroup.translationY=t,this.tickLabelGroupSelection.each(((e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})))}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};$w([fx],NU.prototype,"shape",2),$w([fx],NU.prototype,"innerRadiusRatio",2);var OU=class extends IP{constructor(e,t){super(e,t),this.padding=new GM(40),this.ctx.axisManager.axisGroup.zIndex=8}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e,i=t.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach((e=>e.update())),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:t}})}updateAxes(e,t,i,s){const n=this.axes.find((e=>"angle"===e.direction)),o=this.axes.find((e=>"radius"===e.direction));if(!(n instanceof NU)||!(o instanceof NU))return;const r=n.scale,a=o.innerRadiusRatio;n.innerRadiusRatio=a,n.computeRange(),n.gridLength=s,o.gridAngles=r.ticks({nice:n.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map((e=>r.convert(e))),o.gridRange=n.range,o.range=[s,s*a],[n,o].forEach((s=>{s.translation.x=e.x+t,s.translation.y=e.y+i,s.calculateLayout()}))}async computeCircle(e){var t=this;const i=this.series.filter(BU),s=this.axes.filter(GU),n=(t,s,n)=>{this.updateAxes(e,t,s,n),i.forEach((e=>{e.centerX=t,e.centerY=s,e.radius=n}));const o=i.filter((e=>"donut"===e.type||"pie"===e.type));if(o.length>1){const e=o.map((e=>{const t=e.getInnerRadius();return{series:e,innerRadius:t}})).sort(((e,t)=>e.innerRadius-t.innerRadius));e.at(-1).series.surroundingRadius=void 0;for(let t=0;t<e.length-1;t++)e[t].series.surroundingRadius=e[t+1].innerRadius}},o=e.width/2,r=e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2);let l=a;n(o,r,l);const c=async function(){let{hideWhenNecessary:c=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const h=[];for(const t of Yb(s,i)){const i=await t.computeLabelsBBox({hideWhenNecessary:c},e);i&&h.push(i)}if(0===h.length)return void n(o,r,a);const d=eS.merge(h),u=t.refineCircle(d,l,e);n(u.centerX,u.centerY,u.radius),l=u.radius};await c(),await c(),await c(),await c({hideWhenNecessary:!0}),await c({hideWhenNecessary:!0});for(const h of Yb(s,i))await h.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:l,centerX:o,centerY:r}}refineCircle(e,t,i){const s=-t,n=-t,o=t,r=t;let a=Math.max(0,s-e.x),l=Math.max(0,n-e.y),c=Math.max(0,e.x+e.width-o),h=Math.max(0,e.y+e.height-r);a=c=Math.max(a,c),l=h=Math.max(l,h);const d=i.width-a-c,u=i.height-l-h;let p=Math.min(d,u)/2;const g=.5*i.width/2,m=.5*i.height/2,f=Math.min(g,m);if(p<f){p=f;const e=a+c;if(2*p+(l+h)>i.height){const e=i.height-2*p;2*Math.min(l,h)>e?(l=e/2,h=e/2):l>h?l=e-h:h=e-l}if(2*p+e>i.width){const e=i.width-2*p;2*Math.min(a,c)>e?(a=e/2,c=e/2):a>c?a=e-c:c=e-a}}const v=a+2*p+c,y=l+2*p+h;return{centerX:(i.width-v)/2+a+p,centerY:(i.height-y)/2+l+p,radius:p}}};function BU(e){return e instanceof I_}function GU(e){return e instanceof NU}OU.className="PolarChart",OU.type="polar";var zU={type:"chart",name:"polar",options:RU,detect:function(e){const t=rL(e);return EA.isPolar(t)||function(e){const t=SA(e)?.find((e=>"polar"===e));return"polar"===t}(t)},create:(e,t)=>new OU(e,t),validate(e,t,i){const s=[],n=e?.series?.[0]?.type;"pie"!==n&&"donut"!==n||e?.axes&&(s.push(new kC([],e.axes,i,"axes")),e=SS(e,["axes"]));const o=TC(e,t,i);return o.invalid.push(...s),o}},jU=[...[TU,XB,JB,eG,tG,iG,sG,oW,TW,_W,YW,JW,i_],...[zU,L_,N_],PU,FU,vU,yU,CU],VU=class e{constructor(e,t,i,s,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e3;this.name=e,this.buildItem=t,this.releaseItem=i,this.destroyItem=s,this.maxPoolSize=n,this.cleanupTimeMs=o,this.freePool=[],this.busyPool=new Set}static getPool(t,i,s,n,o){return this.pools.has(t)||this.pools.set(t,new e(t,i,s,n,o)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(t){if(!this.hasFree()&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return null==i?(i=this.buildItem(t),e.debug((()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i]))):e.debug((()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i])),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){const t=this.freePool.pop();if(null==t)throw new Error("AG Charts - pool has no free instances");return e.debug((()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,t])),this.busyPool.add(t),{item:t,release:()=>this.release(t)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");e.debug((()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t])),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),e.debug((()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]));const i=Date.now(),s=i+.5*this.cleanupTimeMs;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<s&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=i+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){const t=this.freePool.splice(0);for(const e of t)this.destroyItem(e);e.debug((()=>[`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`]))}destroy(){this.cleanPool();for(const e of this.busyPool.values())this.destroyItem(e);this.busyPool.clear()}};VU.pools=new Map,VU.debug=iS.create(!0,"pool");var HU=VU;Fy.registerMany(jU,YD);var WU=iS.create(!0,"opts"),_U=class{static licenseCheck(e){this.licenseChecked||(this.licenseManager=Yz.licenseManager?.(e),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(e){return Yz.licenseManager?.({}).getLicenseDetails(e)}static getInstance(e){return $U.getInstance(e)}static create(e,t){const i=iS.check("scene:stats","scene:stats:verbose")?performance.now():void 0;return WU.group("AgCharts.create()",(()=>{e=iS.inDevelopmentMode((()=>IS(TM(e))))??e,this.licenseCheck(e);const s=$U.createOrUpdate({userOptions:e,licenseManager:this.licenseManager,optionsMetadata:t,apiStartTime:i});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&Yz.injectWatermark?.(s.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),s}))}static createFinancialChart(e){return WU.group("AgCharts.createFinancialChart()",(()=>this.create(e,{presetType:"price-volume"})))}static createGauge(e){return WU.group("AgCharts.createGauge()",(()=>this.create(e,{presetType:"gauge-preset"})))}static __createSparkline(e){return WU.group("AgCharts.__createSparkline()",(()=>{const{pool:t,...i}=e;return this.create(i,{presetType:"sparkline",pool:t??!0,domMode:"minimal",withDragInterpretation:!1})}))}};_U.licenseChecked=!1;var UU=class e{static getInstance(e){const t=IP.getInstance(e);return t?Bj.chartInstances.get(t):void 0}static initialiseModules(){e.initialised||(O_(),B_(),e.initialised=!0)}static createOrUpdate(t){let{proxy:i}=t;const{userOptions:s,licenseManager:n,processedOverrides:o=i?.chart?.chartOptions.processedOverrides??{},specialOverrides:r=i?.chart?.chartOptions.specialOverrides??{},optionsMetadata:a=i?.chart?.chartOptions.optionMetadata??{},deltaOptions:l,data:c,stripSymbols:h=!1,apiStartTime:d}=t,u=null!=Yz.styles?[["ag-charts-enterprise",Yz.styles]]:[];e.initialiseModules(),WU((()=>[">>> AgCharts.createOrUpdate() user options",TM(s)]));const{presetType:p}=a;let g=s;_U.optionsMutationFn&&g&&(g=_U.optionsMutationFn(TM(g,Pj.OPTIONS_CLONE_OPTS_FAST),p),WU((()=>[">>> AgCharts.createOrUpdate() MUTATED user options",TM(g)])));const m=this.getPool(a);let f,v=!1,y=i?.chart;null==y&&m?.hasFree()&&(f=m.obtainFree(),y=f.item);const{document:C,window:b,styleContainer:w,...S}=g??{},x=y?.getChartOptions(),M=new Pj(x,S,o,{...r,document:C,window:b,styleContainer:w},a,l,h,d);return null!=y&&Fy.detectChartDefinition(M.processedOptions)===Fy.detectChartDefinition(y.chartOptions.processedOptions)||(f?.release(),f=this.getPool(M.optionMetadata)?.obtain(M),f?y=f.item:(v=!0,y=e.createChartInstance(M,y))),u.forEach((e=>{let[t,i]=e;y.ctx.domManager.addStyles(t,i)})),y.ctx.fontManager.updateFonts(M.googleFonts),null!=c&&y.ctx.dataService.restoreData(c),null==i?(i=new Bj(y,e.callbackApi,n),i.releaseChart=f?.release):(f||v)&&(i.releaseChart?.(),i.chart=y,i.releaseChart=f?.release),WU.check()&&"undefined"!==typeof window&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[y.id]=y),y.queuedUserOptions.push(M.userOptions),y.queuedChartOptions.push(M),y.requestFactoryUpdate((e=>{WU.group(">>>> Chart.applyOptions()",(()=>{e.applyOptions(M);const t=e.queuedUserOptions.indexOf(M.userOptions)+1;e.queuedUserOptions.splice(0,t),e.queuedChartOptions.splice(0,t)}))})),i}static markRemovedProperties(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"!==typeof e)return i;for(const s of Object.keys(e)){"undefined"===typeof e[s]&&(Object.assign(e,{[s]:Symbol("UNSET")}),i||(i=!0))}return i}static updateUserDelta(t,i,s){const n=PM(i=TM(i,Pj.OPTIONS_CLONE_OPTS_FAST),e.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);WU((()=>[">>> AgCharts.updateUserDelta() user delta",TM(i)])),e.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:n,apiStartTime:s})}static createChartInstance(e,t){const i=t?.destroy({keepTransferableResources:!0});return Fy.detectChartDefinition(e.processedOptions).create(e,i)}static getPool(e){if(!0===e.pool)return HU.getPool(e.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};UU.caretaker=new QD(YD),UU.initialised=!1,UU.callbackApi={caretaker:UU.caretaker,create:(e,t,i,s,n)=>UU.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:s,data:n}),update:(e,t,i,s)=>UU.createOrUpdate({userOptions:e,proxy:t,specialOverrides:i,apiStartTime:s}),updateUserDelta:(e,t,i)=>UU.updateUserDelta(e,t,i)},UU.detachAndClear=e=>e.detachAndClear(),UU.destroy=e=>e.destroy();var $U=UU,KU={};Uw(KU,{Arc:()=>YU,BBox:()=>eS,Caption:()=>HD,CategoryScale:()=>pT,Group:()=>gM,Line:()=>HA,LinearScale:()=>OB,Marker:()=>ZL,Path:()=>SD,RadialColumnShape:()=>qU,Rect:()=>RD,Scene:()=>tE,Sector:()=>g_,Shape:()=>tM,TranslatableGroup:()=>vM,getRadialColumnWidth:()=>QU,toRadians:()=>YS});var YU=class extends SD{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0}get fullPie(){return uw(_S(this.startAngle),_S(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?e.closePath():2!==this.type||this.fullPie||(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new eS(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(e,t){const i=this.getBBox();return 0!==this.type&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};function ZU(e,t,i){const s=Math.sqrt(e**2+t**2),n=Math.atan2(t,e)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}YU.className="Arc",$w([LS()],YU.prototype,"centerX",2),$w([LS()],YU.prototype,"centerY",2),$w([LS()],YU.prototype,"radius",2),$w([LS()],YU.prototype,"startAngle",2),$w([LS()],YU.prototype,"endAngle",2),$w([LS()],YU.prototype,"counterClockwise",2),$w([LS()],YU.prototype,"type",2);var qU=class extends SD{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){const{innerRadius:e,outerRadius:t,columnWidth:i}=this,s=this.getRotation(),n=-i/2,o=i/2,r=-t,a=-e;let l=1/0,c=1/0,h=-1/0,d=-1/0;for(let u=0;u<4;u+=1){const{x:e,y:t}=ZU(u%2===0?n:o,u<2?r:a,s);l=Math.min(e,l),c=Math.min(t,c),h=Math.max(e,h),d=Math.max(t,d)}return new eS(l,c,h-l,d-c)}getRotation(){const{startAngle:e,endAngle:t}=this;return _S(e+qS(e,t)/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:s}=this,n=-e/2,o=e/2,r=-i,a=-t,l=this.getRotation(),c=[[n,a],[n,r],[o,r],[o,a]].map((e=>{let[t,i]=e;return ZU(t,i,l)}));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:o,isRadiusAxisReversed:r}=this,a=uw(s,n),l=Math.asin(e/2/s),c=this.getRotation(),h=(e,t)=>ZU(e,t,c),d=(e,t)=>Math.sqrt(e**2+t**2),u=(e,t)=>t>e?0:Math.sqrt(e**2-t**2),p=(e,t,i)=>i?e<t:e>t,g=a&&!isNaN(l)&&l<Math.PI/6;let m=-e/2,f=e/2;const v=-i,y=-s*(g?Math.cos(l):1),C=p(o,d(s,e/2),!r);if(C){const e=u(o,s);m=-e,f=e}t.clear(!0);const b=h(m,y);t.moveTo(b.x,b.y);const w=uw(s,i),S=p(o,d(i,e/2),!r);if(w&&g)t.arc(0,0,s,_S(-l-Math.PI/2)+c,_S(l-Math.PI/2)+c,!1);else if(S){const s=-u(o,e/2),n=u(o,i);if(!C){const e=h(m,s);t.lineTo(e.x,e.y)}if(t.arc(0,0,o,Math.atan2(s,m)+c,Math.atan2(v,-n)+c,!1),!uw(n,0)){const e=h(n,v);t.lineTo(e.x,e.y)}t.arc(0,0,o,Math.atan2(v,n)+c,Math.atan2(s,f)+c,!1)}else{const e=h(m,v),i=h(f,v);t.lineTo(e.x,e.y),t.lineTo(i.x,i.y)}const x=h(f,y);if(t.lineTo(x.x,x.y),g)t.arc(0,0,s,_S(l-Math.PI/2)+c,_S(-l-Math.PI/2)+c,!0);else{const e=h(m,y);t.lineTo(e.x,e.y)}t.closePath()}};function QU(e,t,i,s,n){const o=qS(e,t),r=o*(1-s)/2;if(e+=r,t-=r,o<.001)return 2*i*n;if(o>=2*Math.PI){const i=e+o/2;e=i-Math.PI,t=i+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),c=i*Math.cos(t),h=i*Math.sin(t),d=Math.floor(Math.sqrt((a-c)**2+(l-h)**2)),u=2*i*n;return Math.max(1,Math.min(u,d))}qU.className="RadialColumnShape",$w([LS()],qU.prototype,"isBeveled",2),$w([LS()],qU.prototype,"columnWidth",2),$w([LS()],qU.prototype,"startAngle",2),$w([LS()],qU.prototype,"endAngle",2),$w([LS()],qU.prototype,"outerRadius",2),$w([LS()],qU.prototype,"innerRadius",2),$w([LS()],qU.prototype,"axisInnerRadius",2),$w([LS()],qU.prototype,"axisOuterRadius",2),$w([LS()],qU.prototype,"isRadiusAxisReversed",2);var XU={};Uw(XU,{ChartTheme:()=>HF,DEFAULT_ANNOTATION_HANDLE_FILL:()=>sF,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>rF,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>aF,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>lF,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>cF,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>nF,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>oF,DEFAULT_CAPTION_ALIGNMENT:()=>GP,DEFAULT_CAPTION_LAYOUT_STYLE:()=>BP,DEFAULT_FIBONACCI_STROKES:()=>eF,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>iF,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>JP,DEFAULT_GRIDLINE_ENABLED:()=>gF,DEFAULT_POLAR_SERIES_STROKE:()=>QP,DEFAULT_SEPARATION_LINES_COLOUR:()=>NP,DEFAULT_SHADOW_COLOUR:()=>OP,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>XP,DEFAULT_TEXTBOX_COLOR:()=>uF,DEFAULT_TEXTBOX_FILL:()=>hF,DEFAULT_TEXTBOX_STROKE:()=>dF,DEFAULT_TEXT_ANNOTATION_COLOR:()=>tF,DEFAULT_TOOLBAR_POSITION:()=>pF,IS_DARK_THEME:()=>FP,PALETTE_ALT_DOWN_FILL:()=>YP,PALETTE_ALT_DOWN_STROKE:()=>$P,PALETTE_ALT_NEUTRAL_FILL:()=>ZP,PALETTE_ALT_NEUTRAL_STROKE:()=>qP,PALETTE_ALT_UP_FILL:()=>KP,PALETTE_ALT_UP_STROKE:()=>UP,PALETTE_DOWN_FILL:()=>HP,PALETTE_DOWN_STROKE:()=>jP,PALETTE_NEUTRAL_FILL:()=>_P,PALETTE_NEUTRAL_STROKE:()=>WP,PALETTE_UP_FILL:()=>VP,PALETTE_UP_STROKE:()=>zP,getChartTheme:()=>Uz,resolveOperation:()=>e$,themeNames:()=>JU,themeSymbols:()=>PP,themes:()=>_z});var JU=Object.keys(_z);function e$(e){const t=HF.getDefaultPublicParameters(),i=HF.getDefaultColors();return new kj({line:{operation:e}},{series:[{type:"line"}]},t,i).resolve().operation}var t$={};Uw(t$,{Color:()=>nx,interpolateColor:()=>FE});function i$(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");xy.warnOnce(i)}}function s$(e,t){const i=i$(),s=t?.default;return dS(((t,n,o)=>(o!==s&&i(n.toString(),e),o)))}function n$(e,t){const i=i$();return dS(((s,n,o)=>(o!==s[e]&&(i(n.toString(),`Use [${e}] instead.`),RS(s,e,t?t(o):o)),aS)),((t,s)=>(i(s.toString(),`Use [${e}] instead.`),MS(t,e))))}Uw({},{AGGREGATION_INDEX_X_MAX:()=>PH,AGGREGATION_INDEX_X_MIN:()=>LH,AGGREGATION_INDEX_Y_MAX:()=>NH,AGGREGATION_INDEX_Y_MIN:()=>FH,AGGREGATION_SPAN:()=>OH,AbstractBarSeries:()=>hW,AbstractBarSeriesProperties:()=>cW,ActionOnSet:()=>HM,AnchoredPopover:()=>B$,Animation:()=>qE,AnimationManager:()=>tI,Arc:()=>YU,Axis:()=>rT,AxisGroupZIndexMap:()=>sT,AxisInterval:()=>Wk,AxisLabel:()=>_k,AxisTick:()=>$k,AxisTickGenerator:()=>QT,BASE_FONT_SIZE:()=>OD,BBox:()=>eS,Background:()=>jj,BackgroundModule:()=>Vj,BandScale:()=>EI,BarSeries:()=>AW,BarSeriesModule:()=>kW,BaseModuleInstance:()=>Kw,BaseProperties:()=>vx,BaseToolbar:()=>W$,Border:()=>Hj,ButtonWidget:()=>TR,CachedTextMeasurer:()=>cD,CachedTextMeasurerPool:()=>lD,CallbackCache:()=>wM,Caption:()=>HD,CartesianAxis:()=>sL,CartesianSeries:()=>OV,CartesianSeriesNodeEvent:()=>PV,CartesianSeriesProperties:()=>FV,CategoryAxis:()=>wO,CategoryScale:()=>pT,ChangeDetectableProperties:()=>bV,Chart:()=>IP,ChartAxisDirection:()=>WD,ChartOptions:()=>Pj,ChartUpdateType:()=>oE,CollapseMode:()=>eH,Color:()=>nx,ColorScale:()=>dx,ConicGradient:()=>px,ContextMenuBuiltins:()=>nI,ContextMenuRegistry:()=>oI,ContinuousScale:()=>MI,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>TV,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>LV,DEFAULT_POLAR_DIRECTION_KEYS:()=>R_,DEFAULT_POLAR_DIRECTION_NAMES:()=>E_,DEFAULT_TOOLTIP_CLASS:()=>QL,DEFAULT_TOOLTIP_DARK_CLASS:()=>XL,DIRECTION_SWAP_AXES:()=>mF,DOMManager:()=>IR,DataController:()=>CA,DataModel:()=>vA,DataModelSeries:()=>kV,DataService:()=>rE,Debug:()=>iS,Deprecated:()=>s$,DeprecatedAndRenamedTo:()=>n$,DiscreteTimeAxis:()=>_B,DiscreteTimeScale:()=>II,DragInterpreter:()=>mI,DraggablePopover:()=>z$,DropShadow:()=>wV,ExtendedPath2D:()=>_x,FILL_GRADIENT_CONIC_DEFAULTS:()=>EF,FILL_GRADIENT_LINEAR_DEFAULTS:()=>bF,FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS:()=>wF,FILL_GRADIENT_LINEAR_SHADED_DEFAULTS:()=>SF,FILL_GRADIENT_RADIAL_DEFAULTS:()=>xF,FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS:()=>MF,FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS:()=>RF,FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:()=>DF,FILL_IMAGE_DEFAULTS:()=>kF,FILL_PATTERN_DEFAULTS:()=>IF,FILL_PATTERN_HIERARCHY_DEFAULTS:()=>AF,FONT_SIZE:()=>ND,FONT_SIZE_RATIO:()=>BD,FillGradientDefaults:()=>bL,FillImageDefaults:()=>SL,FillPatternDefaults:()=>wL,FloatingToolbar:()=>$$,FormatManager:()=>PE,Gradient:()=>ux,Group:()=>gM,GroupedCategoryAxis:()=>IB,HdpiCanvas:()=>XR,HierarchyNode:()=>h$,HierarchySeries:()=>d$,HierarchySeriesProperties:()=>u$,HighlightManager:()=>rI,HighlightProperties:()=>vL,HighlightState:()=>mL,HighlightStyle:()=>xL,Image:()=>T$,InteractionManager:()=>JE,InteractionState:()=>XE,InterpolationProperties:()=>BV,Invalidating:()=>ax,LABEL_BOXING_DEFAULTS:()=>FF,LARGEST_KEY_INTERVAL:()=>qO,LEGEND_CONTAINER_THEME:()=>BF,Label:()=>Ek,LayoutElement:()=>VI,LayoutManager:()=>HI,LegendMarkerLabel:()=>Xj,Line:()=>HA,LineSeries:()=>QW,LineSeriesModule:()=>XW,LinearGradient:()=>gx,LinearScale:()=>OB,LogScale:()=>NB,LonLatBBox:()=>p$,Marker:()=>ZL,Menu:()=>G$,MenuItemWidget:()=>L$,MenuWidget:()=>F$,MercatorScale:()=>C$,ModuleRegistry:()=>Fy,Motion:()=>NE,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>NA,NativeWidget:()=>NR,NewAreaSeriesModule:()=>oW,NewBarSeriesModule:()=>TW,NewBubbleSeriesModule:()=>_W,NewHistogramSeriesModule:()=>YW,NewLineSeriesModule:()=>JW,NewScatterSeriesModule:()=>i_,NiceMode:()=>Yk,Node:()=>VS,NumberAxis:()=>BB,ObserveChanges:()=>WM,OrdinalTimeScale:()=>VT,PHASE_METADATA:()=>$E,PHASE_ORDER:()=>UE,PREV_NEXT_KEYS:()=>cR,Padding:()=>GM,ParallelStateMachine:()=>qA,Path:()=>SD,PointerEvents:()=>zS,PolarAxis:()=>NU,PolarSeries:()=>I_,PolarZIndexMap:()=>D_,Popover:()=>O$,PropertiesArray:()=>yx,Property:()=>fx,ProxyInteractionService:()=>KR,ProxyOnWrite:()=>jM,ProxyProperty:()=>zM,ProxyPropertyOnWrite:()=>VM,QUICK_TRANSITION:()=>_E,QuadtreeNearest:()=>RV,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>NV,RadialColumnShape:()=>qU,Range:()=>Tk,Rect:()=>RD,RepeatType:()=>KE,Rotatable:()=>lM,RotatableGroup:()=>fM,RotatableText:()=>kD,SAFE_FILLS_OPERATION:()=>vF,SAFE_FILL_OPERATION:()=>fF,SAFE_RANGE2_OPERATION:()=>CF,SAFE_STROKE_FILL_OPERATION:()=>yF,SKIP_JS_BUILTINS:()=>DS,SMALLEST_KEY_INTERVAL:()=>ZO,SORT_DOMAIN_GROUPS:()=>QO,Scalable:()=>cM,ScalableGroup:()=>mM,ScaleAlignment:()=>ox,Scene:()=>tE,SceneArrayChangeDetection:()=>NS,SceneChangeDetection:()=>LS,SceneObjectChangeDetection:()=>FS,SceneRefChangeDetection:()=>PS,Sector:()=>g_,SectorBox:()=>s_,Selection:()=>VA,Series:()=>OL,SeriesContentZIndexMap:()=>RL,SeriesGroupingChangedEvent:()=>PL,SeriesItemHighlightStyle:()=>fL,SeriesMarker:()=>SV,SeriesNodeEvent:()=>LL,SeriesNodePickMode:()=>TL,SeriesProperties:()=>ML,SeriesTooltip:()=>MV,SeriesZIndexMap:()=>DL,Shape:()=>tM,SimpleTextMeasurer:()=>dD,SliderWidget:()=>HR,StateMachine:()=>ZA,StateMachineProperty:()=>UA,StopProperties:()=>bx,SvgPath:()=>A$,TRIPLE_EQ:()=>TS,Text:()=>AD,TextUtils:()=>hD,TextWrapper:()=>LD,ThemeConstants:()=>PD,ThemeSymbols:()=>PP,TimeAxisParentLevel:()=>zB,TimeScale:()=>BT,Toolbar:()=>_$,ToolbarButtonProperties:()=>j$,ToolbarButtonWidget:()=>V$,ToolbarWidget:()=>_R,Tooltip:()=>dP,TooltipManager:()=>uI,TooltipPosition:()=>hP,Transformable:()=>uM,TransformableGroup:()=>yM,TransformableText:()=>TD,Translatable:()=>hM,TranslatableGroup:()=>vM,TranslatableSvgPath:()=>k$,UnitTimeScale:()=>_T,UpdateService:()=>qI,Vec2:()=>o$,Vec4:()=>AI,WIDGET_HTML_EVENTS:()=>UM,Widget:()=>rD,WidgetEventUtil:()=>ZM,ZIndexMap:()=>sE,ZoomManager:()=>zI,accumulateGroup:()=>lB,accumulateStack:()=>hB,accumulatedValue:()=>TO,accumulativeValueProperty:()=>UO,addEscapeEventListener:()=>tR,addHitTestersToQuadtree:()=>aW,addMouseCloseListener:()=>iR,addOverrideFocusVisibleEventListener:()=>oR,addTouchCloseListener:()=>sR,adjustLabelPlacement:()=>fV,aggregationDomain:()=>GH,aggregationIndexForXRatio:()=>VH,aggregationRangeFittingPoints:()=>BH,aggregationXRatioForDatumIndex:()=>zH,aggregationXRatioForXValue:()=>jH,angleBetween:()=>qS,angleCategoryAxisOptionsDefs:()=>aG,angleNumberAxisOptionsDefs:()=>oG,angularPadding:()=>XS,animationValidation:()=>oB,annotationCalloutStylesDefs:()=>UG,annotationChannelStyleDefs:()=>VG,annotationChannelTextDefs:()=>FG,annotationCommentStylesDefs:()=>$G,annotationCrossLineStyleDefs:()=>jG,annotationDisjointChannelStyleDefs:()=>HG,annotationFibonacciStylesDefs:()=>_G,annotationLineStyleDefs:()=>zG,annotationLineTextDefs:()=>PG,annotationMeasurerStylesDefs:()=>ZG,annotationNoteStylesDefs:()=>KG,annotationOptionsDef:()=>QG,annotationParallelChannelStyleDefs:()=>WG,annotationQuickMeasurerStylesDefs:()=>qG,annotationShapeStylesDefs:()=>YG,annotationTextStylesDef:()=>LG,applyShapeFillBBox:()=>AL,applyShapeStyle:()=>kL,areScalingEqual:()=>CH,area:()=>kO,autoSizedLabelOptionsDefs:()=>HN,bezier2DDistance:()=>Hx,bezier2DExtrema:()=>jx,boxPlotHighlightStyleOptionsDef:()=>JG,boxPlotSeriesThemeableOptionsDef:()=>ez,boxPlotStyleOptionsDef:()=>XG,buildDateFormatter:()=>wE,buildResetPathFn:()=>eW,calculateDataDiff:()=>RW,calculateLabelTranslation:()=>S$,calculatePlacement:()=>HL,callWithContext:()=>bM,candlestickSeriesThemeableOptionsDef:()=>sz,cartesianAxisBandHighlightOptions:()=>fO,cartesianAxisCrosshairOptions:()=>vO,cartesianAxisLabelOptionsDefs:()=>lO,cartesianAxisOptionsDefs:()=>mO,cartesianChartOptionsDefs:()=>DU,cartesianCrossLineOptionsDefs:()=>rO,cartesianNumericAxisLabel:()=>cO,cartesianTimeAxisLabel:()=>hO,cartesianTimeAxisParentLevel:()=>uO,checkCrisp:()=>CW,chordSeriesThemeableOptionsDef:()=>nz,clampArray:()=>yI,clippedRoundRect:()=>DD,collapsedStartingBarPosition:()=>wW,commonAxisIntervalOptionsDefs:()=>pO,commonAxisLabelOptionsDefs:()=>aO,commonAxisOptionsDefs:()=>gO,commonChartOptionsDefs:()=>BN,commonCrossLineLabelOptionsDefs:()=>nO,commonCrossLineOptionsDefs:()=>oO,commonSeriesOptionsDefs:()=>zN,commonSeriesThemeableOptionsDefs:()=>GN,compactAggregationIndices:()=>WH,compareDates:()=>fT,computeBarFocusBounds:()=>DW,computeMarkerFocusBounds:()=>QH,coneFunnelSeriesThemeableOptionsDef:()=>oz,continuousAxisOptions:()=>yO,countExpandingSearch:()=>dI,createAggregationIndices:()=>HH,createButton:()=>x$,createCheckbox:()=>M$,createDatumId:()=>gB,createDeprecationWarning:()=>i$,createIcon:()=>E$,createIdsGenerator:()=>YT,createSelect:()=>D$,createTextArea:()=>R$,dateToNumber:()=>aT,dateTruncationForDomain:()=>dT,datesSortOrder:()=>yT,datumKeys:()=>gA,datumStylerProperties:()=>lI,deconstructSelectionsOrNodes:()=>YE,deepClone:()=>TM,deepFreeze:()=>IS,diff:()=>pB,discreteTimeAxisIntervalOptionsDefs:()=>CO,drawCorner:()=>wD,drawMarkerUnitPolygon:()=>$L,durationDay:()=>ek,durationHour:()=>JA,durationMinute:()=>XA,durationMonth:()=>ik,durationSecond:()=>QA,durationWeek:()=>tk,durationYear:()=>sk,easing:()=>NE,enterpriseModule:()=>Yz,errorBarOptionsDefs:()=>_N,errorBarThemeableOptionsDefs:()=>WN,estimateTickCount:()=>NT,evaluateBezier:()=>Ox,expandLegendPosition:()=>Jj,extent:()=>xO,extractDecoratedProperties:()=>mS,fillsOptionsDef:()=>YN,findMinMax:()=>CI,findQuadtreeMatch:()=>lW,findRangeExtent:()=>bI,fixNumericExtent:()=>dA,focusCursorAtEnd:()=>MM,formatNumber:()=>jR,formatObjectValidator:()=>NN,formatPercent:()=>GR,formatValue:()=>BR,fromToMotion:()=>OA,funnelSeriesThemeableOptionsDef:()=>rz,getAngleRatioRadians:()=>QS,getColorStops:()=>Sx,getCrossLineValue:()=>Fk,getDateTicksForInterval:()=>zT,getDatumRefPoint:()=>hI,getElementBBox:()=>xM,getIconClassNames:()=>RM,getLabelStyles:()=>pV,getLastFocus:()=>mR,getMissCount:()=>uA,getPath:()=>MS,getPathComponents:()=>mA,getRadialColumnWidth:()=>QU,getSequentialColors:()=>TF,getShapeFill:()=>EL,getShapeStyle:()=>IL,groupAccumulativeValueProperty:()=>KO,groupAverage:()=>AO,groupCount:()=>IO,groupStackValueProperty:()=>YO,groupSum:()=>EO,hasNoModifiers:()=>rR,heatmapSeriesThemeableOptionsDef:()=>az,initMenuKeyNav:()=>uR,initRovingTabIndex:()=>hR,interpolatePoints:()=>wH,interpolationOptionsDefs:()=>KN,intervalCeil:()=>pk,intervalEpoch:()=>xk,intervalExtent:()=>fk,intervalFloor:()=>uk,intervalHierarchy:()=>Mk,intervalMilliseconds:()=>Dk,intervalNext:()=>mk,intervalPrevious:()=>gk,intervalRange:()=>Ck,intervalRangeCount:()=>yk,intervalRangeStartIndex:()=>bk,intervalStep:()=>Sk,intervalUnit:()=>wk,isAgStandaloneChartOptions:()=>cL,isAgTopologyChartOptions:()=>lL,isBetweenAngles:()=>KS,isButtonClickEvent:()=>gR,isChartAxisDirection:()=>_D,isContinuous:()=>Lk,isDecoratedObject:()=>pS,isDenseInterval:()=>PT,isGradientFill:()=>qx,isGradientOrPatternFill:()=>Jx,isImageFill:()=>Xx,isInputPending:()=>DM,isObjectWithProperty:()=>AS,isObjectWithStringProperty:()=>kS,isPatternFill:()=>Qx,isProperties:()=>Cx,isScaleValid:()=>bH,jsonApply:()=>FM,jsonDiff:()=>AM,jsonPropertyCompare:()=>kM,jsonWalk:()=>PM,keyProperty:()=>zO,legendSymbolSvg:()=>qL,lineDistanceSquared:()=>Dx,linearGaugeSeriesOptionsDef:()=>XN,linearGaugeSeriesThemeableOptionsDef:()=>QN,linearGaugeTargetOptionsDef:()=>ZN,listDecoratedProperties:()=>gS,lowestGranularityForInterval:()=>lT,lowestGranularityUnitForTicks:()=>cT,lowestGranularityUnitForValue:()=>hT,makeAccessibleClickListener:()=>pR,makeSeriesTooltip:()=>DV,mapLineBackgroundSeriesThemeableOptionsDef:()=>hz,mapLineSeriesThemeableOptionsDef:()=>cz,mapMarkerSeriesThemeableOptionsDef:()=>dz,mapShapeBackgroundSeriesThemeableOptionsDef:()=>pz,mapShapeSeriesThemeableOptionsDef:()=>uz,mapValues:()=>wS,markerFadeInAnimation:()=>$H,markerOptionsDefs:()=>jN,markerScaleInAnimation:()=>KH,markerSwipeScaleInAnimation:()=>YH,memo:()=>hE,merge:()=>CS,mergeArrayDefaults:()=>bS,mergeDefaults:()=>yS,midpointStartingBarPosition:()=>SW,minimumTimeAxisDatumGranularity:()=>VB,moduleRegistry:()=>Yw,motion:()=>Y$,multiSeriesHighlightStyle:()=>NF,nearestSquared:()=>Qw,nearestSquaredInContainer:()=>Xw,nextPowerOf2:()=>wI,nightingaleSeriesThemeableOptionsDef:()=>gz,normaliseGroupTo:()=>JO,normalisePropertyTo:()=>tB,normalisedExtentWithMetadata:()=>MO,normalizeAngle180:()=>$S,normalizeAngle360:()=>_S,normalizeAngle360FromDegrees:()=>JS,normalizeAngle360Inclusive:()=>US,normalizeContinuousDomains:()=>DI,numberFormatValidator:()=>ON,objectsEqual:()=>fS,objectsEqualWith:()=>vS,ohlcSeriesThemeableOptionsDef:()=>lz,ordinalTimeAxisOptionsDefs:()=>nG,pairUpSpans:()=>fH,partialAssign:()=>ES,pathFadeInAnimation:()=>JH,pathMotion:()=>uV,pathSwipeInAnimation:()=>XH,pick:()=>xS,pickByMatchingAngle:()=>M_,plotAreaPathFill:()=>IH,plotInterpolatedAreaSeriesFillSpans:()=>AH,plotInterpolatedLinePathStroke:()=>MH,plotLinePathStroke:()=>xH,pointsEq:()=>SH,polarChartOptionsDefs:()=>RU,prepareAreaFillAnimationFns:()=>kH,prepareAreaPathAnimation:()=>TH,prepareAxisAnimationContext:()=>Zk,prepareAxisAnimationFunctions:()=>Xk,prepareBarAnimationFunctions:()=>xW,prepareLinePathAnimation:()=>EH,prepareLinePathPropertyAnimation:()=>RH,prepareLinePathStrokeAnimationFns:()=>DH,preparePieSeriesAnimationFunctions:()=>S_,previousPowerOf2:()=>SI,processedDataIsAnimatable:()=>FO,pyramidSeriesThemeableOptionsDef:()=>mz,radarAreaSeriesThemeableOptionsDef:()=>fz,radarLineSeriesThemeableOptionsDef:()=>vz,radialBarSeriesThemeableOptionsDef:()=>yz,radialColumnSeriesThemeableOptionsDef:()=>Cz,radialGaugeSeriesOptionsDef:()=>eO,radialGaugeSeriesThemeableOptionsDef:()=>JN,radialGaugeTargetOptionsDef:()=>qN,radiusCategoryAxisOptionsDefs:()=>cG,radiusNumberAxisOptionsDefs:()=>lG,range:()=>LT,rangeAreaSeriesThemeableOptionsDef:()=>bz,rangeBarSeriesThemeableOptionsDef:()=>wz,rangeValidator:()=>xN,rangedValueProperty:()=>_O,resetAxisFillSelectionFn:()=>iT,resetAxisGroupFn:()=>Jk,resetAxisLabelSelectionFn:()=>eT,resetAxisLineSelectionFn:()=>tT,resetBarSelectionsFn:()=>MW,resetLabelFn:()=>CV,resetMarkerFn:()=>ZH,resetMarkerPositionFn:()=>qH,resetMotion:()=>jA,resetPieSelectionsFn:()=>x_,rowCountProperty:()=>VO,sankeySeriesThemeableOptionsDef:()=>Sz,scale:()=>iH,sectorBox:()=>n_,seriesLabelFadeInAnimation:()=>vV,seriesLabelFadeOutAnimation:()=>yV,seriesLabelOptionsDefs:()=>VN,setElementBBox:()=>SM,setPath:()=>RS,shadowOptionsDefs:()=>$N,shallowClone:()=>LM,simpleMemorize:()=>pE,simpleMemorize2:()=>uE,singleSeriesHighlightStyle:()=>OF,solveBezier:()=>Bx,sortAndUniqueDates:()=>vT,splitBezier2D:()=>Gx,standaloneChartOptionsDefs:()=>IU,staticFromToMotion:()=>BA,stopPageScrolling:()=>fR,sum:()=>RO,sumValues:()=>DO,sunburstSeriesThemeableOptionsDef:()=>xz,textOrSegments:()=>MN,tickFormat:()=>TT,timeInterval:()=>sO,timeIntervalUnit:()=>tO,toDegrees:()=>ZS,toRadians:()=>YS,toolbarButtonOptionsDefs:()=>PN,tooltipContentAriaLabel:()=>eP,tooltipHtml:()=>nP,tooltipOptionsDefs:()=>UN,topologyChartOptionsDefs:()=>EU,trailingAccumulatedValue:()=>LO,trailingAccumulatedValueProperty:()=>$O,treemapSeriesThemeableOptionsDef:()=>Mz,updateClipPath:()=>tW,updateLabelNode:()=>gV,validateCrossLineValue:()=>Nk,valueProperty:()=>jO,visibleRangeIndices:()=>cI,waterfallSeriesThemeableOptionsDef:()=>Rz,without:()=>SS});var o$={add:function(e,t){if("number"===typeof t)return{x:e.x+t,y:e.y+t};return{x:e.x+t.x,y:e.y+t.y}},angle:function(e,t){return null==t?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)},apply:function(e,t){return e.x=t.x,e.y=t.y,e},equal:function(e,t){return e.x===t.x&&e.y===t.y},distance:function(e,t){const i=r$(e,t);return Math.sqrt(i.x*i.x+i.y*i.y)},distanceSquared:function(e,t){const i=r$(e,t);return i.x*i.x+i.y*i.y},from:function(e,t){if("number"===typeof e)return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)},gradient:function(e,t,i){const s=t.x-e.x,n=null==i?t.y-e.y:i-t.y-(i-e.y);return n/s},intercept:function(e,t,i){const s=null==i?e.y:i-e.y;return s-t*e.x},intersectAtX:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const n=e===1/0?1/0:e*i+t;return{x:i,y:null==s?n:s-n}},intersectAtY:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;return{x:e===1/0?1/0:(i-t)/e,y:null==s?i:s-i}},length:a$,lengthSquared:function(e){return e.x*e.x+e.y*e.y},multiply:function(e,t){if("number"===typeof t)return{x:e.x*t,y:e.y*t};return{x:e.x*t.x,y:e.y*t.y}},normalized:function(e){const t=a$(e);return{x:e.x/t,y:e.y/t}},origin:l$,required:function(e){return{x:e?.x??0,y:e?.y??0}},rotate:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};const s=a$(e);return{x:i.x+s*Math.cos(t),y:i.y+s*Math.sin(t)}},round:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return{x:gw(e.x,t),y:gw(e.y,t)}},sub:r$};function r$(e,t){return"number"===typeof t?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function a$(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function l$(){return{x:0,y:0}}var c$=class e{constructor(e,t,i,s,n,o,r,a,l){this.series=e,this.datumIndex=t,this.datum=i,this.sizeValue=s,this.colorValue=n,this.sumSize=o,this.depth=r,this.parent=a,this.children=l,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Walk.PreOrder;i===e.Walk.PreOrder&&t(this),this.children.forEach((e=>{e.walk(t,i)})),i===e.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}};c$.Walk={PreOrder:0,PostOrder:1};var h$=c$,d$=class extends OL{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new dx,this.animationState=new ZA("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}processData(){const{NodeClass:e}=this,{childrenKey:t,sizeKey:i,colorKey:s,colorRange:n}=this.properties;let o=0,r=1/0,a=-1/0;const l=(n,l,h)=>{const d=null!=h.depth?h.depth+1:0,u=null!=t?n[t]:void 0,p=null==u||0===u.length;let g=null!=i?n[i]:void 0;g=Number.isFinite(g)?Math.max(g,0):p?1:0;const m=g;o=Math.max(o,d);const f=null!=s?n[s]:void 0;return"number"===typeof f&&(r=Math.min(r,f),a=Math.max(a,f)),c(new e(this,l,n,g,f,m,d,h,[]),u)},c=(e,t)=>{const{datumIndex:i}=e;return t?.forEach(((t,s)=>{const n=l(t,i.concat(s),e);e.children.push(n),e.sumSize+=n.sumSize})),e},h=c(new e(this,[],void 0,0,void 0,0,void 0,void 0,[]),this.data),d=[r,a];this.colorScale.domain=r<a?[r,a]:[0,1],this.colorScale.range=n??["black"],this.colorScale.update(),this.rootNode=h,this.maxDepth=o,this.colorDomain=d}update(e){let{seriesRect:t}=e;this.updateSelections(),this.updateNodes();const i=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}dataCount(){return NaN}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(e){const{colorKey:t,colorRange:i}=this.properties,{id:s,ctx:{legendManager:n},visible:o}=this;return"gradient"===e&&null!=t&&null!=i?[{legendType:"gradient",enabled:o&&n.getItemEnabled({seriesId:s}),seriesId:s,series:this.getFormatterContext("color"),colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){return this.datumSelection.at(e+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(e){for(const{index:t,datum:i}of this.datumSelection)if(Hb(i.datumIndex,e))return t-1;return 0}pickFocus(e){if(!this.rootNode?.children.length)return;const t=dw(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:i,otherIndexDelta:s}=e;let n=this.removeMeIndexPathForIndex(t);const o=n.reduce(((e,t)=>e.children[t]),this.rootNode);if(s>0&&o.hasChildren)n=[...n,0];else if(s<0&&n.length>1)n=n.slice(0,-1);else if(0===s&&0!==i){const e=o.parent.children.length-1;n=n.slice(),n[n.length-1]=dw(0,n[n.length-1]+i,e)}const r=n.reduce(((e,t)=>e.children[t]),this.rootNode),a=this.computeFocusBounds(this.datumSelection.at(t+1));return null!=a?{datum:r,datumIndex:this.removeMeIndexForIndexPath(n),otherIndex:r.depth,bounds:a,clipFocusBox:!0}:void 0}getDatumAriaText(e,t){if(e instanceof this.NodeClass)return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t});xy.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`)}getCategoryValue(e){}datumIndexForCategoryValue(e){}},u$=class extends ML{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(TP),this.fillGradientDefaults=new bL,this.fillPatternDefaults=new wL,this.fillImageDefaults=new SL,this.strokes=Object.values(LP)}};$w([fx],u$.prototype,"childrenKey",2),$w([fx],u$.prototype,"sizeKey",2),$w([fx],u$.prototype,"colorKey",2),$w([fx],u$.prototype,"colorName",2),$w([fx],u$.prototype,"fills",2),$w([fx],u$.prototype,"fillGradientDefaults",2),$w([fx],u$.prototype,"fillPatternDefaults",2),$w([fx],u$.prototype,"fillImageDefaults",2),$w([fx],u$.prototype,"strokes",2),$w([fx],u$.prototype,"colorRange",2);var p$=class e{constructor(e,t,i,s){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=s}extend(e,t,i,s){return this.lon0=Math.min(this.lon0,e),this.lat0=Math.min(this.lat0,t),this.lon1=Math.max(this.lon1,i),this.lat1=Math.max(this.lat1,s),this}merge(e){return this.extend(e.lon0,e.lat0,e.lon1,e.lat1)}static extend(t,i,s,n,o){return t?t.extend(i,s,n,o):new e(i,s,n,o)}},g$=Math.PI/180,m$=e=>e*g$,f$=e=>-Math.log(Math.tan(.25*Math.PI+e*g$*.5)),v$=e=>e/g$,y$=e=>(Math.atan(Math.exp(-e))-.25*Math.PI)/(.5*g$),C$=class e extends rx{constructor(t,i){super(),this.domain=t,this.range=i,this.type="mercator",this.defaultTickCount=0,this.bounds=e.bounds(t)}static bounds(e){const[[t,i],[s,n]]=e,o=m$(t),r=f$(i),a=m$(s),l=f$(n);return new eS(Math.min(o,a),Math.min(r,l),Math.abs(a-o),Math.abs(l-r))}static fixedScale(){return new e([[v$(0),y$(0)],[v$(1),y$(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(){let e=-1/0,t=1/0,i=-1/0,s=1/0;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(const a of o)for(const[n,o]of a)e=Math.min(n,e),t=Math.max(n,t),i=Math.min(o,i),s=Math.max(o,s);return{domain:[[e,i],[t,s]],animatable:!0}}convert(e){let[t,i]=e;const[[s,n],[o,r]]=this.range,a=(o-s)/this.bounds.width,l=(r-n)/this.bounds.height;return[(m$(t)-this.bounds.x)*a+s,(f$(i)-this.bounds.y)*l+n]}invert(e){let[t,i]=e;const[[s,n],[o,r]]=this.range,a=(o-s)/this.bounds.width,l=(r-n)/this.bounds.height;return[v$((t-s)/a+this.bounds.x),y$((i-n)/l+this.bounds.y)]}},b$={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},w$={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function S$(e){let{yDirection:t,padding:i=0,position:s="top",bbox:n}=e;const o=t?b$:w$,{xTranslationDirection:r,yTranslationDirection:a}=o[s];return{xTranslation:r*(i+n.width/2),yTranslation:a*(i+n.height/2)}}function x$(e,t){const i=Xy("button",I$("ag-charts-input ag-charts-button",t));return void 0!==e.label?i.append(e.label):(i.append(E$(e.icon)),i.ariaLabel=e.altText),i.addEventListener("click",e.onPress),tw(i,t),i}function M$(e,t){const i=Xy("input",I$("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",(t=>e.onChange(i.checked,t))),i.addEventListener("keydown",(e=>{gR(e)&&(e.preventDefault(),i.click())})),tw(i,t),i}function D$(e,t){const i=Xy("select",I$("ag-charts-input ag-charts-select",t));return i.append(...e.options.map((e=>{const t=Xy("option");return t.value=e.value,t.textContent=e.label,t}))),ew(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",(t=>e.onChange(i.value,t))),tw(i,t),i}function R$(e,t){const i=Xy("textarea",I$("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",(t=>e.onChange(i.value,t))),tw(i,t),ew(i,"data-preventdefault",!1),i}function E$(e){const t=Xy("span",`ag-charts-icon ag-charts-icon-${e}`);return ew(t,"aria-hidden",!0),t}function I$(e,t){return null==t?e:`${e} ${t.class}`}var A$=class extends SD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this._d="",this.d=e}get d(){return this._d}set d(e){e!==this._d&&(this._d=e,this.path.clear(),this.path.appendSvg(e),this.checkPathDirty())}},k$=class extends(hM(A$)){isPointInPath(e,t){return super.isPointInPath(e-this.translationX,t-this.translationY)}},T$=class extends VS{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};$w([LS()],T$.prototype,"x",2),$w([LS()],T$.prototype,"y",2),$w([LS()],T$.prototype,"width",2),$w([LS()],T$.prototype,"height",2),$w([LS()],T$.prototype,"opacity",2);Uw({},{ButtonWidget:()=>TR,MenuItemWidget:()=>L$,MenuWidget:()=>F$,NativeWidget:()=>NR,SliderWidget:()=>HR,ToolbarWidget:()=>_R,WIDGET_HTML_EVENTS:()=>UM,Widget:()=>rD,WidgetEventUtil:()=>ZM});var L$=class extends kR{constructor(){super(Xy("div"),"menuitem")}},P$=["Escape","ArrowLeft"],F$=class e extends PR{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical","menu"),this.closeSubMenu=e=>this.openSubMenu(e,void 0)}destructor(){this.selfClose("2")}addSeparator(){const e=qy().createElement("div");return ew(e,"role","separator"),this.elem.appendChild(e),e}onChildAdded(e){super.onChildAdded(e),e.hasPopup()||e.addListener("mouseenter",this.closeSubMenu)}onChildRemoved(e){super.onChildRemoved(e),e.hasPopup()||e.removeListener("mouseenter",this.closeSubMenu)}addSubMenu(){const t=new L$,i=Iw(),s=new e(this.orientation),n=e=>{t.isDisabled()||this.openSubMenu(e,s)};return t.setAriaHasPopup("menu"),t.setAriaExpanded(!1),t.setAriaControls(i),t.addListener("click",n),t.addListener("mouseenter",n),t.addListener("keydown",(e=>{rR(e.sourceEvent)&&"ArrowRight"===e.sourceEvent.code&&n(e)})),s.addListener("close-widget",(()=>t.setAriaExpanded(!1))),s.addListener("open-widget",(()=>t.setAriaExpanded(!0))),s.id=i,this.addChild(t),{subMenuButton:t,subMenu:s}}openSubMenu(e,t){const{openScope:i}=this;i&&(i.openSubMenu?.selfClose("4"),t?.open(e),i.openSubMenu=t)}open(e,t){if(null!=this.openScope)return;this.openScope={lastFocus:mR(e.sourceEvent),openSubMenu:void 0,abort:()=>this.selfClose("1"),close:()=>this.selfClose("0"),removers:new hw};const i=this.openScope,s=this.children.map((e=>e.getElement()));ew(i.lastFocus,"aria-expanded",!0),i.removers.register(iR(this.elem,i.abort),sR(this.elem,i.abort),...this.children.map((e=>tR(e.getElement(),i.close,P$))),t?.overrideFocusVisible&&oR(this.elem,s,t.overrideFocusVisible)),this.internalListener?.dispatch("open-widget",this,{type:"open-widget"}),this.children[0]?.focus({preventScroll:!0})}selfClose(e){if(void 0===this.openScope)return;const{lastFocus:t,removers:i,openSubMenu:s}=this.openScope;this.openScope=void 0,s?.selfClose("3"),ew(t,"aria-expanded",!1),"0"===e&&t?.focus({preventScroll:!0}),i.flush(),this.internalListener?.dispatch("close-widget",this,{type:"close-widget"})}close(){this.selfClose("0")}},N$="canvas-overlay",O$=class extends Kw{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.moduleId=`popover-${t}`,this.element=i?.detached?Xy("div"):e.domManager.addChild(N$,this.moduleId),this.element.setAttribute("role","presentation"),this.cleanup.register((()=>e.domManager.removeChild(N$,this.moduleId)))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=e??{};0!==this.element.children.length&&(this.hideFns.forEach((e=>e())),t?.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=Xy("div","ag-charts-popover");if(null!=t.ariaLabel&&i.setAttribute("aria-label",t.ariaLabel),null!=t.class&&i.classList.add(t.class),i.replaceChildren(...e),this.element.replaceChildren(i),this.hideFns.push((()=>this.removeChildren())),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const e=mR(t.sourceEvent);void 0!==e&&(this.lastFocus=e,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){const t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),null!=e.x&&t.style.setProperty("left",`${Math.floor(e.x)}px`),null!=e.y&&t.style.setProperty("top",`${Math.floor(e.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}},B$=class extends O${setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}showWithChildren(e,t){const i=t.anchor??this.anchor,s=t.fallbackAnchor??this.fallbackAnchor,n=super.showWithChildren(e,t);return i&&this.setAnchor(i,s),Qy().requestAnimationFrame((()=>{this.repositionWithinBounds()})),n}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,s=this.getPopoverElement();if(!e||!s)return;const n=t.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:r}=s;let a=dw(0,e.x,n.width-o),l=dw(0,e.y,n.height-r);a!==e.x&&null!=i?.x&&(a=dw(0,i.x-o,n.width-o)),l!==e.y&&null!=i?.y&&(l=dw(0,i.y-r,n.height-r)),this.updatePosition({x:a,y:l})}},G$=class extends B${show(e){const t=e.items.map((t=>this.createRow(e,t))),i=this.showWithChildren(t,e);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=uR({orientation:"vertical",menu:i,buttons:t,sourceEvent:e.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push((()=>{this.menuCloser?.finishClosing(),this.menuCloser=void 0}))}createRow(e,t){const{menuItemRole:i="menuitem"}=e,s=t.value===e.value,n=Xy("div","ag-charts-menu__row");if(n.setAttribute("role",i),"menuitemradio"===i&&n.setAttribute("aria-checked",(e.value===t.value).toString()),"string"===typeof t.value&&(n.dataset.popoverId=t.value),n.classList.toggle("ag-charts-menu__row--active",s),null!=t.icon){const e=Xy("span",`ag-charts-menu__icon ${RM(t.icon)}`);n.appendChild(e)}const o=null!=t.strokeWidth;if(o&&(n.classList.toggle("ag-charts-menu__row--stroke-width-visible",o),n.style.setProperty("--strokeWidth",o?`${t.strokeWidth}px`:null)),null!=t.label){const e=Xy("span","ag-charts-menu__label");e.textContent=this.ctx.localeManager.t(t.label),n.appendChild(e)}"altText"in t&&(n.ariaLabel=this.ctx.localeManager.t(t.altText));const r=i=>{gR(i)&&(e.onPress?.(t),i.preventDefault(),i.stopPropagation())};return n.addEventListener("keydown",r),n.addEventListener("click",r),n.addEventListener("mousemove",(()=>{n.focus({preventScroll:!0})})),n}},z$=class extends O${constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",(t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)})),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",(()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)}))}onDragStart(e){const t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:o$.from(e.clientX,e.clientY),position:o$.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){const{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;const s=o$.sub(o$.from(e.clientX,e.clientY),t.client),n=o$.add(t.position,s),o=this.ctx.domManager.getBoundingClientRect(),r={};n.x>=0&&n.x+i.offsetWidth<=o.width&&(r.x=n.x),n.y>=0&&n.y+i.offsetHeight<=o.height&&(r.y=n.y),this.updatePosition(r)}onDragEnd(){this.dragStartState=void 0}},j$=class extends vx{};$w([fx],j$.prototype,"icon",2),$w([fx],j$.prototype,"label",2),$w([fx],j$.prototype,"ariaLabel",2),$w([fx],j$.prototype,"tooltip",2);var V$=class extends TR{constructor(e){super(),this.localeManager=e}update(e){const{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let i="";if(null!=e.icon&&(i=`<span class="${RM(e.icon)} ag-charts-toolbar__icon"></span>`),null!=e.label){i=`${i}<span class="ag-charts-toolbar__label">${t.t(e.label)}</span>`}this.elem.innerHTML=i}setChecked(e){ew(this.elem,"aria-checked",e)}},H$="ag-charts-toolbar__button--active",W$=class extends _R{constructor(e,t,i){let{eventsHub:s,localeManager:n}=e;super(i),this.ariaLabelId=t,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new lE,this.hasPrefix=!1,this.buttonWidgets=[],this.updateAriaLabel=()=>this.setAriaLabel(this.localeManager.t(this.ariaLabelId)),this.eventsHub=s,this.localeManager=n,this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal","horizontal"===i),this.toggleClass("ag-charts-toolbar--vertical","vertical"===i),this.eventsHub.on("locale:change",this.updateAriaLabel),this.updateAriaLabel()}setAriaLabelId(e){this.ariaLabelId=e,this.updateAriaLabel()}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){for(const e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[i,s]of e.entries()){(this.buttonWidgets.at(i)??this.createButton(i,s)).update(s)}for(let i=e.length;i<t.length;i++){const e=this.buttonWidgets.at(i);e?.destroy()}this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){this.buttonWidgets.at(e)?.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(H$,!1)}toggleActiveButtonByIndex(e){if(-1!==e)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(H$,null!=e&&e===t)}toggleButtonEnabledByIndex(e,t){-1!==e&&this.buttonWidgets.at(e)?.setEnabled(t)}toggleSwitchCheckedByIndex(e,t){-1!==e&&this.buttonWidgets.at(e)?.setChecked(t)}getButtonBounds(){return this.buttonWidgets.map((e=>this.getButtonWidgetBounds(e)))}setButtonHiddenByIndex(e,t){this.buttonWidgets.at(e)?.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new eS(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:e,hasPrefix:t}=this;let i,s,n;for(const[o,r]of e.entries())i=!t&&0===o||n!=r.section,s=o===e.length-1||r.section!=e.at(o+1)?.section,r.toggleClass("ag-charts-toolbar__button--first",i),r.toggleClass("ag-charts-toolbar__button--last",s),r.toggleClass("ag-charts-toolbar__button--gap",o>0&&i),n=r.section}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",(s=>{const n={index:e,...t instanceof vx?t.toJson():t},o=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:s,button:n,buttonBounds:o})})),i.addListener("focus",(()=>{this.events.dispatch("button-focused",{button:{index:e}})})),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},_$=class extends W${createButtonWidget(){return new V$(this.localeManager)}},U$=class extends z${constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.showWithChildren(e,{...t,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const e=this.getPopoverElement();return new eS(e?.offsetLeft??0,e?.offsetTop??0,e?.offsetWidth??0,e?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){const s=this.getPopoverElement();if(!s)return;const n=e.position??"above",{offsetWidth:o,offsetHeight:r}=s;let a=e.y-r-i,l=e.x-o/2;"below"===n?a=e.y+i:"right"===n?(a=e.y-r/2,l=e.x+t):"above-left"===n&&(l=e.x),this.updatePosition({x:l,y:a})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(dw(0,e.x,i.width-t.width)),e.y=Math.floor(dw(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},$$=class extends W${constructor(e,t,i){super(e,t,"horizontal"),this.hasPrefix=!0,this.popover=new U$(e,i,this.onPopoverMoved.bind(this)),this.dragHandle=new K$(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}destroy(){super.destroy(),this.popover.destroy()}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){const e=this.popover.getBounds();if(this.popoverBounds?.equals(e))return;this.popoverBounds=e.clone();const t=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:t})}getButtonWidgetBounds(e){const t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),s=this.dragHandle.getBounds();return new eS(i.x+t.x-s.width,i.y+t.y,i.width,i.height)}},K$=class extends NR{constructor(e){super(Xy("div","ag-charts-floating-toolbar__drag-handle"));const t=new NR(Xy("span",`${RM("drag-handle")} ag-charts-toolbar__icon`));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},Y$={...FA,...zA};_U.create.bind(_U),_U.__createSparkline.bind(_U);function Z$(e,t){return{...e,container:t.current}}function q$(e,t){const i=(0,o.forwardRef)((function(t,i){const{options:s,style:n,className:r}=t,a=(0,o.useRef)(null),l=(0,o.useRef)();(0,o.useLayoutEffect)((()=>{const t=e(Z$(s,a));return l.current=t,()=>{t.destroy()}}),[]);const c=void 0===l.current;return(0,o.useEffect)((()=>{c||l.current?.update(Z$(s,a)).catch((e=>console.error(e)))}),[s]),(0,o.useImperativeHandle)(i,(()=>l.current),[]),(0,o.useMemo)((()=>(0,o.createElement)("div",{ref:a,style:n,className:r})),[n,r])}));return i.displayName=t,i}var Q$=q$((e=>_U.create(e)),"AgCharts");const X$=e=>{let{left:t,right:i,icon:s}=e;return(0,Do.jsxs)("div",{className:"stats-section-item",children:[(0,Do.jsxs)("div",{className:"stats-section-item-left",children:[s&&(0,Do.jsx)("span",{className:"stats-icon",children:s}),t]}),(0,Do.jsx)("div",{className:"stats-section-item-right",children:i})]})},J$=e=>{let{title:t,value:i,subtitle:s,icon:n,trend:o,color:r="primary"}=e;return(0,Do.jsxs)("div",{className:`stats-card stats-card-${r}`,children:[(0,Do.jsx)("div",{className:"stats-card-icon",children:n}),(0,Do.jsxs)("div",{className:"stats-card-content",children:[(0,Do.jsx)("h3",{className:"stats-card-value",children:i}),(0,Do.jsx)("p",{className:"stats-card-title",children:t}),s&&(0,Do.jsx)("span",{className:"stats-card-subtitle",children:s}),o&&(0,Do.jsxs)("div",{className:"stats-card-trend "+(o>0?"positive":"negative"),children:[o>0?"\u2197":"\u2198"," ",Math.abs(o),"%"]})]})]})},eK=()=>{var e;const[t,i]=(0,o.useState)({}),[s,n]=(0,o.useState)({}),[r,a]=(0,o.useState)({}),[l,c]=(0,o.useState)(!0),h=(0,o.useCallback)((async()=>{try{const[e,t,s]=await Promise.all([my(),fy(),vy()]),o=e.data;o.highestCTCOffered=o.highestCTCOffered.toFixed(2),o.highestCTCPlaced=o.highestCTCPlaced.toFixed(2),o.avgCTC=o.avgCTC.toFixed(2),o.totalPlacedStudentsCTC=o.totalPlacedStudentsCTC.toFixed(2);const r=s.data;r.placementPercentage=(100*r.totalPlacedStudents/r.totalEligibleStudents).toFixed(2),i(o),n(t.data),a(r)}catch(Ey){console.log(Ey)}finally{c(!1)}}),[]);(0,o.useEffect)((()=>{h()}),[h]);const d={data:[{category:"Placed Students",value:parseInt(r.totalPlacedStudents)||0},{category:"Unplaced Students",value:(parseInt(r.totalEligibleStudents)||0)-(parseInt(r.totalPlacedStudents)||0)}],series:[{type:"pie",angleKey:"value",labelKey:"category",fills:["#ffcc66","#ff6666"],strokes:["#ffcc66","#ff6666"],calloutColors:["#ffcc66","#ff6666"],sectorLabelKey:"value",calloutLabelKey:"category"}],background:{fill:"transparent"},title:{text:"Student Placement Overview",color:"#ffcc66",fontSize:18,fontWeight:"bold"},legend:{position:"bottom",item:{label:{color:"#fff"}}}},u={data:[{type:"Software",count:parseInt(s.totalSoftwareCompanies)||0},{type:"Analyst",count:parseInt(s.totalAnalystCompanies)||0},{type:"Others",count:parseInt(s.totalOthersCompanies)||0}],series:[{type:"bar",xKey:"type",yKey:"count",fill:"#ffcc66",stroke:"#ffcc66"}],axes:[{type:"category",position:"bottom",label:{color:"#fff"},line:{color:"#ffcc66"}},{type:"number",position:"left",label:{color:"#fff"},line:{color:"#ffcc66"}}],background:{fill:"transparent"},title:{text:"Company Types Distribution",color:"#ffcc66",fontSize:18,fontWeight:"bold"}},p={data:[{metric:"Highest CTC Offered",value:parseFloat(t.highestCTCOffered)||0},{metric:"Highest CTC Placed",value:parseFloat(t.highestCTCPlaced)||0},{metric:"Average CTC",value:parseFloat(t.avgCTC)||0},{metric:"Total Placed CTC",value:parseFloat(t.totalPlacedStudentsCTC)||0}],series:[{type:"line",xKey:"metric",yKey:"value",stroke:"#ffcc66",marker:{fill:"#ffcc66",stroke:"#ffcc66",size:8}}],axes:[{type:"category",position:"bottom",label:{color:"#fff",rotation:-45},line:{color:"#ffcc66"}},{type:"number",position:"left",label:{color:"#fff",formatter:e=>{let{value:t}=e;return`\u20b9${t}L`}},line:{color:"#ffcc66"}}],background:{fill:"transparent"},title:{text:"CTC Statistics Overview",color:"#ffcc66",fontSize:18,fontWeight:"bold"}};return(0,Do.jsxs)("div",{className:"container",children:[(0,Do.jsxs)("div",{className:"stats-header",children:[(0,Do.jsx)("h1",{children:"\ud83d\udcca Placement Statistics Dashboard"}),(0,Do.jsx)("p",{children:"Comprehensive overview of placement data and analytics"})]}),l?(0,Do.jsxs)("div",{className:"loading",children:[(0,Do.jsx)("div",{className:"loading-spinner"}),(0,Do.jsx)("p",{children:"Loading statistics..."})]}):(0,Do.jsxs)("div",{className:"stats-main-content",children:[(0,Do.jsxs)("div",{className:"stats-cards-grid",children:[(0,Do.jsx)(J$,{title:"Placement Rate",value:`${r.placementPercentage}%`,subtitle:`${r.totalPlacedStudents} out of ${r.totalEligibleStudents} students`,icon:"\ud83c\udfaf",trend:5.2,color:"success"}),(0,Do.jsx)(J$,{title:"Highest CTC",value:`\u20b9${t.highestCTCOffered}L`,subtitle:t.highestCTCOfferedCompany,icon:"\ud83d\udcb0",trend:12.8,color:"primary"}),(0,Do.jsx)(J$,{title:"Average CTC",value:`\u20b9${t.avgCTC}L`,subtitle:"All placed students",icon:"\ud83d\udcc8",trend:8.4,color:"info"}),(0,Do.jsx)(J$,{title:"Total Companies",value:s.totalCompanies,subtitle:`${s.totalCompletedCompanies} completed`,icon:"\ud83c\udfe2",trend:15.6,color:"warning"})]}),(0,Do.jsxs)("div",{className:"stats-charts-section",children:[(0,Do.jsxs)("div",{className:"stats-chart-container",children:[(0,Do.jsx)("h3",{children:"\ud83d\udcca Placement Distribution"}),(0,Do.jsx)("div",{className:"chart-wrapper",children:(0,Do.jsx)(Q$,{options:d})})]}),(0,Do.jsxs)("div",{className:"stats-chart-container",children:[(0,Do.jsx)("h3",{children:"\ud83c\udfe2 Company Types"}),(0,Do.jsx)("div",{className:"chart-wrapper",children:(0,Do.jsx)(Q$,{options:u})})]}),(0,Do.jsxs)("div",{className:"stats-chart-container full-width",children:[(0,Do.jsx)("h3",{children:"\ud83d\udcb9 CTC Statistics Overview"}),(0,Do.jsx)("div",{className:"chart-wrapper",children:(0,Do.jsx)(Q$,{options:p})})]})]}),(0,Do.jsxs)("div",{className:"stats-detailed-sections",children:[(0,Do.jsxs)("div",{className:"stats-section enhanced",children:[(0,Do.jsxs)("div",{className:"stats-section-header",children:[(0,Do.jsx)("h2",{children:"\ud83d\udcb0 CTC Statistics"}),(0,Do.jsx)("div",{className:"stats-section-icon",children:"\ud83d\udcca"})]}),(0,Do.jsxs)("div",{className:"stats-section-content",children:[(0,Do.jsx)(X$,{left:"Highest CTC Offering Company",right:(0,Do.jsxs)("div",{className:"stats-value-group",children:[(0,Do.jsx)("div",{className:"stats-value-main",children:t.highestCTCOfferedCompany}),(0,Do.jsxs)("div",{className:"stats-value-sub",children:["\u20b9",t.highestCTCOffered," LPA"]})]}),icon:"\ud83c\udfc6"}),(0,Do.jsx)(X$,{left:"Student With Highest CTC",right:(0,Do.jsxs)("div",{className:"stats-value-group",children:[(0,Do.jsx)("div",{className:"stats-value-main",children:t.highestCTCPlacedStudent}),(0,Do.jsx)("div",{className:"stats-value-sub",children:t.highestCTCPlacedCompany}),(0,Do.jsxs)("div",{className:"stats-value-sub",children:["\u20b9",t.highestCTCPlaced," LPA"]})]}),icon:"\ud83c\udf93"}),(0,Do.jsx)(X$,{left:"Total Placed Students CTC",right:`\u20b9${t.totalPlacedStudentsCTC} Lakhs`,icon:"\ud83d\udcbc"}),(0,Do.jsx)(X$,{left:"Average CTC",right:`\u20b9${t.avgCTC} LPA (${r.totalPlacedStudents} Students)`,icon:"\ud83d\udcca"})]})]}),(0,Do.jsxs)("div",{className:"stats-section enhanced",children:[(0,Do.jsxs)("div",{className:"stats-section-header",children:[(0,Do.jsx)("h2",{children:"\ud83c\udfe2 Company Statistics"}),(0,Do.jsx)("div",{className:"stats-section-icon",children:"\ud83c\udfed"})]}),(0,Do.jsxs)("div",{className:"stats-section-content",children:[(0,Do.jsx)(X$,{left:"Total Companies Visited",right:s.totalCompanies,icon:"\ud83c\udfe2"}),(0,Do.jsx)(X$,{left:"Ongoing Companies",right:s.totalOngoingCompanies,icon:"\u23f3"}),(0,Do.jsx)(X$,{left:"Successfully Completed",right:s.totalCompletedCompanies,icon:"\u2705"}),(0,Do.jsx)(X$,{left:"PPO Offerings",right:s.totalPPOs,icon:"\ud83c\udfaf"}),(0,Do.jsx)(X$,{left:"FTE Offerings",right:s.totalFTEs,icon:"\ud83d\udcbc"}),(0,Do.jsx)(X$,{left:"Internship Offerings",right:s.totalInterns,icon:"\ud83d\udcda"}),(0,Do.jsx)(X$,{left:"6M+ FTE Offerings",right:s.total6MFTEs,icon:"\ud83d\udcb0"}),(0,Do.jsx)(X$,{left:"Software Companies",right:s.totalSoftwareCompanies,icon:"\ud83d\udcbb"}),(0,Do.jsx)(X$,{left:"Analyst Companies",right:s.totalAnalystCompanies,icon:"\ud83d\udcc8"}),(0,Do.jsx)(X$,{left:"Other Role Companies",right:s.totalOthersCompanies,icon:"\ud83d\udd27"}),(0,Do.jsx)(X$,{left:"Top Locations",right:(0,Do.jsx)("div",{className:"stats-locations",children:null===(e=s.topLocations)||void 0===e?void 0:e.slice(0,5).map(((e,t)=>(0,Do.jsxs)("div",{className:"stats-location-item",children:[(0,Do.jsxs)("span",{className:"location-rank",children:["#",t+1]}),(0,Do.jsx)("span",{className:"location-name",children:e.location}),(0,Do.jsxs)("span",{className:"location-count",children:["(",e.count,")"]})]},e.location)))}),icon:"\ud83d\udccd"})]})]}),(0,Do.jsxs)("div",{className:"stats-section enhanced",children:[(0,Do.jsxs)("div",{className:"stats-section-header",children:[(0,Do.jsx)("h2",{children:"\ud83c\udf93 Student Statistics"}),(0,Do.jsx)("div",{className:"stats-section-icon",children:"\ud83d\udc65"})]}),(0,Do.jsxs)("div",{className:"stats-section-content",children:[(0,Do.jsx)(X$,{left:"Total Registered Students",right:r.totalStudents,icon:"\ud83d\udcdd"}),(0,Do.jsx)(X$,{left:"Eligible Students",right:r.totalEligibleStudents,icon:"\u2705"}),(0,Do.jsx)(X$,{left:"Placed Students",right:r.totalPlacedStudents,icon:"\ud83c\udfaf"}),(0,Do.jsx)(X$,{left:"Placement Percentage",right:`${r.placementPercentage}%`,icon:"\ud83d\udcca"}),(0,Do.jsx)(X$,{left:"Verified Students",right:r.totalVerifiedStudents,icon:"\u2705"}),(0,Do.jsx)(X$,{left:"Unverified Students",right:r.totalUnverifiedStudents,icon:"\u23f3"}),(0,Do.jsx)(X$,{left:"Total Admins",right:r.totalAdmins,icon:"\ud83d\udc51"}),(0,Do.jsx)(X$,{left:"Placement Coordinators",right:r.totalPlacementCoordinators,icon:"\ud83e\udd1d"})]})]})]})]})]})};function tK(e){return Vi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M20,15 C19,16 21.25,18.75 20,20 C18.75,21.25 16,19 15,20 C14,21 13.5,23 12,23 C10.5,23 10,21 9,20 C8,19 5.25,21.25 4,20 C2.75,18.75 5,16 4,15 C3,14 1,13.5 1,12 C1,10.5 3,10 4,9 C5,8 2.75,5.25 4,4 C5.25,2.75 8,5 9,4 C10,3 10.5,1 12,1 C13.5,1 14,3 15,4 C16,5 18.75,2.75 20,4 C21.25,5.25 19,8 20,9 C21,10 23,10.5 23,12 C23,13.5 21,14 20,15 Z M7,12 L10,15 L17,8"},child:[]}]})(e)}const iK=e=>{let{optionClickHandler:t,role:i}=e;const s={Role:ny.ROLES,Batch:ny.BATCHES,Placement:ny.PLACEMENT_STATUS,Location:[...ny.LOCATIONS,{label:"N/A",value:"N/A"}],CTC:ny.CTC,Base:ny.BASE},n={Verification:ny.VERIFICATION,Gap:ny.GAP,Backlogs:ny.BACKLOGS,"PG CGPA":ny.CGPA_RANGES.PG,"Overall CGPA":ny.CGPA_RANGES.OVERALL},o="admin"===i||"placementCoordinator"===i?{...s,...n}:s;return(0,Do.jsx)(oy,{allOptions:o,optionClickHandler:t})},sK=()=>{const[e,t]=(0,o.useState)([]),[i,s]=(0,o.useState)(!1),[n,r]=(0,o.useState)(null),[a,l]=(0,o.useState)([]),[c,h]=(0,o.useState)({}),[d,u]=(0,o.useState)(!1),[p,g]=(0,o.useState)(""),[m,f]=(0,o.useState)(""),v=(0,o.useCallback)((async()=>{try{const e=await Promise.all([wo.get("/users/view"),zo(),qo()]),i=e[0].data.users,s=e[1].data;i.forEach((e=>e.id=e._id)),s.forEach((e=>e.id=e._id)),h(e[2]),t(i),l(s)}catch(Ey){console.error("Error fetching data:",Ey)}}),[]),y=e=>{r(e),g(`Are you sure you want to ${e.isVerified?"unverify":"verify"} ${e.name}?`),f(e.isVerified?"Unverify":"Verify"),u(!1),s(!0)},C=e=>{r(e),g(`Are you sure you want to delete ${e.name}?`),f("Delete"),u(!0),s(!0)},b=async()=>{try{const t=await(d?(e=n.id,wo.delete(`/users/delete/${e}`)):(e=>wo.put(`/users/verify/${e}`))(n.id));xi.success((0,Do.jsx)(ko,{res:"success",messages:[t.data.message]})),s(!1),r(null),v()}catch(Ey){xi.error((0,Do.jsx)(ko,{res:"error",messages:[Ey.response.data.message]}))}var e},w=(e,t,i,s)=>(0,Do.jsx)("button",{className:s,onClick:()=>t(e.data),children:i}),S=(e,t,i,s)=>(0,Do.jsx)("select",{className:"render-dropdown",value:s,onChange:t=>(async(e,t,i)=>{try{const s=await i(t.id,e.target.value);xi.success((0,Do.jsx)(ko,{res:"success",messages:[s.data.message]})),v()}catch(Ey){xi.error((0,Do.jsx)(ko,{res:"error",messages:[Ey.response.data.message]}))}})(t,e.data,i),children:t.map((e=>(0,Do.jsx)("option",{value:e.value,children:e.label},e.value)))}),x=function(e,t,i){return{field:e,headerName:t,width:i,pinned:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,sortable:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],resizable:!(arguments.length>5&&void 0!==arguments[5])||arguments[5],cellRenderer:arguments.length>6&&void 0!==arguments[6]?arguments[6]:null}},M=(e,t)=>({headerName:e,children:t}),D=M("Actions",[x(null,"Del",45,"left",!1,!1,(e=>w(e,C,(0,Do.jsx)(Oo,{}),"btn--icon--del"))),x(null,"Ver",45,"left",!1,!1,(e=>w(e,y,(0,Do.jsx)(tK,{}),"verify-button "+(e.data.isVerified?"verified":"unverified"))))]),R=(e,t,i)=>M(e,[x(t,"CGPA",75,null,!0,!1,(e=>e.value.toFixed(2))),x(i,"%",75,null,!0,!1,(e=>e.value.toFixed(2)))]),E=[M("Grades",[R("PG","pg.cgpa","pg.percentage"),R("UG","ug.cgpa","ug.percentage"),R("12th","hsc.cgpa","hsc.percentage"),R("10th","ssc.cgpa","ssc.percentage")]),x("totalGapInAcademics","Gap",70),x("backlogs","Backlogs",80)],I=M("Placement Details",[x("placedAt.companyName","Company",225,null,!0,!0,"admin"===c.role||"placementCoordinator"===c.role?e=>{var t;const i=a.map((e=>({value:e.id,label:e.name})));return i.unshift({value:"np",label:"Not Placed"}),S(e,i,$o,null===(t=e.data.placedAt)||void 0===t?void 0:t.companyId)}:null),M("CTC (LPA)",[x("placedAt.ctc","CTC",70,null,!0,!1,(e=>e.value.toFixed(2))),x("placedAt.ctcBase","Base",70,null,!0,!1,(e=>e.value.toFixed(2)))]),x("placedAt.offer","Offer",75,null,!1,!1),x("placedAt.profileType","Profile",100,null,!0,!0),x("placedAt.location","Location",120,null,!0,!1,"admin"===c.role||"placementCoordinator"===c.role?e=>{var t;const i=a.find((t=>{var i;return t.id===(null===(i=e.data.placedAt)||void 0===i?void 0:i.companyId)}));if(!i)return"N/A";const s=i.locations.map((e=>({value:e,label:e})));return s.unshift({value:"N/A",label:"N/A"}),S(e,s,Ko,null===(t=e.data.placedAt)||void 0===t?void 0:t.location)}:null)]),A=[..."admin"===c.role||"placementCoordinator"===c.role?[D]:[],x("role","Role",110,"left",!1,!1,"admin"===c.role?e=>S(e,[{value:"student",label:"Student"},{value:"placementCoordinator",label:"PC"},{value:"admin",label:"Admin"}],Uo,e.data.role):e=>"student"===e.value?"Student":"placementCoordinator"===e.value?"PC":"Admin"),x("name","Name",130,"left"),x("rollNo","Roll No",95),x("batch","Batch",70,null,!1,!1),x("email","Email",225),I,..."admin"===c.role||"placementCoordinator"===c.role?E:[]],[k,T]=(0,o.useState)(!1),[L,P]=(0,o.useState)([]),[F,N]=(0,o.useState)([]),[O,B]=(0,o.useState)([]),[G,z]=(0,o.useState)([]),[j,V]=(0,o.useState)([]),[H,W]=(0,o.useState)([]),[_,U]=(0,o.useState)([]),[$,K]=(0,o.useState)([]),[Y,Z]=(0,o.useState)([]),[q,Q]=(0,o.useState)([]),[X,J]=(0,o.useState)([]),ee=(0,o.useCallback)((()=>k),[k]),te=(0,o.useCallback)((e=>{if(0===H.length)return!0;const t=e.placedAt.ctc;return H.includes(10)?t<10:H.includes(20)?t>=10&&t<20:H.includes(30)?t>=20&&t<30:H.includes(31)?t>=30:void 0}),[H]),ie=(0,o.useCallback)((e=>{if(0===_.length)return!0;const t=e.placedAt.ctcBase;return _.includes(5)?t<5:_.includes(10)?t>=5&&t<10:_.includes(15)?t>=10&&t<15:_.includes(16)?t>=15:void 0}),[_]),se=(0,o.useCallback)((e=>{if(0===X.length)return!0;const t=Math.min(e.pg.cgpa,e.ug.cgpa,e.hsc.cgpa,e.ssc.cgpa);return X.includes(6.5)?t<6.5:X.includes(7)?t>=6.5&&t<7:X.includes(7.5)?t>=7&&t<7.5:X.includes(8)?t>=7.5&&t<8:X.includes(9)?t>=8:void 0}),[X]),ne=(0,o.useCallback)((e=>{if(0===q.length)return!0;const t=e.pg.cgpa;return q.includes(6.5)?t<6.5:q.includes(7)?t>=6.5&&t<7:q.includes(7.5)?t>=7&&t<7.5:q.includes(8)?t>=7.5&&t<8:q.includes(9)?t>=8:void 0}),[q]),oe=(0,o.useCallback)((e=>{var t;if(!e.data)return!0;const{data:i}=e,s=(e,t)=>0===e.length||e.includes(t);return s(L,i.role)&&s(F,i.isVerified?"verified":"unverified")&&s(O,i.batch)&&s(G,i.placed?"placed":"notPlaced")&&s(j,null===(t=i.placedAt)||void 0===t?void 0:t.location)&&te(i)&&ie(i)&&s($,i.totalGapInAcademics)&&s(Y,i.backlogs)&&se(i)&&ne(i)}),[L,F,O,G,j,$,Y,te,ie,se,ne]);return(0,Do.jsx)(sy,{LeftComponent:c.role&&(0,Do.jsx)(iK,{optionClickHandler:(e,t)=>{T(!0);const i=document.getElementById(`${e.toLowerCase()}-${t}`);i.classList.add("active");({Role:P,Verification:N,Batch:B,Placement:z,Location:V,CTC:W,Base:U,Gap:K,Backlogs:Z,"PG CGPA":Q,"Overall CGPA":J})[e]((e=>e.includes(t)?(i.classList.remove("active"),e.filter((e=>e!==t))):[...e,t]))},role:c.role}),RightComponent:(0,Do.jsx)(iy,{rowData:e,columnDefinitions:A,fetchData:v,doesExternalFilterPass:oe,isExternalFilterPresent:ee}),ContainerComponent:n&&(0,Do.jsx)(Ro,{isOpen:i,onClose:()=>(s(!1),void r(null)),onConfirm:()=>b(),message:p,buttonTitle:m})})},nK=()=>(0,Do.jsxs)("div",{className:"container page-container",children:[(0,Do.jsxs)("div",{className:"page-header animate-fadeInDown",children:[(0,Do.jsxs)("h1",{className:"page-title",children:[(0,Do.jsx)("span",{className:"title-icon animate-bounce",children:"\ud83d\udc65"}),"Students",(0,Do.jsx)("div",{className:"title-underline title-underline-sm"})]}),(0,Do.jsx)("p",{className:"page-subtitle animate-fadeInUp animate-delay-300",children:"Manage and track student information and placement records"})]}),(0,Do.jsx)("div",{className:"page-content animate-fadeInUp animate-delay-500",children:(0,Do.jsx)(sK,{})})]}),oK=()=>{const e=[{id:1,name:"Sagar Gupta",role:"Lead Developer & Project Architect",email:"sg85207@gmail.com",github:"https://github.com/Sagargupta16",linkedin:"https://linkedin.com/in/sagar-gupta",motto:"Building scalable solutions with clean architecture",commits:124,skills:["React","Node.js","MongoDB","Express.js","JWT","API Design","System Architecture","Database Design"],projectContributions:["Led the entire project architecture and development","Implemented complete MERN stack infrastructure","Built comprehensive authentication system with JWT","Designed and developed all major features and components","Created responsive UI/UX with modern React patterns","Established database schema and API endpoints","Implemented security measures and best practices"]},{id:2,name:"Sachin Gupta",role:"Full Stack Developer & Contributor",email:"sachin.gupta.2j99@gmail.com",github:"https://github.com/sachin-gupta99",linkedin:"https://linkedin.com/in/sachin-gupta",motto:"Contributing to robust and efficient solutions",commits:3,skills:["JavaScript","React","Node.js","MongoDB","Git","Frontend Development","Backend APIs"],projectContributions:["Contributed to frontend component development","Assisted in backend API implementation","Participated in code reviews and testing","Helped with bug fixes and feature enhancements"]}],t={teamMembers:e.length,linesOfCode:"10,000+",totalCommits:"127",features:"25+"};return(0,Do.jsx)("div",{className:"teams-page",children:(0,Do.jsxs)("div",{className:"teams-container",children:[(0,Do.jsx)("section",{className:"hero-section animate-fadeInUp",children:(0,Do.jsxs)("div",{className:"hero-content",children:[(0,Do.jsxs)("div",{className:"hero-badge animate-scaleIn animate-delay-200",children:[(0,Do.jsx)("span",{className:"badge-icon",children:"\ud83c\udf93"}),(0,Do.jsx)("span",{className:"badge-text",children:"MCA NIT Warangal"})]}),(0,Do.jsxs)("h1",{className:"hero-title animate-fadeInDown animate-delay-300",children:["Meet the ",(0,Do.jsx)("span",{className:"title-highlight",children:"Development Team"})]}),(0,Do.jsx)("p",{className:"hero-subtitle animate-fadeInUp animate-delay-400",children:"Passionate MCA students who built this comprehensive placement management system from the ground up, combining innovation with practical solutions."}),(0,Do.jsxs)("div",{className:"hero-stats animate-fadeInUp animate-delay-500",children:[(0,Do.jsxs)("div",{className:"stat-item",children:[(0,Do.jsx)("span",{className:"stat-number",children:t.teamMembers}),(0,Do.jsx)("span",{className:"stat-label",children:"Team Members"})]}),(0,Do.jsxs)("div",{className:"stat-item",children:[(0,Do.jsx)("span",{className:"stat-number",children:t.totalCommits}),(0,Do.jsx)("span",{className:"stat-label",children:"Total Commits"})]}),(0,Do.jsxs)("div",{className:"stat-item",children:[(0,Do.jsx)("span",{className:"stat-number",children:t.linesOfCode}),(0,Do.jsx)("span",{className:"stat-label",children:"Lines of Code"})]})]})]})}),(0,Do.jsxs)("section",{className:"team-members animate-fadeInUp animate-delay-600",children:[(0,Do.jsxs)("div",{className:"section-header",children:[(0,Do.jsx)("h2",{className:"section-title",children:"Our Team"}),(0,Do.jsx)("p",{className:"section-subtitle",children:"Meet the talented individuals behind Placemento"})]}),(0,Do.jsx)("div",{className:"members-grid",children:e.map(((e,t)=>(0,Do.jsxs)("div",{className:"member-card animate-slideInUp animate-delay-"+(700+100*t),children:[(0,Do.jsxs)("div",{className:"member-header",children:[(0,Do.jsx)("div",{className:"member-avatar",children:e.name.split(" ").map((e=>e[0])).join("")}),(0,Do.jsxs)("div",{className:"member-info",children:[(0,Do.jsx)("h3",{children:e.name}),(0,Do.jsx)("p",{className:"member-role",children:e.role}),(0,Do.jsxs)("p",{className:"member-id",children:["ID: ",e.id]})]})]}),(0,Do.jsx)("div",{className:"member-details",children:(0,Do.jsxs)("p",{children:['"',e.motto,'"']})}),(0,Do.jsxs)("div",{className:"member-stats",children:[(0,Do.jsxs)("div",{className:"stat-item",children:[(0,Do.jsx)("span",{className:"stat-number",children:e.commits}),(0,Do.jsx)("span",{className:"stat-label",children:"Commits"})]}),(0,Do.jsxs)("div",{className:"stat-item",children:[(0,Do.jsx)("span",{className:"stat-number",children:e.skills.length}),(0,Do.jsx)("span",{className:"stat-label",children:"Skills"})]})]}),(0,Do.jsxs)("div",{className:"skills-section",children:[(0,Do.jsx)("h4",{children:"Skills"}),(0,Do.jsx)("div",{className:"skills-list",children:e.skills.map((e=>(0,Do.jsx)("span",{className:"skill-tag",children:e},e)))})]}),(0,Do.jsxs)("div",{className:"contributions-section",children:[(0,Do.jsx)("h4",{children:"Key Contributions"}),(0,Do.jsx)("ul",{className:"contributions-list",children:e.projectContributions.slice(0,3).map((e=>(0,Do.jsx)("li",{children:e},e.substring(0,20))))})]}),(0,Do.jsxs)("div",{className:"member-contact",children:[(0,Do.jsx)("a",{href:e.github,className:"contact-link",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),(0,Do.jsx)("a",{href:e.linkedin,className:"contact-link",target:"_blank",rel:"noopener noreferrer",children:"LinkedIn"}),(0,Do.jsx)("a",{href:`mailto:${e.email}`,className:"contact-link",children:"Email"})]})]},e.id)))})]}),(0,Do.jsxs)("section",{className:"tech-stack animate-fadeInUp animate-delay-800",children:[(0,Do.jsxs)("div",{className:"section-header",children:[(0,Do.jsx)("h2",{className:"section-title",children:"Technology Stack"}),(0,Do.jsx)("p",{className:"section-subtitle",children:"Modern technologies powering our platform"})]}),(0,Do.jsx)("div",{className:"tech-categories",children:Object.entries({frontend:[{name:"React",version:"18.2",icon:"\u269b\ufe0f"},{name:"JavaScript",version:"ES6+",icon:"\ud83d\udfe8"},{name:"CSS3",version:"Latest",icon:"\ud83c\udfa8"},{name:"React Router",version:"6.x",icon:"\ud83d\udee3\ufe0f"},{name:"Axios",version:"1.x",icon:"\ud83c\udf10"},{name:"AG Grid",version:"30.x",icon:"\ud83d\udcca"}],backend:[{name:"Node.js",version:"20.x",icon:"\ud83d\udfe2"},{name:"Express",version:"4.x",icon:"\ud83d\ude82"},{name:"MongoDB",version:"7.x",icon:"\ud83c\udf43"},{name:"Mongoose",version:"8.x",icon:"\ud83c\udfd7\ufe0f"},{name:"JWT",version:"9.x",icon:"\ud83d\udd10"},{name:"Nodemailer",version:"6.x",icon:"\ud83d\udce7"}],tools:[{name:"Git",version:"Latest",icon:"\ud83d\udcdd"},{name:"VS Code",version:"Latest",icon:"\ud83d\udcbb"},{name:"npm",version:"10.x",icon:"\ud83d\udce6"},{name:"Prettier",version:"3.x",icon:"\u2728"},{name:"Nodemon",version:"3.x",icon:"\ud83d\udd04"},{name:"Winston",version:"3.x",icon:"\ud83d\udccb"}]}).map(((e,t)=>{let[i,s]=e;return(0,Do.jsxs)("div",{className:"tech-category animate-slideInUp animate-delay-"+(900+100*t),children:[(0,Do.jsx)("h3",{className:"category-title",children:i.charAt(0).toUpperCase()+i.slice(1)}),(0,Do.jsx)("div",{className:"tech-list",children:s.map(((e,i)=>(0,Do.jsxs)("div",{className:"tech-item animate-scaleIn animate-delay-"+(1e3+100*t+50*i),children:[(0,Do.jsx)("span",{className:"icon",children:e.icon}),(0,Do.jsx)("span",{className:"name",children:e.name}),(0,Do.jsx)("span",{className:"version",children:e.version})]},e.name)))})]},i)}))})]}),(0,Do.jsxs)("section",{className:"project-highlights animate-fadeInUp animate-delay-1200",children:[(0,Do.jsxs)("div",{className:"section-header",children:[(0,Do.jsx)("h2",{className:"section-title",children:"Project Highlights"}),(0,Do.jsx)("p",{className:"section-subtitle",children:"What makes our placement management system special"})]}),(0,Do.jsx)("div",{className:"highlights-grid",children:[{icon:"\ud83d\udd10",title:"Secure Authentication",description:"JWT-based authentication with email verification and role-based access control ensuring data security."},{icon:"\ud83d\udcf1",title:"Responsive Design",description:"Fully responsive interface that works seamlessly across desktop, tablet, and mobile devices."},{icon:"\u26a1",title:"Real-time Updates",description:"Live data synchronization and instant notifications for placement activities and updates."},{icon:"\ud83d\udcc8",title:"Advanced Analytics",description:"Comprehensive dashboard with detailed statistics, trends, and insights for informed decision making."},{icon:"\ud83c\udfaf",title:"User-Centric Design",description:"Intuitive interface designed with student and admin needs in mind for optimal user experience."},{icon:"\ud83d\udd04",title:"Scalable Architecture",description:"Built with modern MERN stack ensuring scalability and maintainability for future enhancements."}].map(((e,t)=>(0,Do.jsxs)("div",{className:"highlight-card animate-slideInUp animate-delay-"+(1300+100*t),children:[(0,Do.jsx)("div",{className:"highlight-icon",children:e.icon}),(0,Do.jsx)("h3",{children:e.title}),(0,Do.jsx)("p",{children:e.description})]},e.title)))})]})]})})},rK=()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("revealed")}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});return document.querySelectorAll(".reveal-on-scroll").forEach((t=>e.observe(t))),e},aK=()=>{document.querySelectorAll(".interactive-element, .card-animate, .hover-lift").forEach((e=>{e.addEventListener("mouseenter",(function(){this.style.transform="translateY(-5px) scale(1.02)"})),e.addEventListener("mouseleave",(function(){this.style.transform="translateY(0) scale(1)"}))}))},lK=()=>{document.querySelectorAll(".container").forEach((e=>{e.classList.add("page-transition")}))},cK=()=>{document.querySelectorAll('[class*="animate-"]').forEach(((e,t)=>{setTimeout((()=>{e.style.animationPlayState="running"}),50*t)}))},hK=()=>{const e=document.querySelectorAll(".counter, .stat-number"),t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&((e=>{const t=parseInt(e.textContent),i=t/125;let s=0;const n=setInterval((()=>{s+=i,s>=t?(e.textContent=t,clearInterval(n)):e.textContent=Math.floor(s)}),16)})(e.target),t.unobserve(e.target))}))}));e.forEach((e=>t.observe(e)))},dK=()=>{document.querySelectorAll(".progress-bar, .loading-bar").forEach((e=>{const t=e.dataset.width||"100%";e.style.width="0%",setTimeout((()=>{e.style.width=t}),500)}))},uK=()=>{window.addEventListener("scroll",(()=>{const e=window.pageYOffset;document.querySelectorAll(".parallax").forEach((t=>{const i=-.5*e;t.style.transform=`translateY(${i}px)`}))}))},pK=()=>{document.querySelectorAll("button, .btn, .clickable").forEach((e=>{e.addEventListener("click",(function(e){const t=document.createElement("span");t.classList.add("ripple");const i=this.getBoundingClientRect(),s=Math.max(i.width,i.height),n=e.clientX-i.left-s/2,o=e.clientY-i.top-s/2;t.style.width=t.style.height=s+"px",t.style.left=n+"px",t.style.top=o+"px",this.appendChild(t),this.classList.add("animate-pulse"),setTimeout((()=>{this.classList.remove("animate-pulse"),t.parentNode&&t.parentNode.removeChild(t)}),600)}))}))};"undefined"!==typeof window&&((()=>{const e=document.createElement("style");e.textContent="\n    .ripple {\n      position: absolute;\n      border-radius: 50%;\n      background: rgba(255, 204, 102, 0.6);\n      transform: scale(0);\n      animation: ripple 0.6s linear;\n      pointer-events: none;\n    }\n    \n    @keyframes ripple {\n      to {\n        transform: scale(4);\n        opacity: 0;\n      }\n    }\n  ",document.head.appendChild(e)})(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{rK(),aK(),lK(),cK(),hK(),dK(),uK(),pK()})):(rK(),aK(),lK(),cK(),hK(),dK(),uK(),pK()));const gK=()=>{const e=function(e,t){return ae({basename:null==t?void 0:t.basename,future:Et({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(i={window:null==t?void 0:t.window},void 0===i&&(i={}),y((function(e,t){let{pathname:i,search:s,hash:n}=e.location;return m("",{pathname:i,search:s,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,i)),hydrationData:(null==t?void 0:t.hydrationData)||Lt(),routes:e,mapRouteProperties:Rt,dataStrategy:null==t?void 0:t.dataStrategy,patchRoutesOnNavigation:null==t?void 0:t.patchRoutesOnNavigation,window:null==t?void 0:t.window}).initialize();var i}([{path:"/",element:(0,Do.jsx)(Io,{}),id:"root",loader:Yo,children:[{index:!0,element:(0,Do.jsx)(yy,{})},{path:"stats",element:(0,Do.jsx)(eK,{})},{path:"teams",element:(0,Do.jsx)(oK,{})},{path:"students",element:(0,Do.jsx)(nK,{}),loader:Zo},{path:"companies",element:(0,Do.jsx)(hy,{}),loader:Zo},{path:"experience",element:(0,Do.jsx)(gy,{}),loader:Zo},{path:"profile",element:(0,Do.jsx)(by,{}),loader:Zo},{path:"auth",element:(0,Do.jsx)(No,{})}]},{path:"*",element:(0,Do.jsx)(Ao,{})}]);return(0,Do.jsxs)(Do.Fragment,{children:[(0,Do.jsx)(jt,{router:e,className:"App"}),(0,Do.jsx)(Ti,{position:"bottom-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})};a.createRoot(document.getElementById("root")).render((0,Do.jsx)(o.StrictMode,{children:(0,Do.jsx)(gK,{})}))})();
//# sourceMappingURL=main.264a63d8.js.map